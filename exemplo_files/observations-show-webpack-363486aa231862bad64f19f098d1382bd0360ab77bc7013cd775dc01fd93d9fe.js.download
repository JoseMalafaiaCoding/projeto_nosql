(self.webpackChunk=self.webpackChunk||[]).push([[812],{46666:function(e,t,n){"use strict";function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return{type:O.dL,observation:e}}function R(){return{type:O.o4}}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},{type:O.HC,updates:e,observation_id:t.observation_id})}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),o=e.observation||r.currentObservation.observation;"suggestions"===r.currentObservation.tab?(t((0,m.ej)(o)),t((0,m._E)())):"annotations"===r.currentObservation.tab?t((0,h.d4)(o.taxon)):"data-quality"===r.currentObservation.tab?t((0,v.FK)({observation:o})):t((0,y.ky)())}}function U(e){return function(t,n){var r=n(),i=e,a=r.config,s=a.currentUser,l=a.preferredPlace,u={preferred_place_id:l?l.id:null,locale:I18n.locale,include_new_projects:!0},f=[i.id];return r.config.testingApiV2&&(u.fields=D,f=[i.uuid]),o().observations.fetch(f,u).then((function(e){var r=e.results[0],o=!1;if(s&&r&&r.quality_metrics){var a=c().find(r.quality_metrics,(function(e){return e.user&&e.user.id===s.id&&"wild"===e.metric}));a&&(o=!a.agree)}var l,u=!1;s&&r&&(u=r.reviewed_by.indexOf(s.id)>-1),s&&r&&r.identifications&&(l=c().find(r.identifications,(function(e){return e.user.id===s.id&&e.current}))),r.currentUserAgrees=l&&l.taxon_id===r.taxon_id,t((0,d.hW)(r,{captiveByCurrentUser:o,reviewedByCurrentUser:u,currentUserAgrees:r.currentUserAgrees,taxon:r.taxon,quality_grade:r.quality_grade}));var f=n();return f.currentObservation.observation&&f.currentObservation.observation.id===i.id&&t(function(e,t){return Object.assign({},t,{type:O.VK,observation:e})}(r,{captiveByCurrentUser:o,reviewedByCurrentUser:u,currentUserIdentification:l})),r})).then((function(e){if(e.places)return e;if(r.observations&&r.observations.placesByID){var i=c().uniq(c().flatten([e.place_ids,e.private_place_ids])),a=c().compact(i.map((function(e){return r.observations.placesByID[e]})));if(a&&a.length>0&&r.currentObservation.observation&&r.currentObservation.observation.id===e.id)return t(F({places:a})),e.places=a,e}var s;if((s=e.private_place_ids&&e.private_place_ids.length>0?e.private_place_ids:e.place_ids)&&s.length>0){if(0===(s=c().take(e.place_ids,100)).length)return e;var l={per_page:100,no_geom:!0};return r.config.testingApiV2&&(l.fields={id:!0,name:!0,display_name:!0,admin_level:!0,bbox_area:!0}),o().places.fetch(s,l).then((function(r){return n().currentObservation.observation.id===e.id?(t(F({places:r.results})),Object.assign(e,{places:r.results})):e})).catch((function(){return e}))}return e})).then((function(e){t((0,m.cL)()),t(L({observation:e}))}))}}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,n){var r=n();return r.currentObservation.visible?e&&r.currentObservation.observation&&e.id!==r.currentObservation.observation.id?Promise.resolve():t(U(e||r.currentObservation.observation)):Promise.resolve()}}function H(){return function(e,t){var n,r=t(),o=r.observations,i=r.currentObservation,a=r.config;if(i.visible){var s=c().findIndex(o.results,(function(e){return e.id===i.observation.id}));if(null==s)return;s+=1,n=o.results[s]}else n=i.observation||o.results[0];n?(e((0,h.d4)(n.taxon)),e(M(n)),e(B(n))):(e(R()),e((0,p.dz)())),e((0,u.SZ)("obsIdentifyIdComment","")),a.mapZoomLevelLocked||c().isNumber(a.currentUser.preferred_identify_map_zoom_level)||e((0,l.Nk)({mapZoomLevel:void 0}))}}function V(){return function(e,t){var n=t(),r=n.observations,o=n.currentObservation;if(o.visible){var i=c().findIndex(r.results,(function(e){return e.id===o.observation.id}));if(null!=i){i-=1;var a=r.results[i];a&&(e((0,h.d4)(a.taxon)),e(M(a)),e(B(a))),e((0,u.SZ)("obsIdentifyIdComment",""))}}}}function q(){return function(e,t){e(F({keyboardShortcutsShown:!t().currentObservation.keyboardShortcutsShown}))}}function z(){return{type:O.JJ}}function W(){return{type:O.MG}}function K(){return function(e,t){var n,r,i=t(),a=i.currentObservation.observation,s=a.captiveByCurrentUser;if(e(F({captiveByCurrentUser:!a.captiveByCurrentUser,reviewedByCurrentUser:null===(n=i.config)||void 0===n?void 0:n.currentUserCanInteractWithResource(a)})),!a.reviewedByCurrentUser&&null!==(r=i.config)&&void 0!==r&&r.currentUserCanInteractWithResource(a)){var c={id:i.config.testingApiV2?a.uuid:a.id};o().observations.review(c)}e(function(e,t,n){return function(t,r){var i={id:r().config.testingApiV2?e.uuid:e.id,metric:"wild"};n?o().observations.deleteQualityMetric(i).then((function(){t(B(e))})):(i.agree="false",o().observations.setQualityMetric(i).then((function(){t(B(e))})).catch((function(e){throw e.response.text().then((function(e){var n=(0,E.yC)(e)||[I18n.t("failed_to_save_record")];t((0,w.S7)(n.join(","),{title:I18n.t("request_failed")}))})).catch((function(){t((0,w.S7)(I18n.t("failed_to_save_record"),{title:I18n.t("request_failed")}))})),e})))}}(a,0,s))}}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,n){var r,i=n(),a=e||i.currentObservation.observation;if(null!==(r=i.config)&&void 0!==r&&r.currentUserCanInteractWithResource(a)){var s=a.reviewedByCurrentUser,u={id:a.id,skip_refresh:!0};i.currentObservation.observation&&a.id===i.currentObservation.observation.id&&t(F({reviewedByCurrentUser:!s})),t((0,d.hW)(a,{reviewedByCurrentUser:!s})),i.config.testingApiV2&&(u.id=a.uuid),s?(t((0,l.Nk)({allReviewed:!1})),o().observations.unreview(u).then((function(){t((0,f.Lc)())}))):o().observations.review(u).then((function(){t((0,f.l3)()),c().isEmpty(c().filter(n().observations.results,(function(e){return!e.reviewedByCurrentUser})))&&t((0,l.Nk)({allReviewed:!0}))}))}}}function Y(e){return{type:O.uv,item:e}}function X(e){return{type:O.LM,item:e}}function Z(e,t){return function(n,r){var i=r(),a=(i.currentObservation.observation.annotations||[]).concat([{controlled_attribute:e,controlled_value:t,user:i.config.currentUser,api_status:"saving"}]);n((0,_.qO)({prefers_hide_identify_annotations:!1})),n(F({annotations:a},{observation_id:i.currentObservation.observation.id}));var s={resource_type:"Observation",resource_id:i.config.testingApiV2?i.currentObservation.observation.uuid:i.currentObservation.observation.id,controlled_attribute_id:e.id,controlled_value_id:t.id};o().annotations.create(s).then((function(){return n(B())})).catch((function(e){console.log("[DEBUG] Faile to add annotation: ",e)}))}}function Q(e,t){return function(n,r){var o=r();if(o.currentObservation.observation&&"annotations"===o.currentObservation.tab){var i=o.controlledTerms.terms.find((function(t){return t.label===e}));if(i){var a=i.values.find((function(e){return e.label===t}));a&&(o.currentObservation.observation.annotations.find((function(e){return e.controlled_value&&e.controlled_attribute&&e.controlled_attribute.id===i.id&&(!e.controlled_attribute.multivalued||e.controlled_value.id===a.id)}))||n(Z(i,a)))}}}}function J(e){return function(t,n){var r=n(),i=c().map(r.currentObservation.observation.annotations,(function(t){return t.user.id===r.config.currentUser.id&&t.uuid===e?Object.assign({},t,{api_status:"deleting"}):t}));t(F({annotations:i})),o().annotations.delete({id:e}).then((function(){return t(B())})).catch((function(e){console.log("[DEBUG] Failed to delete annotation: ",e)}))}}function ee(e,t){return function(n,r){var i=r(),a=c().map(i.currentObservation.observation.annotations,(function(n){return n.uuid===e?Object.assign({},n,{api_status:"voting",votes:(n.votes||[]).concat([{vote_flag:"bad"!==t,user:i.config.currentUser,api_status:"saving"}])}):n}));n(F({annotations:a})),o().annotations.vote({id:e,vote:t}).then((function(){return n(B())})).catch((function(e){console.log("[DEBUG] Failed to vote on annotation: ",e)}))}}function te(e){return function(t,n){var r=n(),i=c().map(r.currentObservation.observation.annotations,(function(t){return t.uuid===e?S(S({},t),{},{api_status:"voting",votes:c().map(t.votes,(function(e){return e.user.id===r.config.currentUser.id?S(S({},e),{},{api_status:"deleting"}):e}))}):t}));t(F({annotations:i})),o().annotations.unvote({id:e}).then((function(){return t(B())})).catch((function(e){console.log("[DEBUG] Failed to unvote on annotation: ",e)}))}}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var i=r(),a=S({id:i.config.testingApiV2?i.currentObservation.observation.uuid:i.currentObservation.observation.id},t);if(e){a.scope=e;var s=c().filter(i.currentObservation.observation.votes,(function(t){return!(t.user.id===i.config.currentUser.id&&t.vote_scope===e)})).concat([{vote_flag:"yes"===t.vote,vote_scope:a.scope,user:i.config.currentUser,api_status:"saving"}]);n(F({votes:s}))}else a.skip_refresh=!0;o().observations.fave(a).then((function(){return n(B())})).catch((function(e){throw e.response.text().then((function(e){var t=(0,E.yC)(e)||[I18n.t("failed_to_save_record")];n((0,w.S7)(t.join(","),{title:I18n.t("request_failed")}))})).catch((function(){n((0,w.S7)(I18n.t("failed_to_save_record"),{title:I18n.t("request_failed")}))})),e}))}}function re(e){return function(t,n){var r=n(),i={id:r.config.testingApiV2?r.currentObservation.observation.uuid:r.currentObservation.observation.id};if(e){i.scope=e;var a=c().map(r.currentObservation.observation.votes,(function(t){return t.user.id===r.config.currentUser.id&&t.vote_scope===e?S(S({},t),{},{api_status:"deleting"}):t}));t(F({votes:a}))}else i.skip_refresh=!0;o().observations.unfave(i).then((function(){return t(B())})).catch((function(e){console.log("[DEBUG] Faile to add annotation: ",e)}))}}function oe(){return function(e,t){var n=t();e(F({faves:n.currentObservation.observation.faves.concat([{votable_id:n.currentObservation.observation.id,user:n.config.currentUser,temporary:!0}])})),e(ne())}}function ie(){return function(e,t){var n=t();e(F({faves:n.currentObservation.observation.faves.filter((function(e){return e.user.id!==n.config.currentUser.id}))})),e(re())}}function ae(){return function(e,t){var n=t(),r=n.config,o=n.currentObservation.observation;e(o&&o.faves&&c().find(o.faves,(function(e){return e.user.id===r.currentUser.id}))?ie():oe())}}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"needs_id"===e?ne("needs_id",{vote:"false"===t.agree?"no":"yes"}):function(n,r){var i=r(),s=c().filter(i.qualityMetrics,(function(t){return!(t.user&&t.user.id===i.config.currentUser.id&&t.metric===e)})).concat([{observation_id:i.currentObservation.observation.id,metric:e,agree:"false"!==t.agree,created_at:a()().format(),user:i.config.currentUser,api_status:"saving"}]);n((0,v.zn)(s));var l=S({id:i.config.testingApiV2?i.currentObservation.observation.uuid:i.currentObservation.observation.id,metric:e},t);o().observations.setQualityMetric(l,{fetchQualityMetrics:!0}).then((function(){return n(B())}))}}function ce(e){return"needs_id"===e?re("needs_id"):function(t,n){var r=n(),i=c().map(r.qualityMetrics,(function(t){return t.user.id===r.config.currentUser.id&&t.metric===e?S(S({},t),{},{api_status:"deleting"}):t}));t((0,v.zn)(i));var a={id:r.config.testingApiV2?r.currentObservation.observation.uuid:r.currentObservation.observation.id,metric:e};o().observations.deleteQualityMetric(a,{fetchQualityMetrics:!0}).then((function(){return t(B())}))}}function le(e,t,n,r){return function(i){var a={flag:{flaggable_type:e,flaggable_id:t,flag:n}};r&&(a.flag.flag_explanation=r),o().flags.create(a).then((function(){return i(B())}))}}function ue(e){return function(t){o().flags.delete({id:e}).then((function(){return t(B())}))}}function fe(){return function(){var e=$(".image-gallery-slide.center .easyzoom"),t=e.data("easyZoom");if(t)if(t.isOpen)t.hide();else{var n=new MouseEvent("mouseover",{clientX:e.offset().left+e.width()/2,clientY:e.offset().top+e.height()/2});t.show(n)}}}function de(){return function(e,t){var n=t().currentObservation;if(n.observation&&n.observation.photos&&!(n.observation.photos.length<=1)){var r=n.imagesCurrentIndex||0;r>0&&(r-=1),e(F({imagesCurrentIndex:r}))}}}function pe(){return function(e,t){var n=t().currentObservation;if(n.observation&&n.observation.photos&&!(n.observation.photos.length<=1)){var r=n.imagesCurrentIndex||0;r<n.observation.photos.length-1&&(r+=1),e(F({imagesCurrentIndex:r}))}}}function me(){return function(e,t){var n=j.indexOf(t().currentObservation.tab);n<=0?n=0:n-=1,e(F({tab:j[n]})),e(L())}}function he(){return function(e,t){var n=j.indexOf(t().currentObservation.tab);n<0?n=0:n<j.length-1&&(n+=1),e(F({tab:j[n]})),e(L())}}function ve(e){return function(t,n){var r=n();t((0,g.Yy)(r.currentObservation.observation,e,F,(function(){t(B())})))}}function ye(e){return function(t){t((0,b.Rn)({show:!0,message:I18n.t("are_you_sure_you_want_to_remove_this_observation_from_project",{project:e.title}),confirmText:I18n.t("yes"),onConfirm:function(){t(function(e){return function(t,n){var r=n();t((0,g.y3)(r.currentObservation.observation,e,F,(function(){t(B())})))}}(e))}}))}}function be(e){return function(t,n){var r=n();t((0,g.Y_)(r.currentObservation.observation,e,F,(function(){t(B())})))}}function ge(e){return function(t,n){var r=n();t((0,g.Tw)(r.currentObservation.observation,F,(function(){t(B())}),e))}}function _e(e,t){return function(n,r){var o=r();n((0,g.lz)(o.currentObservation.observation,e,F,(function(){n(B())}),t))}}function Ee(e){return function(t,n){var r=n();t((0,g.c7)(r.currentObservation.observation,e,F,(function(){t(B())})))}}function we(){return function(e,t){var n=t();if(n.currentObservation.observation){var r=n.currentObservation.observation;if(r.user){var i=n.config.currentUser,a=r.user;if(a.id!==i.id){var s=n.subscriptions.subscriptions.concat([{resource_type:"User",resource_id:a.id,user_id:i.id,api_status:"saving"}]);e((0,y.JV)(s));var c={id:i.id,friend_id:a.id},l={id:r.id};o().users.update(c).then((function(){return e((0,y.hP)({observation:l}))}))}}}}}function Oe(){return function(e,t){var n=t();if(n.currentObservation.observation){var r=n.currentObservation.observation,i=r.user,a=n.config.currentUser;if(i&&i.id!==a.id){var s=c().map(n.subscriptions.subscriptions,(function(e){return"User"===e.resource_type&&e.resource_id===i.id?Object.assign({},e,{api_status:"deleting"}):e}));e((0,y.JV)(s));var l={id:r.id},u={id:a.id,remove_friend_id:i.id};o().users.update(u).then((function(){return e((0,y.hP)({observation:l}))}))}}}}function xe(){return function(e,t){var n=t();if(n.currentObservation.observation&&n.currentObservation.observation.user&&n.currentObservation.observation.user.id!==n.config.currentUser.id){var r={id:n.currentObservation.observation.id};if(c().find(n.subscriptions.subscriptions,(function(e){return"Observation"===e.resource_type&&e.resource_id===r.id}))){var i=c().map(n.subscriptions.subscriptions,(function(e){return"Observation"===e.resource_type&&e.resource_id===r.id?Object.assign({},e,{api_status:"deleting"}):e}));e((0,y.JV)(i))}else{var a=n.subscriptions.subscriptions.concat([{resource_type:"Observation",resource_id:r.id,user_id:n.config.currentUser.id,api_status:"saving"}]);e((0,y.JV)(a))}var s={id:r.id};o().observations.subscribe(s).then((function(){e((0,y.hP)({observation:r}))}))}}}function ke(){return function(){var e=$(".obs-media .sounds").find("audio:first")[0],t=e===document.activeElement;e&&(t||e.focus(),e.paused?e.play():e.pause())}}function Se(){return function(e,t){var n=t(),r=n.config;n.currentObservation.observation&&"annotations"===n.currentObservation.tab&&r.currentUser.prefers_hide_identify_projects&&e((0,_.qO)({prefers_hide_identify_projects:!1}))}}function Ae(){return function(e,t){var n=t(),r=n.config;n.currentObservation.observation&&"annotations"===n.currentObservation.tab&&r.currentUser.prefers_hide_identify_observation_fields&&e((0,_.qO)({prefers_hide_identify_observation_fields:!1}))}}n.d(t,{B1:function(){return U},BC:function(){return W},Ce:function(){return X},DF:function(){return j},DV:function(){return L},HC:function(){return O.HC},JJ:function(){return O.JJ},LM:function(){return O.LM},MG:function(){return O.MG},Mf:function(){return ye},PF:function(){return F},PO:function(){return Ae},PU:function(){return q},QQ:function(){return z},Qt:function(){return Oe},Rs:function(){return H},SY:function(){return ee},Tw:function(){return ge},UT:function(){return ue},Um:function(){return xe},VK:function(){return O.VK},Xm:function(){return J},Y_:function(){return be},Yy:function(){return ve},Zu:function(){return V},ao:function(){return Y},c7:function(){return Ee},dL:function(){return O.dL},eP:function(){return B},fD:function(){return K},g_:function(){return ke},hP:function(){return te},iC:function(){return Q},iM:function(){return R},ii:function(){return G},jT:function(){return oe},kr:function(){return me},lC:function(){return Z},lV:function(){return de},lz:function(){return _e},nc:function(){return pe},ny:function(){return le},o4:function(){return O.o4},pK:function(){return fe},pV:function(){return we},pe:function(){return ae},su:function(){return Se},u4:function(){return he},uv:function(){return O.uv},yP:function(){return ie},yb:function(){return ce},zJ:function(){return M},zN:function(){return se}});var r=n(64165),o=n.n(r),i=n(92276),a=n.n(i),s=n(16154),c=n.n(s),l=n(16745),u=n(84582),f=n(33567),d=n(43224),p=n(81464),m=n(22702),h=n(47066),v=n(95089),y=n(31092),b=n(99520),g=n(82272),_=n(70602),E=n(42395),w=n(29598),O=n(67441),j=["info","suggestions","annotations","data-quality"],C={id:!0,login:!0,icon_url:!0},P={action:!0,id:!0,created_at:!0,reason:!0,user:C},N={ancestry:!0,ancestor_ids:!0,ancestors:{id:!0,uuid:!0,name:!0,iconic_taxon_name:!0,is_active:!0,preferred_common_name:!0,rank:!0,rank_level:!0},default_photo:{attribution:!0,license_code:!0,url:!0,square_url:!0},iconic_taxon_name:!0,id:!0,is_active:!0,name:!0,preferred_common_name:!0,rank:!0,rank_level:!0},T={id:!0,label:!0,multivalued:!0},I={admins:{user_id:!0},icon:!0,project_observation_fields:{id:!0,observation_field:{allowed_values:!0,datatype:!0,description:!0,id:!0,name:!0}},slug:!0,title:!0},D={annotations:{controlled_attribute:T,controlled_value:T,user:C,vote_score:!0,votes:{vote_flag:!0,user:C}},application:{id:!0,icon:!0,name:!0,url:!0},comments:{body:!0,created_at:!0,flags:{id:!0},hidden:!0,id:!0,moderator_actions:P,spam:!0,user:C},community_taxon:N,created_at:!0,description:!0,faves:{user:C},flags:{id:!0,flag:!0,resolved:!0},geojson:!0,geoprivacy:!0,id:!0,identifications:{body:!0,category:!0,created_at:!0,current:!0,disagreement:!0,flags:{id:!0},hidden:!0,moderator_actions:P,previous_observation_taxon:N,spam:!0,taxon:N,taxon_change:{id:!0,type:!0},updated_at:!0,user:C,uuid:!0,vision:!0},identifications_most_agree:!0,latitude:!0,license_code:!0,location:!0,longitude:!0,map_scale:!0,non_traditional_projects:{current_user_is_member:!0,project_user:{user:C},project:I},obscured:!0,observed_on:!0,observed_time_zone:!0,ofvs:{observation_field:{allowed_values:!0,datatype:!0,description:!0,name:!0,taxon:{name:!0},uuid:!0},user:C,uuid:!0,value:!0,taxon:N},outlinks:{source:!0,url:!0},observation_photos:{id:!0},photos:{id:!0,uuid:!0,url:!0,license_code:!0},place_guess:!0,place_ids:!0,positional_accuracy:!0,preferences:{prefers_community_taxon:!0},private_geojson:!0,private_place_guess:!0,private_place_ids:!0,project_observations:{current_user_is_member:!0,preferences:{allows_curator_coordinate_access:!0},project:I,uuid:!0},public_positional_accuracy:!0,quality_grade:!0,quality_metrics:{id:!0,metric:!0,agree:!0,user:C},reviewed_by:!0,sounds:{file_url:!0,file_content_type:!0,id:!0,license_code:!0,play_local:!0,url:!0,uuid:!0},tags:!0,taxon:N,taxon_geoprivacy:!0,time_observed_at:!0,time_zone:!0,user:S(S({},C),{},{name:!0,observations_count:!0,preferences:{prefers_community_taxa:!0,prefers_observation_fields_by:!0}}),viewer_trusted_by_observer:!0,votes:{id:!0,user:C,vote_flag:!0,vote_scope:!0}}},67441:function(e,t,n){"use strict";n.d(t,{HC:function(){return a},JJ:function(){return s},LM:function(){return u},MG:function(){return c},VK:function(){return i},dL:function(){return r},o4:function(){return o},uv:function(){return l}});var r="show_current_observation",o="hide_current_observation",i="receive_current_observation",a="update_current_observation",s="add_identification",c="add_comment",l="loading_discussion_item",u="stop_loading_discussion_item"},81464:function(e,t,n){"use strict";function i(){return{type:r}}function a(){return{type:o}}n.d(t,{R8:function(){return r},dz:function(){return i},ei:function(){return a},kW:function(){return o}});var r="show_finished_modal",o="hide_finished_modal"},71800:function(e,t,n){"use strict";function s(e){return function(t){var n={comment:e};return o().comments.create(n).catch((function(e){throw e.response.text().then((function(e){var n=(0,a.yC)(e)||[I18n.t("failed_to_save_record")];t((0,i.S7)(n.join(","),{title:I18n.t("request_failed")}))})).catch((function(){t((0,i.S7)(I18n.t("failed_to_save_record"),{title:I18n.t("request_failed")}))})),e}))}}function c(e){return function(){return o().comments.delete(e)}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(t){var n={identification:_({},e)};return n.identification.observation&&(n.identification.observation_id=n.identification.observation_id||n.identification.observation.id,delete n.identification.observation),n.identification.taxon&&(n.identification.taxon_id=n.identification.taxon_id||n.identification.taxon.id,delete n.identification.taxon),o().identifications.create(n).catch((function(e){throw e.response.text().then((function(e){var n=(0,a.yC)(e)||[I18n.t("failed_to_save_record")];t((0,i.S7)(n.join(","),{title:I18n.t("request_failed")}))})).catch((function(){t((0,i.S7)(I18n.t("failed_to_save_record"),{title:I18n.t("request_failed")}))})),e}))}}function k(e,t){return function(){return o().identifications.update(e,t)}}function S(e){return function(t,n){var r=n();return t((0,l.ao)()),t((0,p.hW)(e,{agreeLoading:!0})),t(x({observation_id:r.config.testingApiV2?e.uuid:e.id,taxon_id:e.taxon.id})).then((function(){var n=r.observations.results||[];f().find(n,(function(t){return t.uuid===e.uuid||t.id===e.id}))&&(t((0,p.hW)(e,{agreeLoading:!1})),t((0,l.B1)(e)))}))}}function A(){return function(e,t){var n=t();if(n.config.blind)return null;if("info"!==n.currentObservation.tab)return null;var r=n.currentObservation.observation,o=n.config.currentUser,i=r.taxon&&f().find(r.identifications,(function(e){return e.current&&e.user.id===o.id&&e.taxon.id===r.taxon.id}));return r&&r.id&&r.taxon&&r.user&&r.user.id!==o.id&&(!r.taxon||r.taxon.is_active)&&!i?(e({type:w}),e(S(r)).then((function(){e({type:O})}))):null}}n.d(t,{MG:function(){return l.MG},JJ:function(){return l.JJ},pH:function(){return w},o4:function(){return l.o4},kW:function(){return D.kW},uv:function(){return l.uv},VK:function(){return l.VK},GY:function(){return p.GY},G3:function(){return p.G3},CI:function(){return p.CI},g$:function(){return p.g$},dL:function(){return l.dL},R8:function(){return D.R8},os:function(){return O},LM:function(){return l.LM},Up:function(){return p.Up},HC:function(){return l.HC},cW:function(){return d.cW},uD:function(){return p.uD},iC:function(){return l.iC},BC:function(){return l.BC},V6:function(){return j},QQ:function(){return l.QQ},PO:function(){return l.PO},su:function(){return l.su},I4:function(){return A},$J:function(){return S},vJ:function(){return T},Tu:function(){return c},jT:function(){return l.jT},eP:function(){return l.eP},DV:function(){return l.DV},O0:function(){return p.O0},DI:function(){return d.DI},pV:function(){return l.pV},iM:function(){return l.iM},ei:function(){return D.ei},ao:function(){return l.ao},gk:function(){return N},Gy:function(){return s},t:function(){return I.t},A9:function(){return p.A9},eI:function(){return v.Nk},lt:function(){return v.lt},Sp:function(){return C},yE:function(){return P},zJ:function(){return l.zJ},Rs:function(){return l.Rs},nc:function(){return l.nc},u4:function(){return l.u4},Zu:function(){return l.Zu},lV:function(){return l.lV},kr:function(){return l.kr},Ce:function(){return l.Ce},Um:function(){return l.Um},fD:function(){return l.fD},pe:function(){return l.pe},PU:function(){return l.PU},g_:function(){return l.g_},ii:function(){return l.ii},yP:function(){return l.yP},Qt:function(){return l.Qt},FY:function(){return p.FY},PF:function(){return l.PF},JV:function(){return I.JV},kA:function(){return k},MM:function(){return I.MM},Uo:function(){return I.Uo},pK:function(){return l.pK}}),n(47191);var r=n(64165),o=n.n(r),i=n(29598),a=n(42395),l=n(46666),u=n(16154),f=n.n(u),d=n(33567),p=n(43224),m=n(28193),h=n(70602),v=n(16745),y=n(84582),w="agreeing_with_observation",O="stop_agreeing_with_observation",j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,o){var a=o();if(n.agreedWith){var s={taxon_id:n.agreedWith.taxon.id,observation_id:n.agreedWith.observation_id};r((0,l.ao)(n.agreedWith)),r(x(s)).catch((function(){r((0,l.Ce)(n.agreedWith))})).then((function(){r((0,l.eP)()).then((function(){$(".ObservationModal:first").find(".sidebar").scrollTop($(window).height())})),r((0,d.DI)())}))}else{var c={taxon_id:e.id,observation_id:a.config.testingApiV2?t.uuid:t.id};r(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){n((0,l.ao)(e));var r=function(){n(x(e)).catch((function(){n((0,l.Ce)(e))})).then((function(){n((0,l.eP)(e.observation)).then((function(){$(".ObservationModal:first").find(".sidebar").scrollTop($(window).height())}))}))};t.confirmationText?n((0,i.S7)(t.confirmationText,{title:I18n.t("heads_up"),onConfirm:r,onCancel:function(){n((0,l.Ce)(e)),n((0,l.QQ)())}})):r()}}(c,{confirmationText:n.confirmationText}))}}},C=function(e){return function(t,n){var r=n();t((0,v.Nk)({mapZoomLevel:e})),f().isNumber(r.config.currentUser.preferred_identify_map_zoom_level)&&t((0,h.qO)({preferred_identify_map_zoom_level:e}))}},P=function(e){return function(t,n){var r=n();t((0,v.Nk)({mapZoomLevelLocked:e})),t(e?(0,h.qO)({preferred_identify_map_zoom_level:r.config.mapZoomLevel}):(0,h.qO)({preferred_identify_map_zoom_level:null}))}},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o=_(_({},t),{},{observation:e});r((0,l.ao)(o));var a=function(t){var n=_({},o);f().isNil(o.disagreement)&&(n.disagreement=t||!1),r((0,l.PF)({tab:"info"})),r(x(n)).catch((function(){r((0,l.Ce)(o))})).then((function(){r((0,y.SZ)("obsIdentifyIdComment","")),r((0,l.eP)(e)).then((function(){$(".ObservationModal:first").find(".sidebar").scrollTop($(window).height())})),r((0,d.DI)())}))};if(n.confirmationText)r((0,i.S7)(n.confirmationText,{title:I18n.t("heads_up"),onConfirm:a,onCancel:function(){r((0,l.Ce)(o)),r((0,l.QQ)())}}));else if(n.potentialDisagreement){var s=n.observation,c=s.taxon;!1!==s.preferences.prefers_community_taxon&&!1!==s.user.preferences.prefers_community_taxa||(c=s.community_taxon||s.taxon),r((0,m.Mu)({onDisagree:function(){a(!0)},onBestGuess:a,onCancel:function(){r((0,l.Ce)(o)),r((0,l.QQ)())},oldTaxon:c,newTaxon:n.taxon}))}else a()}},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var o=r(),i=t.observation,s={observation_id:o.config.testingApiV2?i.uuid:i.id,taxon_id:e.id,vision:t.vision};n(N(i,s,{observation:i,taxon:e,potentialDisagreement:(0,a.ff)(i,e)}))}},I=n(36173),D=n(81464)},43224:function(e,t,n){"use strict";function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return function(e,t){var n,r=t(),i=t().observations.results,s=o().compact(o().flattenDeep(i.map((function(e){return[e.place_ids,e.private_place_ids]})))),c=o().keys(t().observations.placesByID).map((function(e){return parseInt(e,10)}));if(0===(s=o().take(o().uniq(o().without.apply(o(),[s].concat((n=c,function(e){if(Array.isArray(e))return p(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))),100)).length)return Promise.resolve();var l={per_page:100,no_geom:!0};return r.config.testingApiV2&&(l.fields={id:!0,name:!0,display_name:!0,admin_level:!0,bbox_area:!0}),a().places.fetch(s,l).then((function(t){var n;e((n=o().keyBy(t.results,"id"),{type:f.CI,placesByID:n}))}))}}function g(){return function(e,t){e((0,c.Nk)({allReviewed:!1}));var n=t(),r=n.config.currentUser?n.config.currentUser:null;if(null!=r&&r.privilegedWith("interaction")){var i=n.config.preferredPlace?n.config.preferredPlace:null,d=h({viewer_id:r.id,preferred_place_id:i?i.id:null,locale:I18n.locale,ttl:-1},(0,u.e1)(n.searchParams.params));n.config.blind&&(d.order_by="random",delete d.quality_grade,d.page=1),n.config.testingApiV2&&(d.fields=y),o().each(d,(function(e,t){
!o().isNull(e)&&""!==e&&"any"!==e||o().startsWith(t,"field:")?/license$/.test(t)&&(d[t]=o().toLower(e)):delete d[t]})),delete d.createdDateType;var p,m=new Date;return e((p=m,{type:f.G3,lastRequestAt:p})),a().observations.search(d).then((function(i){var a=t().observations.lastRequestAt;if(!(a&&a>m)){var l,u=i.results;r.id&&(u=i.results.map((function(e){return e.reviewed_by.indexOf(r.id)>-1&&(e.reviewedByCurrentUser=!0),e.identifications_count=o().size(o().filter(e.identifications,"current")),e.identifications_count=o().size(o().filter(e.identifications,(function(e){return e.current&&!e.hidden}))),e}))),e((l={totalResults:i.total_results,page:i.page,perPage:i.per_page,totalPages:Math.ceil(i.total_results/i.per_page),results:u},h({type:f.GY},l))),n.config.sideBarHidden?e((0,s.Yi)()):e((0,s.DI)(!0)),e(b()),o().isEmpty(o().filter(u,(function(e){return!e.reviewedByCurrentUser})))&&e((0,c.Nk)({allReviewed:!0}))}})).catch((function(n){var r=t().observations.lastRequestAt;r&&r>m||(n.response?n.response.json().then((function(t){t.error.match(/window is too large/)&&e((0,l.S7)(I18n.t("views.observations.identify.too_many_results_desc"),{title:I18n.t("too_many_results"),onClose:e((0,l.Hd)())}))})):e((0,l.S7)("",{title:I18n.t("unknown_error"),onClose:e((0,l.Hd)())})))}))}}}function _(e,t){return{type:f.uD,observation:e,changes:t}}function E(e){return{type:f.Up,changes:e}}function w(e){return{type:f.g$,reviewing:e}}function O(e,t){return function(n,r){var o=r(),i=e.pop();Promise.all(e.map((function(e){return t({id:o.config.testingApiV2?e.uuid:e.id})}))).then((function(){return i?t({id:o.config.testingApiV2?i.uuid:i.id,wait_for_refresh:!0}):null})).catch((function(){n(w(!1)),n((0,l.S7)(I18n.t("failed_to_save_record"),{title:I18n.t("request_failed")}))})).then((function(){n(w(!1))}))}}function x(){return function(e,t){var n=t();e((0,c.Nk)({allReviewed:!0})),e(w(!0));var r=o().filter(n.observations.results,(function(e){return!e.reviewedByCurrentUser&&n.config.currentUserCanInteractWithResource(e)}));e(E({reviewedByCurrentUser:!0})),e(O(r,a().observations.review))}}function k(){return function(e,t){var n=t();e((0,c.Nk)({allReviewed:!1})),e(w(!0));var r=o().filter(n.observations.results,(function(e){return e.reviewedByCurrentUser&&n.config.currentUserCanInteractWithResource(e)}));e(E({reviewedByCurrentUser:!1})),e(O(r,a().observations.unreview))}}n.d(t,{A9:function(){return x},CI:function(){return f.CI},FY:function(){return k},G3:function(){return f.G3},GY:function(){return f.GY},O0:function(){return g},Up:function(){return f.Up},g$:function(){return f.g$},hW:function(){return _},uD:function(){return f.uD}});var r=n(16154),o=n.n(r),i=n(64165),a=n.n(i),s=n(33567),c=n(16745),l=n(29598),u=n(76014),f=(n(47191),n(75200)),y={id:!0,comments_count:!0,identifications_count:!0,place_ids:!0,private_place_ids:!0,observation_photos:{id:!0},photos:{id:!0,uuid:!0,url:!0},reviewed_by:!0,identifications:{current:!0,user:{id:!0},taxon:{id:!0}},taxon:{id:!0,uuid:!0,name:!0,iconic_taxon_name:!0,is_active:!0,preferred_common_name:!0,rank:!0,rank_level:!0,default_photo:{attribution:!0,license_code:!0,url:!0,square_url:!0}},user:{id:!0,login:!0,name:!0,icon_url:!0}}},75200:function(e,t,n){"use strict";n.d(t,{CI:function(){return s},G3:function(){return c},GY:function(){return r},Up:function(){return i},g$:function(){return a},uD:function(){return o}});var r="receive_observations",o="update_observation_in_collection",i="update_all_local",a="identify/observations/set-reviewing",s="identify/observations/set-places-by-id",c="identify/observations/set-last-request-at"},33567:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return{type:u,stats:e}}function d(){return function(e){e(f({status:null}))}}function p(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){var r=n();if(r.observationsStats&&(e||"loading"!==r.observationsStats.status&&"loaded"!==r.observationsStats.status)){var a=c({viewer_id:r.config.currentUser?r.config.currentUser.id:null,ttl:-1},(0,i.e1)(r.searchParams.params)),s=c(c({},a),{},{reviewed:!0,page:1,per_page:0});t(f({status:"loading"})),o().observations.search(s).then((function(e){t(f({reviewed:e.total_results,status:"loaded"}))}));var l=c(c({},a),{},{page:1,per_page:0});o().observations.search(l).then((function(e){t(f({total:e.total_results,status:"loaded"}))}))}}}function m(){return function(e,t){var n=t().observationsStats;n.reviewed<n.total&&e(f({reviewed:n.reviewed+1}))}}function h(){return function(e,t){var n=t().observationsStats;n.reviewed>0&&e(f({reviewed:n.reviewed-1}))}}n.d(t,{DI:function(){return p},Lc:function(){return h},Yi:function(){return d},cW:function(){return u},l3:function(){return m}});var r=n(64165),o=n.n(r),i=n(76014),u="update_observations_stats"},36173:function(e,t,n){"use strict";function s(e){return{type:a,params:e}}function c(e){return{type:r,params:e}}function l(e){return{type:o,params:e}}function u(e){return{type:i,params:e}}n.d(t,{JV:function(){return u},MM:function(){return c},Uo:function(){return l},gp:function(){return o},hS:function(){return i},jW:function(){return a},t:function(){return s},uq:function(){return r}});var r="update_search_params",o="update_search_params_without_history",i="update_default_params",a="replace_search_params"},98678:function(e,t,n){"use strict";function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}function D(e,t,n){return t=R(t),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,n||[],R(e).constructor):t.apply(e,n))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}function K(e,t,n){return t=Y(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,G()?Reflect.construct(t,n||[],Y(e).constructor):t.apply(e,n))}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ce(e){var t=function(e){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ae(t)?t:t+""}function le(e,t,n){return t=de(t),function(e,t){if(t&&("object"==ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ue()?Reflect.construct(t,n||[],de(e).constructor):t.apply(e,n))}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function fe(){return fe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=de(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},fe.apply(null,arguments)}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oe(r.key),r)}}function Oe(e){var t=function(e){if("object"!=Ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}function xe(e,t,n){return t=Se(t),function(e,t){if(t&&("object"==Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ke()?Reflect.construct(t,n||[],Se(e).constructor):t.apply(e,n))}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function Ae(e,t){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ae(e,t)}function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Te(r.key),r)}}function Te(e){var t=function(e){if("object"!=Pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pe(t)?t:t+""}function Ie(e,t,n){return t=Me(t),function(e,t){if(t&&("object"==Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,De()?Reflect.construct(t,n||[],Me(e).constructor):t.apply(e,n))}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Re(e,t)}function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ge(r.key),r)}}function Ge(e){var t=function(e){if("object"!=qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qe(t)?t:t+""}function Ye(e,t,n){return t=Ze(t),function(e,t){if(t&&("object"==qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Xe()?Reflect.construct(t,n||[],Ze(e).constructor):t.apply(e,n))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function xt(e){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,St(r.key),r)}}function St(e){var t=function(e){if("object"!=xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xt(t)?t:t+""}function At(e,t,n){return t=Ct(t),function(e,t){if(t&&("object"==xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jt()?Reflect.construct(t,n||[],Ct(e).constructor):t.apply(e,n))}function jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jt=function(){return!!e})()}function Ct(e){return Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ct(e)}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pt(e,t)}n.d(t,{A:function(){return Tt}});var r=n(24577),o=n(995),i=n.n(o),a=n(23539),s=n.n(a),c=n(47452),l=n(59659),u=n(30959),f=n(16414),d=n(29691),p=n(24248),m=n(16154),h=n.n(m),v=n(92276),y=n.n(v),b=n(42395),g=n(65614),_=n(16745),E=n(96077),w=n(41361),O=n(71800),x=n(84423),k=n(47191),S=(0,g.Ng)((function(e,t){return{config:e.config,currentUserID:(t.observation.identifications||[]).find((function(t){return t.user.id===e.config.currentUser.id&&t.current})),hideCompare:!0,hideDisagreement:e.config.blind,hideCategory:e.config.blind,noTaxonLink:e.config.blind,linkTarget:"_blank"}}),(function(e,t){return{addID:function(n,r){return e((0,O.V6)(n,t.observation,r))},deleteComment:function(t){var n={id:t,className:"Comment"};e((0,O.ao)(n)),e((0,O.Tu)({id:t})).catch((function(){e((0,O.Ce)(n))})).then((function(){e((0,O.eP)())}))},withdrawID:function(t){var n={id:t,className:"Identification"},r={id:t,identification:{current:!1}};t.toString().match(/A-z/)&&(n.uuid=t,delete n.id,r.uuid=t,delete r.id),e((0,O.ao)(n)),e((0,O.kA)(r)).catch((function(){e((0,O.Ce)(n))})).then((function(){e((0,O.eP)())}))},restoreID:function(t){var n={id:t,className:"Identification"},r={id:t,identification:{current:!0}};t.toString().match(/A-z/)&&(n.uuid=t,delete n.id,r.uuid=t,delete r.id),e((0,O.ao)(n)),e((0,O.kA)(r)).catch((function(){e((0,O.Ce)(n))})).then((function(){e((0,O.eP)())}))},setFlaggingModalState:function(t){e((0,x._)(t))},showHidden:function(){return e((0,_.Nk)({showHidden:!0}))},hideContent:function(t){return e((0,E.Ps)(t))},unhideContent:function(t){return e((0,E.Ps)(t,"unhide"))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,k.v8)(t,n))}}}))(w.A),A=S,j=function(e){var t=e.observation,n=e.currentUserID,o=(t.comments||[]).map((function(e){return Object.assign(e,{className:"Comment",key:"Comment-".concat(e.id),editUrl:"/comments/".concat(e.id,"/edit")})})),i=new Set,a=t.identifications||[],s=h().find(a,(function(e){return n&&e.user.id===n}));s&&i.add(s.taxon.id),o=(o=o.concat(a.map((function(e){var t=i.has(e.taxon.id)||!e.taxon.is_active;return i.add(e.taxon.id),Object.assign(e,{className:"Identification",hideAgree:t,editUrl:"/identifications/".concat(e.id,"/edit")})})))).sort((function(e,t){var n=y()(e.created_at),r=y()(t.created_at);return n<r?-1:n>r?1:0})),o=(0,b.mq)(o);var c={};return r.createElement("div",{className:"DiscussionList"},o.map((function(e){var n,o="activity-item-comment-".concat(e.id);return e.taxon&&e.current&&(n=!c[e.taxon.id],c[e.taxon.id]=!0,o="activity-item-identification-".concat(e.id)),r.createElement(A,{key:o,item:e,observation:t,firstDisplay:n,linkTarget:"_blank"})})))};j.propTypes={observation:i().object.isRequired,currentUserID:i().number};var C=j,P=n(96799),L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(t,e),n=t,o=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.observation,r=t.content,o=t.key,i=t.className;return n.id!==e.observation.id||i!==e.className||o!==e.key||r!==e.content}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.observation,o=e.onSubmitComment,i=e.className,a=e.content,s=e.key,c=e.updateEditorContent;return r.createElement("form",{key:s,className:"CommentForm ".concat(i),onSubmit:function(e){e.preventDefault(),o({parent_type:"Observation",parent_id:t.testingApiV2?n.uuid:n.id,body:a})}},r.createElement("h3",null,I18n.t("add_a_comment")),r.createElement("div",{className:"form-group"},r.createElement(P.A,{content:a,key:"comment-editor-".concat(n.id),maxLength:5e3,onBlur:function(e){c("obsIdentifyIdComment",e.target.value)},placeholder:I18n.t("leave_a_comment"),showCharsRemainingAt:4e3,textareaClassName:"form-control",mentions:!0})),r.createElement("button",{type:"submit",className:"btn btn-primary"},I18n.t("save")))}}],o&&T(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);L.propTypes={config:i().object,observation:i().object,onSubmitComment:i().func.isRequired,className:i().string,content:i().string,key:i().string,updateEditorContent:i().func};var U=L,B=n(84582),H=(0,g.Ng)((function(e,t){return{config:e.config,observation:t.observation,content:e.textEditor.obsIdentifyIdComment}}),(function(e,t){return{onSubmitComment:function(n){e((0,O.ao)(n)),e((0,O.Gy)(n)).catch((function(){e((0,O.Ce)(n))})).then((function(){e((0,B.SZ)("obsIdentifyIdComment","")),e((0,O.eP)(t.observation)).then((function(){$(".ObservationModal:first").find(".sidebar").scrollTop($(window).height())}))}))},updateEditorContent:function(t,n){e((0,B.SZ)(t,n))}}}))(U),V=n(82789),Z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),n=t,o=[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.observation,r=t.content,o=t.key,i=t.className;return n.id!==e.observation.id||i!==e.className||o!==e.key||r!==e.content}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.observation,o=e.onSubmitIdentification,i=e.className,a=e.content,s=e.blind,c=e.key,l=e.updateEditorContent;return r.createElement("form",{key:c,className:"IdentificationForm ".concat(i),onSubmit:function(e){e.preventDefault();var r=$(".IdentificationForm:visible:first input[name='taxon_name']").data("autocomplete-item");if(r){var i={observation_id:t.testingApiV2?n.uuid:n.id,taxon_id:r.id,body:a,blind:s};s&&(0,b.ff)(n,r)&&e.target.elements.disagreement&&(i.disagreement="1"===e.target.elements.disagreement.value),o(i,{observation:n,taxon:r,potentialDisagreement:!s&&(0,b.ff)(n,r)}),$("input[name='taxon_name']",e.target).trigger("resetAll"),$("input[name='taxon_name']",e.target).blur()}}},r.createElement("h3",null,I18n.t("add_an_identification")),r.createElement(V.A,{bootstrapClear:!0}),r.createElement("div",{className:"form-group"},r.createElement(P.A,{className:"upstacked",content:a,key:"comment-editor-".concat(n.id),onBlur:function(e){l("obsIdentifyIdComment",e.target.value)},placeholder:I18n.t("tell_us_why"),textareaClassName:"form-control",mentions:!0})),s?r.createElement("div",{className:"form-group disagreement-group"},r.createElement("label",null,r.createElement("input",{type:"radio",name:"disagreement",value:"0",defaultChecked:!0})," ","Others could potentially refine this ID"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"disagreement",value:"1"})," ","This is the most specific ID the evidence justifies")):null,r.createElement("button",{type:"submit",className:"btn btn-primary"},I18n.t("save")))}}],o&&z(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);Z.propTypes={config:i().object,observation:i().object,onSubmitIdentification:i().func.isRequired,className:i().string,content:i().string,blind:i().bool,key:i().string,updateEditorContent:i().func};var Q=Z,J=(0,g.Ng)((function(e,t){return{config:e.config,observation:t.observation,currentUser:e.config.currentUser,blind:e.config.blind,content:e.textEditor.obsIdentifyIdComment}}),(function(e,t){return{onSubmitIdentification:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,O.gk)(t.observation,n,r))},updateEditorContent:function(t,n){e((0,B.SZ)(t,n))}}}))(Q),ee=J,te=n(20623),ne=n(24561),re=n(25173),oe=n(28439),ie=n(75491);n(44695);var me=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=le(this,t,[e])).setupEasyZoom=n.setupEasyZoom.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){if(fe(de(t.prototype),"componentDidMount",this).call(this),this.setupEasyZoom(),this.props.slideIndex&&this.props.slideIndex>0){var e=this;setTimeout((function(){return e.slideToSlideIndex()}),500)}}},{key:"componentDidUpdate",value:function(e){this.props.slideIndex!==e.slideIndex&&this.slideToSlideIndex();var t=s().findDOMNode(this);$(".image-gallery-image > img",t).length>0&&this.setupEasyZoom()}},{key:"setupEasyZoom",value:function(){var e=s().findDOMNode(this),t=this.props.items,n='<div class="unzoomable"></div>';$(".image-gallery-image > img",e).wrap((function(){var r=$(this).attr("src"),o=t.find((function(e){return e.original===r}));return o?o.originalDimensions&&o.originalDimensions.width<=$(e).width()&&o.originalDimensions.height<=$(e).height()?n:'<div class="easyzoom"><a href="'.concat(o.zoom||r,'"></a></div>'):n})),$(".image-gallery-image .easyzoom",e).easyZoom({eventType:"click",onShow:function(){this.$link.addClass("easyzoom-zoomed")},onHide:function(){this.$link.removeClass("easyzoom-zoomed")},loadingNotice:I18n.t("loading")})}},{key:"slideToSlideIndex",value:function(){h().isInteger(this.props.slideIndex)&&(this.slideToIndex(this.props.slideIndex),this._handleResize())}}])&&se(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(ie.A);me.propTypes=Object.assign({},ie.A.propTypes,{slideIndex:i().number});var he=me,ve=n(29212),ye=n(70613),be=n(55077),ge=n(64165),_e=n.n(ge),je=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xe(this,t,[e])).state={taxa:[],current:-1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){this.setTaxaFromProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){h().isEqual(h().filter(this.props,(function(e){return!h().isFunction(e)})),h().filter(e,(function(e){return!h().isFunction(e)})))||this.setTaxaFromProps(e)}},{key:"setTaxaFromProps",value:function(e){var t=this,n=this.props,r=n.taxon,o=n.defaultTaxon,i=n.config;if(e.taxon)if(e.taxon.ancestors&&e.taxon.ancestors.length>0)this.setState({taxa:h().sortBy(e.taxon.ancestors,(function(e){return e.rank_level||999}))});else if(e.taxon.ancestor_ids){var a={};i.testingApiV2&&(a.fields={ancestor_ids:!0,id:!0,name:!0,rank:!0,rank_level:!0,iconic_taxon_name:!0,is_active:!0,preferred_common_name:!0}),_e().taxa.fetch(e.taxon.ancestor_ids,a).then((function(e){var n=h().sortBy(e.results,(function(e){return e.rank_level||999}));o&&r&&r.id!==o.id&&(n=h().filter(n,(function(e){return e.id!==o.id}))).splice(0,0,o),t.setState({taxa:n})}))}}},{key:"chooseCurrent",value:function(){var e=this.state,t=e.taxa,n=e.current,r=this.props,o=r.setTaxon,i=r.clearTaxon,a=t[n];$("body").click(),a?o(a):i()}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.container,i=t.taxon,a=t.defaultTaxon,s=t.className,c=t.setTaxon,l=t.clearTaxon,u=t.preIconClass,p=t.postIconClass,m=t.label,v=t.config,y=this.state,b=y.current,g=y.taxa;return r.createElement(d.A,{trigger:"click",placement:"bottom",rootClose:!0,container:o,overlay:r.createElement(f.A,{id:n,className:"TaxonChooserPopover RecordChooserPopover"},r.createElement(V.A,{initialSelection:i,bootstrapClear:!0,searchExternal:!1,resetOnChange:!1,afterSelect:function(e){c(e.item),$("body").click()},afterUnselect:function(){"function"==typeof l&&l()}}),r.createElement("ul",{className:"list-unstyled"},r.createElement("li",{className:-1===b?"pinned current":"pinned",onMouseOver:function(){return e.setState({current:-1})},onFocus:function(){return e.setState({current:-1})},style:{display:i?"block":"none"}},r.createElement("button",{type:"button",onClick:function(){return e.chooseCurrent()},className:"btn btn-nostyle"},r.createElement("i",{className:"fa fa-times"}),I18n.t("clear"))),h().map(g,(function(t,n){return r.createElement("li",{key:"taxon-chooser-taxon-".concat(t.id),className:"media ".concat(b===n?"current":"","\n                    ").concat(a&&t.id===a.id?"pinned":""),onMouseOver:function(){return e.setState({current:n})},onFocus:function(){return e.setState({current:n})}},r.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return e.chooseCurrent()}},r.createElement("div",{className:"media-left"},r.createElement("i",{className:"media-object icon-iconic-".concat((t.iconic_taxon_name||"unknown").toLowerCase())})),r.createElement("div",{className:"media-body"},r.createElement(ne.A,{taxon:t,user:v.currentUser}))))}))))},r.createElement("div",{className:"TaxonChooserPopoverTrigger RecordChooserPopoverTrigger d-flex ".concat(i?"chosen":""," ").concat(s)},u?r.createElement("i",{className:"".concat(u," pre-icon")}):null,m?r.createElement("label",null,m):null,i?r.createElement(ne.A,{taxon:i,user:v.currentUser}):I18n.t("filter_by_taxon"),p?r.createElement("i",{className:"".concat(p," post-icon")}):null))}}],o&&we(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);je.propTypes={id:i().string.isRequired,container:i().object,taxon:i().object,defaultTaxon:i().object,className:i().string,setTaxon:i().func,clearTaxon:i().func,preIconClass:i().oneOfType([i().string,i().bool]),postIconClass:i().oneOfType([i().string,i().bool]),label:i().string,config:i().object},je.defaultProps={preIconClass:"fa fa-search",config:{}};var Ce=je,Fe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ie(this,t,[e])).state={choices:e.choices,current:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(t,e),n=t,(o=[{key:"componentWillReceiveProps",value:function(e){var t=this.state.choices;this.setState({current:t.indexOf(e.chosen||e.defaultChoice)})}},{key:"chooseCurrent",
value:function(){var e=this.state,t=e.choices,n=e.current,r=this.props,o=r.setChoice,i=r.clearChoice,a=t[n];$("body").click(),a?o(a):i()}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.container,i=t.chosen,a=t.defaultChoice,s=t.className,c=t.preIconClass,l=t.postIconClass,u=t.label,p=t.hideClear,m=t.choiceIconClass,v=t.choiceLabels,y=this.state,b=y.current,g=y.choices;return r.createElement(d.A,{trigger:"click",placement:"bottom",rootClose:!0,container:o,overlay:r.createElement(f.A,{id:n,className:"ChooserPopover RecordChooserPopover"},r.createElement("ul",{className:"list-unstyled"},p?null:r.createElement("li",{className:-1===b?"current pinned":"pinned",onMouseOver:function(){return e.setState({current:-1})},onFocus:function(){return e.setState({current:-1})},style:{display:i?"block":"none"}},r.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return e.chooseCurrent()}},r.createElement("i",{className:"fa fa-times"}),I18n.t("clear"))),h().map(g,(function(t,n){return r.createElement("li",{key:"source-chooser-source-".concat(t),className:"media ".concat(b===n?"current":""),onMouseOver:function(){return e.setState({current:n})},onFocus:function(){return e.setState({current:n})}},r.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return e.chooseCurrent()}},r.createElement("div",{className:"media-left"},m?r.createElement("i",{className:"media-object ".concat(m)}):null),r.createElement("div",{className:"media-body"},I18n.t(v[t]||t))))}))))},r.createElement("div",{className:"ChooserPopoverTrigger RecordChooserPopoverTrigger ".concat(i?"chosen":""," ").concat(s)},c?r.createElement("i",{className:"".concat(c," pre-icon")}):null,u?r.createElement("label",null,u):null,I18n.t(v[i]||i||v[a]||a),l?r.createElement("i",{className:"".concat(l," post-icon")}):null))}}])&&Ne(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);Fe.propTypes={id:i().string.isRequired,container:i().object,chosen:i().string,choices:i().array,choiceLabels:i().object,defaultChoice:i().string,className:i().string,setChoice:i().func,clearChoice:i().func,preIconClass:i().oneOfType([i().string,i().bool]),postIconClass:i().oneOfType([i().string,i().bool]),label:i().string,hideClear:i().bool,choiceIconClass:i().string},Fe.defaultProps={preIconClass:"fa fa-search",choices:[],choiceLabels:{}};var Le=Fe,Ue=n(60166),Be=n(70760),He=function(e){var t=e.taxon,n=e.observation,o=e.details,i=e.chooseTaxon,a=e.setDetailTaxon,s=e.source,c=e.config,u=e.updateCurrentUser,f=e.performOrOpenConfirmationModal,d=h().uniq(t.taxonPhotos,(function(e){return"".concat(e.photo.id,"-").concat(e.taxon.id)})).slice(0,2);t.representativePhoto&&((d=h().filter(d,(function(e){return e.photo.id!==t.representativePhoto.id}))).unshift({taxon:t,photo:t.representativePhoto}),d=d.slice(0,2));var p="cover";1===d.length&&d[0].photo.original_dimensions&&d[0].photo.original_dimensions.width<=d[0].photo.original_dimensions.height&&(p="contain");var m=c.currentUser&&c.currentUser.prefers_medialess_obs_maps,v={taxon:t,gbif:{disabled:!0,legendColor:"#F7005A"},places:!0,ranges:!0,geomodel_thresholded:!0};v.observationLayers="rg_observations"===s?[{label:I18n.t("rg_observations"),quality_grade:"research"}]:"captive_observations"===s?[{label:I18n.t("captive_observations"),captive:"true",color:b.lm.blue}]:[{label:I18n.t("verifiable_observations"),verifiable:!0},{label:I18n.t("observations_without_media"),color:b.lm.maroon,verifiable:!1,captive:!1,photos:!1,sounds:!1,disabled:!m,onChange:function(e){return u({prefers_medialess_obs_maps:e.target.checked})}}];var y=h().pick(n,["geoprivacy","id","latitude","longitude","map_scale","positional_accuracy","public_positional_accuracy","species_guess","taxon","user"]);return y.coordinates_obscured=n.obscured&&!n.private_geojson,r.createElement("div",{className:"suggestion-row",key:"suggestion-row-".concat(t.id)},r.createElement("h3",{className:"d-flex justify-content-between"},r.createElement(ne.A,{taxon:t,target:"_blank",url:(0,oe.F$)(t),onClick:function(e){return e.preventDefault(),a(t),!1},user:c.currentUser,iconLink:!0}),r.createElement("div",{className:"btn-group pull-right"},o&&(o.vision_score||o.frequency_score)?r.createElement("div",{className:"quiet btn btn-label btn-xs"},o.vision_score?I18n.t("visually_similar"):null,o.vision_score&&o.frequency_score?r.createElement("span",null," / "):null,o.frequency_score?I18n.t("expected_nearby"):null):null,r.createElement(l.A,{bsSize:"xs",bsStyle:"primary",onClick:function(){f((function(){i(t,{observation:n,vision:"visual"===s})}))}},I18n.t("select")))),r.createElement(te.A,{height:200,offsetVertical:1e3},r.createElement("div",{className:"suggestion-row-content"},r.createElement("div",{className:"photos"},0===d.length?r.createElement("div",{className:"noresults"},I18n.t("no_photos")):d.map((function(e){return r.createElement(Be.A,{key:"suggestions-row-photo-".concat(e.taxon.id,"-").concat(e.photo.id),photo:e.photo,taxon:t,height:200,backgroundSize:p,showTaxonPhotoModal:function(e){var n=h().findIndex(t.taxonPhotos,(function(t){return t.photo.id===e.id}));a(t,{detailPhotoIndex:n})}})}))),r.createElement(Ue.A,{placement:"suggestion-row",showAllLayer:!1,minZoom:2,zoomLevel:6,preserveViewport:!0,latitude:n.latitude,longitude:n.longitude,gbifLayerLabel:I18n.t("maps.overlays.gbif_network"),observations:[y],gestureHandling:"auto",reloadKey:"map-for-".concat(n.id,"-").concat(t.id),taxonLayers:[v],zoomControl:!1,mapTypeControl:!1,disableFullscreen:!0,currentUser:c.currentUser,updateCurrentUser:u,showAccuracy:!0}))))};He.propTypes={taxon:i().object.isRequired,observation:i().object.isRequired,details:i().object,chooseTaxon:i().func.isRequired,setDetailTaxon:i().func.isRequired,source:i().string,config:i().object,updateCurrentUser:i().func,performOrOpenConfirmationModal:i().func},He.defaultProps={config:{}};var Ve=He,Je=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ye(this,t)).state={scrollTopWas:null,detailTaxonChangedFor:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(t,e),n=t,o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.detailTaxon,r=t.prevTaxon;e.detailTaxon&&n&&n.id!==e.detailTaxon.id?r&&r.id===e.detailTaxon.id?this.setState({detailTaxonChangedFor:"prev"}):this.setState({detailTaxonChangedFor:"next"}):this.setState({detailTaxonChangedFor:null})}},{key:"componentDidUpdate",value:function(){var e=this.state.detailTaxonChangedFor;if(e){var t=s().findDOMNode(this);$(".detail-taxon",t).removeClass("changed"),$(".detail-taxon",t).addClass("will-change-for-".concat(e)),setTimeout((function(){$(".detail-taxon",t).addClass("changed"),$(".detail-taxon",t).removeClass("will-change-for-prev"),$(".detail-taxon",t).removeClass("will-change-for-next")}),100)}}},{key:"scrollToTop",value:function(){this.setState({scrollTopWas:$(".Suggestions").scrollTop()}),$(".Suggestions").scrollTop(0)}},{key:"resetScrollTop",value:function(){var e=this.state.scrollTopWas;if(e){var t=e;this.setState({scrollTopWas:null}),setTimeout((function(){$(".Suggestions").scrollTop(t)}),100)}}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.query,i=n.response,a=n.detailTaxon,s=n.setDetailTaxon,c=n.setQuery,u=n.loading,f=n.detailPhotoIndex,m=n.observation,v=n.chooseTaxon,y=n.prevTaxon,b=n.nextTaxon,g=n.config,_=n.updateCurrentUser,E=n.updateSuggestionSession,w=n.performOrOpenConfirmationModal;a&&a.taxonPhotos&&a.taxonPhotos.length>0&&(e=a.taxonPhotos.map((function(e){return{key:"detail-taxon-".concat(a.id,"-photo-").concat(e.photo.id),original:e.photo.photoUrl("medium"),zoom:e.photo.photoUrl("original")||e.photo.photoUrl("large"),thumbnail:e.photo.photoUrl("square"),description:r.createElement("div",{className:"photo-meta"},r.createElement(d.A,{container:$(".suggestions-detail").get(0),placement:"top",delayShow:500,trigger:"click",rootClose:!0,overlay:r.createElement(p.A,{id:"add-tip"},r.createElement(ye.A,{photo:e.photo})),key:"photo-".concat(e.photo.id,"-license")},e.photo.license_code?r.createElement("i",{className:"fa fa-creative-commons license"}):r.createElement("i",{className:"fa fa-copyright license"})),r.createElement("a",{href:"/photos/".concat(e.photo.id),target:"_blank",rel:"noopener noreferrer",alt:I18n.t("more_info")},r.createElement("i",{className:"fa fa-info-circle"})))}})));var O,x=r.createElement("div",{className:"noresults"},I18n.t("no_photos"));e&&e.length>0&&(x=r.createElement(he,{items:e,showThumbnails:e&&e.length>1,lazyLoad:!1,server:!0,showNav:!1,disableArrowKeys:!0,showFullscreenButton:!1,showPlayButton:!1,slideDuration:0,slideIndex:f,currentIndex:f,renderItem:function(e){return r.createElement("div",{className:"image-gallery-image",key:e.key},r.createElement("img",{src:e.original,alt:e.originalAlt,srcSet:e.srcSet,sizes:e.sizes,title:e.originalTitle}),e.description&&r.createElement("span",{className:"image-gallery-description"},e.description))}})),"checklist"===o.source&&i&&i.results.length>0&&i.comprehensiveness&&i.comprehensiveness.list&&(O=i.comprehensiveness.list);var k=m.places;o.place&&o.place.ancestors&&(k=o.place.ancestors),k=h().filter(k,(function(e){return parseInt(e.admin_level,10)>=0}));var S=I18n.t("no_suggestions_available");u?S=I18n.t("suggestions"):i.results.length>0&&(S=I18n.t("x_suggestions_filtered_by_colon",{count:i.results.length}));var A=["observations","rg_observations","captive_observations","checklist"];return o&&o.taxon&&o.taxon.rank_level<=20&&A.push("misidentifications"),m&&(m.observation_photos&&m.observation_photos.length>0||m.photos&&m.photos.length>0)&&A.push("visual"),r.createElement("div",{className:"Suggestions"},r.createElement("div",{className:"suggestions-wrapper ".concat(a?"with-detail":"")},r.createElement("div",{className:"suggestions-list",tabIndex:"-1"},r.createElement("div",{className:"suggestions-inner"},r.createElement(Le,{id:"suggestions-sort-chooser",label:I18n.t("sort_by"),className:"pull-left",container:$(".ObservationModal").get(0),chosen:o.order_by,choices:["default","taxonomy","sciname"],choiceLabels:{default:"default_",sciname:"scientific_name"},defaultChoice:"default",preIconClass:!1,postIconClass:"fa fa-angle-down",hideClear:!0,setChoice:function(e){c(We(We({},o),{},{order_by:e}),{updateSuggestionSession:E})},clearChoice:function(){c(We(We({},o),{},{order_by:null}),{updateSuggestionSession:E})}}),r.createElement("div",{className:"column-header"},S),r.createElement("div",{className:"filters"},r.createElement(Le,{id:"suggestions-source-chooser",label:I18n.t("source"),container:$(".ObservationModal").get(0),chosen:o.source,choices:A,choiceLabels:{visual:"visually_similar"},defaultChoice:"observations",preIconClass:!1,postIconClass:"fa fa-angle-down",hideClear:!0,setChoice:function(e){c(Object.assign({},o,{source:e}),{updateSuggestionSession:E})},clearChoice:function(){c(Object.assign({},o,{source:null}),{updateSuggestionSession:E})}}),r.createElement(Ce,{id:"suggestions-taxon-chooser",container:$(".ObservationModal").get(0),label:I18n.t("taxon"),taxon:o.taxon,defaultTaxon:o.defaultTaxon,preIconClass:!1,postIconClass:"fa fa-angle-down",setTaxon:function(e){c(Object.assign({},o,{taxon:e,taxon_id:e.id}))},clearTaxon:function(){c(Object.assign({},o,{taxon:null,taxon_id:null}))},config:g}),"visual"===o.source?null:r.createElement(ve.A,{container:$(".ObservationModal").get(0),config:g,label:I18n.t("place"),place:o.place,withBoundaries:!0,defaultPlace:o.defaultPlace,defaultPlaces:h().sortBy(k,(function(e){return e.bbox_area})),preIconClass:!1,postIconClass:"fa fa-angle-down",setPlace:function(e){c(Object.assign({},o,{place:e,place_id:e.id}))},clearPlace:function(){c(Object.assign({},o,{place:null,place_id:null}))}})),u?r.createElement("div",{className:"text-center"},r.createElement("div",{className:"big loading_spinner"})):null,O?r.createElement("div",{className:"comprehensive-list"},r.createElement("i",{className:"fa fa-list-ul"}),I18n.t("label_colon",{label:I18n.t("comprehensive_list")})," ",r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/lists/".concat(O.id)},O.title," ",O.source&&O.source.in_text&&r.createElement("span",{dangerouslySetInnerHTML:{__html:"(".concat(I18n.t("bold_label_colon_value_html",{label:I18n.t("source"),value:O.source.in_text}),")")}}))):null,h().uniqBy(i.results,(function(e){return e.taxon.id})).map((function(e){return r.createElement(Ve,{key:"suggestion-row-".concat(e.taxon.id),taxon:e.taxon,observation:m,details:e.source_details,chooseTaxon:v,source:o.source,config:g,updateCurrentUser:_,setDetailTaxon:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.scrollToTop(),s(e,n)},performOrOpenConfirmationModal:w})})))),r.createElement("div",{className:"suggestions-detail"},r.createElement("div",{className:"suggestions-inner"},r.createElement("div",{className:"column-header"},r.createElement("button",{type:"button",className:"btn btn-nostyle header-text",onClick:function(e){return e.preventDefault(),s(null),t.resetScrollTop(),!1}},r.createElement("i",{className:"fa fa-chevron-circle-left"})," ",I18n.t("back_to_suggestions")),r.createElement("div",{className:"prevnext pull-right"},r.createElement(l.A,{disabled:null===y,onClick:function(){return s(y)},className:"prev"},r.createElement("i",{className:"fa fa-chevron-circle-left"})," ",I18n.t("previous_taxon_short")),r.createElement(l.A,{disabled:null===b,onClick:function(){return s(b)},className:"next"},I18n.t("next_taxon_short")," ",r.createElement("i",{className:"fa fa-chevron-circle-right"})))),a?r.createElement("div",{className:"detail-taxon ".concat(e&&e.length>1?"multiple-photos":"single-photo")},x,r.createElement("div",{className:"obs-modal-header"},r.createElement(ne.A,{taxon:a,url:(0,oe.F$)(a),target:"_blank",noParens:!0,user:g.currentUser,iconLink:!0})),a.wikipedia_summary&&r.createElement(be.A,{text:"".concat(a.wikipedia_summary," (").concat(I18n.t("source_wikipedia"),")")}),r.createElement("h4",null,I18n.t("observations_map")),r.createElement(te.A,{debounce:!1,height:300},r.createElement(Ue.A,{placement:"suggestion-detail",showAllLayer:!1,minZoom:2,gbifLayerLabel:I18n.t("maps.overlays.gbif_network"),observations:[m],gestureHandling:"auto",reloadKey:"taxondetail-".concat(a.id),scrollwheel:!1,taxonLayers:[(0,oe.fV)(a,{currentUser:g.currentUser,updateCurrentUser:_})],currentUser:g.currentUser,updateCurrentUser:_})),r.createElement("h4",null,I18n.t("taxonomy")),r.createElement(re.A,{taxon:a,chooseTaxon:function(e){return s(e)},currentUser:g.currentUser,noHideable:!0})):null))),a?r.createElement("div",{className:"suggestions-tools tools"},r.createElement(l.A,{bsStyle:"link",onClick:function(){return s(null)}},I18n.t("cancel")),r.createElement(l.A,{bsStyle:"primary",onClick:function(){w((function(){v(a,{observation:m,vision:"visual"===o.source})}))}},I18n.t("select_this_taxon"))):null)}}],o&&$e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);Je.propTypes={query:i().object,response:i().object,detailTaxon:i().object,setDetailTaxon:i().func,setQuery:i().func,loading:i().bool,detailPhotoIndex:i().number,observation:i().object,chooseTaxon:i().func,prevTaxon:i().object,nextTaxon:i().object,config:i().object,updateCurrentUser:i().func,updateSuggestionSession:i().bool,performOrOpenConfirmationModal:i().func},Je.defaultProps={query:{},response:{results:[]},detailPhotoIndex:0,config:{},updateSuggestionSession:!0};var et=Je,tt=n(22702),nt=(0,g.Ng)((function(e){var t,n;if(e.suggestions.detailTaxon){var r=h().findIndex(e.suggestions.response.results,(function(t){return t.taxon.id===e.suggestions.detailTaxon.id})),o=e.suggestions.response.results[r-1];n=o?o.taxon:null;var i=e.suggestions.response.results[r+1];t=i?i.taxon:null}return Object.assign({},e.suggestions,{observation:Object.assign({},e.currentObservation.observation),prevTaxon:n,nextTaxon:t,config:e.config})}),(function(e,t){return{onSubmitIdentification:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,O.gk)(t.observation,n,r))},setDetailTaxon:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e((0,tt.aV)(t,n)),e((0,tt.Gp)())},setQuery:function(t,n){e((0,tt.oR)(t,n)),e((0,tt._E)())},updateCurrentUser:function(t){return e((0,_.W3)(t))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,k.v8)(t,n))}}}))(et),rt=nt,ot=n(35922),it=n(46666),at=n(70602),st=(0,g.Ng)((function(e){return{observation:e.currentObservation.observation,config:e.config,controlledTerms:e.controlledTerms.allTerms,context:"identify"}}),(function(e){return{addAnnotation:function(t,n){e((0,it.lC)(t,n))},deleteAnnotation:function(t){return e((0,it.Xm)(t))},voteAnnotation:function(t,n){e((0,it.SY)(t,n))},unvoteAnnotation:function(t){return e((0,it.hP)(t))},updateSession:function(t){e((0,at.qO)(t))}}}))(ot.A),ct=n(57629),lt=(0,g.Ng)((function(e){return{observation:e.currentObservation.observation,config:e.config,qualityMetrics:Object.assign({},h().groupBy(e.qualityMetrics,"metric"),h().groupBy(e.currentObservation.observation.votes,"vote_scope")),tableOnly:!0}}),(function(e){return{setFlaggingModalState:function(t){return e((0,x._)(t))},voteMetric:function(t,n){return e((0,it.zN)(t,n))},unvoteMetric:function(t){return e((0,it.yb)(t))}}}))(ct.A),ut=n(72044),ft=(0,g.Ng)((function(e){return{observation:e.currentObservation.observation,config:e.config,placeholder:I18n.t("add_a_field"),context:"identify"}}),(function(e){return{addObservationFieldValue:function(t){e((0,it.Tw)(t))},removeObservationFieldValue:function(t){e((0,it.c7)(t))},updateObservationFieldValue:function(t,n){e((0,it.lz)(t,n))},updateSession:function(t){e((0,at.qO)(t))}}}))(ut.A),dt=n(6363),pt=n(98741),mt=n(34157),ht=(0,g.Ng)((function(e){return{observation:e.currentObservation.observation,config:e.config,placeholder:I18n.t("add_a_field"),context:"identify"}}),(function(e){return{addToProject:function(t){e((0,it.Yy)(t))},removeFromProject:function(t){e((0,it.Mf)(t))},joinProject:function(t){e((0,it.Y_)(t))},removeObservationFieldValue:function(t){e((0,it.c7)(t))},updateCuratorAccess:function(t,n){e((0,pt.o)(t,n))},updateObservationFieldValue:function(t,n){e((0,it.lz)(t,n))},showProjectFieldsModal:function(t){e((0,mt.l)({show:!0,alreadyInProject:!0,project:t}))},updateSession:function(t){e((0,at.qO)(t))}}}))(dt.A),vt=n(22213),yt=n(93930),bt=n(31092),gt=(0,g.Ng)((function(e){return{config:e.config,observation:e.currentObservation.observation,subscriptions:e.subscriptions.subscriptions,subscriptionsLoaded:e.subscriptions.loaded}}),(function(e){return{followUser:function(){return e((0,O.pV)())},unfollowUser:function(){return e((0,O.Qt)())},subscribe:function(){return e((0,O.Um)())},fetchSubscriptions:function(t){return e((0,bt.hP)(t))}}}))(yt.A),_t=n(36235),Et=(0,g.Ng)((function(e){return{observation:e.currentObservation.observation,config:e.config,faveText:I18n.t("add_to_favorites"),hideOtherUsers:!0}}),(function(e){return{fave:function(t){return e((0,O.jT)(t))},unfave:function(t){return e((0,O.yP)(t))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,k.v8)(t,n))}}}))(_t.A),wt=Et,Ot=n(3197),Nt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){var e=s().findDOMNode(this);$(".IdentificationForm textarea,.CommentForm textarea",e).textcompleteUsers()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.tab,r=t.observation;if("info"===n&&"info"!==e.tab){var o=$(".TaxonMap",s().findDOMNode(this)).data("taxonMap");if("undefined"==typeof google)return;google.maps.event.trigger(o,"resize"),r&&r.latitude&&o.setCenter(new google.maps.LatLng(r.latitude,r.longitude))}var i=this.props.observation&&(!e.observation||e.observation.id!==this.props.observation.id||e.tab!==this.props.tab);if(this.props.identificationFormVisible&&e.identificationFormVisible!==this.props.identificationFormVisible||this.props.commentFormVisible&&e.commentFormVisible!==this.props.commentFormVisible)!function(e){var t=$(e).find(".ObservationModal:first").find(".sidebar"),n=$(e).find(".IdentificationForm, .CommentForm").not(".collapse")[0];n&&($(n).hasClass("IdentificationForm")?$(":input:visible:first",n).focus():$("textarea:visible:first",n).focus(),$(".info-tab-content",t).scrollTo(n))}(s().findDOMNode(this));else if(i){var a=$(".ObservationModal:first").find(".sidebar"),c=$(".inat-tab.active",a),l=$("[tabindex=-1]:first",c);l.length>0?l.focus():c.focus()}}},{key:"defaultKeyboardShortcut",value:function(e){return r.createElement("tr",{className:"keyboard-shortcuts",key:"keyboard-shortcuts-".concat(e.keys.join("-"))},r.createElement("td",null,r.createElement("span",{dangerouslySetInnerHTML:{__html:e.keys.map((function(e){return"<kbd>".concat(e,"</kbd>")})).join(" + ")}})),r.createElement("td",null,e.label))}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.addComment,i=n.addIdentification,a=n.blind,s=n.brightnesses,m=n.captiveByCurrentUser,v=n.chooseSuggestedTaxon,g=n.chooseTab,_=n.commentFormVisible,E=n.controlledTerms,w=n.currentUser,O=n.decreaseBrightness,x=n.hidePrevNext,k=n.hideTools,S=n.identificationFormVisible,A=n.images,j=n.imagesCurrentIndex,P=n.increaseBrightness,N=n.keyboardShortcutsShown,T=n.loadingDiscussionItem,I=n.mapZoomLevel,D=n.mapZoomLevelLocked,M=n.observation,R=n.officialAppIds,F=n.onClose,L=n.onMapZoomChanged,U=n.resetBrightness,B=n.reviewedByCurrentUser,V=n.setImagesCurrentIndex,q=n.setMapZoomLevelLocked,z=n.showNextObservation,W=n.showPrevObservation,K=n.tab,G=n.tabs,Y=n.tabTitles,X=n.toggleCaptive,Z=n.toggleKeyboardShortcuts,Q=n.toggleReviewed,J=n.updateCurrentUser,te=n.updateSuggestionSession,re=n.visible;if(!M)return r.createElement("div",null);var oe=w&&w.prefers_medialess_obs_maps;if(M.latitude){var ie=h().pick(M,["id","species_guess","latitude","longitude","positional_accuracy","geoprivacy","taxon","user","map_scale"]);ie.coordinates_obscured=M.obscured&&!M.private_geojson,M.private_geojson&&(ie.private_latitude=M.private_geojson.coordinates[1],ie.private_longitude=M.private_geojson.coordinates[0]);var ae={observationLayers:[{label:I18n.t("verifiable_observations"),verifiable:!0,observation_id:M.obscured&&M.private_geojson&&ie.id},{label:I18n.t("observations_without_media"),verifiable:!1,captive:!1,photos:!1,sounds:!1,disabled:!oe,onChange:function(e){return J({prefers_medialess_obs_maps:e.target.checked})},observation_id:M.obscured&&M.private_geojson&&ie.id}],places:{disabled:!0}};a||(ae.taxon=ie.taxon,ae.gbif={disabled:!0}),e=r.createElement(vt.A,{key:"observation-modal-map"},r.createElement(Ue.A,{key:"map-for-".concat(ie.id),placement:"obs-modal",reloadKey:"map-for-".concat(ie.id,"-").concat(ie.private_latitude?"full":""),taxonLayers:[ae],observations:[ie],clickable:!a,latitude:ie.latitude,longitude:ie.longitude,zoomLevel:D&&h().isNumber(I)?I:ie.map_scale||5,onZoomChanged:L,mapTypeControl:!0,mapTypeControlOptions:{style:"undefined"!=typeof google&&google.maps.MapTypeControlStyle.DROPDOWN_MENU},showAccuracy:!0,showAllLayer:!1,overlayMenu:!1,zoomControlOptions:{position:"undefined"!=typeof google&&google.maps.ControlPosition.TOP_LEFT},minZoom:1,currentUser:w,updateCurrentUser:J}))}else e=M.obscured?r.createElement("div",{className:"TaxonMap empty"},r.createElement("i",{className:"fa fa-map-marker"})," ",I18n.t("location_private")):r.createElement("div",{className:"TaxonMap empty"},r.createElement("i",{className:"fa fa-map-marker"})," ",I18n.t("location_unknown"));var se=null;if(A&&A.length>0){var ce=s["".concat(M.id,"-").concat(j)]||1,le="brightness-".concat(ce.toString().replace(".","-")),ue=A[j]||A[0];se=r.createElement("div",{className:"photos-wrapper ".concat(le)},r.createElement(he,{key:"map-for-".concat(M.id),items:A,slideDuration:0,slideIndex:j,showThumbnails:A&&A.length>1,lazyLoad:!1,server:!0,showNav:!1,disableArrowKeys:!0,showFullscreenButton:!1,showPlayButton:!1,onSlide:V,onThumbnailClick:function(e,t){return V(t)}}),r.createElement("div",{className:"photo-controls",role:"toolbar"},r.createElement("div",{className:"btn-group-vertical btn-group-xs",role:"group"},r.createElement("a",{href:ue.zoom||ue.original,target:"_blank",rel:"noopener noreferrer",className:"btn btn-default",title:I18n.t("view_full_size_photo")},r.createElement("i",{className:"icon-link-external"}))),r.createElement("div",{className:"brightness-control btn-group-vertical btn-group-xs",role:"group"},r.createElement("button",{type:"button",className:"btn btn-default btn-adjust-brightness",onClick:U,title:1===ce?I18n.t("adjust_brightness"):I18n.t("reset_brightness")},r.createElement("i",{className:"icon-adjust"})),r.createElement("button",{type:"button",className:"btn btn-default btn-increase-brightness",onClick:P,title:I18n.t("increase_brightness")},"+"),r.createElement("button",{type:"button",className:"btn btn-default btn-decrease-brightness",onClick:O,title:I18n.t("decrease_brightness")},"-"))))}var fe=null;M.sounds&&M.sounds.length>0&&(fe=M.sounds.map((function(e){var t,n,o="sound-".concat(e.id);return t="SoundcloudSound"!==e.subtype&&e.file_url?r.createElement("audio",{key:o,controls:!0,preload:"none",controlsList:"nodownload"},r.createElement("source",{src:e.file_url,type:e.file_content_type}),I18n.t("your_browser_does_not_support_the_audio_element")):r.createElement("iframe",{key:o,title:o,width:"100%",height:"100",scrolling:"no",frameBorder:"no",src:"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/".concat(e.native_sound_id,"&auto_play=false&hide_related=false&show_comments=false&show_user=false&show_reposts=false&visual=false&show_artwork=false")}),h().find(e.flags,(function(e){return!e.resolved}))&&(n=r.createElement("p",{className:"flag-notice alert alert-warning"},I18n.t("sounds.sound_has_been_flagged")," ",r.createElement("a",{href:"/sounds/".concat(e.id,"/flags"),className:"linky"},I18n.t("view_flags")))),n?M.user&&(w.id===M.user.id||w.roles.indexOf("curator")>=0||w.roles.indexOf("admin")>=0)?r.createElement("div",{key:o},n,t):r.createElement("div",{key:o},n):r.createElement("div",{key:o},t)})),fe=r.createElement("div",{className:"sounds"},fe));var de=[{keys:["x"],label:I18n.t("organism_appears_captive_cultivated")},{keys:["r"],label:I18n.t("mark_as_reviewed")},{keys:["c"],label:I18n.t("comment_"),skipBlind:!0},{keys:["a"],label:I18n.t("agree_with_observation_taxon"),skipBlind:!0},{keys:["i"],label:I18n.t("add_id")},{keys:["f"],label:I18n.t("add_to_favorites")},{keys:["z"],label:I18n.t("zoom_photo")},{keys:["SPACE"],label:I18n.t("play_first_sound")},{keys:["&larr;"],label:I18n.t("previous_observation")},{keys:["&rarr;"],label:I18n.t("next_observation")},{keys:["SHIFT","&larr;"],label:I18n.t("previous_tab")},{keys:["SHIFT","&rarr;"],label:I18n.t("next_tab")},{keys:["ALT/CMD","&larr;"],label:I18n.t("previous_photo")},{keys:["ALT/CMD","&rarr;"],label:I18n.t("next_photo")},{keys:["?"],label:I18n.t("show_keyboard_shortcuts")},{keys:["ALT/CMD","&uarr;"],label:I18n.t("increase_brightness")},{keys:["ALT/CMD","&darr;"],label:I18n.t("decrease_brightness")}],pe=r.createElement("tbody",null,de.map((function(e){return a&&e.skipBlind?null:t.defaultKeyboardShortcut(e)}))),me=G;a&&(me=[me[0]]);var ve=K;me.indexOf(ve)<0&&(ve=me[0]);var ye=[];"annotations"===ve&&(E.forEach((function(e){var t=h().filter(e.values,(function(e){return e.label}));M.taxon&&(t=h().filter(t,(function(e){return!e.taxon_ids||h().intersection(M.taxon.ancestor_ids,e.taxon_ids).length>0}))),t.forEach((function(t){var n=h().find(Ot.L,(function(n){return n.term===e.label&&t.label===n.value}));n&&ye.push({attributeLabel:e.label,valueLabel:t.label,keys:n.shortcut.split(" ")})}))})),ye.push({keys:["SHIFT","P"],label:I18n.t("add_to_project")}),ye.push({keys:["SHIFT","F"],label:I18n.t("add_observation_fields")}));var ge=h().find(M.places||[],(function(e){return 0===e.admin_level})),_e=I18n.t("unknown");return M.observed_on&&(_e=M.obscured&&!M.private_geojson?y()(M.observed_on).format(I18n.t("momentjs.month_year")):M.time_observed_at?(0,b.en)(M.time_observed_at,M.observed_time_zone):y()(M.observed_on).format("LL")),r.createElement(c.A,{show:re,onHide:F,bsSize:"large",backdrop:!0,className:"ObservationModal FullScreenModal ".concat(a?"blind":"")},r.createElement("div",{className:"nav-buttons"},x?null:r.createElement(l.A,{alt:I18n.t("previous_observation"),className:"nav-button",onClick:function(){return W()}},"\u2039"),x?null:r.createElement(l.A,{alt:I18n.t("next_observation"),className:"next nav-button",onClick:function(){return z()}},"\u203a"),r.createElement(l.A,{alt:I18n.t("close"),className:"close-button nav-button",onClick:F},"\xd7")),r.createElement("div",{className:"inner"},r.createElement("div",{className:"left-col"},r.createElement("div",{className:"obs-modal-header"},r.createElement("div",{className:"quality_grade pull-right ".concat(M.quality_grade)},"research"===M.quality_grade?I18n.t("research_grade"):"needs_id"===M.quality_grade?I18n.t("needs_id_"):I18n.t("casual_")),a?null:r.createElement(ne.A,{taxon:M.taxon,url:"/observations/".concat(M.id),target:"_blank",placeholder:M.species_guess,user:w,noParens:!0})),r.createElement("div",{className:"obs-media"},se,fe),k?null:r.createElement("div",{className:"tools"},r.createElement("div",{className:"keyboard-shortcuts-container"},r.createElement(l.A,{bsStyle:"link",className:"btn-keyboard-shortcuts",onClick:function(e){return Z(N),e.preventDefault(),!1}},r.createElement("i",{className:"fa fa-keyboard-o"})),r.createElement(u.A,{placement:"top",show:N,container:$(".ObservationModal").get(0),target:function(){return $(".keyboard-shortcuts-container > .btn").get(0)},rootClose:!0,onHide:function(){return Z(!0)}},r.createElement(f.A,{title:I18n.t("keyboard_shortcuts"),id:"keyboard-shortcuts-popover"},r.createElement("table",null,0===ye.length?pe:r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:"default-shortcuts"},r.createElement("table",null,pe)),r.createElement("td",{className:"anno-shortcuts"},r.createElement("table",null,r.createElement("tbody",null,ye.map((function(e){if(e.label&&!e.attributeLabel)return t.defaultKeyboardShortcut(e);var n=h().snakeCase("add ".concat(e.attributeLabel," ").concat(e.valueLabel," annotation"));return r.createElement("tr",{className:"keyboard-shortcuts",key:"keyboard-shortcuts-".concat(n)},r.createElement("td",null,r.createElement("kbd",null,e.keys[0])," ",I18n.t("then_keybord_sequence")," ",r.createElement("kbd",null,e.keys[1])),r.createElement("td",null,I18n.t(n,{defaultValue:'Add "'.concat(e.attributeLabel,": ").concat(e.valueLabel,'" annotation')})))}))))))))))),r.createElement("div",{className:"action-tools"},a?null:r.createElement("div",{className:"btn btn-checkbox"},r.createElement(wt,null)),r.createElement(d.A,{placement:"top",trigger:["hover","focus"],delayShow:1e3,overlay:r.createElement(p.A,{id:"captive-btn-tooltip"},I18n.t("organism_appears_captive_cultivated")),container:$("#wrapper.bootstrap").get(0)},r.createElement("label",{className:"btn btn-link btn-checkbox ".concat(m?"checked":"")},r.createElement("input",{type:"checkbox",checked:m||!1,onChange:function(){X()}})," ",I18n.t("captive_cultivated"))),r.createElement(d.A,{placement:"top",delayShow:1e3,overlay:r.createElement(p.A,{id:"modal-reviewed-tooltip-".concat(M.id)},I18n.t("mark_as_reviewed")),container:$("#wrapper.bootstrap").get(0)},r.createElement("label",{className:"btn btn-link btn-checkbox ".concat(M.reviewedByCurrentUser||B?"checked":"")},r.createElement("input",{type:"checkbox",checked:M.reviewedByCurrentUser||B||!1,onChange:function(){Q()}}),I18n.t("reviewed")))))),r.createElement("div",{className:"right-col"},r.createElement("ul",{className:"inat-tabs"},me.map((function(e){var t=Y[e]||(0,b.xc)(h().snakeCase(e),{case:"upper",defaultValue:e});return r.createElement("li",{key:"obs-modal-tabs-".concat(e),className:ve===e?"active":""},me.length>1?r.createElement("button",{
type:"button",className:"btn btn-nostyle",onClick:function(t){return t.preventDefault(),g(e,{observation:M}),!1}},t):r.createElement("span",{className:"btn-nostyle active"},t))}))),r.createElement("div",{className:"sidebar"},me.indexOf("info")<0?null:r.createElement("div",{className:"inat-tab info-tab ".concat("info"===ve?"active":"")},r.createElement("div",{className:"info-tab-content",tabIndex:"-1"},r.createElement("div",{className:"info-tab-inner"},r.createElement("div",{className:"map-and-details"},e,r.createElement("div",{className:"details"},r.createElement("ul",null,!a&&M&&M.user&&r.createElement("li",{className:"user-obs-count"},r.createElement("a",{href:"/people/".concat(M.user.login),target:"_blank",rel:"noopener noreferrer",className:"user-link"},r.createElement("i",{className:"icon-person bullet-icon"})," ",r.createElement("span",{className:"login"},M.user.login)),!(M.obscured&&!M.private_geojson)&&r.createElement("span",null,r.createElement("span",{className:"separator"},"\u2022"),r.createElement("a",{href:"/observations?user_id=".concat(M.user.login,"&verifiable=any&place_id=any"),target:"_blank",rel:"noopener noreferrer"},r.createElement("i",{className:"fa fa-binoculars"})," ",I18n.toNumber(M.user.observations_count,{precision:0})))),r.createElement("li",null,r.createElement("i",{className:"fa fa-calendar bullet-icon"})," ",_e,M.observed_on&&M.obscured&&!M.private_geojson&&r.createElement("i",{className:"icon-icn-location-obscured",title:I18n.t("date_obscured_notice")})),r.createElement("li",null,r.createElement("i",{className:"fa fa-map-marker bullet-icon"})," ",M.place_guess||I18n.t("unknown")),M.positional_accuracy&&r.createElement("li",null,r.createElement("i",{className:"fa fa-circle-o bullet-icon"}),"".concat(I18n.t("label_colon",{label:I18n.t("acc")}))," ",I18n.toNumber(M.positional_accuracy,{precision:0})),r.createElement("li",null,r.createElement("i",{className:"fa fa-globe bullet-icon"})," ",ge&&I18n.t("places_name.".concat(h().snakeCase(ge.name)),{defaultValue:ge.name})||I18n.t("somewhere_on_earth")),M.application&&M.application.name&&r.createElement("li",null,r.createElement("a",{href:M.application.url},R.includes(M.application.id)?r.createElement("img",{className:"app-thumbnail",src:M.application.icon,alt:M.application.name}):r.createElement("i",{className:"fa fa-cloud-upload bullet-icon"}),r.createElement("span",{className:"name"},M.application.name))),a?null:r.createElement("li",{className:"view-follow"},r.createElement("a",{className:"permalink",href:"/observations/".concat(M.id),target:"_blank",rel:"noopener noreferrer"},r.createElement("i",{className:"icon-link-external bullet-icon"}),I18n.t("view")),M.user&&M.user.id===w.id?null:r.createElement("div",{style:{display:"inline-block"}},r.createElement("span",{className:"separator"},"\u2022"),r.createElement(gt,{observation:M,btnClassName:"btn btn-link"})))),void 0!==I&&void 0!==D&&r.createElement("div",null,r.createElement("label",{className:"zoom-level-lock-control"},r.createElement("input",{type:"checkbox",defaultChecked:D,onChange:function(e){return q(e.target.checked)}}),I18n.t("lock_zoom_level"))))),a?null:r.createElement(be.A,{text:M.description,truncate:200,className:"observation-description"}),r.createElement(C,{observation:M,currentUserID:w.id}),r.createElement("center",{className:T?"loading":"loading collapse"},r.createElement("div",{className:"big loading_spinner"})),r.createElement(H,{key:"comment-form-obs-".concat(M.id),observation:M,className:_?"":"collapse"}),r.createElement(ee,{key:"identification-form-obs-".concat(M.id),observation:M,className:S?"":"collapse"}))),r.createElement("div",{className:"tools"},r.createElement(l.A,{bsStyle:"default",onClick:function(){return i()}},r.createElement("i",{className:"icon-identification"})," ",I18n.t("add_id")),r.createElement(l.A,{bsStyle:"default",className:"comment-btn",onClick:function(){return o()}},r.createElement("i",{className:"fa fa-comment"})," ",I18n.t("comment_")))),me.indexOf("suggestions")<0?null:r.createElement("div",{className:"inat-tab suggestions-tab ".concat("suggestions"===ve?"active":"")},r.createElement(rt,{chooseTaxon:v,updateSuggestionSession:te})),me.indexOf("annotations")<0?null:r.createElement("div",{className:"inat-tab annotations-tab ".concat("annotations"===ve?"active":""),tabIndex:"-1"},r.createElement(st,null),r.createElement(ht,null),r.createElement(ft,null)),me.indexOf("data-quality")<0?null:r.createElement("div",{className:"inat-tab data-quality-tab ".concat("data-quality"===ve?"active":""),tabIndex:"-1"},r.createElement(lt,null))))))}}],o&&kt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);Nt.propTypes={addComment:i().func,addIdentification:i().func,blind:i().bool,brightnesses:i().object,captiveByCurrentUser:i().bool,chooseSuggestedTaxon:i().func,chooseTab:i().func,commentFormVisible:i().bool,controlledTerms:i().array,currentUser:i().object,decreaseBrightness:i().func,hidePrevNext:i().bool,hideTools:i().bool,identificationFormVisible:i().bool,images:i().array,imagesCurrentIndex:i().number,increaseBrightness:i().func,keyboardShortcutsShown:i().bool,loadingDiscussionItem:i().bool,mapZoomLevel:i().number,mapZoomLevelLocked:i().bool,observation:i().object,officialAppIds:i().array,onClose:i().func.isRequired,onMapZoomChanged:i().func,resetBrightness:i().func,reviewedByCurrentUser:i().bool,setImagesCurrentIndex:i().func,setMapZoomLevelLocked:i().func,showNextObservation:i().func,showPrevObservation:i().func,tab:i().string,tabs:i().array,tabTitles:i().object,toggleCaptive:i().func,toggleKeyboardShortcuts:i().func,toggleReviewed:i().func,updateCurrentUser:i().func,updateSuggestionSession:i().bool,visible:i().bool},Nt.defaultProps={brightnesses:{},controlledTerms:[],imagesCurrentIndex:0,tabs:it.DF,tabTitles:{},updateSuggestionSession:!0};var Tt=Nt},60166:function(e,t,n){"use strict";function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}function d(e,t,n){return t=m(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(23539),s=n.n(a),c=n(42395),v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.setMapFromProps()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.static,r=t.reloadKey;n||(r||(0,c.HO)(this.props))!==(e.reloadKey||(0,c.HO)(e))&&(this.setMapFromProps(),"undefined"!=typeof google&&google.maps.event.trigger($(s().findDOMNode(this)).data("taxonMap"),"resize"))}},{key:"setMapFromProps",value:function(){$(s().findDOMNode(this)).taxonMap(this.props)}},{key:"render",value:function(){var e=this.props.className;return r.createElement("div",{className:"TaxonMap ".concat(e),style:{minHeight:"10px"}})}}])&&u(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);v.propTypes={className:i().string,reloadKey:i().string,static:i().bool},t.A=v},15292:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===a?Object.assign({},e,t.brightnesses):e}function c(e){return{type:a,brightnesses:e}}function l(e){var t=e&&e.observation,n=e&&e.imagesCurrentIndex;return"".concat(t.id,"-").concat(n)}function u(e,t,n){return Object.assign({},e,(r={},a=n,(o=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(o=t))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r));var r,o,a}function f(){return function(e,t){var n=t(),r=n.currentObservation,i=n.brightnesses,a=l(r),s=i[a]||1,f=o().round(s+.2,2);f>3&&(f=3),e(c(u(i,a,f)))}}function d(){return function(e,t){var n=t(),r=n.currentObservation,i=n.brightnesses,a=l(r),s=i[a]||1,f=o().round(s-.2,2);f<.2&&(f=.2),e(c(u(i,a,f)))}}function p(){return function(e,t){var n=t(),r=n.currentObservation;e(c(u(n.brightnesses,l(r),1)))}}n.d(t,{Ay:function(){return s},Rh:function(){return p},s:function(){return d},s2:function(){return f}});var r=n(16154),o=n.n(r),a="set_brightnesses"},22702:function(e,t,n){"use strict";function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:{source:"observations",order_by:"default"},loading:!1,response:{results:[]},responseQuery:null,detailTaxon:null,detailPhotoIndex:0,observation:null},t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case p:break;case m:n.loading=!0,n.response.results=[],n.detailTaxon=null;break;case h:n.loading=!1;break;case v:n.query=t.query||{};break;case y:n.response=t.suggestions,n.responseQuery=e.query,n.detailTaxon=null;break;case b:n.detailTaxon=t.taxon,t.options&&(n.detailPhotoIndex=t.options.detailPhotoIndex);break;case g:var r=t.observation,o=t.config,i=r.uuid===e.query.featured_observation_uuid||r.id===e.query.featured_observation_id,s=r.taxon&&e.query.taxon_id!==r.taxon.id;if(n.query={source:e.query.source,order_by:e.query.order_by},o&&o.currentUser&&(o.currentUser.preferred_suggestions_sort&&(n.query.order_by=o.currentUser.preferred_suggestions_sort),o.currentUser.preferred_suggestions_source&&(n.query.source=o.currentUser.preferred_suggestions_source)),r&&i&&!s)n.query=Object.assign(n.query,{taxon:e.query.taxon,taxon_id:e.query.taxon_id,place:e.query.place,place_id:e.query.place_id});else{if(r.taxon){var l=r.taxon.ancestor_ids.indexOf(r.taxon.id);l<0&&(l=r.taxon.ancestor_ids.length),10===r.taxon.rank_level?n.query.taxon_id=r.taxon.ancestor_ids[Math.max(l-1,0)]:r.taxon.rank_level<10?n.query.taxon_id=r.taxon.ancestor_ids[Math.max(l-2,0)]:n.query.taxon_id=r.taxon.id}else n.query.taxon_id=null,n.query.taxon=null;var u;if(u=r.private_place_ids&&r.private_place_ids.length>0?r.private_place_ids:r.place_ids,r.places){var f=a().sortBy(r.places,(function(e){return e.bbox_area})).find((function(e){return null!==e.admin_level&&e.admin_level<30}));f&&(n.query.place_id=f.id,n.query.place=f,n.query.defaultPlace=f)}else u&&u.length>0&&(n.query.place_id=u[u.length-1])}n.detailTaxon=null,n.detailPhotoIndex=0,n.observation=r,n.query.featured_observation_id=r.id,n.query.featured_observation_uuid=r.uuid;break;case c.HC:if(t.updates.places){var d=a().sortBy(t.updates.places,(function(e){return e.bbox_area})).find((function(e){return null!==e.admin_level&&e.admin_level<30}));d&&(n.query.place_id=d.id,n.query.place=d,n.query.defaultPlace=d)}}return n}function O(){return{type:h}}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var i=r(),a=i.config.testingApiV2,c=f(f({},i.suggestions.query),e);if(e.place&&!e.place_id&&(c.place_id=e.place.id),e.taxon&&!e.taxon_id&&(c.taxon_id=e.taxon.id),e.taxon_id&&!e.taxon&&i.suggestions.observation&&i.suggestions.observation.taxon&&i.suggestions.observation.taxon.id===e.taxon_id&&(c.taxon=i.suggestions.observation.taxon),e.taxon_id&&!e.taxon){var l={};a&&(l.fields=f(f({},_),{},{ancestors:_})),o().taxa.fetch(e.taxon_id,l).then((function(e){e.results[0]&&n(x({taxon:e.results[0],defaultTaxon:e.results[0]}))}))}if(e.place_id&&!e.place){var u={no_geom:!0};a&&(u.fields={admin_level:!0,id:!0,uuid:!0,name:!0,display_name:!0,place_type:!0}),o().places.fetch(e.place_id,u).then((function(e){e.results[0]&&n(x({place:e.results[0]}))}))}n(function(e){return{type:v,query:e}}(c)),t.updateSuggestionSession&&(n((0,s.qO)({preferred_suggestions_sort:c.order_by||null})),n((0,s.qO)({preferred_suggestions_source:c.source||null})))}}function k(e){return{type:b,taxon:e,options:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}}function S(e){return function(t,n){var r=n();t({type:g,observation:e,config:r.config})}}function A(e){var t=a().pick(e,["place_id","taxon_id","source","order_by","featured_observation_id"]);return t.taxon_id&&t.taxon_id===LIFE_TAXON.id&&(t=a().omit(t,"taxon_id")),t}function j(){return{type:p}}function C(e){return function(t,n){var r=n(),i=r.config.testingApiV2,s={};if(s=e&&a().keys(e).length>0?e:r.suggestions.query,0===a().keys(s).length)return null;if(i&&(s.featured_observation_id=s.featured_observation_uuid),a().isEqual(A(r.suggestions.responseQuery))&&r.suggestions.response.results.length>0)return null;if("misidentifications"===s.source&&!s.taxon_id)return null;t(x(s)),t({type:m});var c=A(s),l=Object.assign({},c,{locale:I18n.locale});if(i&&(l.fields={taxon:Object.assign({},_,{taxon_photos:{photo:E},representative_photo:E})}),"visual"===l.source){var u=r.suggestions.observation.photos[0];if(!u)return null;l.image_url=u.photoUrl("medium"),l.include_representative_photos=!0,r.suggestions.observation.geojson&&(l.lat=r.suggestions.observation.geojson.coordinates[1],l.lng=r.suggestions.observation.geojson.coordinates[0])}return o().taxa.suggest(a().omitBy(l,a().isNull)).then((function(e){var r=n().suggestions.query;a().isEqual(A(r),c)&&(t(O()),t(function(e){return{type:y,suggestions:e}}(e)))})).catch((function(e){t(O()),alert(e)}))}}function P(){return function(e,t){var n=t().suggestions.detailTaxon;if(n){var r={};t().config.testingApiV2&&(r.fields=Object.assign({},_,{wikipedia_summary:!0,ancestors:_,children:_,taxon_photos:{photo:E}})),o().taxa.fetch(n.id,r).then((function(t){e(k(t.results[0]))})).catch((function(e){return alert(e)}))}}}n.d(t,{Ay:function(){return w},Gp:function(){return P},_E:function(){return C},aV:function(){return k},cL:function(){return j},ej:function(){return S},oR:function(){return x}});var r=n(64165),o=n.n(r),i=n(16154),a=n.n(i),s=n(70602),c=n(67441),p="observations-identify/suggestions/RESET",m="observations-identify/suggestions/START_LOADING",h="observations-identify/suggestions/STOP_LOADING",v="observations-identify/suggestions/SET_QUERY",y="observations-identify/suggestions/SET_SUGGESTIONS",b="observations-identify/suggestions/SET_DETAIL_TAXON",g="observations-identify/suggestions/UPDATE_WITH_OBSERVATION",_={ancestor_ids:!0,id:!0,name:!0,rank:!0,rank_level:!0,iconic_taxon_name:!0,is_active:!0,preferred_common_name:!0},E={attribution:!0,id:!0,license_code:!0,medium_url:!0,original_dimensions:"all",url:!0}},3197:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(16154),o=n.n(r),i=n(6738),a=n(71800),s=n(15292),c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,i.bind)(e,(function(){return n(t()),r.callback&&r.callback(),!1}),r.eventType)},l=[{shortcut:"l a",term:"Life Stage",value:"Adult"},{shortcut:"l j",term:"Life Stage",value:"Juvenile"},{shortcut:"l t",term:"Life Stage",value:"Teneral"},{shortcut:"l p",term:"Life Stage",value:"Pupa"},{shortcut:"l n",term:"Life Stage",value:"Nymph"},{shortcut:"l l",term:"Life Stage",value:"Larva"},{shortcut:"l s",term:"Life Stage",value:"Subimago"},{shortcut:"l e",term:"Life Stage",value:"Egg"},{shortcut:"p u",term:"Flowers and Fruits",value:"Flower Buds"},{shortcut:"p l",term:"Flowers and Fruits",value:"Flowers"},{shortcut:"p r",term:"Flowers and Fruits",value:"Fruits or Seeds"},{shortcut:"p n",term:"Flowers and Fruits",value:"No Flowers or Fruits"},{shortcut:"v n",term:"Leaves",value:"No Live Leaves"},{shortcut:"v b",term:"Leaves",value:"Breaking Leaf Buds"},{shortcut:"v g",term:"Leaves",value:"Green Leaves"},{shortcut:"v c",term:"Leaves",value:"Colored Leaves"},{shortcut:"s f",term:"Sex",value:"Female"},{shortcut:"s m",term:"Sex",value:"Male"},{shortcut:"s c",term:"Sex",value:"Cannot Be Determined"},{shortcut:"a a",term:"Alive or Dead",value:"Alive"},{shortcut:"a d",term:"Alive or Dead",value:"Dead"},{shortcut:"a c",term:"Alive or Dead",value:"Cannot Be Determined"},{shortcut:"e o",term:"Evidence of Presence",value:"Organism"},{shortcut:"e f",term:"Evidence of Presence",value:"Feather"},{shortcut:"e s",term:"Evidence of Presence",value:"Scat"},{shortcut:"e t",term:"Evidence of Presence",value:"Track"},{shortcut:"e b",term:"Evidence of Presence",value:"Bone"},{shortcut:"e m",term:"Evidence of Presence",value:"Molt"},{shortcut:"e g",term:"Evidence of Presence",value:"Gall"},{shortcut:"e e",term:"Evidence of Presence",value:"Egg"},{shortcut:"e h",term:"Evidence of Presence",value:"Hair"},{shortcut:"e l",term:"Evidence of Presence",value:"Leafmine"},{shortcut:"e c",term:"Evidence of Presence",value:"Construction"}],u=function(){$(".CommentForm,.IdentificationForm").not(".collapse").find("textarea,input:visible").first().focus()},f=function(){setTimeout((function(){$(".Projects .panel-collapse").not("[aria-expanded=false]").find(".ac-chooser input").first().focus()}),200)},d=function(){setTimeout((function(){$(".ObservationFields .panel-collapse").not("[aria-expanded=false]").find(".ac-chooser input").first().focus()}),200)};t.A=function(e){c("right",a.Rs,e,{eventType:"keyup"}),c("left",a.Zu,e,{eventType:"keyup"}),c("i",a.QQ,e,{callback:u}),c("c",a.BC,e,{callback:u}),c("x",a.fD,e,{eventType:"keyup"}),c("r",a.ii,e,{eventType:"keyup"}),c("a",a.I4,e,{eventType:"keyup"}),c("z",a.pK,e),c("space",a.g_,e,{eventType:"keydown"}),c("f",a.pe,e),c(["command+left","alt+left"],a.lV,e),c(["command+right","alt+right"],a.nc,e),c("shift+left",a.kr,e),c("shift+right",a.u4,e),c(["command+up","alt+up"],s.s2,e),c(["command+down","alt+down"],s.s,e),c("shift+p",a.su,e,{callback:f}),c("shift+f",a.PO,e,{callback:d}),o().forEach(l,(function(t){(0,i.bind)(t.shortcut,(function(){return e((0,a.iC)(t.term,t.value)),!1}))})),c("?",a.PU,e)}},37797:function(e,t,n){"use strict";var r=n(16154),o=n.n(r),i=n(71800),a=function(e,t,n){var r,i=o().cloneDeep(t);return(r="Identification"===e.className?o().find(i.identifications,(function(t){return t.id===e.id||e.uuid&&e.uuid===t.uuid})):o().find(i.comments,(function(t){return t.id===e.id||e.uuid&&e.uuid===t.uuid})))&&(r.loading=n),i};t.A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tab:"info"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.dL:return Object.assign({},e,{visible:!0,observation:t.observation,commentFormVisible:!1,identificationFormVisible:!1,captiveByCurrentUser:t.observation.captiveByCurrentUser,reviewedByCurrentUser:t.observation.reviewedByCurrentUser,imagesCurrentIndex:0});case i.o4:return Object.assign({},e,{visible:!1});case i.VK:var n=o().cloneDeep(t.observation);return n.captiveByCurrentUser=t.captiveByCurrentUser,n.reviewedByCurrentUser=t.reviewedByCurrentUser,Object.assign({},e,{observation:n,captiveByCurrentUser:t.captiveByCurrentUser,reviewedByCurrentUser:t.reviewedByCurrentUser,loadingDiscussionItem:!1,currentUserIdentification:t.currentUserIdentification,keyboardShortcutsShown:!1});case i.HC:return t.observation_id&&t.observation_id!==e.observation.id?e:Object.assign({},e,{observation:Object.assign({},e.observation,t.updates)},t.updates);case i.MG:return Object.assign({},e,{commentFormVisible:!0,identificationFormVisible:!1});case i.JJ:return Object.assign({},e,{identificationFormVisible:!0,commentFormVisible:!1});case i.uv:return Object.assign({},e,{observation:t.item?a(t.item,e.observation,!0):e.observation,loadingDiscussionItem:!0,identificationFormVisible:!1,commentFormVisible:!1});case i.LM:return Object.assign({},e,{observation:t.item?a(t.item,e.observation,!1):e.observation,loadingDiscussionItem:!1,identificationFormVisible:!1,commentFormVisible:!1});case i.pH:return Object.assign({},e,{agreeingWithObservation:!0});case i.os:return Object.assign({},e,{agreeingWithObservation:!1});case i.GY:return Object.assign({},e,{observation:null});default:return e}}},76014:function(e,t,n){"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A2:function(){return p},e1:function(){return m}});var r=n(16154),o=n.n(r),i=n(75200),a=n(36173),f={reviewed:!1,quality_grade:"needs_id",page:1,per_page:30,iconic_taxa:[],order_by:"id",order:"desc",dateType:"any",createdDateType:"any",spam:!1},d=["dateType","createdDateType","force"],p=function(e){var t={};return o().forEach(e,(function(e,n){if(o().startsWith(n,"field:")||null!=e&&("string"!=typeof e||0!==e.length)){var r=e;"true"===r?r=!0:"false"===r&&(r=!1),"string"==typeof r&&r.match(/^\d+$/)&&(r=parseInt(r,10)),"month"!==n||Array.isArray(r)?"string"==typeof r&&r.split(",").length>1&&(r=r.split(",")):r=r.toString().split(",").map((function(e){return parseInt(e,10)})),"iconic_taxa"===n&&"string"==typeof r&&(r=[r]),t[n]=r}})),t.dateType||(t.on?t.dateType="exact":t.d1||t.d2?t.dateType="range":t.month&&(t.dateType="month")),t.createdDateType||(t.created_on?t.createdDateType="exact":t.created_d1||t.created_d2?t.createdDateType="range":t.created_month&&(t.createdDateType="month")),!t.without_term_value_id||t.term_id||t.term_id_or_unknown||delete t.without_term_value_id,t.without_term_value_id&&t.term_id&&t.without_term_id&&t.term_id===t.without_term_id&&delete t.without_term_id,delete t.test,t},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return o().forEach(e,(function(e,t){d.indexOf(t)>=0||Array.isArray(e)&&0===e.length||(n[t]=e)})),"exact"===e.dateType?(delete n.d1,delete n.d2,delete n.month):"range"===e.dateType?(delete n.on,delete n.month):"month"===e.dateType?(delete n.d1,delete n.d2,delete n.on):(delete n.on,delete n.d1,delete n.d2,delete n.month),"exact"===e.createdDateType?(n.createdDateType="exact",delete n.created_d1,delete n.created_d2,delete n.created_month):"range"===e.createdDateType?(n.createdDateType="range",delete n.created_on,delete n.created_month):"month"===e.createdDateType?(n.createdDateType="month",delete n.created_d1,delete n.created_d2,delete n.created_on):(delete n.createdDateType,delete n.created_on,delete n.created_d1,delete n.created_d2,delete n.created_month),t.forURL||o().has(n,"with_private_location")&&("false"===n.with_private_location.toString()&&(n.geoprivacy="open,obscured",n.taxon_geoprivacy="open,obscured"),delete n.with_private_location),n};t.Ay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:f,params:f},t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case a.jW:n={default:l({},e.default),params:l({},t.params)};break;case a.uq:case a.gp:n={default:l({},e.default),params:l(l({},e.params),t.params)};break;case i.GY:n={default:l({},e.default),params:l(l({},e.params),{},{page:t.page,per_page:t.perPage})};break;case a.hS:var r=l(l({},e.default),t.params);n={default:r,params:l(l({},r),e.params)};break;default:return e}return n.params.captive&&!e.params.captive?n.params.quality_grade="casual":e.params.quality_grade.indexOf("needs_id")<0&&e.params.quality_grade.indexOf("research")<0&&(n.params.quality_grade.indexOf("needs_id")>=0||n.params.quality_grade.indexOf("research")>=0)&&delete n.params.captive,n.params=p(n.params),o().isEqual(e.params,n.params)?e:(t.type===a.gp||t.type===a.hS||function(e,t){var n={},r=$.deparam.querystring();if(o().forEach(m(e,{forURL:!0}),(function(e,r){void 0!==t[r]&&t[r]===e||(Array.isArray(e)?n[r]=e.join(","):n[r]=e)})),!e.place_id&&t.place_id&&(n.place_id="any"),!o().isEqual(r,n)){var i="Identify: ".concat($.param(n)),a=[window.location.origin,window.location.pathname,o().isEmpty(n)?"":"?",o().isEmpty(n)?"":$.param(n)].join("");history.pushState(n,i,a)}}(n.params,n.default),n)}},67209:function(e,t,n){"use strict";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(23539),s=n.n(a),c=n(91771),l=n.n(c),u=n(47452),f=n(59659),d=n(24561),_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.onDisagree,o=e.onBestGuess,i=e.onClose,a=e.onCancel,c=e.newTaxon,p=e.oldTaxon,m=e.backdrop,h=e.config,v=r.createRef(),y=l().renderToString(r.createElement(d.A,{taxon:c,user:h.currentUser})),b=l().renderToString(r.createElement(d.A,{taxon:p,user:h.currentUser}));return r.createElement(u.A,{show:t,className:"DisagreementAlert",backdrop:m,onHide:function(){a(),i()},onEntered:function(){$(s().findDOMNode(v.current)).focus()}},r.createElement(u.A.Header,{closeButton:!0},r.createElement(u.A.Title,null,I18n.t("potential_disagreement"))),r.createElement(u.A.Body,null,r.createElement("p",{dangerouslySetInnerHTML:{__html:I18n.t("is_the_evidence_provided_enough_to_confirm_this_is_taxon",{taxon:b})}}),r.createElement(f.A,{bsStyle:"success",className:"btn-block stacked",onClick:function(){o(),i()},ref:v,dangerouslySetInnerHTML:{__html:I18n.t("i_dont_know_but_i_am_sure_this_is_taxon",{taxon:y})}}),r.createElement(f.A,{bsStyle:"warning",className:"btn-block",onClick:function(){n(),i()},dangerouslySetInnerHTML:{__html:I18n.t("no_but_it_is_a_member_of_taxon",{taxon:y})}})))}}])&&m(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);_.propTypes={visible:i().bool,onClose:i().func,onCancel:i().func,onDisagree:i().func,onBestGuess:i().func,newTaxon:i().object,oldTaxon:i().object,backdrop:i().bool,config:i().object},_.defaultProps={onCancel:function(){return!0},config:{}},t.A=_},28193:function(e,t,n){"use strict";n.d(t,{Mu:function(){return i},tw:function(){return a}});var r="show_disagreement_alert",o="hide_disagreement_alert",i=function(){return{type:r,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},a=function(){return{type:o}};t.Ay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{visible:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===r?Object.assign({visible:!0},t.options):t.type===o?Object.assign({},e,{visible:!1}):e}},82272:function(e,t,n){"use strict";function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,
configurable:!0,writable:!0}):e[t]=n,e}function h(e){return e&&e.config&&e.config.currentUser&&(e.observation||e.currentObservation&&e.currentObservation.observation)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(o){n.error&&o((0,c.t6)(n.error,n.errorMessage||I18n.t("failed_to_save_record"))),n.actionTime&&r!==n.actionTime||!e||(t(),n.callback&&n.callback())}}function y(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(a){var s,c=p({},i);c.actionTime=(s=(new Date).getTime(),r=s,s),t(n).then((function(){a(v(e,o,c))})).catch((function(t){c.error=t,a(v(e,o,c))}))}}function b(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(a,c){if(h(c())){var f=l.A.observationMissingProjectFields(e,t);i().isEmpty(f)||o.ignoreMissing?a(function(e,t,n,r){return function(o,a){var c=a();if(h(c)){var l=i().clone(e.project_observations);l.unshift({project:t,user_id:c.config.currentUser.id,user:c.config.currentUser,api_status:"saving"}),o(n({project_observations:l}));var u=c.config.testingApiV2,f={id:t.id,observation_id:e.id},d=s().projects.add;u&&(f={project_observation:{project_id:t.id,observation_id:e.uuid}},d=s().project_observations.create),o(y(e,d,f,r,{errorMessage:"Failed to add to project ".concat(t.title)}))}}}(e,t,n,r)):a((0,u.l)({show:!0,project:t,onSubmit:function(){a((0,u.l)({show:!1})),a(b(e,t,n,r,{ignoreMissing:!0}))}}))}}}function g(e,t,n,r){return function(o,a){var c=a();if(h(c)){var l=i().find(e.project_observations,(function(e){return e.project.id===t.id})),u=e.project_observations.filter((function(e){return e.project.id!==t.id}));if(o(n({project_observations:u})),c.config.testingApiV2)o(y(e,s().project_observations.delete,{id:l.uuid||l.id},r));else{var f={id:t.id,observation_id:e.id};o(y(e,s().projects.remove,f,r))}}}}function _(e,t,n,r){return function(n,o){h(o())&&t&&t.id&&n(y(e,s().projects.join,{id:t.id},r))}}function E(e,t,n,r){return function(o,a){var c=a();if(h(c)&&r.observationField){var l=c.config.testingApiV2,u=i().clone(e.ofvs);u.unshift({datatype:r.observationField.datatype,name:r.observationField.name,value:r.value,observation_field:r.observationField,api_status:"saving",taxon:r.taxon}),o(t({ofvs:u}));var f={observation_field_value:{observation_field_id:r.observationField.id,observation_id:l?e.uuid:e.id,value:r.value}};o(y(e,s().observation_field_values.create,f,n,{callback:function(){var e=l?{fields:"all"}:{};s().users.recent_observation_fields(e).then((function(e){RECENT_OBSERVATION_FIELDS=e.results}))}}))}}}function w(e,t,n,r,o){return function(i,a){var c=a();if(h(c)&&o.observationField){var l=c.config.testingApiV2,u=e.ofvs.map((function(e){return e.uuid===t?{datatype:o.observationField.datatype,name:o.observationField.name,value:o.value,observation_field:o.observationField,api_status:"saving",taxon:o.taxon}:e}));i(n({ofvs:u}));var f={uuid:t,observation_field_value:{observation_field_id:o.observationField.id,observation_id:l?e.uuid:e.id,value:o.value}};i(y(e,s().observation_field_values.update,f,r))}}}function O(e,t,n,r){return function(o,i){var a=i();if(h(a)){var c=e.ofvs.map((function(e){return e.uuid===t?p(p({},e),{},{api_status:"deleting"}):e}));o(n({ofvs:c})),o(y(e,s().observation_field_values.delete,{id:t},r,{callback:function(){var e=a.config.testingApiV2?{fields:"all"}:{};s().users.recent_observation_fields(e).then((function(e){RECENT_OBSERVATION_FIELDS=e.results}))}}))}}}n.d(t,{Tw:function(){return E},Y_:function(){return _},Yy:function(){return b},c7:function(){return O},lz:function(){return w},y3:function(){return g}});var r,o=n(16154),i=n.n(o),a=n(64165),s=n.n(a),c=n(99520),l=n(81171),u=n(34157)},84582:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{SZ:function(){return i}});var o="update_editor_content",i=function(e,t){return{type:o,editor:e,content:t}};t.Ay=function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return a.type===o?Object.assign({},i,(e={},t=a.editor,n=a.content,(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)):i}},41361:function(e,t,n){"use strict";function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function M(e){var t=function(e){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}function R(e,t,n){return t=L(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F()?Reflect.construct(t,n||[],L(e).constructor):t.apply(e,n))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}n.d(t,{A:function(){return H}});var r=n(24577),o=n(995),i=n.n(o),a=n(23539),s=n.n(a),c=n(91771),l=n.n(c),u=n(16154),f=n.n(u),d=n(29691),p=n(24248),m=n(16414),h=n(13173),v=n(46281),y=n.n(v),b=n(24561),g=n(55077),_=n(60905),E=n(15872),w=n(16447),O=n(63039),x=n(52717),k=function(e){var t=e.item,n=e.config,o=e.deleteComment,i=e.withdrawID,a=e.editing,s=e.restoreID,c=e.setFlaggingModalState,l=e.linkTarget,u=e.observation,d=e.onEdit,p=e.trustUser,m=e.untrustUser,h=e.hideContent,v=e.unhideContent,y=e.performOrOpenConfirmationModal;if(!t)return r.createElement("div",null);if(t.api_status)return r.createElement("div",{className:"ActivityItemMenu"},r.createElement("div",{className:"loading_spinner"}));var b=!!t.taxon,g=[],_=n&&n.currentUser?n.currentUser:null,E=_&&_.id===t.user.id,w=_&&_.roles&&(_.roles.indexOf("admin")>=0||_.roles.indexOf("curator")>=0),k=_&&_.roles&&_.roles.indexOf("admin")>=0,S=f().first(f().orderBy(t.moderator_actions||[],"created_at","desc")),A=S&&"hide"===S.action&&w&&S.user&&_.id===S.user.id;if(b){E?(t.hidden||g.push(r.createElement(O.A,{key:"id-edit-".concat(t.uuid),eventKey:"edit",href:"/identifications/".concat(t.uuid,"/edit"),onClick:d,target:l,rel:"_blank"===l?"noopener noreferrer":null},a?I18n.t("stop_editing"):I18n.t("edit"))),t.current?g.push(r.createElement(O.A,{key:"id-withdraw-".concat(t.uuid),eventKey:"withdraw"},I18n.t("withdraw"))):g.push(r.createElement(O.A,{key:"id-restore-".concat(t.uuid),eventKey:"restore"},I18n.t("restore")))):_&&(g.push(r.createElement(O.A,{key:"id-flag-".concat(t.uuid),eventKey:"flag"},I18n.t("flag"))),w&&!t.hidden&&g.push(r.createElement(O.A,{key:"identification-hide-".concat(t.uuid),eventKey:"hide-identification"},I18n.t("hide_content"))),(k||A)&&t.hidden&&g.push(r.createElement(O.A,{key:"identification-unhide-".concat(t.uuid),eventKey:"unhide-identification"},I18n.t("unhide_content")))),t.flags&&t.flags.length>0&&g.push(r.createElement(O.A,{key:"id-view-flags-".concat(t.uuid),eventKey:"view-flags-for-identification"},I18n.t("view_flags")," ",r.createElement("span",{className:"text-muted"},"(".concat(t.flags.length,")"))));var j=[];_&&j.push(r.createElement("div",{className:"search",key:"id-search-you-".concat(t.uuid)},r.createElement("a",{href:"/observations?taxon_id=".concat(t.taxon.id,"&user_id=").concat(_.id),target:l,rel:"_blank"===l?"noopener noreferrer":null},r.createElement("i",{className:"fa fa-arrow-circle-o-right"}),r.createElement("span",{className:"menu-item-label"},I18n.t("you_"))))),_&&_.id===t.user.id||j.push(r.createElement("div",{className:"search",key:"id-search-user-".concat(t.uuid)},r.createElement("a",{href:"/observations?taxon_id=".concat(t.taxon.id,"&user_id=").concat(t.user.id),target:l,rel:"_blank"===l?"noopener noreferrer":null},r.createElement("i",{className:"fa fa-arrow-circle-o-right"}),r.createElement("span",{className:"menu-item-label"},t.user.login)))),j.push(r.createElement("div",{className:"search",key:"id-search-all-".concat(t.uuid)},r.createElement("a",{href:"/observations?taxon_id=".concat(t.taxon.id),target:l,rel:"_blank"===l?"noopener noreferrer":null},r.createElement("i",{className:"fa fa-arrow-circle-o-right"}),r.createElement("span",{className:"menu-item-label"},I18n.t("everyone_"))))),f().isEmpty(g)||g.push(r.createElement(O.A,{divider:!0,key:"id-menu-divider-".concat(t.uuid)})),g.push(r.createElement("li",{key:"id-menu-links-".concat(t.uuid),className:"search-links"},r.createElement("div",{className:"text-muted"},I18n.t("label_colon",{label:I18n.t("view_observations_of_this_taxon_by")})),j)),_&&(g.push(r.createElement(O.A,{divider:!0,key:"id-identify-menu-divider-".concat(t.uuid)})),g.push(r.createElement("li",{key:"id-identify-menu-links-".concat(t.uuid),className:"search-links"},r.createElement("div",{className:"text-muted"},I18n.t("label_colon",{label:I18n.t("identify_observations")})),r.createElement("div",{className:"search"},r.createElement("a",{href:"/observations/identify?taxon_id=".concat(t.taxon.id),target:l,rel:"_blank"===l?"noopener noreferrer":null},r.createElement("i",{className:"fa fa-arrow-circle-o-right"}),r.createElement("span",{className:"menu-item-label"},I18n.t("of_this_taxon")))),r.createElement("div",{className:"search"},r.createElement("a",{href:"/observations/identify?user_id=".concat(t.user.login),target:l,rel:"_blank"===l?"noopener noreferrer":null},r.createElement("i",{className:"fa fa-arrow-circle-o-right"}),r.createElement("span",{className:"menu-item-label"},I18n.t("by_user",{user:t.user.login})))))))}else E&&!t.hidden?(g.push(r.createElement(O.A,{key:"comment-edit-".concat(t.uuid),eventKey:"edit",href:"/comments/".concat(t.uuid,"/edit"),onClick:d,target:l,rel:"_blank"===l?"noopener noreferrer":null},a?I18n.t("stop_editing"):I18n.t("edit"))),g.push(r.createElement(O.A,{key:"comment-delete-".concat(t.uuid),eventKey:"delete"},I18n.t("delete")))):_&&(g.push(r.createElement(O.A,{key:"comment-flag-".concat(t.uuid),eventKey:"flag"},I18n.t("flag"))),w&&!t.hidden&&g.push(r.createElement(O.A,{key:"comment-hide-".concat(t.uuid),eventKey:"hide-comment"},I18n.t("hide_content"))),(k||A)&&t.hidden&&g.push(r.createElement(O.A,{key:"comment-unhide-".concat(t.uuid),eventKey:"unhide-comment"},I18n.t("unhide_content"))));return t.flags&&t.flags.length>0&&g.push(r.createElement(O.A,{key:"comment-view-flags-".concat(t.uuid),eventKey:"view-flags-for-comment"},I18n.t("view_flags")," ",r.createElement("span",{className:"text-muted"},"(".concat(t.flags.length,")")))),p&&m&&_&&!E&&u&&u.user&&u.user.id===_.id&&(g.push(r.createElement(O.A,{divider:!0,key:"trust-divider-".concat(t.uuid)})),_.trusted_user_ids=_.trusted_user_ids||[],_.trusted_user_ids.indexOf(t.user.id)>=0?g.push(r.createElement(O.A,{key:"remove-trust-".concat(t.uuid),eventKey:"remove-trust",className:"search"},r.createElement("i",{className:"icon-person"}),I18n.t("stop_trusting_this_person_with_your_private_coordinates"))):g.push(r.createElement(O.A,{key:"add-trust-".concat(t.uuid),eventKey:"add-trust",className:"search"},r.createElement("i",{className:"icon-person"}),I18n.t("trust_this_person_with_your_private_coordinates"))),g.push(r.createElement("li",{key:"comment-delete-".concat(t.uuid),className:"search"},r.createElement("a",{href:"/relationships",target:"_blank",rel:"noopener noreferrer"},r.createElement("i",{className:"icon-people"}),I18n.t("manage_your_relationships"))))),r.createElement("div",{className:"ActivityItemMenu"},r.createElement("span",{className:"control-group"},r.createElement(x.A,{id:"grouping-control",onSelect:function(e){"flag"===e?y((function(){return c({item:t,show:!0})}),{permitOwnerOf:t}):"view-flags-for-comment"===e?window.open("/comments/".concat(t.uuid,"/flags"),"_blank","noopener,noreferrer"):"view-flags-for-identification"===e?window.open("/identifications/".concat(t.uuid,"/flags"),"_blank","noopener,noreferrer"):"add-trust"===e?p(t.user):"remove-trust"===e?m(t.user):"manage-relationships"===e?window.open("/relationships","_blank","noopener,noreferrer"):"withdraw"===e?i(t.uuid):"restore"===e?s(t.uuid):"delete"===e?o(t.uuid):"hide-comment"===e||"hide-identification"===e?h(t):"unhide-comment"!==e&&"unhide-identification"!==e||v(t)},disabled:f().isEmpty(g)},r.createElement(x.A.Toggle,{noCaret:!0},r.createElement("i",{className:"fa fa-chevron-down"})),r.createElement(x.A.Menu,{className:"dropdown-menu-right"},g))))};k.propTypes={item:i().object,observation:i().object,onEdit:i().func,config:i().object,deleteComment:i().func,withdrawID:i().func,editing:i().bool,restoreID:i().func,setFlaggingModalState:i().func,linkTarget:i().string,trustUser:i().func,untrustUser:i().func,hideContent:i().func,unhideContent:i().func,performOrOpenConfirmationModal:i().func};var S=k,A=n(81171),j=n(28439),C=n(96799),P=n(72081),N=function(e){var t=e.canSeeHidden,n=e.hideUserIcon,o=e.isID,i=e.item,a=e.showHidden,s=e.viewerIsActor;return r.createElement("div",{className:"ActivityItem"},n?null:r.createElement("div",{className:"icon"},r.createElement(_.A,{user:s?i.user:null})),r.createElement(h.A,{className:"moderator-hidden"},r.createElement(h.A.Heading,null,r.createElement(h.A.Title,null,r.createElement("span",{className:"title_text text-muted"},r.createElement("i",null,r.createElement(P.A,{key:"hidden-tooltip-".concat(i.uuid),item:i,itemType:o?"identifications":"comments"}))),t&&r.createElement("button",{href:"#",type:"button",className:"btn btn-default btn-xs",onClick:function(){return a()}},I18n.t("show_hidden_content"))))))};N.propTypes={canSeeHidden:i().bool,hideUserIcon:i().bool,isID:i().bool,item:i().object,showHidden:i().func,viewerIsActor:i().bool};var T=N,B=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=R(this,t,[e])).props.item;return n.isID=!!r.taxon,n.changeHandler=n.changeHandler.bind(n),n.state={editing:!1,textareaContent:r.body},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),n=t,o=[{key:"componentDidUpdate",value:function(){var e=s().findDOMNode(this);$("textarea",e).textcompleteUsers()}},{key:"onEdit",value:function(e){if(this.props.inlineEditing){var t=this.state.editing;e.preventDefault(),this.setState({editing:!t})}}},{key:"changeHandler",value:function(e){this.setState({textareaContent:e})}},{key:"editItemForm",value:function(){var e=this,t=this.props.item,n=this.state,o=n.textareaContent,i=n.editing;return r.createElement("div",{className:"form-group edit-comment-id"},r.createElement(C.A,{content:o,changeHandler:this.changeHandler,key:"comment-editor-".concat(t.uuid),placeholder:this.isID?I18n.t("tell_us_why"):I18n.t("leave_a_comment"),textareaClassName:"form-control",maxLength:5e3,showCharsRemainingAt:4e3,mentions:!0}),r.createElement("div",{className:"btn-group edit-form-btns"},r.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:function(){return e.updateItem()}},this.isID?I18n.t("save_identification"):I18n.t("save_comment")),r.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:function(){return e.setState({editing:!i})}},I18n.t("cancel")),this.isID&&r.createElement("button",{type:"button",className:"btn btn-link btn-sm pull-right",onClick:function(){return e.deleteIdentification()}},I18n.t("delete"))))}},{key:"updateItem",value:function(){var e=this.props,t=e.item,n=e.editComment,r=e.editID,o=this.state,i=o.textareaContent,a=o.editing;this.isID?r(t.uuid,i):n(t.uuid,i),this.setState({editing:!a})}},{key:"deleteIdentification",value:function(){var e=this.props,t=e.item,n=e.confirmDeleteID,r=this.state.editing;n(t.uuid),this.setState({editing:!r})}},{key:"isDisagreementWithHiddenIdent",value:function(){if(!this.isID)return!1;var e=this.props,t=e.item,n=e.observation;if(!n||!n.identifications||0===n.identifications.length)return!1;if(!t||!t.previous_observation_taxon_id||!t.disagreement)return!1;var r=n.identifications.filter((function(e){return e.hidden})),o=n.identifications.filter((function(e){return!e.hidden}));if(0===r.length)return!1;var i=function(e){return[e.taxon.id,e.taxon.ancestor_ids]},a=r.map(i).flat(1/0),s=o.map(i).flat(1/0);return a.includes(t.previous_observation_taxon_id)&&!s.includes(t.previous_observation_taxon_id)}},{key:"render",value:function(){var e=this,t=this.props,n=t.observation,o=t.item,i=t.config,a=t.deleteComment,s=t.restoreID,c=t.setFlaggingModalState,u=t.currentUserID,v=t.addID,O=t.linkTarget,x=t.hideUserIcon,k=t.hideAgree,C=t.hideCompare,N=t.hideDisagreement,I=t.hideCategory,D=t.hideMenu,M=t.noTaxonLink,R=t.onClickCompare,F=t.trustUser,L=t.untrustUser,U=t.showHidden,B=t.hideContent,H=t.unhideContent,V=t.withdrawID,q=t.performOrOpenConfirmationModal,z=this.state.editing;if(!o)return r.createElement("div",null);var W,K,G=o.taxon,Y=i&&i.currentUser,X=null==i?void 0:i.currentUserCanInteractWithResource(n),Z=i&&i.currentUser&&(i.currentUser.roles.indexOf("admin")>=0||i.currentUser.roles.indexOf("curator")>=0||i.currentUser.id===o.user.id),Q=i.currentUser&&o.user.id===i.currentUser.id,J="comment";if(o.hidden&&(!Z||!i.showHidden))return r.createElement(T,{canSeeHidden:Z,hideUserIcon:x,isID:this.isID,item:o,showHidden:U,viewerIsActor:Q});var ee=r.createElement(E.A,{className:"user",config:i,noInativersary:!0,target:O,uniqueKey:"ActivityItem-".concat(o.id),user:o.user});if(this.isID){J="identification";var te,ne=[],re=!1;Y&&o.current&&o.firstDisplay&&o.user.id!==i.currentUser.id&&o.taxon&&o.taxon.is_active&&(u?(re=u.taxon.id!==G.id,te=u.agreedTo&&u.agreedTo.uuid===o.uuid):re=!0),X&&o.firstDisplay&&!C&&ne.push(r.createElement("button",{key:"id-compare-".concat(o.uuid),type:"button",className:"btn btn-default btn-sm",onClick:function(e){return!R||R(e,G,n,{currentUser:i.currentUser})}},r.createElement("i",{className:"fa fa-exchange"})," ",I18n.t("compare"))),Y&&(re||te)&&!k&&ne.push(r.createElement("button",{type:"button",key:"id-agree-".concat(o.uuid),className:"btn btn-default btn-sm",onClick:function(){q((function(){v(G,{agreedTo:o})}))},disabled:te},te?r.createElement("div",{className:"loading_spinner"}):r.createElement("i",{className:"fa fa-check"})," ",I18n.t("agree_")));var oe,ie=r.createElement("div",{className:"buttons"},r.createElement("div",{className:"btn-space"},ne)),ae=A.A.taxonImage(G);K=[r.createElement("span",{dangerouslySetInnerHTML:{__html:o.taxon_change?I18n.t("inaturalist_updated_the_id_suggested_by_user",{user:l().renderToString(ee)}):I18n.t("user_suggested_an_id",{user:l().renderToString(ee)})},key:"ActivityItem-UserLink-".concat(o.id)})],o.disagreement&&!this.isDisagreementWithHiddenIdent()&&K.push(r.createElement("span",{key:"ActivityItem-disagree-".concat(o.id)},"*")),o.current||(J="withdrawn"),z?oe=this.editItemForm():o.body&&o.body.length>0&&(oe=r.createElement(g.A,{text:o.body,className:"id_body"})),W=r.createElement("div",{className:"identification"},ie,r.createElement("div",{className:"taxon"},M?ae:r.createElement("a",{href:"/taxa/".concat(G.id),target:O,rel:"_blank"===O?"noopener noreferrer":null},ae),r.createElement(b.A,{taxon:G,url:M?null:"/taxa/".concat(G.id),noParens:!0,target:O,user:i.currentUser,showMemberGroup:!0})),oe)}else o.hidden&&!Z||(K=[r.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("user_commented",{user:l().renderToString(ee)})},key:"ActivityItem-UserLink-".concat(o.id)})],W=z?this.editItemForm():r.createElement(g.A,{text:o.body}));var se=r.createElement(w.A,{config:i,key:"ActivityItem-iNativersary-".concat(o.uuid),user:o.user,uniqueKey:"ActivityItem-".concat(o.uuid)});se&&K.push(se);var ce,le,ue=y().parseZone(o.created_at).fromNow(),fe=[];if(f().filter(o.flags||[],(function(e){return!e.resolved})).length>0)ce="flagged",fe.push(r.createElement("span",{key:"flagged-".concat(o.uuid),className:"item-status"},r.createElement("a",{href:"/".concat(this.isID?"identifications":"comments","/").concat(o.uuid,"/flags"),rel:"nofollow noopener noreferrer",target:"_blank"},r.createElement("i",{className:"fa fa-flag"})," ",I18n.t("flagged_"))));else if(o.category&&o.current&&!I){var de,pe;"maverick"===o.category?(ce="maverick",de=r.createElement("span",{key:"maverick-".concat(o.uuid),className:"item-status ident-category"},r.createElement("i",{className:"fa fa-bolt"})," ",I18n.t("maverick")),pe=I18n.t("id_categories.tooltips.maverick")):"improving"===o.category?(ce="improving",de=r.createElement("span",{key:"improving-".concat(o.uuid),className:"item-status ident-category"},r.createElement("i",{className:"fa fa-trophy"})," ",I18n.t("improving")),pe=I18n.t("id_categories.tooltips.improving")):"leading"===o.category&&(ce="leading",de=r.createElement("span",{key:"leading-".concat(o.uuid),className:"item-status ident-category"},r.createElement("i",{className:"icon-icn-leading-id"})," ",I18n.t("leading")),pe=I18n.t("id_categories.tooltips.leading")),de&&fe.push(r.createElement(d.A,{key:"ident-category-tooltip-".concat(o.uuid),container:$("#wrapper.bootstrap").get(0),placement:"top",delayShow:200,overlay:r.createElement(p.A,{id:"tooltip-".concat(o.uuid)},pe)},de))}if(o.vision&&fe.push(r.createElement(d.A,{key:"itent-vision-".concat(o.uuid),container:$("#wrapper.bootstrap").get(0),trigger:"click",rootClose:!0,placement:"top",delayShow:200,overlay:r.createElement(m.A,{id:"vision-popover-".concat(o.uuid),title:I18n.t("computer_vision_suggestion")},I18n.t("computer_vision_suggestion_desc"))},r.createElement("span",{className:"vision-status"},r.createElement("i",{className:"icon-sparkly-label"})))),o.taxon&&!o.current&&fe.push(r.createElement("span",{key:"ident-withdrawn-".concat(o.uuid),className:"item-status"},r.createElement("i",{className:"fa fa-ban"})," ",I18n.t("id_withdrawn"))),o.hidden&&fe.push(r.createElement(P.A,{key:"hidden-tooltip-".concat(o.uuid),item:o,itemType:this.isID?"identifications":"comments",shrinkOnNarrowDisplays:!0})),o.taxon_change){var me,he={url:"/taxon_changes/".concat(o.taxon_change.id),target:O,class:"linky"};switch(o.taxon_change.type){case"TaxonSwap":me=I18n.t("added_as_a_part_of_a_taxon_swap_html",he);break;case"TaxonSplit":me=I18n.t("added_as_a_part_of_a_taxon_split_html",he);break;case"TaxonMerge":me=I18n.t("added_as_a_part_of_a_taxon_merge_html",he);break;default:me=I18n.t("added_as_a_part_of_a_taxon_change_html",he)}le=r.createElement("div",{className:"taxon-change"},r.createElement("i",{className:"fa fa-refresh"})," ",r.createElement("span",{dangerouslySetInnerHTML:{__html:me}}))}var ve,ye=Q?"by-current-user":"by-someone-else";if(o.disagreement&&!N&&!this.isDisagreementWithHiddenIdent()){var be=r.createElement(b.A,{taxon:o.previous_observation_taxon,url:(0,j.F$)(o.previous_observation_taxon),target:O,user:i.currentUser}),ge=I18n.t("user_disagrees_this_is_taxon",{user:l().renderToString(ee),taxon:l().renderToString(be)});ve=r.createElement("span",{className:"title_text",dangerouslySetInnerHTML:{__html:"* ".concat(ge)}})}if(o.implicitDisagreement){var _e=I18n.t("user_disagrees_with_previous_finer_identifications",{user:l().renderToString(ee)});ve=r.createElement("span",{className:"title_text",dangerouslySetInnerHTML:{__html:"* ".concat(_e)}})}var Ee=this.isID?"activity_identification_".concat(o.uuid):"activity_comment_".concat(o.uuid),we=this.isID?"/identifications/".concat(o.uuid):"/comments/".concat(o.uuid),Oe=r.createElement("time",{className:"time",dateTime:o.created_at,title:y()(o.created_at).format(I18n.t("momentjs.datetime_with_zone"))},r.createElement("a",{href:we,target:O,rel:"_blank"===O?"noopener noreferrer":null},ue));if(n&&n.obscured&&!n.private_geojson){var xe=n&&n.obscured&&!n.private_geojson,ke=i&&i.currentUser&&o.user&&o.user.id===i.currentUser.id;xe&&!ke&&(Oe=r.createElement("time",{className:"time"},r.createElement("i",{className:"icon-icn-location-obscured",title:I18n.t("date_obscured_notice")}),y()(o.created_at).format(I18n.t("momentjs.month_year_short"))))}var Se=D?null:r.createElement(S,{item:o,observation:n,onEdit:function(t){return e.onEdit(t)},editing:z,config:i,deleteComment:a,withdrawID:V,restoreID:s,setFlaggingModalState:c,linkTarget:O,trustUser:F,untrustUser:L,hideContent:B,unhideContent:H,performOrOpenConfirmationModal:q});return r.createElement("div",{id:Ee,className:"ActivityItem ".concat(J," ").concat(ye)},x?null:r.createElement("div",{className:"icon"},(!o.hidden||Z||Q)&&r.createElement(_.A,{user:o.user,linkTarget:O})),r.createElement(h.A,{className:"".concat(ce).concat(o.api_status?" loading":"").concat(x?" no-user-icon":"")},r.createElement(h.A.Heading,null,r.createElement(h.A.Title,null,r.createElement("span",{className:"title_text"},K),fe,Oe,Se)),r.createElement(h.A.Body,null,le,r.createElement("div",{className:"contents"},W)),ve?r.createElement(h.A.Footer,null,ve):null))}}],o&&D(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);B.propTypes={addID:i().func,config:i().object,confirmDeleteID:i().func,currentUserID:i().object,deleteComment:i().func,editComment:i().func,editID:i().func,hideAgree:i().bool,hideCategory:i().bool,hideCompare:i().bool,hideContent:i().func,hideDisagreement:i().bool,hideMenu:i().bool,hideUserIcon:i().bool,inlineEditing:i().bool,item:i().object,linkTarget:i().string,noTaxonLink:i().bool,observation:i().object,onClickCompare:i().func,performOrOpenConfirmationModal:i().func,restoreID:i().func,setFlaggingModalState:i().func,showHidden:i().func,trustUser:i().func,unhideContent:i().func,untrustUser:i().func,withdrawID:i().func};var H=B},35922:function(e,t,n){"use strict";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function _(e,t,n){return t=w(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(16414),l=n(29691),u=n(52717),f=n(63039),d=n(13173),p=n(25034),m=n(60905),h=n(47066),v=n(42395),x=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=_(this,t,[e]);var r=e.config,o=e.context,i=r&&r.currentUser;return n.collapsePreference="prefers_hide_".concat(o,"_annotations"),n.state={open:!i||!i[n.collapsePreference]},n.toggleOpenPanel=n.toggleOpenPanel.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.fetchAnnotations()}},{key:"componentDidUpdate",value:function(e,t){t.open===this.state.open&&this.setOpenStateOnConfigUpdate(),e.open!==this.props.open&&this.fetchAnnotations()}},{key:"setOpenStateOnConfigUpdate",value:function(){var e=this.props.config;e.currentUser&&e.currentUser[this.collapsePreference]===this.state.open&&this.setState({open:!e.currentUser[this.collapsePreference]})}},{key:"toggleOpenPanel",value:function(){var e,t,n,r=this.props,o=r.config,i=r.updateSession,a=!this.state.open;o&&o.currentUser&&i((e={},n=!a,(t=g(t=this.collapsePreference))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),this.setState({open:a}),this.fetchAnnotations(a)}},{key:"fetchAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.fetchControlledTerms,n=this.state.open;(e||n)&&t&&t()}},{key:"annotationRow",value:function(e,t){var n,r,a,s,u=this,f=[],d=[],h=this.props,y=h.config,b=h.deleteAnnotation,g=h.voteAnnotation,_=h.unvoteAnnotation;o().each(e.votes,(function(e){var t;!0===e.vote_flag?(f.push(e.user),e.api_status&&(a=!0)):(d.push(e.user),e.api_status&&(s=!0)),u.loggedIn&&(null===(t=e.user)||void 0===t?void 0:t.id)===y.currentUser.id&&(n=!0===e.vote_flag,r=!1===e.vote_flag)}));var E,w,O,x=n?"fa-thumbs-up":"fa-thumbs-o-up",k=r?"fa-thumbs-down":"fa-thumbs-o-down",S=f.length>d.length,A=d.length>f.length,j=this.loggedIn&&e.user&&y.currentUser.id===e.user.id;e.api_status&&"voting"!==e.api_status?E=i.createElement("div",{className:"loading_spinner"}):(this.viewerIsObserver||j)&&(E=i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){e.api_status||b(e.uuid)}},i.createElement("i",{className:"glyphicon glyphicon-remove-circle"}))),e.api_status||(w=function(){return n?_(e.uuid):g(e.uuid)},O=function(){return r?_(e.uuid):g(e.uuid,"bad")});var C=a?i.createElement("div",{className:"loading_spinner"}):i.createElement(p.A,{users:f,keyPrefix:"votes-for-".concat(e.controlled_value.id),contents:i.createElement("span",null,0===f.length?null:f.length)}),P=s?i.createElement("div",{className:"loading_spinner"}):i.createElement(p.A,{users:d,keyPrefix:"votes-against-".concat(e.controlled_value.id),contents:i.createElement("span",null,0===d.length?null:d.length)}),N=e.controlled_attribute,T=e.controlled_value,I=(0,v.H9)(t.label),D=(0,v.H9)(N.label),M=(0,v.H9)(T.label),R=(0,v.Cc)(t.label),F=(0,v.Cc)(T.label),L=i.createElement(c.A,{id:"annotation-popover-".concat(e.uuid),className:"AnnotationPopover"},i.createElement("div",{className:"contents"},R&&!R.match(/\[missing/)&&i.createElement("p",null,R),i.createElement("div",{className:"view"},I18n.t("label_colon",{label:I18n.t("view")})),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observations?term_id=".concat(N.id,"&term_value_id=").concat(T.id)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),I18n.t("observations_annotated_with_annotation",{annotation:"".concat(D,": ").concat(M)}))),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observations?term_id=".concat(N.id)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),I18n.t("observations_annotated_with_annotation",{annotation:D})))));return i.createElement("tr",{key:"term-row-".concat(e.uuid,"-").concat(T.id),className:e.api_status?"disabled":""},i.createElement("td",{className:"attribute"},i.createElement(l.A,{trigger:"click",rootClose:!0,placement:"top",animation:!1,overlay:L},i.createElement("div",{title:R},I))),i.createElement("td",{className:"value"},i.createElement(m.A,{user:e.user
}),i.createElement("span",{className:"value-label",title:F},M),"\xa0",E),i.createElement("td",{className:"agree"},i.createElement("span",{className:"check"},S?i.createElement("i",{className:"fa fa-check"}):null),this.userCanInteract&&i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:w,"aria-label":I18n.t("agree_"),title:I18n.t("agree_")},i.createElement("i",{className:"fa ".concat(x)})),i.createElement("span",{className:"count"},C),!this.userCanInteract&&i.createElement("span",{className:"fa"})),i.createElement("td",{className:"disagree"},i.createElement("span",{className:"check"},A?i.createElement("i",{className:"fa fa-times"}):null),this.userCanInteract&&i.createElement("button",{type:"button",onClick:O,className:"btn btn-nostyle","aria-label":I18n.t("disagree_"),title:I18n.t("disagree_")},i.createElement("i",{className:"fa ".concat(k)})),i.createElement("span",{className:"count"},P),!this.userCanInteract&&i.createElement("span",{className:"fa"})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.observation,r=t.config,a=t.controlledTerms,s=t.addAnnotation,p=t.loading,m=this.state.open,y=n.annotations||[],b=(0,h.fh)(a,n?n.taxon:null);if(!n||!n.user)return i.createElement("span",null);if(this.loggedIn=r&&r.currentUser,this.userCanInteract=null==r?void 0:r.currentUserCanInteractWithResource(n),this.viewerIsObserver=this.loggedIn&&r.currentUser.id===n.user.id,!this.userCanInteract&&o().isEmpty(y))return i.createElement("span",null);var g=o().filter(y,(function(e){return e.controlled_attribute&&e.controlled_value})),_=o().groupBy(g,(function(e){return e.controlled_attribute.id})),E=[];o().each(b,(function(t){if(_[t.id]){var r=o().sortBy(_[t.id],(function(e){return I18n.t("controlled_term_labels.".concat(o().snakeCase(e.controlled_value.label)),{defaultValue:e.controlled_value.label})}));o().each(r,(function(n){E.push(e.annotationRow(n,t))}))}var a=t.values;if(_[t.id]&&t.multivalued){var d={};if(o().each(_[t.id],(function(e){d[e.controlled_value.id]=e.controlled_value})),a=o().filter(a,(function(e){return!d[e.id]})),!o().isEmpty(d)){var p=o().find(d,(function(e){return e.blocking}));a=p?[]:o().filter(a,(function(e){return!e.blocking}))}}n.taxon&&(a=(0,h.fh)(a,n?n.taxon:null));var m=(0,v.H9)(t.label),y=(0,v.Cc)(t.label),b=i.createElement(c.A,{id:"annotation-popover-".concat(t.id),className:"AnnotationPopover"},i.createElement("div",{className:"contents"},y&&!y.match(/\[missing/)&&i.createElement("p",null,y),i.createElement("div",{className:"view"},I18n.t("label_colon",{label:I18n.t("view")})),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observations?term_id=".concat(t.id)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),I18n.t("observations_annotated_with_annotation",{annotation:m})))));e.userCanInteract&&a.length>0&&(!_[t.id]||t.multivalued)&&E.push(i.createElement("tr",{key:"term-row-".concat(t.id)},i.createElement("td",{className:"attribute"},i.createElement(l.A,{trigger:"click",rootClose:!0,placement:"top",animation:!1,overlay:b},i.createElement("div",{title:y},m))),i.createElement("td",null,i.createElement(u.A,{id:"grouping-control",onSelect:function(e){s(t,a[e])}},i.createElement(u.A.Toggle,null,i.createElement("span",{className:"toggle"},I18n.t("select"))),i.createElement(u.A.Menu,{className:"dropdown-menu-right"},a.map((function(e,t){return i.createElement(f.A,{key:"term-".concat(e.id),eventKey:t,title:(0,v.Cc)(e.label)},(0,v.H9)(e.label))}))))),i.createElement("td",null),i.createElement("td",null)))}));var w=i.createElement("div",{className:"noresults"},p?I18n.t("loading"):I18n.t("no_relevant_annotations")),O=i.createElement("table",{className:"table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,I18n.t("attribute")),i.createElement("th",null,I18n.t("value")),i.createElement("th",null,I18n.t("agree_")),i.createElement("th",null,I18n.t("disagree_")))),i.createElement("tbody",null,E)),x=y.length>0?"(".concat(y.length,")"):"";return i.createElement("div",{className:"Annotations collapsible-section"},i.createElement("h4",{className:"collapsible"},i.createElement("button",{type:"button",onClick:this.toggleOpenPanel,className:"btn btn-nostyle"},i.createElement("i",{className:"fa fa-chevron-circle-".concat(m?"down":"right")}),I18n.t("annotations")," ",x)),i.createElement(d.A,{expanded:m,onToggle:function(){}},i.createElement(d.A.Collapse,null,b&&0!==b.length?O:w)))}}],r&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);x.propTypes={config:s().object,observation:s().object,controlledTerms:s().array,addAnnotation:s().func,deleteAnnotation:s().func,voteAnnotation:s().func,unvoteAnnotation:s().func,updateSession:s().func.isRequired,context:s().string,fetchControlledTerms:s().func,loading:s().bool,open:s().bool},x.defaultProps={context:"obs_show"},t.A=x},36235:function(e,t,n){"use strict";var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(25034),l=n(42395),u=function(e){var t=e.observation,n=e.config,r=e.fave,a=e.unfave,s=e.faveText,u=e.hideOtherUsers,f=e.performOrOpenConfirmationModal,d=n&&n.currentUser&&n.currentUser.id;if(!t||!d)return i.createElement("div",null);var p=t.faves&&o().find(t.faves,(function(e){return e.user&&e.user.id===n.currentUser.id})),m=p?"fa-star":"fa-star-o",h=p?"fa-star-o":"fa-star",v=function(e){var n=e.text;return i.createElement("a",{className:"linky",onClick:function(){return f((function(){p?a(t.id):r(t.id)}),{permitOwnerOf:t}),!1},onMouseOver:function(e){$(e.target).siblings("i").removeClass(m),$(e.target).siblings("i").addClass(h)},onMouseOut:function(e){$(e.target).siblings("i").removeClass(h),$(e.target).siblings("i").addClass(m)}},n)},y=function(e){return i.createElement("span",{key:"fave-".concat(e.id),className:"user"},i.createElement("a",{href:"/people/".concat(e.user.login)},e.user.login))},b=i.createElement(v,{text:s});if(t.faves&&t.faves.length>0)if((u||1===t.faves.length)&&p)b=i.createElement(v,{text:I18n.t("you_faved_this")});else if(!u)if(1===t.faves.length)b=l.Am.t("user_faved_this_observation",{user:y(t.faves[0])});else if(2===t.faves.length)b=l.Am.t("user1_and_user2_faved_this_observation",{user1:y(t.faves[0]),user2:y(t.faves[1])});else{var g=t.faves.slice(2);b=l.Am.t("user1_user2_and_x_others_faved_this_observation",{user1:y(t.faves[0]),user2:y(t.faves[1]),x_others:i.createElement(c.A,{key:"faves-x-others",users:g.map((function(e){return e.user})),keyPrefix:"faves",contents:i.createElement("span",{className:"others"},I18n.t("x_others",{count:g.length}))})})}var _=i.createElement("i",{className:"action fa ".concat(m),onClick:function(){f((function(){p?a(t.id):r(t.id)}),{permitOwnerOf:t})},onMouseOver:function(e){$(e.target).removeClass(m),$(e.target).addClass(h)},onMouseOut:function(e){$(e.target).removeClass(h),$(e.target).addClass(m)}});return i.createElement("div",{className:"Faves"},_,b)};u.propTypes={config:s().object,observation:s().object,fave:s().func,unfave:s().func,faveText:s().string,hideOtherUsers:s().bool,performOrOpenConfirmationModal:s().func},u.defaultProps={faveText:I18n.t("be_the_first_to_fave_this_observation")},t.A=u},22415:function(e,t,n){"use strict";function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function h(e,t,n){return t=y(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(2480),l=n(47452),u=n(59659),f=n(64165),g=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,t,[e,n])).close=r.close.bind(r),r.setRadioOption=r.setRadioOption.bind(r),r.submit=r.submit.bind(r),r.textarea=i.createRef(),r.state={textareaChars:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,r=[{key:"setRadioOption",value:function(e){this.props.setFlaggingModalState({radioOption:e})}},{key:"getItemClassName",value:function(){var e,t=this.props.state.item;if(t instanceof f.Project?e="Project":t instanceof f.Observation||t.quality_grade?e="Observation":t instanceof f.Identification||t.taxon?e="Identification":t instanceof f.Photo||t.square_url?e="Photo":t instanceof f.Sound||t.file_url?e="Sound":t instanceof f.Comment&&(e="Comment"),!e)throw new Error("Can't flag an unknown type of item");return e}},{key:"close",value:function(){this.props.setFlaggingModalState({show:!1})}},{key:"submit",value:function(){var e=this.props,t=e.state,n=e.createFlag,r=t.item,o=t.radioOption,i=this.textarea&&this.textarea.current&&$(this.textarea.current).val();n(this.getItemClassName(),r.id,o,i),this.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.state,r=t.config,a=t.deleteFlag,s=t.radioOptions,f=n.item,d=n.show;if(!f)return i.createElement("div",null);var p=I18n.t("flag_an_item"),m=this.getItemClassName();"Observation"===m?p=I18n.t("flag_this_observation"):"Photo"===m?p=I18n.t("flag_this_photo"):"Sound"===m&&(p=I18n.t("flag_this_sound"));var h=r.currentUser,v=this.state.textareaChars,y="other"===n.radioOption&&i.createElement("div",null,i.createElement("textarea",{placeholder:I18n.t("specify_the_reason_youre_flagging"),className:"form-control",ref:this.textarea,maxLength:255,onChange:function(t){return e.setState({textareaChars:t.target.value.length})}}),i.createElement("div",{className:"text-muted text-small"},"".concat(v," / 255"))),b=o().filter(f.flags||[],(function(e){return!e.resolved})),g=b.length>0&&i.createElement("div",{className:"alert alert-warning"},I18n.t("current_flags"),i.createElement("ul",null,b.map((function(e){return i.createElement("li",{key:"flag-".concat(e.id||e.user.id)},e.flag," ",e.user&&i.createElement("a",{href:"/people/".concat(e.user.login)},e.user.login),e.user&&h&&e.user.id===h.id&&i.createElement(c.A,{glyph:"remove-circle",onClick:function(){a(e.id)}})," ",i.createElement("a",{href:"/flags/".concat(e.id)},I18n.t("view_flag")))})))),_=[];return s.indexOf("spam")>=0&&_.push(i.createElement("div",{className:"flagInput",key:"FlaggingModal-input-spam"},i.createElement("label",{className:"heading"},i.createElement("input",{type:"radio",name:"spam",checked:"spam"===n.radioOption,onChange:function(){e.setRadioOption("spam")}})," ",I18n.t("spam")),i.createElement("div",{className:"help-block"},I18n.t("commercial_solicitation")))),s.indexOf("inappropriate")>=0&&_.push(i.createElement("div",{className:"flagInput",key:"FlaggingModal-input-inappropriate"},i.createElement("label",{className:"heading"},i.createElement("input",{type:"radio",name:"inappropriate",checked:"inappropriate"===n.radioOption,onChange:function(){e.setRadioOption("inappropriate")}})," ",I18n.t("offensive_inappropriate")),i.createElement("div",{className:"help-block",dangerouslySetInnerHTML:{__html:I18n.t("misleading_or_illegal_content_html")}}))),s.indexOf("copyright infringement")>=0&&_.push(i.createElement("div",{className:"flagInput",key:"FlaggingModal-input-copyright"},i.createElement("label",{className:"heading"},i.createElement("input",{type:"radio",name:"copyright_infringement",checked:"copyright infringement"===n.radioOption,onChange:function(){e.setRadioOption("copyright infringement")}})," ",I18n.t("copyright_infringement")),i.createElement("div",{className:"help-block",dangerouslySetInnerHTML:{__html:I18n.t("copyright_infringement_desc")}}))),i.createElement(l.A,{show:d,className:"FlaggingModal",backdrop:!0,onHide:this.close},i.createElement(l.A.Header,{closeButton:!0},i.createElement(l.A.Title,null,p)),i.createElement(l.A.Body,null,i.createElement("div",{className:"text"},i.createElement("p",null,I18n.t("flagging_desc")),g,_,i.createElement("div",{className:"flagInput"},i.createElement("label",{className:"heading"},i.createElement("input",{type:"radio",name:"other",checked:"other"===n.radioOption,onChange:function(){e.setRadioOption("other")}})," ",I18n.t("other")),i.createElement("div",{className:"help-block"},i.createElement("p",null,I18n.t("some_other_reason")),f.quality_grade&&i.createElement("div",{className:"alert alert-warning"},i.createElement("p",null,I18n.t("duplicate_observation_flag_warning")))),y))),i.createElement(l.A.Footer,null,i.createElement("div",{className:"buttons"},i.createElement(u.A,{onClick:this.close},I18n.t("cancel")),i.createElement(u.A,{bsStyle:"primary",onClick:this.submit},I18n.t("save")))))}}],r&&p(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);g.propTypes={config:s().object,state:s().object,setFlaggingModalState:s().func,createFlag:s().func,deleteFlag:s().func,radioOptions:s().array},g.defaultProps={radioOptions:["spam","inappropriate"]},t.A=g},87386:function(e,t,n){"use strict";function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(23539),l=n.n(c),u=n(55077),b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,t)).close=e.close.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;"success"===this.props.type&&setTimeout((function(){$(l().findDOMNode(e)).fadeOut(1e3)}),5e3)}},{key:"close",value:function(){$(l().findDOMNode(this)).fadeOut(500)}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.message,r=e.title,a="fa-exclamation-triangle",s=e.type||"warning";"flag"===s?(s="danger",a="fa-flag"):"success"===s?a="fa-check-circle":"error"===s&&(s="danger",a="fa-times-circle");var c=r?i.createElement("span",{className:"bold"},"".concat(r,".")):"",l=t?i.createElement(u.A,{text:n}):i.createElement("span",{dangerouslySetInnerHTML:{__html:n}});return i.createElement("div",{className:"FlashMessage container"},i.createElement("div",{className:"alert alert-".concat(s)},i.createElement("div",{className:"message"},i.createElement("i",{className:"fa ".concat(a)}),c,o().isString(n)?l:n),i.createElement("button",{type:"button",className:"btn btn-nostyle action",onClick:this.close},i.createElement("i",{className:"fa fa-times-circle-o"}))))}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);b.propTypes={type:s().string,message:s().any,title:s().string,html:s().bool},t.A=b},93930:function(e,t,n){"use strict";var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(52717),l=function(e){var t,n=e.btnClassName,r=e.config,a=e.fetchSubscriptions,s=e.fetchRelationships,l=e.followUser,u=e.observation,f=e.subscribe,d=e.subscriptions,p=e.subscriptionsLoaded,m=e.relationships,h=e.unfollowUser,v=function(e,t){return e?e.api_status?i.createElement("div",{className:"loading_spinner"}):i.createElement("span",{className:"unfollow"},t):null};if(p){var y,b,g=r&&r.currentUser;if(o().isEmpty(u)||!g)return i.createElement("div",null);o().each(d,(function(e){"User"===e.resource_type&&(y=e),"Observation"===e.resource_type&&(b=e)})),y||o().isEmpty(m)||(y=m[0]);var _,E,w=y&&y.api_status,O=b&&b.api_status;w||O||(_=y?h:l,E=f);var x=u&&u.user&&u.user.login||"",k=I18n.t("follow_user",{user:x});y&&(k=v(y,I18n.t("unfollow_user",{user:x})));var S=I18n.t("follow_observation");b&&(S=v(b,I18n.t("unfollow_observation"))),t=i.createElement(c.A.Menu,{className:"dropdown-menu-right"},i.createElement("li",{className:w?"disabled":""},i.createElement("a",{href:"#",onClick:function(e){return e.preventDefault(),_(),!1}},k)),i.createElement("li",{className:O?"disabled":""},i.createElement("a",{href:"#",onClick:function(e){return e.preventDefault(),E(),!1}},S)))}else t=i.createElement(c.A.Menu,{className:"dropdown-menu-right"},i.createElement("li",{className:"disabled"}));return i.createElement("div",{className:"FollowButton"},i.createElement("span",{className:"control-group"},i.createElement(c.A,{id:"grouping-control",onToggle:function(e){e&&!p&&(a({observation:u}),s({observation:u}))}},i.createElement(c.A.Toggle,{className:n},I18n.t("follow")),t)))};l.propTypes={config:s().object,observation:s().object,subscriptions:s().array,relationships:s().array,followUser:s().func,unfollowUser:s().func,subscribe:s().func,btnClassName:s().string,subscriptionsLoaded:s().bool,fetchSubscriptions:s().func,fetchRelationships:s().func},l.defaultProps={btnClassName:"btn-sm"},t.A=l},88966:function(e,t,n){"use strict";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}function y(e,t,n){return t=g(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(23539),l=n.n(c),u=n(59659),f=n(36856),d=n(45206),p=n(34387),E=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=(r=y(this,t,[e,n])).props,i=o.observationField,a=o.observationFieldValue,s=o.observationFieldTaxon;return r.state={observationField:i,observationFieldValue:a,observationFieldTaxon:s},r.submitFieldValue=r.submitFieldValue.bind(r),r.onChangeHandler=r.onChangeHandler.bind(r),r.saveLabel=r.saveLabel.bind(r),r.saveDisabled=r.saveDisabled.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.setUpObservationFieldAutocomplete()}},{key:"componentDidUpdate",value:function(){var e=l().findDOMNode(this);this.state||$(".observation-field :input:visible:first",e).focus()}},{key:"onChangeHandler",value:function(e){var n,r=this.props.originalOfv;n=o().isObject(e)&&e.target?!r||!t.sameValue($(e.target).val(),r.value):!r||!t.sameValue(e,r.value),this.setState({modified:n})}},{key:"setUpObservationFieldAutocomplete",value:function(){var e=this,t=l().findDOMNode(this),n=this.props.notIDs,r=$(t).find(".ofv-field");r.data("uiAutocomplete")&&(r.autocomplete("destroy"),r.removeData("uiAutocomplete")),r.observationFieldAutocomplete({resetOnChange:!1,allowEnterSubmit:!1,selectFirstMatch:!0,notIDs:n,idEl:$("<input/>"),onResults:function(e){null!==e&&0===e.length&&r.val().length>0?r.addClass("failed"):r.removeClass("failed")},afterSelect:function(t){t&&e.setState({observationField:t.item,observationFieldValue:null,observationFieldSelectedDate:null}),r.val("").blur()}})}},{key:"submitFieldValue",value:function(e){e.preventDefault();var t=this.state.observationField,n=this.props,r=n.onSubmit,o=n.noReset;if(t){var i=this.valuesToSubmit();if(!i.value&&0!==i.value){var a=$(e.target).find("[name='value'], [name='taxon_name']");return a.addClass("failed"),void setTimeout((function(){a.removeClass("failed")}),1e3)}r(i),o?this.setState({modified:!1}):this.reset()}}},{key:"valuesToSubmit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l().findDOMNode(this),n=$(t).find("[name='value']"),r=this.state,o=r.observationField,i=r.observationFieldValue,a=r.observationFieldTaxon;return o?!i&&!n.val()||"taxon"!==o.datatype&&!n?{observationField:o,value:null,initial:!!e.initial}:"taxon"===o.datatype?{observationField:o,value:i,taxon:a,initial:!!e.initial}:{observationField:o,value:n.val(),initial:!!e.initial}:{}}},{key:"reset",value:function(){var e=l().findDOMNode(this),t=$(e).find("[name='value']"),n=$(e).find("input.ofv-input");this.setState({observationField:null,observationFieldValue:null,observationFieldTaxon:null}),t.val(""),n.val("").blur()}},{key:"saveLabel",value:function(){var e=I18n.t("add"),t=this.state,n=t.editing,r=t.modified;return n&&(e=r?I18n.t("save"):I18n.t("saved")),e}},{key:"inlineAdd",value:function(){return this.props.noAdd?"":i.createElement("span",{className:"input-group-btn"},i.createElement("button",{className:"btn btn-default",type:"submit",disabled:this.saveDisabled()},this.saveLabel()))}},{key:"saveDisabled",value:function(){var e=this.props.editing,t=this.state.modified;return e&&!t}},{key:"selectInput",value:function(e){var t=this.state.observationFieldValue;return i.createElement("select",{name:"value",className:"form-control",defaultValue:t,onChange:this.onChangeHandler},o().map(e.allowed_values.split("|"),(function(e){return i.createElement("option",{value:e,key:e},e)})))}},{key:"taxonInput",value:function(){var e=this,t=this.props.config,n=this.state.observationFieldTaxon;return i.createElement("div",{className:"input-group"},i.createElement(f.A,{bootstrap:!0,searchExternal:!0,showPlaceholder:!1,perPage:6,initialSelection:n,afterSelect:function(t){e.setState({observationFieldTaxon:t.item,observationFieldValue:t.item.id}),e.onChangeHandler(t.item.id)},afterUnselect:function(){e.setState({observationFieldTaxon:null,observationFieldValue:null}),e.onChangeHandler(null)},placeholder:I18n.t("species_name_cap"),config:t}),this.inlineAdd())}},{key:"datetimeInput",value:function(e){var t,n=this,r=this.state,o=r.observationFieldSelectedDate,a=r.observationFieldValue;"time"===e?t="time":"date"===e&&(t="date");var s=(0,p.p9)();return"time"===e?s="HH:mm":"date"===e&&(s="YYYY/MM/DD"),i.createElement("div",{className:"input-group"},i.createElement(d.A,{key:"datetime".concat(o),reactKey:"datetime".concat(o),ref:"datetime",mode:t,inputFormat:s,onChange:function(e){n.setState({observationFieldValue:e}),n.onChangeHandler(e)}}),i.createElement("input",{type:"text",name:"value",className:"form-control",autoComplete:"off",value:a||"",onClick:function(){var e=n.refs.datetime;e&&e.onClick()},onChange:function(e){var t=n.refs.datetime;t&&t.onChange(void 0,e.target.value)},placeholder:I18n.t("date_time")}),this.inlineAdd())}},{key:"dnaInput",value:function(){var e=this.state.observationFieldValue;return i.createElement("textarea",{name:"value",className:"form-control",defaultValue:e,onChange:this.onChangeHandler})}},{key:"numericInput",value:function(){var e=this.state.observationFieldValue;return i.createElement("div",{className:"input-group"},i.createElement("input",{type:"number",name:"value",step:"any",defaultValue:e,className:"form-control",onChange:this.onChangeHandler}),this.inlineAdd())}},{key:"defaultInput",value:function(){var e=this.state.observationFieldValue;return i.createElement("div",{className:"input-group"},i.createElement("input",{type:"text",name:"value",defaultValue:e,className:"form-control",onChange:this.onChangeHandler}),this.inlineAdd())}},{key:"render",value:function(){var e,t=this,n=this.state.observationField,r=this.props,o=r.noAdd,a=r.noCancel,s=r.onCancel,c=r.editing,l=r.required,f=r.hideFieldChooser,d=r.placeholder,p=r.disabled;if(n){var m,h,v=o?"":i.createElement(u.A,{className:"standalone",type:"submit",disabled:this.saveDisabled()},this.saveLabel());n.allowed_values?(m=this.selectInput(n),h=v):"numeric"===n.datatype?m=this.numericInput():"taxon"===n.datatype?m=this.taxonInput():"dna"===n.datatype?(m=this.dnaInput(),h=v):m="datetime"===n.datatype||"time"===n.datatype||"date"===n.datatype?this.datetimeInput(n.datatype):this.defaultInput();var y=a?"":i.createElement("span",{className:"linky",onClick:function(){return s?s():t.reset()}},I18n.t("cancel")),b=c?"editing":"";e=i.createElement("div",{className:"observation-field ".concat(n.datatype,"-field ").concat(b)},i.createElement("div",{className:"field-name"},n.name,l?i.createElement("span",{className:"required"},"*"):""),m,i.createElement("p",{className:"help-block"},n.description),h," ",y)}var g=f?"":i.createElement("input",{type:"text",placeholder:d,className:"form-control ofv-field",disabled:p});return i.createElement("form",{onSubmit:this.submitFieldValue,className:"ObservationFieldInput"},g,e)}}],a=[{key:"sameValue",value:function(e,t){return e==t}}],r&&h(n.prototype,r),a&&h(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(i.Component);E.propTypes={observationField:s().object,observationFieldTaxon:s().object,observationFieldValue:s().any,editing:s().bool,hideFieldChooser:s().bool,noAdd:s().bool,noCancel:s().bool,noReset:s().bool,notIDs:s().array,onCancel:s().func,onSubmit:s().func,originalOfv:s().object,required:s().bool,placeholder:s().string,config:s().object,disabled:s().bool},E.defaultProps={placeholder:I18n.t("choose_a_field")},t.A=E},32157:function(e,t,n){"use strict";function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function h(e,t,n){return t=y(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(16414),l=n(29691),u=n(55077),f=n(24561),g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.ofv,r=t.config,a=t.observation;if(!(a&&n&&n.observation_field&&a.user))return i.createElement("div",null);var s,d,p,m,h=r&&r.currentUser,v=a.user.preferences.prefers_observation_fields_by,y=h&&h.roles&&h.roles.indexOf("curator")>=0,b=null==r?void 0:r.currentUserCanInteractWithResource(a),g=h&&b&&a.user&&(h.id===a.user.id||"curators"===v&&y||"anyone"===v||o().isUndefined(v)),_=h&&a.user&&n.user&&(h.id===a.user.id||n&&h.id===n.user.id),E=n.value;n.api_status&&(s=i.createElement("div",{className:"loading_spinner"})),"dna"===n.observation_field.datatype?E=i.createElement("div",{className:"dna"},n.value," ",s):"text"===n.observation_field.datatype?E=i.createElement("div",{className:"value"},i.createElement(u.A,{text:E})," ",s):("taxon"===n.observation_field.datatype&&n.taxon&&(E=i.createElement(f.A,{taxon:n.taxon,url:"/taxa/".concat(n.taxon.id),user:r.currentUser})),E=i.createElement("div",{className:"value"},E," ",s)),n.observation_field.description&&(d=i.createElement("div",{className:"info"},i.createElement("div",{className:"header"},"".concat(I18n.t("info"),":")),i.createElement("div",{className:"desc"},n.observation_field.description))),(g||_)&&(p=i.createElement("div",{className:"edit"},g&&i.createElement("div",null,i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){n.api_status||e.props.setEditingFieldValue(n)}},I18n.t("edit"))),_&&i.createElement("div",null,i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){n.api_status||e.props.removeObservationFieldValue(n.uuid)}},I18n.t("delete"))))),n.user&&(m=i.createElement("div",{className:"added-by"},n.user&&i.createElement("div",null,i.createElement("div",{className:"view"},I18n.t("label_colon",{label:I18n.t("added_by")})),i.createElement("a",{href:"/people/".concat(n.user.login)},n.user.login)),n.updater&&i.createElement("div",null,i.createElement("div",{className:"view"},I18n.t("label_colon",{
label:I18n.t("last_edited_by")})),i.createElement("a",{href:"/people/".concat(n.updater.login)},n.updater.login))));var w=i.createElement(c.A,{id:"field-popover-".concat(n.uuid),className:"ObservationFieldPopover"},d,m,p,i.createElement("div",{className:"contents"},i.createElement("div",{className:"view"},I18n.t("label_colon",{label:I18n.t("view")})),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observations?verifiable=any&place_id=any&field:".concat(n.observation_field.name,"=").concat(n.value)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),i.createElement("span",{className:"menu-item-label"},I18n.t("observations_with_this_field_and_value")))),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observations?verifiable=any&place_id=any&field:".concat(n.observation_field.name)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),i.createElement("span",{className:"menu-item-label"},I18n.t("observations_with_this_field")))),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observations?verifiable=any&place_id=any&without_field=".concat(n.observation_field.name)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),i.createElement("span",{className:"menu-item-label"},I18n.t("observations_without_this_field")))),i.createElement("div",{className:"search"},i.createElement("a",{href:"/observation_fields/".concat(n.observation_field.id)},i.createElement("i",{className:"fa fa-arrow-circle-o-right"}),i.createElement("span",{className:"menu-item-label"},I18n.t("observation_field_details"))))));return i.createElement("div",{className:"ObservationFieldValue",key:"ofv-".concat(n.uuid||n.observation_field.id)},i.createElement(l.A,{trigger:"click",rootClose:!0,placement:"top",animation:!1,overlay:w},i.createElement("div",{className:"field"},I18n.t("label_colon",{label:n.observation_field.name}))),i.createElement("div",{className:"value"},E))}}])&&p(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);g.propTypes={config:s().object,observation:s().object,ofv:s().object,removeObservationFieldValue:s().func,setEditingFieldValue:s().func},t.A=g},72044:function(e,t,n){"use strict";function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(13173),l=n(32157),u=n(88966),b=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=m(this,t,[e]);var r=e.config,o=e.observation,i=e.context;n.observerPrefersFieldsBy=o.user&&o.user.preferences&&o.user.preferences.prefers_observation_fields_by?o.user.preferences.prefers_observation_fields_by:"anyone";var a=r&&r.currentUser;return n.collapsePreference="prefers_hide_".concat(i,"_observation_fields"),n.state={open:!a||!a[n.collapsePreference],editingFieldValue:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,r=[{key:"componentDidUpdate",value:function(e,t){t.open===this.state.open&&this.setOpenStateOnConfigUpdate()}},{key:"setOpenStateOnConfigUpdate",value:function(){var e=this.props.config;e.currentUser&&e.currentUser[this.collapsePreference]===this.state.open&&this.setState({open:!e.currentUser[this.collapsePreference]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.observation,r=t.config,a=t.addObservationFieldValue,s=t.removeObservationFieldValue,f=t.updateObservationFieldValue,d=t.updateSession,m=this.state,h=m.editingFieldValue,v=m.open,y=r&&r.currentUser,b=null==r?void 0:r.currentUserCanInteractWithResource(n);if(!n||!n.user||o().isEmpty(n.ofvs)&&!b)return i.createElement("span",null);var g,_=o().sortBy(n.ofvs,(function(e){return"".concat(e.value?"a":"z",":").concat(e.name,":").concat(e.value)}));if(b){var E,w=!1,O=n.user&&r.currentUser.id===n.user.id,x=r.currentUser.roles.indexOf("curator")>=0;"observer"!==this.observerPrefersFieldsBy||O?"curators"!==this.observerPrefersFieldsBy||O||x||(w=!0,E=I18n.t("views.observations.show.observer_only_allows_curators_to_add_fields")):(w=!0,E=I18n.t("views.observations.show.observer_does_not_allow_observation_fields")),g=i.createElement("div",{className:"form-group"},i.createElement(u.A,{notIDs:o().compact(o().uniq(o().map(n.ofvs,(function(e){return e.observation_field&&e.observation_field.id})))),onSubmit:function(e){a(e)},placeholder:E,config:r,disabled:w}))}var k=i.createElement("div",null,_.map((function(t){return h&&h.uuid===t.uuid?i.createElement(u.A,{observationField:t.observation_field,observationFieldValue:t.value,observationFieldTaxon:t.taxon,key:"editing-field-value-".concat(t.uuid),setEditingFieldValue:function(t){e.setState({editingFieldValue:t})},editing:!0,originalOfv:t,hideFieldChooser:!0,onCancel:function(){e.setState({editingFieldValue:null})},onSubmit:function(n){n.value!==t.value&&f(t.uuid,n),e.setState({editingFieldValue:null})},config:r}):i.createElement(l.A,{ofv:t,key:"field-value-".concat(t.uuid||t.observation_field.uuid),setEditingFieldValue:function(t){e.setState({editingFieldValue:t})},config:r,observation:n,removeObservationFieldValue:s})})),g),S=_.length>0?"(".concat(_.length,")"):"";return i.createElement("div",{className:"ObservationFields collapsible-section"},i.createElement("h4",{className:"collapsible",onClick:function(){var t,n,r;y&&d((t={},n=e.collapsePreference,r=v,(n=p(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),e.setState({open:!v})}},i.createElement("i",{className:"fa fa-chevron-circle-".concat(v?"down":"right")}),I18n.t("observation_fields")," ",S),i.createElement(c.A,{id:"observation-fields-panel",expanded:v,onToggle:function(){}},i.createElement(c.A.Collapse,null,k)))}}],r&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);b.propTypes={config:s().object,observation:s().object,addObservationFieldValue:s().func,removeObservationFieldValue:s().func,updateObservationFieldValue:s().func,updateSession:s().func,context:s().string},b.defaultProps={context:"obs_show"},t.A=b},79497:function(e,t,n){"use strict";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(59659),l=n(29691),u=n(24248),f=n(47452),d=n(88966),_=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,t)).close=e.close.bind(e),e.submit=e.submit.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(r=[{key:"close",value:function(){this.props.setProjectFieldsModalState({show:!1,alreadyInProject:!1})}},{key:"submit",value:function(){o().isFunction(this.props.onSubmit)&&this.props.onSubmit(),this.close()}},{key:"render",value:function(){var e=this.props,t=e.observation,n=e.project,r=e.alreadyInProject,a=e.config,s=e.updateObservationFieldValue,p=e.addObservationFieldValue,m=e.show;if(!n||!t||o().isEmpty(n.project_observation_fields))return i.createElement("div",null);var h=!0,v=o().map(o().sortBy(n.project_observation_fields,"position"),(function(e){var n=o().find(t.ofvs,(function(t){return t.observation_field.id===e.observation_field.id}));return e.required&&!n&&(h=!1),i.createElement("div",{className:"field ".concat(e.required&&!n?"required-missing":null),key:"proj-fields-form-".concat(e.id)},i.createElement(d.A,{observationField:e.observation_field,required:e.required,observationFieldValue:n?n.value:null,observationFieldTaxon:n?n.taxon:null,key:"projects-field-".concat(e.observation_field.id),hideFieldChooser:!0,noCancel:!0,noReset:!0,editing:!!n,originalOfv:n,onSubmit:function(e){n?e.value!==n.value&&s(n.uuid,e):p(e)},config:a}))})),y=i.createElement(c.A,{bsStyle:"success",onClick:h?this.submit:null,className:h?"":"disabled"},I18n.t("add_to_project"));return h||(y=i.createElement(l.A,{placement:"top",delayShow:20,overlay:i.createElement(u.A,{id:"missing-required"},I18n.t("you_must_fill_out_the_required_fields")),key:"missing-required-overlay"},y)),i.createElement(f.A,{show:m,className:"ProjectFieldsModal",onHide:this.close,backdrop:"static"},i.createElement(f.A.Header,{closeButton:!0},i.createElement(f.A.Title,null,n.title)),i.createElement(f.A.Body,null,r?null:i.createElement("div",{className:"intro"},I18n.t("please_complete_the_following_to_add_project")),i.createElement("div",{className:"text"},v),r?null:i.createElement("span",{className:"required"},"*"," ",I18n.t("required_"))),r?null:i.createElement(f.A.Footer,null,i.createElement("div",{className:"buttons"},i.createElement(c.A,{bsStyle:"default",onClick:this.close},I18n.t("cancel")),y)))}}])&&m(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);_.propTypes={addObservationFieldValue:s().func,updateObservationFieldValue:s().func,observation:s().object,onSubmit:s().func,project:s().object,setProjectFieldsModalState:s().func,show:s().bool,alreadyInProject:s().bool,config:s().object},t.A=_},6363:function(e,t,n){"use strict";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(null,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function y(e,t,n){return t=g(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(null,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}function A(e,t,n){return t=C(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}n.d(t,{A:function(){return T}});var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(13173),l=n(63039),u=n(52717),f=n(32157),d=n(88966),E=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,t)).state={fieldsPanelOpen:!1},e.settingsMenu=e.settingsMenu.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(r=[{key:"settingsMenu",value:function(e){var t=this.props,n=t.config,r=t.observation,o=t.updateCuratorAccess,a=t.joinProject,s=t.removeFromProject,c=t.showProjectFieldsModal,f=!!e.uuid,d=n&&n.currentUser,p=[];if(f&&d.id===r.user.id){var m=e.preferences&&e.preferences.allows_curator_coordinate_access;p.push(i.createElement("div",{key:"project-allow-".concat(e.project.id),className:"allow"},i.createElement("input",{type:"checkbox",defaultChecked:m,id:"project-allow-input-".concat(e.project.id),onClick:function(){o(e,!m)}}),i.createElement("label",{htmlFor:"project-allow-input-".concat(e.project.id)},I18n.t("allow_curator_access")),i.createElement("div",{className:"text-muted"},I18n.t("allow_project_curators_to_view_your_private_coordinates")))),p.push(i.createElement(l.A,{divider:!0,key:"project-allow-divider"}))}return e.current_user_is_member||p.push(i.createElement(l.A,{key:"project-join-".concat(e.project.id),eventKey:"join"},I18n.t("join_this_project"))),f&&p.push(i.createElement(l.A,{key:"project-remove-".concat(e.project.id),eventKey:"delete"},I18n.t("remove_from_project"))),f&&e.current_user_is_member&&e.project.project_observation_fields&&e.project.project_observation_fields.length>0&&p.push(i.createElement(l.A,{key:"edit-project-observation-fields",eventKey:"edit-project-observation-fields"},I18n.t("fill_out_project_observation_fields"))),e.current_user_is_member&&p.push(i.createElement(l.A,{key:"project-settings-".concat(e.project.id),eventKey:"projectSettings",href:"/projects/".concat(e.project.slug,"/contributors/").concat(d.login)},I18n.t("edit_your_settings_for_this_project"))),f&&p.push(i.createElement(l.A,{key:"project-global-".concat(e.project.id),eventKey:"globalSettings",href:"/users/edit#content"},I18n.t("edit_your_global_project_settings"))),i.createElement("span",{className:"control-group"},i.createElement(u.A,{id:"grouping-control",onSelect:function(t){"join"===t?a(e.project):"delete"===t?s(e.project):"edit-project-observation-fields"===t&&c(e.project)}},i.createElement(u.A.Toggle,{noCaret:!0},i.createElement("i",{className:"fa fa-cog"})),i.createElement(u.A.Menu,{className:"dropdown-menu-right"},p)))}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.config,s=r.displayObject,l=r.observation,u=this.state.fieldsPanelOpen,p=s.project,h=!!s.uuid,v=a&&a.currentUser&&a.currentUser.id===l.user.id,y=h&&a&&a.currentUser&&a.currentUser.id===s.user_id,b=a&&a.currentUser&&o().includes(a.currentUser.curator_project_ids,p.id);if(h){var g=p.project_observation_fields;if(g&&g.length>1){var _=p.project_observation_fields.map((function(e){return e.observation_field.id})),E=o().filter(l.ofvs,(function(e){return e.observation_field&&o().includes(_,e.observation_field.id)}));E.length>0&&(e=i.createElement("button",{type:"button",className:"fieldLink btn btn-nostyle",onClick:function(){return n.setState({fieldsPanelOpen:!u})}},I18n.t("observation_fields")," ",i.createElement("i",{className:"fa fa-angle-double-down"})),t=i.createElement(c.A,{expanded:this.state.fieldsPanelOpen,onToggle:function(){return null}},i.createElement(c.A.Collapse,null,i.createElement(c.A.Body,null,E.map((function(e){return n.state.editingFieldValue&&n.state.editingFieldValue.uuid===e.uuid?i.createElement(d.A,{observationField:e.observation_field,observationFieldValue:e.value,observationFieldTaxon:e.taxon,key:"editing-field-value-".concat(e.uuid),setEditingFieldValue:function(e){n.setState({editingFieldValue:e})},editing:!0,originalOfv:e,hideFieldChooser:!0,onCancel:function(){n.setState({editingFieldValue:null})},onSubmit:function(t){t.value!==e.value&&n.props.updateObservationFieldValue(e.uuid,t),n.setState({editingFieldValue:null})}}):i.createElement(f.A,m({ofv:e,key:"field-value-".concat(e.uuid||e.observation_field.id),setEditingFieldValue:function(e){n.setState({editingFieldValue:e})}},n.props))}))))))}}return i.createElement("div",{className:"projectEntry"},i.createElement("div",{className:"project",key:"project-".concat(p.id)},i.createElement("div",{className:"squareIcon"},i.createElement("a",{href:"/projects/".concat(p.id)},i.createElement("img",{src:p.icon,alt:p.title}))),i.createElement("div",{className:"info"},i.createElement("div",{className:"title"},i.createElement("a",{href:"/projects/".concat(p.id)},p.title)),e),v||y||b?this.settingsMenu(s):""),i.createElement("div",{className:"projectObservationFields"},t))}}])&&h(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);E.propTypes={joinProject:s().func,removeFromProject:s().func,updateCuratorAccess:s().func,config:s().object,observation:s().object,displayObject:s().object,removeObservationFieldValue:s().func,updateObservationFieldValue:s().func,showProjectFieldsModal:s().func};var w=E,N=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=A(this,t,[e]);var r=e.context,o=e.config&&e.config.currentUser;return n.collapsePreference="prefers_hide_".concat(r,"_projects"),n.state={open:!o||!o[n.collapsePreference]},n.setUpProjectAutocomplete=n.setUpProjectAutocomplete.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.setUpProjectAutocomplete()}},{key:"componentDidUpdate",value:function(e,t){this.setUpProjectAutocomplete(),t.open===this.state.open&&this.setOpenStateOnConfigUpdate()}},{key:"setOpenStateOnConfigUpdate",value:function(){var e=this.props.config;e.currentUser&&e.currentUser[this.collapsePreference]===this.state.open&&this.setState({open:!e.currentUser[this.collapsePreference]})}},{key:"setUpProjectAutocomplete",value:function(){var e=this,t=$(".Projects .form-group input"),n={resetOnChange:!1,idEl:$("<input/>"),notIDs:o().map(this.props.observation.project_observations,"project_id"),notTypes:["collection","umbrella"],allowEnterSubmit:!0,selectFirstMatch:!0,currentUsersProjects:!0,onResults:function(e){null!==e&&0===e.length&&t.val()?t.addClass("failed"):t.removeClass("failed")},afterSelect:function(n){if(n){var r=n.item;e.props.addToProject(r)}t.val("").blur()}};try{t.autocomplete("option",n)}catch(e){t.projectAutocomplete(n)}}},{key:"render",value:function(){var e,n,r=this,a=this.props,s=a.observation,l=a.config,u=a.updateSession,f=this.state.open,d=l&&l.currentUser,p=null==l?void 0:l.currentUserCanInteractWithResource(s),m=s.non_traditional_projects?o().cloneDeep(s.non_traditional_projects):[];if(o().each(s.project_observations,(function(e){o().find(m,(function(t){return t.project_id&&e.project_id&&t.project_id===e.project_id||t.project&&e.project&&t.project.id===e.project.id}))||m.push(e)})),!s||!s.user||!p&&0===m.length)return i.createElement("span",null);p&&(l.currentUser.id!==s.user.id&&s.user.preferences&&("none"===s.user.preferences.prefers_project_addition_by?e=i.createElement("p",{className:"text-muted"},I18n.t("observer_prefers_no_traditional_project_addition")):"joined"===s.user.preferences.prefers_project_addition_by&&(n=i.createElement("p",{className:"text-muted"},I18n.t("observer_prefers_addition_to_traditional_projects_joined")))),e=e||i.createElement("form",{onSubmit:t.chooseFirstProject},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",className:"form-control",placeholder:I18n.t("add_to_a_project")})),n));var h=i.createElement("div",null,e,o().sortBy(m,(function(e){return e.project.title})).map((function(e){return i.createElement(w,x({key:e.project.id,displayObject:e},r.props))}))),v=m.length>0?"(".concat(m.length,")"):"";return i.createElement("div",{className:"Projects collapsible-section"},i.createElement("h4",{className:"collapsible",onClick:function(){var e,t,n;d&&u((e={},t=r.collapsePreference,n=f,(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),r.setState({open:!f})}},i.createElement("i",{className:"fa fa-chevron-circle-".concat(f?"down":"right")}),I18n.t("projects")," ",v),i.createElement(c.A,{id:"projects-panel",expanded:f,onToggle:function(){return null}},i.createElement(c.A.Collapse,null,h)))}}],a=[{key:"chooseFirstProject",value:function(e){e.preventDefault();var t=$(".Projects .panel-group input");t.data("uiAutocomplete")&&t.trigger("selectFirst")}}],r&&k(n.prototype,r),a&&k(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(i.Component);N.propTypes={addToProject:s().func,joinProject:s().func,updateCuratorAccess:s().func,removeFromProject:s().func,config:s().object,observation:s().object,setErrorModalState:s().func,updateSession:s().func,showProjectFieldsModal:s().func,context:s().string},N.defaultProps={context:"obs_show"};var T=N},57629:function(e,t,n){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function p(e,t,n){return t=h(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(36163),l=n(25034),y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=p(this,t)).voteCellsForMetric=e.voteCellsForMetric.bind(e),e.needsIDRow=e.needsIDRow.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,r=[{key:"voteCell",value:function(e,t,n,r,o,a,s,c){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},f=this.props,d=f.config,p=f.observation,m=f.unvoteMetric,h=f.voteMetric,v=null==d?void 0:d.currentUserCanInteractWithResource(p),y=s?i.createElement("div",{className:"loading_spinner"}):i.createElement(l.A,{users:a,keyPrefix:"metric-".concat(e),contents:i.createElement("span",null,0===a.length?null:a.length)}),b=v&&i.createElement("button",{type:"button",className:"btn btn-nostyle",disabled:u.disableVoting&&!o,onClick:function(){c||(o?m(e):u.disableVoting||(t?h(e):h(e,{agree:"false"})))}},i.createElement("i",{className:"fa ".concat(r)}));return i.createElement("span",null,i.createElement("span",{className:"check"},n?i.createElement("i",{className:"fa ".concat(t?"fa-check":"fa-times")}):null),b,i.createElement("span",{className:"count"},y))}},{key:"needsIDRow",value:function(){var e=this.props,t=e.config,n=e.observation,r=e.unvoteMetric,a=e.voteMetric,s=null==t?void 0:t.currentUserCanInteractWithResource(n),c=this.infoForMetric("needs_id");if(!s&&o().isEmpty(c.votersFor)&&o().isEmpty(c.votersAgainst))return null;var u=c.voteForLoading?i.createElement("div",{className:"loading_spinner"}):i.createElement(l.A,{users:c.votersFor,keyPrefix:"metric-needs_id-agree",contents:i.createElement("span",null,"(".concat(c.votersFor.length,")"))}),f=c.voteAgainstLoading?i.createElement("div",{className:"loading_spinner"}):i.createElement(l.A,{users:c.votersAgainst,keyPrefix:"metric-needs_id-disagree",contents:i.createElement("span",null,"(".concat(c.votersAgainst.length,")"))}),d=!n.communityTaxon&&!this.metricHasVotes("needs_id"),p=s?i.createElement("input",{type:"checkbox",id:"improveYes",disabled:c.loading||d,checked:c.userVotedFor||!1,onChange:function(){c.userVotedFor?r("needs_id"):a("needs_id")}}):null,m=s?i.createElement("input",{type:"checkbox",id:"improveNo",disabled:c.loading||d,checked:c.userVotedAgainst||!1,onChange:function(){c.userVotedAgainst?r("needs_id"):a("needs_id",{agree:"false"})}}):null;return i.createElement("tr",{className:"improve".concat(d?" disabled":"")},i.createElement("td",{className:"metric_title",colSpan:3},i.createElement("i",{className:"fa fa-gavel"}),I18n.t("based_on_the_evidence_can_id_be_improved"),i.createElement("div",{className:"inputs"},i.createElement("div",{className:"yes"},p,i.createElement("label",{htmlFor:"improveYes",className:c.mostAgree?"bold":""},I18n.t("yes"))," ",u),i.createElement("div",{className:"no"},m,i.createElement("label",{htmlFor:"improveNo",className:c.mostDisagree?"bold":""},I18n.t("no_its_as_good_as_it_can_be"))," ",f))))}},{key:"metricHasVotes",value:function(e){return o().size(this.props.qualityMetrics[e])>0}},{key:"infoForMetric",value:function(e){var t,n,r,i,a=[],s=[],c=this.props,l=c.config,u=c.qualityMetrics,f=l&&l.currentUser;o().each(u[e],(function(e){var o="vote_scope"in e?e.vote_flag:e.agree;o?(a.push(e.user||{}),e.api_status&&(r=!0)):(s.push(e.user||{}),e.api_status&&(i=!0)),f&&e.user&&e.user.id===l.currentUser.id&&(t=o,n=!o)}));var d=t?"fa-thumbs-up":"fa-thumbs-o-up",p=n?"fa-thumbs-down":"fa-thumbs-o-down",m=a.length>s.length,h=s.length>a.length;return o().isEmpty(u[e])&&"needs_id"!==e&&(m=!0),{mostAgree:m,mostDisagree:h,agreeClass:d,disagreeClass:p,userVotedFor:t,userVotedAgainst:n,votersFor:a,votersAgainst:s,voteForLoading:r,voteAgainstLoading:i,loading:r||i}}},{key:"voteCellsForMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.infoForMetric(e);return{agreeCell:this.voteCell(e,!0,n.mostAgree,n.agreeClass,n.userVotedFor,n.votersFor,n.voteForLoading,n.loading,t),disagreeCell:this.voteCell(e,!1,n.mostDisagree,n.disagreeClass,n.userVotedAgainst,n.votersAgainst,n.voteAgainstLoading,n.loading,t),loading:n.loading}}},{key:"render",value:function(){var e=this.props,t=e.observation,n=e.tableOnly;if(!t||!t.user)return i.createElement("div",null);var r=i.createElement("i",{className:"fa fa-check check"}),a=i.createElement("i",{className:"fa fa-times check"}),s=(t.photos?t.photos.length:0)+(t.sounds?t.sounds.length:0),l=s>0,u=t.communityTaxon&&t.communityTaxon.rank_level<=10,f=t.taxon&&t.taxon.rank_level<30,d=!1;t.geojson?d=!0:!t.obscured||"private"!==t.geoprivacy&&"private"!==t.taxon_geoprivacy||(d=!0);var p=this.voteCellsForMetric("wild"),m=!d&&!this.metricHasVotes("location"),h=this.voteCellsForMetric("location",{disableVoting:m}),v=!t.observed_on&&!this.metricHasVotes("date"),y=this.voteCellsForMetric("date",{disableVoting:v}),b=!l&&!this.metricHasVotes("evidence"),g=this.voteCellsForMetric("evidence",{disableVoting:b}),_=this.voteCellsForMetric("recent"),E=s<2&&!this.metricHasVotes("subject"),w=this.voteCellsForMetric("subject",{disableVoting:E}),O=this.infoForMetric("needs_id"),x=O.mostDisagree?I18n.t("community_id_is_precise"):I18n.t("community_id_at_species_level_or_lower"),k=O.mostDisagree?f:u;return i.createElement("div",{className:"QualityMetrics"},n?null:i.createElement("div",null,i.createElement("div",{className:"grade"},I18n.t("label_colon",{label:I18n.t("quality_grade_")}),i.createElement("span",{className:"quality_grade ".concat(t.quality_grade," ")},o().upperFirst(I18n.t(t.quality_grade)))),i.createElement("div",{className:"text"},I18n.t("views.observations.show.data_quality_assessment_desc3_html"))),i.createElement("table",{className:"table"
},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,I18n.t("research_grade_qualification")),i.createElement("th",{className:"agree"},I18n.t("yes")),i.createElement("th",{className:"disagree"},I18n.t("no")))),i.createElement("tbody",null,i.createElement("tr",null,i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-calendar"}),I18n.t("date_specified")),i.createElement("td",{className:"agree"},t.observed_on?r:null),i.createElement("td",{className:"disagree"},t.observed_on?null:a)),i.createElement("tr",null,i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-map-marker"}),I18n.t("location_specified")),i.createElement("td",{className:"agree"},d?r:null),i.createElement("td",{className:"disagree"},d?null:a)),i.createElement("tr",null,i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-file-image-o"}),I18n.t("has_photos_or_sounds")),i.createElement("td",{className:"agree"},l?r:null),i.createElement("td",{className:"disagree"},l?null:a)),i.createElement("tr",null,i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa icon-identification"}),I18n.t("has_id_supported_by_two_or_more")),i.createElement("td",{className:"agree"},t.communityTaxon?r:null),i.createElement("td",{className:"disagree"},t.communityTaxon?null:a)),i.createElement("tr",{className:y.loading||v?"disabled":""},i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-calendar-check-o"}),I18n.t("date_is_accurate")),i.createElement("td",{className:"agree"},y.agreeCell),i.createElement("td",{className:"disagree"},y.disagreeCell)),i.createElement("tr",{className:h.loading||m?"disabled":""},i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-bullseye"}),I18n.t("location_is_accurate")),i.createElement("td",{className:"agree"},h.agreeCell),i.createElement("td",{className:"disagree"},h.disagreeCell)),i.createElement("tr",{className:p.loading?"disabled":""},i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa icon-icn-wild"}),I18n.t("organism_is_wild")),i.createElement("td",{className:"agree"},p.agreeCell),i.createElement("td",{className:"disagree"},p.disagreeCell)),i.createElement("tr",{className:g.loading||b?"disabled":""},i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa icon-icn-dna"}),I18n.t("evidence_of_organism")),i.createElement("td",{className:"agree"},g.agreeCell),i.createElement("td",{className:"disagree"},g.disagreeCell)),i.createElement("tr",{className:_.loading?"disabled":""},i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-clock-o"}),I18n.t("recent_evidence_of_organism")),i.createElement("td",{className:"agree"},_.agreeCell),i.createElement("td",{className:"disagree"},_.disagreeCell)),i.createElement("tr",{className:w.loading||E?"disabled":""},i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa icon-icn-subject"}),I18n.t("evidence_related_to_single_subject")),i.createElement("td",{className:"agree"},w.agreeCell),i.createElement("td",{className:"disagree"},w.disagreeCell)),i.createElement("tr",null,i.createElement("td",{className:"metric_title"},i.createElement("i",{className:"fa fa-leaf"}),x),i.createElement("td",{className:"agree"},k?r:null),i.createElement("td",{className:"disagree"},k?null:a)),this.needsIDRow())),i.createElement(c.A,{item:t,itemTypeLabel:I18n.t("observation"),manageFlagsPath:"/observations/".concat(t.id,"/flags")}))}}],r&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);y.propTypes={config:s().object,observation:s().object,qualityMetrics:s().object,voteMetric:s().func,unvoteMetric:s().func,tableOnly:s().bool},t.A=y},40722:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(60905),s=n(15872),c=function(e){var t=e.config,n=e.hideSubtitle,o=e.skipSubtitleLink,i=e.subtitle,c=e.subtitleLinkOverwrite,l=e.subtitleIconClass,u=e.user;if(!u)return r.createElement("div",null);var f=r.createElement(r.Fragment,null,r.createElement("i",{className:l}),i||u.observations_count&&I18n.t("x_observations",{count:I18n.toNumber(u.observations_count,{precision:0})})),d="/observations?user_id=".concat(u.login,"&place_id=any&verifiable=any"),p=o?f:r.createElement("a",{href:c||d},f);return r.createElement("div",{className:"UserWithIcon"},r.createElement("div",{className:"icon"},r.createElement(a.A,{user:u})),r.createElement("div",{className:"title-subtitle"},r.createElement("div",{className:"title"},r.createElement(s.A,{config:t,user:u,uniqueKey:"UserWithIcon-".concat(u.id)})),!n&&r.createElement("div",{className:"subtitle"},p)))};c.propTypes={config:i().object,user:i().object,subtitle:i().oneOfType([i().string,i().number]),subtitleLinkOverwrite:i().string,subtitleIconClass:i().string,hideSubtitle:i().bool,skipSubtitleLink:i().bool},c.defaultProps={subtitleIconClass:"fa fa-binoculars"},t.A=c},25034:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(16154),s=n.n(a),c=n(16414),l=n(29691),u=n(60905),f=function(e){var t=e.keyPrefix,n=e.users,o=e.contents,i=e.placement,a=e.returnContentsWhenEmpty,f=e.contentAfterUsers,d=e.containerPadding;if(!n||0===n.length)return a?o:r.createElement("span",null);var p=r.createElement(c.A,{className:"UsersPopoverOverlay",id:"popover-".concat(t)},n.map((function(e){return s().isEmpty(e)?r.createElement("span",{key:"popover-".concat(t,"-").concat(SITE.name),className:"user"},r.createElement("img",{className:"site",src:SITE.logo_square,title:SITE.name,alt:SITE.name}),SITE.name):r.createElement("span",{key:"popover-".concat(t,"-").concat(e.id),className:"user"},r.createElement(u.A,{user:e}),r.createElement("a",{href:"/people/".concat(e.login)},e.login))})),f);return r.createElement(l.A,{trigger:"click",rootClose:!0,placement:i||"top",animation:!1,overlay:p,containerPadding:d},r.createElement("span",{className:"UsersPopover"},o))};f.propTypes={keyPrefix:i().string,contents:i().object,users:i().array,placement:i().string,containerPadding:i().number,contentAfterUsers:i().object,returnContentsWhenEmpty:i().bool},t.A=f},47066:function(e,t,n){"use strict";function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{terms:[],allTerms:[],loaded:!1,open:!1},t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case s:n.terms=t.terms,n.loaded=!0;break;case c:n.allTerms=t.terms,n.loaded=!0;break;case l:n.terms=[],n.allTerms=[],n.loaded=!1}return n}function d(e){return{type:s,terms:e}}function p(e){return{type:c,terms:e}}function m(){return{type:l}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n();if(r.controlledTerms&&r.controlledTerms.loaded&&!e.reload)return null;var i=r.config.testingApiV2,a=e.observation||r.observation;if(!a||!a.taxon||!a.taxon.ancestor_ids)return r.controlledTerms.allTerms&&r.controlledTerms.allTerms.length>0?t(d(r.controlledTerms.allTerms)):o().controlled_terms.search(i?u:{}).then((function(e){t(p(e.results)),t(d(e.results))})),null;var s=Object.assign({},i?u:{},{taxon_id:a.taxon.ancestor_ids.join(","),ttl:-1});return o().controlled_terms.for_taxon(s).then((function(e){t(d(e.results))})).catch((function(){}))}}function v(){return function(e,t){var n=t().config.testingApiV2;o().controlled_terms.search(n?u:{}).then((function(t){return e(p(t.results))})).catch((function(){}))}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t&&t.ancestor_ids?t.ancestor_ids:[],r=a().filter(e,(function(e){return!(e.values&&e.values.length>0&&0===y(e.values,t).length)&&(0===(e.taxon_ids||[]).length&&0===(e.excepted_taxon_ids||[]).length||!(a().intersection(e.excepted_taxon_ids||[],n).length>0)&&(0===(e.taxon_ids||[]).length||a().intersection(e.taxon_ids||[],n).length>0))}));return a().sortBy(r,(function(e){return I18n.t("controlled_term_labels.".concat(a().snakeCase(e.label)),{defaultValue:e.label})}))}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n,r){n(d(y(t&&t.length>0?t:r().controlledTerms.allTerms,e)))}}n.d(t,{$K:function(){return v},Ay:function(){return f},VY:function(){return m},d4:function(){return b},eY:function(){return h},fh:function(){return y}});var r=n(64165),o=n.n(r),i=n(16154),a=n.n(i),s="obs-show/controlled_terms/SET_CONTROLLED_TERMS",c="obs-show/controlled_terms/SET_ALL_CONTROLLED_TERMS",l="obs-show/controlled_terms/RESET_CONTROLLED_TERMS",u={fields:{excepted_taxon_ids:!0,label:!0,multivalued:!0,taxon_ids:!0,values:{blocking:!0,excepted_taxon_ids:!0,label:!0,taxon_ids:!0}}}},84423:function(e,t,n){"use strict";function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},n=arguments.length>1?arguments[1]:void 0;return n.type===r?(e=Object.assign({},t,n.newState),!0===n.newState.show&&(e.radioOption="spam"),e):t}function i(e){return{type:r,newState:e}}n.d(t,{A:function(){return o},_:function(){return i}});var r="obs-show/flagging_modal/SET_FLAGGING_MODAL_STATE"},78765:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{identifiers:null,lastFetchTime:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object.assign({},e,{identifiers:t.identifiers});case u:return Object.assign({},e,{lastFetchTime:t.lastFetchTime})}return e}function d(e){return{type:l,identifiers:e}}function p(e){return function(t,n){var r=n().config.testingApiV2,i=Date.now();t({type:u,lastFetchTime:i});var a=s(s({},e),{},{no_total_hits:!0});r&&(a.fields={count:!0,user:{login:!0,icon_url:!0}}),o().identifications.identifiers(a).then((function(e){var r=n().identifications;i===r.lastFetchTime&&t(d(e.results))})).catch((function(){}))}}n.d(t,{Ay:function(){return f},tG:function(){return p},vD:function(){return d}});var r=n(64165),o=n.n(r),l="obs-show/identifications/SET_IDENTIFIERS",u="obs-show/identifications/SET_LAST_FETCH_TIME"},62896:function(e,t,n){"use strict";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.observation&&t.observation.id===e.id&&o().each(["taxon","community_taxon","communityTaxon"],(function(n){e[n]&&e[n].taxon_summary&&t.observation&&t.observation[n]&&!t.observation[n].taxon_summary&&(t.observation[n].taxon_summary=e[n].taxon_summary)})),t.observation;case C:return k(k({},e),t.attributes)}return e}function F(e){return{type:j,observation:e}}function L(e){return{type:C,attributes:e}}function U(e,t){var n=k({hash:""},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),r=t&&t.config&&t.config.currentUser,o={observation:{id:e.id,uuid:e.uuid,observed_on:e.observed_on,obscured:e.obscured,user:{login:e.user.login}}},i="observed by ".concat(e.user.login);if(e.taxon){if(e.taxon.preferred_common_name){var a=iNatModels.Taxon.titleCaseName(e.taxon.preferred_common_name);i=r&&r.prefers_scientific_name_first?"".concat(e.taxon.name," (").concat(a,") ").concat(i):"".concat(a," (").concat(e.taxon.name,") ").concat(i)}else i="".concat(e.taxon.name," ").concat(i);o.observation.taxon={name:e.taxon.name,preferred_common_name:e.taxon.preferred_common_name}}else i="".concat(I18n.t("something")," ").concat(i);e.observed_on&&e.obscured&&!e.private_geojson?i="".concat(i," in ").concat(l()(e.observed_on).format(I18n.t("momentjs.month_year"))):e.observed_on&&(i="".concat(i," on ").concat(l()(e.observed_on).format("ll")));var s="/observations/".concat(e.id);return window.location.search&&(s+=window.location.search),n.hash&&(s+=n.hash),{state:o,title:"".concat(i," \xb7 ").concat(SITE.name),url:s}}function B(e){return e&&e.config&&e.config.currentUser&&(e.observation||e.currentObservation&&e.currentObservation.observation)}function H(e){return B(e)&&e.config.currentUser.id===e.observation.user.id}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){if(e&&e.uuid){var i=r(),a=i.observation,c=t.fetchAll,l=a&&a.id===e.id&&(!a.taxon&&e.taxon||a.taxon&&!e.taxon||a.taxon&&e.taxon&&a.taxon.id!==e.taxon.id);if(t.initialPhotoID){var b=o().find(e.photos,(function(e){return e.id===Number(t.initialPhotoID)}));b&&(b.initialPhoto=!0)}if(n(F(e)),l&&(n((0,v.vD)(null)),n((0,d.Hs)(null)),n((0,f.eY)({reload:!0}))),(l||c)&&(n((function(e,t){var n=t().observation;if(!n||!n.taxon)return null;var r={id:n.uuid,ttl:-1,locale:I18n.locale};return s().observations.taxonSummary(r).then((function(t){e(L({taxon:k(k({},n.taxon),{},{taxon_summary:t})}))})).catch((function(e){return console.log(e)}))})),n((function(e,t){var n=t().observation;if(!n||!n.communityTaxon)return null;var r={id:n.uuid,ttl:-1,community:!0,locale:I18n.locale};return s().observations.taxonSummary(r).then((function(t){e(L({communityTaxon:k(k({},n.communityTaxon),{},{taxon_summary:t})}))})).catch((function(e){return console.log(e)}))}))),(c||t.fetchQualityMetrics)&&n((0,p.FK)()),B(i)&&(c||t.fetchSubscriptions)&&(n((0,m.ky)()),n((0,h.pj)())),(c||t.fetchPlaces)&&n((0,u.lH)()),c||t.replaceState){var g=U(e,i,{hash:t.replaceState?window.location.hash:null});history.replaceState(g.state,g.title,g.url)}if(setTimeout((function(){c&&n((0,d.l2)()),!c&&!l||o().has(e,"non_traditional_projects")||n((function(e,t){var n=t(),r=n.observation,i=n.config.testingApiV2,a={include_new_projects:"true",locale:I18n.locale,ttl:-1},c=i?r.uuid:r.id;return s().observations.fetch(c,a).then((function(t){var n=t.results[0];n&&o().has(n,"non_traditional_projects")&&e(L({non_traditional_projects:n.non_traditional_projects}))})).catch((function(e){return console.log(e)}))}))}),l?1:500),i.flaggingModal&&i.flaggingModal.item&&i.flaggingModal.show){var _,E=i.flaggingModal.item;e.id===E.id&&(_=e),(_=(_=_||o().find(e.comments,(function(e){return e.id===E.id})))||o().find(e.identifications,(function(e){return e.id===E.id})))&&n((0,y._)({item:_}))}t.callback&&t.callback()}else console.log("observation not found")}}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){if(e){var o=r(),i=o.config.testingApiV2,a={include_new_projects:"true",preferred_place_id:o.config.preferredPlace?o.config.preferredPlace.id:null,locale:I18n.locale,ttl:-1};i&&(a.fields=M),s().observations.fetch(e,a).then((function(e){n(V(e.results[0],t))})).catch((function(e){return console.log(e)}))}}}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),o=r.config.testingApiV2;e.error&&t((0,b.t6)(e.error,e.errorMessage||I18n.t("failed_to_save_record"))),e.callback?e.callback():e.actionTime&&A!==e.actionTime||!r.observation||t(q(o?r.observation.uuid:r.observation.id,e))}}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){var o,i=k({},n);n.callback||(i.actionTime=(o=(new Date).getTime(),A=o,o)),e(t).then((function(){r(z(i))})).catch((function(e){i.error=e,r(z(i))}))}}function K(e){return function(t,n){var r=n();if(B(r)){var o={id:r.config.testingApiV2?r.observation.uuid:r.observation.id,ignore_photos:!0,observation:e};t(W(s().observations.update,o))}}}function G(){return function(e,t){var n=t();H(n)&&e((0,b.Rn)({show:!0,message:I18n.t("you_sure_delete_this_observation"),confirmText:I18n.t("yes"),onConfirm:function(){var e=$("meta[name=csrf-param]").attr("content"),t=$("meta[name=csrf-token]").attr("content"),r=$("<form>",{action:"/observations/".concat(n.observation.id),method:"post"});$("<input>").attr({type:"hidden",name:e,value:t}).appendTo(r),$("<input>").attr({type:"hidden",name:"_method",value:"delete"}).appendTo(r),r.appendTo("body").submit()}}))}}function Y(e){return function(t,n){var r=n();if(e&&B(r)&&!o().find(r.observation.tags,(function(t){return o().toLower(t.tag||t)===o().toLower(e)}))){t(L({tags:r.observation.tags.concat([{tag:e,api_status:"saving"}])}));var i=e,a=r.observation.tags;if(!o().isEmpty(a)){var s=o().filter(a,(function(e){return"deleting"!==e.api_status})),c=o().map(s,(function(e){return e.tag||e})).join(", ");i="".concat(i,", ").concat(c)}t(K({tag_list:i}))}}}function X(e){return function(t,n){var r=n();if(e&&B(r)){t(L({tags:o().map(r.observation.tags,(function(t){return t===e?{tag:t,api_status:"deleting"}:t}))}));var i=o().filter(r.observation.tags,(function(e){return"deleting"!==e.api_status}));t(K({tag_list:o().map(o().without(i,e),(function(e){return e.tag||e})).join(", ")}))}}}function Z(){return function(e,t){var n=t();if(B(n)){e(L({reviewed_by:n.observation.reviewed_by.concat([n.config.currentUser.id])}));var r={uuid:n.observation.uuid};e(W(s().observations.review,r))}}}function Q(){return function(e,t){var n=t();if(B(n)){e(L({reviewed_by:o().without(n.observation.reviewed_by,n.config.currentUser.id)}));var r={uuid:n.observation.uuid};e(W(s().observations.unreview,r))}}}function J(e){return function(t,n){var r=n();if(B(r)){t(L({comments:r.observation.comments.concat([{created_at:l()().format(),user:r.config.currentUser,body:e,api_status:"saving"}])}));var o={comment:{parent_type:"Observation",parent_id:r.observation.uuid,body:e}};t(W(s().comments.create,o))}}}function ee(e,t){return function(n,r){var o=r();B(o)&&(n(L({comments:o.observation.comments.map((function(n){return n.uuid===e?k(k({},n),{},{body:t,api_status:"saving"}):n}))})),n(W(s().comments.update,{uuid:e,comment:{body:t}})))}}function te(e){return function(t){t((0,b.Rn)({show:!0,message:I18n.t("you_sure_delete_comment?"),confirmText:"Yes",onConfirm:function(){t(function(e){return function(t,n){var r=n();B(r)&&(t(L({comments:o().map(r.observation.comments,(function(t){return t.uuid===e?k(k({},t),{},{api_status:"deleting"}):t}))})),t(W(s().comments.delete,{uuid:e})))}}(e))}}))}}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,i){var a=i(),c=a.config.testingApiV2;if(B(a)){t&&t.silenceCoarse&&r((0,g.qO)({prefers_skip_coarer_id_modal:!0})),r(L({identifications:o().map(a.observation.identifications,(function(e){return e.user.id===a.config.currentUser.id?k(k({},e),{},{current:!1}):e})).concat([{created_at:l()().format(),user:a.config.currentUser,body:n.body,agreedTo:n.agreedTo,disagreement:n.disagreement,taxon:e,current:!0,api_status:"saving"}])}));var u={identification:{observation_id:c?a.observation.uuid:a.observation.id,taxon_id:e.id,body:n.body,vision:!!e.isVisionResult,disagreement:n.disagreement}};r(W(s().identifications.create,u))}}}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var i=r();if(B(i)){var a=i.observation,s=a.taxon;(!1===a.preferences.prefers_community_taxon||!1===a.user.preferences.prefers_community_taxa&&null===a.preferences.prefers_community_taxon)&&(s=a.community_taxon||a.taxon),s&&e.id!==s.id&&o().includes(s.ancestor_ids,e.id)?n((0,_.Mu)({onDisagree:function(){n(ne(e,{},k({disagreement:!0},t)))},onBestGuess:function(){n(ne(e,{disagreement:!1},k({disagreement:!1},t)))},oldTaxon:s,newTaxon:e})):n(ne(e,null,t))}}}function oe(e,t){return function(n,r){var o=r();B(o)&&(n(L({identifications:o.observation.identifications.map((function(n){return n.uuid===e?k(k({},n),{},{body:t,api_status:"saving"}):n}))})),n(W(s().identifications.update,{uuid:e,identification:{body:t}})))}}function ie(e){return function(t){t((0,b.Rn)({show:!0,message:I18n.t("you_sure_delete_identification?"),confirmText:"Yes",onConfirm:function(){t(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var i=r();B(i)&&(n(L({identifications:t.delete?o().map(i.observation.identifications,(function(t){return t.uuid===e?k(k({},t),{},{api_status:"deleting"}):t})):o().map(i.observation.identifications,(function(t){return t.uuid===e?k(k({},t),{},{current:!1,api_status:"deleting"}):t}))})),n(W(s().identifications.delete,k({uuid:e},t))))}}(e,{delete:!0}))}}))}}function ae(e){return function(t,n){var r=n();B(r)&&(t(L({identifications:o().map(r.observation.identifications,(function(t){return t.uuid===e?k(k({},t),{},{current:!1,api_status:"saving"}):t}))})),t(W(s().identifications.update,{uuid:e,identification:{current:!1}})))}}function se(e){return function(t,n){var r=n();B(r)&&(t(L({identifications:o().map(r.observation.identifications,(function(t){return t.uuid===e?k(k({},t),{},{current:!0,api_status:"saving"}):t}))})),t(W(s().identifications.update,{uuid:e,identification:{current:!0}})))}}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var i=r();if(B(i)){var a=k({id:i.config.testingApiV2?i.observation.uuid:i.observation.id},t);e&&(a.scope=e,n(L({votes:o().filter(i.observation.votes,(function(t){return!(t.user.id===i.config.currentUser.id&&t.vote_scope===e)})).concat([{vote_flag:"yes"===t.vote,vote_scope:a.scope,user:i.config.currentUser,api_status:"saving"}])}))),n(W(s().observations.fave,a))}}}function le(e){return function(t,n){var r=n(),i={id:r.config.testingApiV2?r.observation.uuid:r.observation.id};e&&(i.scope=e,t(L({votes:o().map(r.observation.votes,(function(t){return t.user.id===r.config.currentUser.id&&t.vote_scope===e?k(k({},t),{},{api_status:"deleting"}):t}))}))),t(W(s().observations.unfave,i))}}function ue(){return function(e,t){var n=t();B(n)&&(e(L({faves:n.observation.faves.concat([{votable_id:n.observation.id,user:n.config.currentUser,temporary:!0}])})),e(ce()))}}function fe(){return function(e,t){var n=t();B(n)&&(e(L({faves:n.observation.faves.filter((function(e){return e.user.id!==n.config.currentUser.id}))})),e(le()))}}function de(){return function(e,t){var n=t();if(B(n)&&!H(n))if(n.config.testingApiV2){e((0,h.Kv)([{api_status:"saving"}]));var r={relationship:{friend_id:n.observation.user.id}};e(W(s().relationships.create,r,{callback:function(){return e((0,h.E_)())}}))}else{var o=n.subscriptions.subscriptions.concat([{resource_type:"User",resource_id:n.observation.user.id,user_id:n.config.currentUser.id,api_status:"saving"}]);e((0,m.JV)(o));var i={id:n.config.currentUser.id,friend_id:n.observation.user.id};e(W(s().users.update,i,{callback:function(){return e((0,m.hP)())}}))}}}function pe(){return function(e,t){var n=t();if(B(n)&&!H(n)){if(n.config.testingApiV2){var r=n.relationships.relationships[0];if(o().isEmpty(r))return;return e((0,h.Kv)([{api_status:"deleting"}])),void e(W(s().relationships.delete,{id:r.id},{callback:function(){e((0,h.E_)())}}))}var i=o().map(n.subscriptions.subscriptions,(function(e){return"User"===e.resource_type?k(k({},e),{},{api_status:"deleting"}):e}));e((0,m.JV)(i));var a={id:n.config.currentUser.id,remove_friend_id:n.observation.user.id};e(W(s().users.update,a,{callback:function(){e((0,m.hP)())}}))}}}function me(){return function(e,t){var n=t();if(B(n)&&!H(n)){if(o().find(n.subscriptions,(function(e){return"Observation"===e.resource_type}))){var r=o().map(n.subscriptions,(function(e){return"Observation"===e.resource_type?k(k({},e),{},{api_status:"deleting"}):e}));e((0,m.JV)(r))}else{var i=n.subscriptions.subscriptions.concat([{resource_type:"Observation",resource_id:n.observation.id,user_id:n.config.currentUser.id,api_status:"saving"}]);e((0,m.JV)(i))}var a={id:n.observation.uuid};e(W(s().observations.subscribe,a,{callback:function(){return e((0,m.hP)())}}))}}}function he(e,t){return function(n,r){var o=r();if(B(o)){var i=o.config.testingApiV2;n(L({annotations:(o.observation.annotations||[]).concat([{controlled_attribute:e,controlled_value:t,user:o.config.currentUser,api_status:"saving"}])}));var a={resource_type:"Observation",resource_id:i?o.observation.uuid:o.observation.id,controlled_attribute_id:e.id,controlled_value_id:t.id};n(W(s().annotations.create,a))}}}function ve(e){return function(t,n){var r=n();B(r)&&(t(L({annotations:o().map(r.observation.annotations,(function(t){return t.user.id===r.config.currentUser.id&&t.uuid===e?k(k({},t),{},{api_status:"deleting"}):t}))})),t(W(s().annotations.delete,{id:e})))}}function ye(e,t){return function(n,r){var i=r();B(i)&&(n(L({annotations:o().map(i.observation.annotations,(function(n){return n.uuid===e?k(k({},n),{},{api_status:"voting",votes:(n.votes||[]).concat([{vote_flag:"bad"!==t,user:i.config.currentUser,api_status:"saving"}])}):n}))})),n(W(s().annotations.vote,{id:e,vote:t})))}}function be(e){return function(t,n){var r=n();B(r)&&(t(L({annotations:o().map(r.observation.annotations,(function(t){return t.uuid===e?k(k({},t),{},{api_status:"voting",votes:o().map(t.votes,(function(e){return e.user.id===r.config.currentUser.id?k(k({},e),{},{api_status:"deleting"}):e}))}):t}))})),t(W(s().annotations.unvote,{id:e})))}}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"needs_id"===e?ce("needs_id",{vote:"false"===t.agree?"no":"yes"}):function(n,r){var i=r();if(B(i)){var a=o().filter(i.qualityMetrics,(function(t){return!(t.user&&t.user.id===i.config.currentUser.id&&t.metric===e)})).concat([{metric:e,agree:"false"!==t.agree,created_at:l()().format(),user:i.config.currentUser,api_status:"saving"}]);n((0,p.zn)(a));var c=k({id:i.config.testingApiV2?i.observation.uuid:i.observation.id,metric:e},t);n(W(s().observations.setQualityMetric,c,{fetchQualityMetrics:!0}))}}}function _e(e){return"needs_id"===e?le("needs_id"):function(t,n){var r=n();if(B(r)){var i=o().map(r.qualityMetrics,(function(t){return t.user&&t.user.id===r.config.currentUser.id&&t.metric===e?k(k({},t),{},{api_status:"deleting"}):t}));t((0,p.zn)(i));var a={id:r.config.testingApiV2?r.observation.uuid:r.observation.id,metric:e};t(W(s().observations.deleteQualityMetric,a,{fetchQualityMetrics:!0}))}}}function Ee(e){return function(t,n){var r=n(),o=r.config.testingApiV2;t((0,w.Yy)(r.observation,e,L,(function(){t(q(o?r.observation.uuid:r.observation.id))})))}}function we(e){return function(t){t((0,b.Rn)({show:!0,message:I18n.t("are_you_sure_you_want_to_remove_this_observation_from_project",{project:e.title}),confirmText:I18n.t("yes"),onConfirm:function(){t(function(e){return function(t,n){var r=n(),o=r.config.testingApiV2;t((0,w.y3)(r.observation,e,L,(function(){t(q(o?r.observation.uuid:r.observation.id))})))}}(e))}}))}}function Oe(e){return function(t,n){var r=n(),o=r.config.testingApiV2;t((0,w.Y_)(r.observation,e,L,(function(){t(q(o?r.observation.uuid:r.observation.id))})))}}function xe(e){return function(t,n){var r=n(),o=r.config.testingApiV2;t((0,w.Tw)(r.observation,L,(function(){t(q(o?r.observation.uuid:r.observation.id))}),e))}}function ke(e,t){return function(n,r){var o=r(),i=o.config.testingApiV2;n((0,w.lz)(o.observation,e,L,(function(){n(q(i?o.observation.uuid:o.observation.id))}),t))}}function Se(e){return function(t,n){var r=n(),o=r.config.testingApiV2;t((0,w.c7)(r.observation,e,L,(function(){t(q(o?r.observation.uuid:r.observation.id))})))}}function Ae(e,t){return function(n,r){var i,s=r().observation;e instanceof a.Photo?i="photos":e instanceof a.Sound&&(i="sounds"),i&&n(L(S({},i,o().map(s[i],(function(n){return n.id===e.id?new n.constructor(k(k({},n),{},{api_status:t})):n})))))}}function je(e,t){return function(n,r){var o=r().observation;if(t&&t.length>0){var a=i.createElement(E.A,{rejectedFiles:t});a&&n((0,b.Rn)({show:!0,message:a,confirmText:I18n.t("ok")}))}if(o&&0!==e.length){var c=[],l=[],u=[];e.forEach((function(e){if(e.type.match(/^image\//)){c.push(new(s().Photo)({preview:e.preview}));var t={"observation_photo[observation_id]":o.id,file:e};u.push(s().observation_photos.create(t,{same_origin:!0}))}else if(e.type.match(/^(audio|video)\//)){l.push({file_url:e.preview});var n={"observation_sound[observation_id]":o.id,file:e};u.push(s().observation_sounds.create(n,{same_origin:!0}))}})),c.length>0&&n(L({photos:r().observation.photos.concat(c)})),l.length>0&&n(L({sounds:r().observation.sounds.concat(l)})),Promise.all(u).then((function(){n(z({}))})).catch((function(e){n(z({error:e}))}))}}}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){window.scrollTo(0,0);var o=r().config.testingApiV2,i=U(e,r());t&&t.skipSetState||history.pushState(i.state,i.title,i.url),document.title=i.title,n((function(e){e(F({})),e((0,v.vD)(null)),e((0,u.V7)([])),e((0,f.VY)()),e((0,p.zn)([])),e((0,d.$d)([])),e((0,d.Rd)([])),e((0,d.wb)(null)),e((0,d.Hs)(null)),e((0,m.JV)([])),e((0,h.Kv)([]))})),t.useInstance?n(V(e,{fetchAll:!0})):n(q(o&&e.uuid||e.id,{fetchAll:!0}))}}function Pe(){return function(e,t){var n=t().observation;n.taxon&&n.taxon.rank_level<=50?e((0,v.tG)({taxon_id:n.taxon.id,quality_grade:"research",per_page:10})):e((0,v.vD)([]))}}n.d(t,{Ap:function(){return Y},Ay:function(){return R},B1:function(){return q},BC:function(){return J},CN:function(){return Q},Fk:function(){return te},IJ:function(){return Ce},J7:function(){return Pe},Mf:function(){return we},NQ:function(){return Z},OF:function(){return K},QA:function(){return ee},Qt:function(){return pe},R6:function(){return B},SY:function(){return ye},Tw:function(){return xe},Uf:function(){return se},Um:function(){return me},V6:function(){return re},Vh:function(){return W},Wp:function(){return L},Ws:function(){return oe},Xl:function(){return ie},Xm:function(){return ve},Y_:function(){return Oe},Yy:function(){return Ee},b4:function(){return X},c:function(){return Ae},c7:function(){return Se},hP:function(){return be},ic:function(){return G},ir:function(){return ae},jT:function(){return ue},lC:function(){return he},lz:function(){return ke},pV:function(){return de},r8:function(){return z},yP:function(){return fe},yb:function(){return _e},zN:function(){return ge},ze:function(){return je}});var A,r=n(16154),o=n.n(r),i=n(24577),a=n(64165),s=n.n(a),c=n(92276),l=n.n(c),u=n(38323),f=n(47066),d=n(10064),p=n(95089),m=n(31092),h=n(3105),v=n(78765),y=n(84423),b=n(99520),g=n(70602),_=n(28193),E=n(45899),w=n(82272),j="obs-show/observation/SET_OBSERVATION",C="obs-show/observation/SET_ATTRIBUTES",P={login:!0,icon_url:!0},N={action:!0,id:!0,created_at:!0,reason:!0,user:P},T={ancestry:!0,ancestor_ids:!0,ancestors:{id:!0,uuid:!0,name:!0,iconic_taxon_name:!0,is_active:!0,preferred_common_name:!0,rank:!0,rank_level:!0},default_photo:{attribution:!0,license_code:!0,url:!0,square_url:!0},iconic_taxon_name:!0,id:!0,is_active:!0,name:!0,preferred_common_name:!0,rank:!0,rank_level:!0},I={id:!0,label:!0,multivalued:!0},D={admins:{user_id:!0},icon:!0,project_observation_fields:{id:!0,observation_field:{
allowed_values:!0,datatype:!0,description:!0,id:!0,name:!0}},slug:!0,title:!0},M={annotations:{controlled_attribute:I,controlled_value:I,user:P,vote_score:!0,votes:{vote_flag:!0,user:P}},application:{icon:!0,name:!0,url:!0},comments:{body:!0,created_at:!0,flags:{id:!0,resolved:!0},hidden:!0,id:!0,moderator_actions:N,spam:!0,user:P},community_taxon:T,created_at:!0,created_at_details:"all",description:!0,faves:{id:!0,user:P},flags:{id:!0,flag:!0,resolved:!0},geojson:!0,geoprivacy:!0,id:!0,identifications:{body:!0,category:!0,created_at:!0,current:!0,disagreement:!0,flags:{id:!0,resolved:!0},hidden:!0,moderator_actions:N,previous_observation_taxon:T,spam:!0,taxon:T,taxon_change:{id:!0,type:!0},updated_at:!0,user:k(k({},P),{},{id:!0}),uuid:!0,vision:!0},identifications_most_agree:!0,latitude:!0,license_code:!0,location:!0,longitude:!0,map_scale:!0,non_traditional_projects:{current_user_is_member:!0,project_user:{user:P},project:D},obscured:!0,observed_on:!0,observed_on_details:"all",observed_time_zone:!0,ofvs:{observation_field:{allowed_values:!0,datatype:!0,description:!0,name:!0,taxon:{name:!0},uuid:!0},user:P,uuid:!0,value:!0,taxon:T},outlinks:{source:!0,url:!0},photos:{id:!0,uuid:!0,url:!0,license_code:!0,flags:{id:!0,flag:!0,resolved:!0},moderator_actions:N,hidden:!0},place_guess:!0,place_ids:!0,positional_accuracy:!0,preferences:{prefers_community_taxon:!0},private_geojson:!0,private_place_guess:!0,private_place_ids:!0,project_observations:{current_user_is_member:!0,preferences:{allows_curator_coordinate_access:!0},project:D,uuid:!0},public_positional_accuracy:!0,quality_grade:!0,reviewed_by:!0,sounds:{file_url:!0,file_content_type:!0,id:!0,license_code:!0,play_local:!0,url:!0,uuid:!0,flags:{id:!0,flag:!0,resolved:!0},moderator_actions:N,hidden:!0},tags:!0,taxon:T,taxon_geoprivacy:!0,time_observed_at:!0,time_zone:!0,user:k(k({},P),{},{id:!0,name:!0,observations_count:!0,preferences:{prefers_community_taxa:!0,prefers_observation_fields_by:!0,prefers_project_addition_by:!0}}),viewer_trusted_by_observer:!0,votes:{id:!0,user:k(k({},P),{},{id:!0}),vote_flag:!0,vote_scope:!0}}},38323:function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===i?t.places:e}function c(e){return{type:i,places:e}}function l(){return function(e,t){var n=t(),r=n.observation,i=n.config.testingApiV2;if(!r||!r.latitude||!r.longitude)return null;var s,l={lat:r.latitude,lng:r.longitude,no_geom:!0,order_by:"admin_and_distance"};return i&&(l.fields=a),(s=r.private_place_ids&&r.private_place_ids.length>0?r.private_place_ids:r.place_ids)&&0!==s.length?o().places.fetch(s,l).then((function(t){e(c(t.results))})).catch((function(){})):null}}n.d(t,{Ay:function(){return s},V7:function(){return c},lH:function(){return l}});var r=n(64165),o=n.n(r),i="obs-show/observation_places/SET_OBSERVATION_PLACES",a={admin_level:!0,bbox_area:!0,display_name:!0,id:!0,name:!0,place_type:!0,uuid:!0}},10064:function(e,t,n){"use strict";function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,f(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}var e=v(),t=e.m(u),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor,o={throw:1,return:2,break:3,continue:3};return(u=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new b(e,t)},AsyncIterator:h,async:function(e,t,n,o,a){return(r(t)?m:p)(i(e),t,n,o,a)},keys:d,values:f}})()}function f(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(l(e)+" is not iterable")}function d(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function p(e,t,n,r,o){var i=m(e,t,n,r,o);return i.next().then((function(e){return e.done?e.value:i.next()}))}function m(e,t,n,r,o){return new h(v().w(e,t,n,r),o||Promise)}function h(e,t){function n(r,o,i,a){try{var s=e[r](o),c=s.value;return c instanceof b?t.resolve(c.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(c).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var r;this.next||(y(h.prototype),y(h.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),y(this,"_invoke",(function(e,o,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}),!0)}function v(){function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return y(l,"_invoke",function(n,r,o){function p(n,r){for(s=n,c=r,t=0;!f&&l&&!o&&t<u.length;t++){var o,i=u[t],p=d.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}var i,s,c,l=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,d.n=n,a}};return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,c=m;(t=s<2?e:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,c)):d.n=c:d.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}function s(){}function c(){}function l(){}function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag",a={};t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(y(t={},r,(function(){return this})),t),f=l.prototype=s.prototype=Object.create(u);return c.prototype=l,y(f,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,o,"GeneratorFunction"),y(f),y(f,o,"Generator"),y(f,r,(function(){return this})),y(f,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:i,m:d}})()}function y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}y=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){y(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},y(e,t,n,r)}function b(e,t){this.v=e,this.k=t}function g(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;t.data&&t.data.params&&t.data.params.fields&&delete t.data.params.fields;var n=function(e){return!e.obscured||e.private_geojson};switch(t.type){case O:return E(E({},e),{},{earlierUserObservations:o().filter(t.observations,n)});case x:return E(E({},e),{},{laterUserObservations:o().filter(t.observations,n)});case k:return E(E({},e),{},{earlierUserObservationsByObserved:t.observations});case S:return E(E({},e),{},{laterUserObservationsByObserved:t.observations});case A:return E(E({},e),{},{nearby:o().isNull(t.data)?null:E(E({},t.data),{},{observations:o().filter(t.data.observations,n)})});case j:return E(E({},e),{},{moreFromClade:o().isNull(t.data)?null:E(E({},t.data),{},{observations:o().filter(t.data.observations,n)})});case C:return P}return e}function I(e){return{type:O,observations:e}}function D(e){return{type:x,observations:e}}function M(e){return{type:S,observations:e}}function R(e){return{type:A,data:e}}function F(e){return{type:j,data:e}}function L(){return function(e,t){var n=t(),r=n.observation,i=n.config,s=n.otherObservations;if(!r||!r.geojson)return null;if(!o().isNull(s.nearby))return null;var c={lat:o().round(r.geojson.coordinates[1],1),lng:o().round(r.geojson.coordinates[0],1),verifiable:!0,radius:50,order_by:"observed_on",preferred_place_id:i.preferredPlace?i.preferredPlace.id:null,locale:I18n.locale,ttl:-1};i.testingApiV2&&(c.fields=N);var l=Object.assign({},c,{photos:!0,per_page:7,no_total_hits:!0,details:"all"});return a().observations.search(l).then((function(t){var n=o().filter(t.results,(function(e){return e.id!==r.id})).slice(0,6);e(R({params:E(E({},c),{},{lat:r.geojson.coordinates[1],lng:r.geojson.coordinates[0],not_id:r.uuid}),observations:n}))})).catch((function(){}))}}function U(){return function(e,t){var n=t(),r=n.observation,i=n.config,s=n.otherObservations,c=i.testingApiV2;if(!r||!r.geojson||!r.taxon)return null;if(!o().isNull(s.moreFromClade))return null;var l=r.taxon.id;r.taxon.rank_level<=10&&(l=o().find(r.taxon.ancestors,(function(e){return"genus"===e.rank}))||r.taxon.id);var u={taxon_id:l,order_by:"votes",preferred_place_id:i.preferredPlace?i.preferredPlace.id:null,locale:I18n.locale,ttl:-1};c&&(u.fields=N);var f=Object.assign({},u,{photos:!0,per_page:7,no_total_hits:!0,details:"all"});return a().observations.search(f).then((function(t){var n=o().filter(t.results,(function(e){return e.id!==r.id})).slice(0,6);e(F({params:E(E({},u),{},{not_id:r.uuid}),observations:n}))})).catch((function(){}))}}function B(){return function(){var e,t=(e=u().mark((function e(t,n){var r,o,i,s,l,f,d,p,m,h,v,y,b,g,_,E;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),o=r.config,i=o.testingApiV2,s=o.currentUser,(l=r.observation)&&l.user){e.next=5;break}return e.abrupt("return",null);case 5:return f={user_id:l.user.id,order_by:"id",per_page:6,no_total_hits:!0,details:"all",preferred_place_id:r.config.preferredPlace?r.config.preferredPlace.id:null,locale:I18n.locale,ttl:-1},i&&(f.fields=N),d=Object.assign({},f,{order:"desc",id_below:l.id}),p=Object.assign({},f,{order:"asc",id_above:l.id}),e.next=11,a().observations.search(d);case 11:return m=e.sent,e.next=14,a().observations.search(p);case 14:if(h=e.sent,t(I(m.results)),t(D(h.results)),!l.latitude&&!l.obscured){e.next=19;break}return e.abrupt("return",Promise.resolve());case 19:if(s&&s.id===l.user.id){e.next=21;break}return e.abrupt("return",Promise.resolve());case 21:if(v=c()(l.time_observed_at||l.observed_on)){e.next=24;break}return e.abrupt("return",Promise.resolve());case 24:return y=Object.assign({},f,{fields:Object.assign({},f.fields,{geojson:!0,obscured:!0})}),b=Object.assign({},y,{order:"desc",d1:c()(l.time_observed_at||l.observed_on).subtract(1,"days").format(),d2:v.format(),geo:!0,per_page:1,not_id:i?l.uuid:l.id}),e.next=28,a().observations.search(b);case 28:return g=e.sent,_=Object.assign({},y,{order:"asc",d1:v.format(),d2:c()(l.time_observed_at||l.observed_on).add(1,"days").format(),has_geo:!0,per_page:1,not_id:i?l.uuid:l.id}),e.next=32,a().observations.search(_);case 32:if(E=e.sent,0!==g.results.length&&0!==g.results.length){e.next=35;break}return e.abrupt("return",Promise.resolve());case 35:return t((u=g.results,{type:k,observations:u})),e.abrupt("return",t(M(E.results)));case 37:case"end":return e.stop()}var u}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){function a(e){g(i,r,o,a,s,"next",e)}function s(e){g(i,r,o,a,s,"throw",e)}var i=e.apply(t,n);a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()}n.d(t,{$d:function(){return I},Ay:function(){return T},Hs:function(){return F},Nj:function(){return U},Rd:function(){return D},l2:function(){return B},qQ:function(){return L},wb:function(){return R}});var r=n(16154),o=n.n(r),i=n(64165),a=n.n(i),s=n(92276),c=n.n(s),O="obs-show/other_observations/SET_EARLIER_USER_OBSERVATIONS",x="obs-show/other_observations/SET_LATER_USER_OBSERVATIONS",k="obs-show/other_observations/SET_EARLIER_USER_OBSERVATIONS_BY_OBSERVED",S="obs-show/other_observations/SET_LATER_USER_OBSERVATIONS_BY_OBSERVED",A="obs-show/other_observations/SET_NEARBY",j="obs-show/other_observations/SET_MORE_FROM_CLADE",C="obs-show/other_observations/RESET_OTHER_OBSERVATIONS",P={earlierUserObservations:[],laterUserObservations:[],nearby:null,moreFromClade:null},N={id:!0,latitude:!0,obscured:!0,photos:{id:!0,uuid:!0,url:!0,license_code:!0},taxon:{default_photo:{attribution:!0,license_code:!0,url:!0},id:!0,is_active:!0,name:!0,preferred_common_name:!0,rank:!0,rank_level:!0},user:{login:!0},uuid:!0}},34157:function(e,t,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===r?Object.assign({},t.newState):e}function i(e){return{type:r,newState:e}}n.d(t,{A:function(){return o},l:function(){return i}});var r="obs-show/project_fields_model/SET_PROJECT_FIELDS_MODAL_STATE"},98741:function(e,t,n){"use strict";function a(e,t){return function(n,r){var a=r();if((0,i.R6)(a)&&e&&e.uuid){var s={id:e.uuid,project_observation:{prefers_curator_coordinate_access:t}};n((0,i.Vh)(o().project_observations.update,s))}}}n.d(t,{o:function(){return a}});var r=n(64165),o=n.n(r),i=n(62896)},95089:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===i?t.metrics:e}function s(e){return{type:i,metrics:e}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n().config.testingApiV2,i=e.observation||n().observation;if(!i)return null;var a={id:i.id,ttl:-1};return r&&(a.id=i.uuid,a.fields={agree:!0,id:!0,metric:!0,user:{id:!0,login:!0,icon_url:!0}}),o().observations.qualityMetrics(a).then((function(e){t(s(e.results))})).catch((function(){}))}}n.d(t,{Ay:function(){return a},FK:function(){return c},zn:function(){return s}});var r=n(64165),o=n.n(r),i="obs-show/quality_metrics/SET_QUALITY_METRICS"},3105:function(e,t,n){"use strict";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{relationships:[],loaded:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:e.relationships=t.relationships,e.loaded=!0;break;case a:e.relationships=[],e.loaded=!1}return e}function c(e){return{type:i,relationships:e}}function l(){return{type:a}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),i=e.observation||r.observation;return i&&r.config.testingApiV2?o().relationships.search({user_id:i.user.id}).then((function(e){t(c(e.results))})).catch((function(){})):null}}n.d(t,{Ay:function(){return s},E_:function(){return u},Kv:function(){return c},pj:function(){return l}});var r=n(64165),o=n.n(r),i="obs-show/relationships/SET_RELATIONSHIPS",a="obs-show/relationships/RESET_RELATIONSHIPS"},31092:function(e,t,n){"use strict";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{subscriptions:[],loaded:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:e.subscriptions=t.subscriptions,e.loaded=!0;break;case c:e.subscriptions=[],e.loaded=!1}return e}function u(e){return{type:s,subscriptions:e}}function f(){return{type:c}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=n(),i=e.observation||r.observation;if(!i)return null;var s=r.config.testingApiV2,c={id:i.id};return s&&(c.fields="resource_type",c.id=i.uuid),a().observations.subscriptions(c).then((function(e){var n=e.results;s&&(n=o().reject(n,(function(e){return"User"===e.resource_type}))),t(u(n))})).catch((function(){}))}}n.d(t,{Ay:function(){return l},JV:function(){return u},hP:function(){return d},ky:function(){return f}});var r=n(16154),o=n.n(r),i=n(64165),a=n.n(i),s="obs-show/subscriptions/SET_SUBSCRIPTIONS",c="obs-show/subscriptions/RESET_SUBSCRIPTIONS"},70602:function(e,t,n){"use strict";function a(e){return function(t,n){var r=n().config;return r&&r.currentUser?(t((0,i.W3)(e)),o().users.update_session(e).catch((function(){}))):null}}function s(e){return function(t,n){var r=n().config;if(!r||!r.currentUser)return null;var o=$("meta[name=csrf-param]").attr("content"),i=$("meta[name=csrf-token]").attr("content"),a=new FormData;a.append(o,i);var s={method:"put",credentials:"same-origin",body:a},c="/users/".concat(r.currentUser.id,"/leave_test?test=").concat(e);return fetch(c,s).then((function(e){if(!(e.status>=200&&e.status<300))throw new Error("there was a problem leaving the test group");location.reload()})).catch((function(e){alert(e)}))}}n.d(t,{Rh:function(){return s},qO:function(){return a}});var r=n(64165),o=n.n(r),i=n(16745)},81171:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var r=n(16154),o=n.n(r),i=n(24577),l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"taxaDissimilar",value:function(e,t){var n=o().isEmpty(e.ancestry)?"".concat(e.id):"".concat(e.ancestry,"/").concat(e.id),r=o().isEmpty(t.ancestry)?t.id:"".concat(t.ancestry,"/").concat(t.id);return!(n.id===t.id||n.includes(r))}},{key:"taxonImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.createElement("i",{className:"taxon-image icon icon-iconic-unknown"});if(!e)return n;var r=(null==e?void 0:e.representativePhoto)||(null==e?void 0:e.defaultPhoto);return r?i.createElement("img",{alt:e.name,src:r.photoUrl(t.size),className:"taxon-image"}):e.iconic_taxon_name?i.createElement("i",{className:"taxon-image icon icon-iconic-".concat(e.iconic_taxon_name.toLowerCase())}):n}},{key:"observationMissingProjectFields",value:function(e,t){if(!t||o().isEmpty(t.project_observation_fields))return!1;var n=[];return o().each(t.project_observation_fields,(function(t){o().find(e.ofvs,(function(e){return e.observation_field.id===t.observation_field.id}))||n.push(t)})),n}}],t&&s(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();t.A=l},63048:function(e,t,n){"use strict";function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fe(r.key),r)}}function Fe(e){var t=function(e){if("object"!=Me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Me(t)?t:t+""}function Le(e,t,n){return t=Be(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ue()?Reflect.construct(t,n||[],Be(e).constructor):t.apply(e,n))}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function Ke(e){return{type:We,activeTab:e}}function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ze.apply(null,arguments)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}function Je(e){var t=function(e){if("object"!=Xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xe(t)?t:t+""}function et(e,t,n){return t=nt(t),function(e,t){if(t&&("object"==Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,tt()?Reflect.construct(t,n||[],nt(e).constructor):t.apply(e,n))}function tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tt=function(){return!!e})()}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rt(e,t)}function st(e,t,n,r){return function(o,i){var a=i();if((0,ze.R6)(a)){var s={flag:{flaggable_type:e,flaggable_id:t,flag:n},flag_explanation:r};o((0,ze.Vh)(d().flags.create,s))}}}function ct(e){return function(t,n){var r=n();(0,ze.R6)(r)&&t((0,ze.Vh)(d().flags.delete,{id:e}))}}function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ot(r.key),r)}}function Ot(e){var t=function(e){if("object"!=_t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_t(t)?t:t+""}function xt(e,t,n){return t=St(t),function(e,t){if(t&&("object"==_t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kt()?Reflect.construct(t,n||[],St(e).constructor):t.apply(e,n))}function kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kt=function(){return!!e})()}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function At(e,t){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},At(e,t)}function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return(t=function(e){var t=function(e){if("object"!=Pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ut(r.key),r)}}function Ut(e){var t=function(e){if("object"!=Ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ft(t)?t:t+""}function Bt(e,t,n){return t=Vt(t),function(e,t){if(t&&("object"==Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ht()?Reflect.construct(t,n||[],Vt(e).constructor):t.apply(e,n))}function Ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ht=function(){return!!e})()}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function qt(e,t){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qt(e,t)}function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function Yt(e){var t=function(e){if("object"!=$t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=$t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$t(t)?t:t+""}function Xt(e,t,n){return t=Qt(t),function(e,t){if(t&&("object"==$t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zt()?Reflect.construct(t,n||[],Qt(e).constructor):t.apply(e,n))}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}function Jt(e,t){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jt(e,t)}function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cn(r.key),r)}}function cn(e){var t=function(e){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==an(t)?t:t+""}function ln(e,t,n){return t=fn(t),function(e,t){if(t&&("object"==an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,un()?Reflect.construct(t,n||[],fn(e).constructor):t.apply(e,n))}function un(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(un=function(){return!!e})()}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dn(e,t)}function vn(e){return{type:hn,newState:e}}function _n(e){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(e)}function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wn(r.key),r)}}function wn(e){var t=function(e){if("object"!=_n(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_n(t)?t:t+""}function On(e,t,n){return t=kn(t),function(e,t){if(t&&("object"==_n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xn()?Reflect.construct(t,n||[],kn(e).constructor):t.apply(e,n))}function xn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xn=function(){return!!e})()}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function Sn(e,t){return Sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sn(e,t)}
function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Un(r.key),r)}}function Un(e){var t=function(e){if("object"!=Fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fn(t)?t:t+""}function Bn(e,t,n){return t=Vn(t),function(e,t){if(t&&("object"==Fn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hn()?Reflect.construct(t,n||[],Vn(e).constructor):t.apply(e,n))}function Hn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hn=function(){return!!e})()}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}function qn(e,t){return qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qn(e,t)}function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,or(r.key),r)}}function or(e){var t=function(e){if("object"!=nr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nr(t)?t:t+""}function ir(e,t,n){return t=sr(t),function(e,t){if(t&&("object"==nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ar()?Reflect.construct(t,n||[],sr(e).constructor):t.apply(e,n))}function ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ar=function(){return!!e})()}function sr(e){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(e)}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function dr(e){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mr(r.key),r)}}function mr(e){var t=function(e){if("object"!=dr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dr(t)?t:t+""}function hr(e,t,n){return t=yr(t),function(e,t){if(t&&("object"==dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,vr()?Reflect.construct(t,n||[],yr(e).constructor):t.apply(e,n))}function vr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vr=function(){return!!e})()}function yr(e){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yr(e)}function br(e,t){return br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},br(e,t)}function wr(e){return{type:Er,newState:e}}function jr(e){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jr(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pr(r.key),r)}}function Pr(e){var t=function(e){if("object"!=jr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jr(t)?t:t+""}function Nr(e,t,n){return t=Ir(t),function(e,t){if(t&&("object"==jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tr()?Reflect.construct(t,n||[],Ir(e).constructor):t.apply(e,n))}function Tr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tr=function(){return!!e})()}function Ir(e){return Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ir(e)}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ur(r.key),r)}}function Ur(e){var t=function(e){if("object"!=Fr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fr(t)?t:t+""}function Br(e,t,n){return t=Vr(t),function(e,t){if(t&&("object"==Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hr()?Reflect.construct(t,n||[],Vr(e).constructor):t.apply(e,n))}function Hr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Hr=function(){return!!e})()}function Vr(e){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vr(e)}function qr(e,t){return qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qr(e,t)}function Kr(e){return e.latitude||e.obscured}function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zr(r.key),r)}}function Zr(e){var t=function(e){if("object"!=Yr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Yr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yr(t)?t:t+""}function Qr(e,t,n){return t=eo(t),function(e,t){if(t&&("object"==Yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jr()?Reflect.construct(t,n||[],eo(e).constructor):t.apply(e,n))}function Jr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jr=function(){return!!e})()}function eo(e){return eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},eo(e)}function to(e,t){return to=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},to(e,t)}function io(e){return{type:oo,newState:e}}function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,po(r.key),r)}}function po(e){var t=function(e){if("object"!=uo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==uo(t)?t:t+""}function mo(e,t,n){return t=vo(t),function(e,t){if(t&&("object"==uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ho()?Reflect.construct(t,n||[],vo(e).constructor):t.apply(e,n))}function ho(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ho=function(){return!!e})()}function vo(e){return vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vo(e)}function yo(e,t){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yo(e,t)}function Co(){return Co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=To(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Co.apply(null,arguments)}function Po(e,t,n){return t=To(t),function(e,t){if(t&&("object"==$o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,No()?Reflect.construct(t,n||[],To(e).constructor):t.apply(e,n))}function No(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(No=function(){return!!e})()}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},To(e)}function Io(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Do(e,t)}function Do(e,t){return Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Do(e,t)}function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Ro(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){if(e){if("string"==typeof e)return Fo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fo(e,t):void 0}}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Lo(){function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,Uo(e),i)},finish:function(e){return n(r.f,e)}},n=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}))),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}var e=zo(),t=e.m(Lo),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor,o={throw:1,return:2,break:3,continue:3};return(Lo=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new Ko(e,t)},AsyncIterator:qo,async:function(e,t,n,o,a){return(r(t)?Vo:Ho)(i(e),t,n,o,a)},keys:Bo,values:Uo}})()}function Uo(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError($o(e)+" is not iterable")}function Bo(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function Ho(e,t,n,r,o){var i=Vo(e,t,n,r,o);return i.next().then((function(e){return e.done?e.value:i.next()}))}function Vo(e,t,n,r,o){return new qo(zo().w(e,t,n,r),o||Promise)}function qo(e,t){function n(r,o,i,a){try{var s=e[r](o),c=s.value;return c instanceof Ko?t.resolve(c.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(c).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var r;this.next||(Wo(qo.prototype),Wo(qo.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Wo(this,"_invoke",(function(e,o,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}),!0)}function zo(){function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Wo(l,"_invoke",function(n,r,o){function p(n,r){for(s=n,c=r,t=0;!f&&l&&!o&&t<u.length;t++){var o,i=u[t],p=d.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}var i,s,c,l=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,d.n=n,a}};return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,c=m;(t=s<2?e:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,c)):d.n=c:d.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}function s(){}function c(){}function l(){}function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Wo(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag",a={};t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Wo(t={},r,(function(){return this})),t),f=l.prototype=s.prototype=Object.create(u);return c.prototype=l,Wo(f,"constructor",l),Wo(l,"constructor",c),c.displayName="GeneratorFunction",Wo(l,o,"GeneratorFunction"),Wo(f),Wo(f,o,"Generator"),Wo(f,r,(function(){return this})),Wo(f,"toString",(function(){return"[object Generator]"})),(zo=function(){return{w:i,m:d}})()}function Wo(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Wo=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){Wo(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},Wo(e,t,n,r)}function Ko(e,t){this.v=e,this.k=t}function $o(e){return $o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(e)}function Go(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zo(r.key),r)}}function Xo(e,t,n){return t&&Yo(e.prototype,t),n&&Yo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zo(e){var t=function(e){if("object"!=$o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=$o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$o(t)?t:t+""}function Qo(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function ti(e,t){for(var n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e),r=0,o=Object.entries(t);r<o.length;r++){var i=Mo(o[r],2),a=i[0],s=i[1];if("children"===a)for(var c=0,l=Object.entries(t);c<l.length;c++){var u=Mo(l[c],2),f=u[0],d=u[1];"string"==typeof d?n.appendChild(document.createTextNode(d)):n.appendChild(ti(f,d))}else"style"===a?Object.assign(n.style,s):"textContent"===a?n.textContent=s:n.setAttribute(a,s.toString())}return n}function ni(e,t,n){var r=ti(e,t||{});return null==n||n.appendChild(r),r}function fi(){function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,di(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}var e=yi(),t=e.m(fi),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor,o={throw:1,return:2,break:3,continue:3};return(fi=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new gi(e,t)},AsyncIterator:vi,async:function(e,t,n,o,a){return(r(t)?hi:mi)(i(e),t,n,o,a)},keys:pi,values:di}})()}function di(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(Ci(e)+" is not iterable")}function pi(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function mi(e,t,n,r,o){var i=hi(e,t,n,r,o);return i.next().then((function(e){return e.done?e.value:i.next()}))}function hi(e,t,n,r,o){return new vi(yi().w(e,t,n,r),o||Promise)}function vi(e,t){function n(r,o,i,a){try{var s=e[r](o),c=s.value;return c instanceof gi?t.resolve(c.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(c).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var r;this.next||(bi(vi.prototype),bi(vi.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),bi(this,"_invoke",(function(e,o,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}),!0)}function yi(){function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return bi(l,"_invoke",function(n,r,o){function p(n,r){for(s=n,c=r,t=0;!f&&l&&!o&&t<u.length;t++){var o,i=u[t],p=d.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}var i,s,c,l=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,d.n=n,a}};return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,c=m;(t=s<2?e:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,c)):d.n=c:d.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}function s(){}function c(){}function l(){}function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,bi(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag",a={};t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(bi(t={},r,(function(){return this})),t),f=l.prototype=s.prototype=Object.create(u);return c.prototype=l,bi(f,"constructor",l),bi(l,"constructor",c),c.displayName="GeneratorFunction",bi(l,o,"GeneratorFunction"),bi(f),bi(f,o,"Generator"),bi(f,r,(function(){return this})),bi(f,"toString",(function(){return"[object Generator]"})),(yi=function(){return{w:i,m:d}})()}function bi(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}bi=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){bi(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},bi(e,t,n,r)}function gi(e,t){this.v=e,this.k=t}function _i(){return _i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Si(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_i.apply(null,arguments)}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Oi(e,t,n){return t=Si(t),function(e,t){if(t&&("object"==Ci(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xi(e)}(e,ki()?Reflect.construct(t,n||[],Si(e).constructor):t.apply(e,n))}function xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ki(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ki=function(){return!!e})()}function Si(e){return Si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Si(e)}function Ai(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ji(e,t)}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}function Ci(e){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(e)}function Pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ii(r.key),r)}}function Ti(e,t,n){return t&&Ni(e.prototype,t),n&&Ni(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ii(e){var t=function(e){if("object"!=Ci(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ci(t)?t:t+""}function Ri(e,t){for(var n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e),r=0,o=Object.entries(t);r<o.length;r++){var i=Ei(o[r],2),a=i[0],s=i[1];if("children"===a)for(var c=0,l=Object.entries(t);c<l.length;c++){var u=Ei(l[c],2),f=u[0],d=u[1];"string"==typeof d?n.appendChild(document.createTextNode(d)):n.appendChild(Ri(f,d))}else"style"===a?Object.assign(n.style,s):"textContent"===a?n.textContent=s:n.setAttribute(a,s.toString())}return n}function Fi(e,t,n){var r=Ri(e,t||{});return null==n||n.appendChild(r),r}function Li(e,t,n,r){switch(this.bufferSize=e,this.sampleRate=t,this.bandwidth=2/e*(t/2),this.sinTable=new Float32Array(e),this.cosTable=new Float32Array(e),this.windowValues=new Float32Array(e),this.reverseTable=new Uint32Array(e),this.peakBand=0,this.peak=0,n){case"bartlett":for(o=0;o<e;o++)this.windowValues[o]=2/(e-1)*((e-1)/2-Math.abs(o-(e-1)/2));break;case"bartlettHann":for(o=0;o<e;o++)this.windowValues[o]=.62-.48*Math.abs(o/(e-1)-.5)-.38*Math.cos(2*Math.PI*o/(e-1));break;case"blackman":for(r=r||.16,o=0;o<e;o++)this.windowValues[o]=(1-r)/2-.5*Math.cos(2*Math.PI*o/(e-1))+r/2*Math.cos(4*Math.PI*o/(e-1));break;case"cosine":for(o=0;o<e;o++)this.windowValues[o]=Math.cos(Math.PI*o/(e-1)-Math.PI/2);break;case"gauss":for(r=r||.25,o=0;o<e;o++)this.windowValues[o]=Math.pow(Math.E,-.5*Math.pow((o-(e-1)/2)/(r*(e-1)/2),2));break;case"hamming":for(o=0;o<e;o++)this.windowValues[o]=.54-.46*Math.cos(2*Math.PI*o/(e-1));break;case"hann":case void 0:for(o=0;o<e;o++)this.windowValues[o]=.5*(1-Math.cos(2*Math.PI*o/(e-1)));break;case"lanczoz":for(o=0;o<e;o++)this.windowValues[o]=Math.sin(Math.PI*(2*o/(e-1)-1))/(Math.PI*(2*o/(e-1)-1));break;case"rectangular":for(o=0;o<e;o++)this.windowValues[o]=1;break;case"triangular":for(o=0;o<e;o++)this.windowValues[o]=2/e*(e/2-Math.abs(o-(e-1)/2));break;default:throw Error("No such window function '"+n+"'")}for(var o,i=1,a=e>>1;i<e;){for(o=0;o<i;o++)this.reverseTable[o+i]=this.reverseTable[o]+a;i<<=1,a>>=1}for(o=0;o<e;o++)this.sinTable[o]=Math.sin(-Math.PI/o),this.cosTable[o]=Math.cos(-Math.PI/o);this.calculateSpectrum=function(e){var t,n,r,o=this.bufferSize,i=this.cosTable,a=this.sinTable,s=this.reverseTable,c=new Float32Array(o),l=new Float32Array(o),u=2/this.bufferSize,f=Math.sqrt,d=new Float32Array(o/2),p=Math.floor(Math.log(o)/Math.LN2);if(Math.pow(2,p)!==o)throw"Invalid buffer size, must be a power of 2.";if(o!==e.length)throw"Supplied buffer is not the same size as defined FFT. FFT Size: "+o+" Buffer Size: "+e.length;for(var m,h,v,y,b,g,_,E,w=1,O=0;O<o;O++)c[O]=e[s[O]]*this.windowValues[s[O]],l[O]=0;for(;w<o;){m=i[w],h=a[w],v=1,y=0;for(var x=0;x<w;x++){for(O=x;O<o;)g=v*c[b=O+w]-y*l[b],_=v*l[b]+y*c[b],c[b]=c[O]-g,l[b]=l[O]-_,c[O]+=g,l[O]+=_,O+=w<<1;v=(E=v)*m-y*h,y=E*h+y*m}w<<=1}O=0;for(var k=o/2;O<k;O++)(r=u*f((t=c[O])*t+(n=l[O])*n))>this.peak&&(this.peakBand=O,this.peak=r),d[O]=r;return d}}function Hi(){return Hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ki(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Hi.apply(null,arguments)}function Vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function zi(e,t,n){return t=Ki(t),function(e,t){if(t&&("object"==Yi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Wi()?Reflect.construct(t,n||[],Ki(e).constructor):t.apply(e,n))}function Wi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Wi=function(){return!!e})()}function Ki(e){return Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ki(e)}function $i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gi(e,t)}function Gi(e,t){return Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gi(e,t)}function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Xi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ji(r.key),r)}}function Qi(e,t,n){return t&&Zi(e.prototype,t),n&&Zi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ji(e){
var t=function(e){if("object"!=Yi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Yi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yi(t)?t:t+""}function na(e,t){for(var n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e),r=0,o=Object.entries(t);r<o.length;r++){var i=Vi(o[r],2),a=i[0],s=i[1];if("children"===a)for(var c=0,l=Object.entries(t);c<l.length;c++){var u=Vi(l[c],2),f=u[0],d=u[1];"string"==typeof d?n.appendChild(document.createTextNode(d)):n.appendChild(na(f,d))}else"style"===a?Object.assign(n.style,s):"textContent"===a?n.textContent=s:n.setAttribute(a,s.toString())}return n}function ra(e,t){return na(e,t||{})}function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fa(e,t,n){return(t=pa(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pa(r.key),r)}}function pa(e){var t=function(e){if("object"!=ca(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ca(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ca(t)?t:t+""}function ma(e,t,n){return t=va(t),function(e,t){if(t&&("object"==ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ha()?Reflect.construct(t,n||[],va(e).constructor):t.apply(e,n))}function ha(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ha=function(){return!!e})()}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}function ya(e,t){return ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ya(e,t)}function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}function Da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ma(r.key),r)}}function Ma(e){var t=function(e){if("object"!=Ia(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ia(t)?t:t+""}function Ra(e,t,n){return t=La(t),function(e,t){if(t&&("object"==Ia(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fa()?Reflect.construct(t,n||[],La(e).constructor):t.apply(e,n))}function Fa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fa=function(){return!!e})()}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},La(e)}function Ua(e,t){return Ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ua(e,t)}function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){$a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $a(e,t,n){return(t=function(e){var t=function(e){if("object"!=za(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==za(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e){return ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ns(e)}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,os(r.key),r)}}function os(e){var t=function(e){if("object"!=ns(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ns(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ns(t)?t:t+""}function is(e,t,n){return t=ss(t),function(e,t){if(t&&("object"==ns(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,as()?Reflect.construct(t,n||[],ss(e).constructor):t.apply(e,n))}function as(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(as=function(){return!!e})()}function ss(e){return ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ss(e)}function cs(e,t){return cs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cs(e,t)}function Es(e){return Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Es(e)}function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){xs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xs(e,t,n){return(t=function(e){var t=function(e){if("object"!=Es(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Es(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Es(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(16154),o=n.n(r),i=(n(70051),n(24837),n(24577)),a=n(23539),s=n.n(a),c=n(65614),l=n(92276),u=n.n(l),f=n(64165),d=n.n(f),p=n(995),m=n.n(p),h=n(80779),v=n(69277),y=n(93895),b=n(29691),g=n(24248),_=n(60879),E=n(29932),w=n(63916),O=n(59659),x=n(52717),k=n(4278),S=function(e){function t(){return e.apply(this,arguments)||this}return(0,E.A)(t,e),t.prototype.render=function(){return i.createElement(k.A,(0,w.A)({},this.props,{useAnchor:!1,noCaret:!1}))},t}(i.Component);S.defaultProps=k.A.defaultProps;var A=S,j=n(33170),C=(0,w.A)({},x.A.propTypes,{bsStyle:m().string,bsSize:m().string,href:m().string,onClick:m().func,title:m().node.isRequired,toggleLabel:m().string,children:m().node}),P=function(e){function t(){return e.apply(this,arguments)||this}return(0,E.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsSize,n=e.bsStyle,r=e.title,o=e.toggleLabel,a=e.children,s=(0,_.A)(e,["bsSize","bsStyle","title","toggleLabel","children"]),c=(0,j.A)(s,x.A.ControlledComponent),l=c[0],u=c[1];return i.createElement(x.A,(0,w.A)({},l,{bsSize:t,bsStyle:n}),i.createElement(O.A,(0,w.A)({},u,{disabled:s.disabled,bsSize:t,bsStyle:n}),r),i.createElement(A,{"aria-label":o||r,bsSize:t,bsStyle:n}),i.createElement(x.A.Menu,null,a))},t}(i.Component);P.propTypes=C,P.Toggle=A;var N=P,T=n(63039),I=n(20623),D=n(46281),M=n.n(D),R=n(24561),F=n(55077),L=n(16447),U=n(42395),B=n(40722),H=n(11608),V=n(16414),q=n(38152),z=function(e){var t=e.observation,n=e.taxon;if(!n){if(!t||!t.taxon)return i.createElement("div",null);n=t.taxon}if(!n.taxon_summary||!n.taxon_summary.conservation_status)return i.createElement("div",null);var r=n.taxon_summary.conservation_status,o=i.createElement(V.A,{className:"ConservationStatusBadgePopover ".concat(r.iucn_status),id:"cs-popover-".concat(r.id)},i.createElement("div",{className:"title"},i.createElement("span",{className:"bold"},I18n.t("conservation_status"),":\xa0",r.status_name,r.status&&r.status!==r.status_name?" (".concat(r.status,")"):"",r.place?" in ".concat(r.place.display_name):""," (".concat(r.authority,")"))),i.createElement("div",{className:"summary",dangerouslySetInnerHTML:{__html:r.description}}));return i.createElement("div",{className:"ConservationStatusBadge"},i.createElement(b.A,{trigger:"click",rootClose:!0,overlay:o,placement:"bottom"},i.createElement(q.A,{className:"".concat(r.iucn_status)},r.iucn_status_code)))};z.propTypes={observation:m().object,taxon:m().object};var W=z,K=function(e){var t=e.observation,n=e.taxon;if(!n){if(!t||!t.taxon)return i.createElement("div",null);n=t.taxon}if(!n.taxon_summary||!n.taxon_summary.listed_taxon)return i.createElement("div",null);var r=n.taxon_summary.listed_taxon,o="introduced"===r.establishment_means?"introduced":"endemic",a=i.createElement(V.A,{className:"EstablishmentMeansBadgePopover ".concat(o),id:"em-popover-".concat(r.id)},i.createElement("span",{className:"bold"},r.establishment_means_label,r.place?" in ".concat(r.place.display_name):"",":"," ",r.establishment_means_description));return i.createElement("div",{className:"EstablishmentMeansBadge"},i.createElement(b.A,{trigger:"click",rootClose:!0,overlay:a,placement:"bottom"},i.createElement(q.A,{className:"".concat(o)},"introduced"===o?i.createElement("i",{className:"fa fa-exclamation"}):i.createElement("i",{className:"fa fa-star"}))))};K.propTypes={observation:m().object,taxon:m().object};var G=K,Y=n(60905),X=n(41361),Z=n(2120),Q=n.n(Z),J=n(93100),ee=n(94220),te=n.n(ee),ne=n(98422),re=n(14521),oe=m().oneOfType([m().string,m().number]),ie={id:function(e){var t=null;if(!e.generateChildId){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=oe.apply(void 0,[e].concat(r)))||e.id||(t=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return t},generateChildId:m().func,onSelect:m().func,activeKey:m().any},ae={$bs_tabContainer:m().shape({activeKey:m().any,onSelect:m().func.isRequired,getTabId:m().func.isRequired,getPaneId:m().func.isRequired})},se=function(e){function t(){return e.apply(this,arguments)||this}(0,E.A)(t,e);var n=t.prototype;return n.getChildContext=function(){var e=this.props,t=e.activeKey,n=e.onSelect,r=e.generateChildId,o=e.id,i=r||function(e,t){return o?o+"-"+t+"-"+e:null};return{$bs_tabContainer:{activeKey:t,onSelect:n,getTabId:function(e){return i(e,"tab")},getPaneId:function(e){return i(e,"pane")}}}},n.render=function(){var e=this.props,t=e.children,n=(0,_.A)(e,["children"]);return delete n.generateChildId,delete n.onSelect,delete n.activeKey,i.cloneElement(i.Children.only(t),n)},t}(i.Component);se.propTypes=ie,se.childContextTypes=ae;var ce=(0,J.Pd)(se,{activeKey:"onSelect"}),le=n(27429),ue=n(8006),fe=n.n(ue),de=n(554),pe={componentClass:te(),animation:m().oneOfType([m().bool,te()]),mountOnEnter:m().bool,unmountOnExit:m().bool},me={$bs_tabContainer:m().shape({activeKey:m().any})},he={$bs_tabContent:m().shape({bsClass:m().string,animation:m().oneOfType([m().bool,te()]),activeKey:m().any,mountOnEnter:m().bool,unmountOnExit:m().bool,onPaneEnter:m().func.isRequired,onPaneExited:m().func.isRequired,exiting:m().bool.isRequired})},ve=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handlePaneEnter=r.handlePaneEnter.bind((0,le.A)((0,le.A)(r))),r.handlePaneExited=r.handlePaneExited.bind((0,le.A)((0,le.A)(r))),r.state={activeKey:null,activeChild:null},r}(0,E.A)(t,e);var n=t.prototype;return n.getChildContext=function(){var e=this.props,t=e.bsClass,n=e.animation,r=e.mountOnEnter,o=e.unmountOnExit,i=this.state.activeKey,a=this.getContainerActiveKey(),s=null!=i&&i!==a;return{$bs_tabContent:{bsClass:t,animation:n,activeKey:null!=i?i:a,mountOnEnter:r,unmountOnExit:o,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:s}}},n.UNSAFE_componentWillReceiveProps=function(e){!e.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},n.componentWillUnmount=function(){this.isUnmounted=!0},n.getContainerActiveKey=function(){var e=this.context.$bs_tabContainer;return e&&e.activeKey},n.handlePaneEnter=function(e,t){return!!this.props.animation&&t===this.getContainerActiveKey()&&(this.setState({activeKey:t,activeChild:e}),!0)},n.handlePaneExited=function(e){this.isUnmounted||this.setState((function(t){return t.activeChild!==e?null:{activeKey:null,activeChild:null}}))},n.render=function(){var e=this.props,t=e.componentClass,n=e.className,r=(0,_.A)(e,["componentClass","className"]),o=(0,de.M0)(r,["animation","mountOnEnter","unmountOnExit"]),a=o[0],s=o[1];return i.createElement(t,(0,w.A)({},s,{className:fe()(n,(0,de.Pl)(a,"content"))}))},t}(i.Component);ve.propTypes=pe,ve.defaultProps={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},ve.contextTypes=me,ve.childContextTypes=he;var ye=(0,de.in)("tab",ve),be=n(40935),ge=ce.ControlledComponent,_e={activeKey:m().any,bsStyle:m().oneOf(["tabs","pills"]),animation:m().oneOfType([m().bool,te()]),id:Q()(m().oneOfType([m().string,m().number])),onSelect:m().func,mountOnEnter:m().bool,unmountOnExit:m().bool},Ee=function(e){function t(){return e.apply(this,arguments)||this}(0,E.A)(t,e);var n=t.prototype;return n.renderTab=function(e){var t=e.props,n=t.title,r=t.eventKey,o=t.disabled,a=t.tabClassName;return null==n?null:i.createElement(re.A,{eventKey:r,disabled:o,className:a},n)},n.render=function(){var e=this.props,t=e.id,n=e.onSelect,r=e.animation,o=e.mountOnEnter,a=e.unmountOnExit,s=e.bsClass,c=e.className,l=e.style,u=e.children,f=e.activeKey,d=void 0===f?function(e){var t;return be.A.forEach(e,(function(e){null==t&&(t=e.props.eventKey)})),t}(u):f,p=(0,_.A)(e,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return i.createElement(ge,{id:t,activeKey:d,onSelect:n,className:c,style:l},i.createElement("div",null,i.createElement(ne.A,(0,w.A)({},p,{role:"tablist"}),be.A.map(u,this.renderTab)),i.createElement(ye,{bsClass:s,animation:r,mountOnEnter:o,unmountOnExit:a},u)))},t}(i.Component);Ee.propTypes=_e,Ee.defaultProps={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1},(0,de.in)("tab",Ee);var we=(0,J.Pd)(Ee,{activeKey:"onSelect"}),Oe=(n(59158),n(51429)),xe=n(5345),ke={eventKey:m().any,animation:m().oneOfType([m().bool,te()]),id:m().string,"aria-labelledby":m().string,bsClass:m().string,onEnter:m().func,onEntering:m().func,onEntered:m().func,onExit:m().func,onExiting:m().func,onExited:m().func,mountOnEnter:m().bool,unmountOnExit:m().bool},Se={$bs_tabContainer:m().shape({getTabId:m().func,getPaneId:m().func}),$bs_tabContent:m().shape({bsClass:m().string,animation:m().oneOfType([m().bool,te()]),activeKey:m().any,mountOnEnter:m().bool,unmountOnExit:m().bool,onPaneEnter:m().func.isRequired,onPaneExited:m().func.isRequired,exiting:m().bool.isRequired})},Ae={$bs_tabContainer:m().oneOf([null])},je=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleEnter=r.handleEnter.bind((0,le.A)((0,le.A)(r))),r.handleExited=r.handleExited.bind((0,le.A)((0,le.A)(r))),r.in=!1,r}(0,E.A)(t,e);var n=t.prototype;return n.getChildContext=function(){return{$bs_tabContainer:null}},n.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},n.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},n.componentWillUnmount=function(){this.in&&this.handleExited()},n.getAnimation=function(){if(null!=this.props.animation)return this.props.animation;var e=this.context.$bs_tabContent;return e&&e.animation},n.handleEnter=function(){var e=this.context.$bs_tabContent;e&&(this.in=e.onPaneEnter(this,this.props.eventKey))},n.handleExited=function(){var e=this.context.$bs_tabContent;e&&(e.onPaneExited(this),this.in=!1)},n.isActive=function(){var e=this.context.$bs_tabContent,t=e&&e.activeKey;return this.props.eventKey===t},n.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},n.render=function(){var e=this.props,t=e.eventKey,n=e.className,r=e.onEnter,o=e.onEntering,a=e.onEntered,s=e.onExit,c=e.onExiting,l=e.onExited,u=e.mountOnEnter,f=e.unmountOnExit,d=(0,_.A)(e,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),p=this.context,m=p.$bs_tabContent,h=p.$bs_tabContainer,v=(0,de.M0)(d,["animation"]),y=v[0],b=v[1],g=this.isActive(),E=this.getAnimation(),O=null!=u?u:m&&m.mountOnEnter,x=null!=f?f:m&&m.unmountOnExit;if(!g&&!E&&x)return null;var k=!0===E?xe.A:E||null;m&&(y.bsClass=(0,de.Pl)(m,"pane"));var S=(0,w.A)({},(0,de.nG)(y),{active:g});h&&(b.id=h.getPaneId(t),b["aria-labelledby"]=h.getTabId(t));var A=i.createElement("div",(0,w.A)({},b,{role:"tabpanel","aria-hidden":!g,className:fe()(n,S)}));if(k){var j=m&&m.exiting;return i.createElement(k,{in:g&&!j,onEnter:(0,Oe.A)(this.handleEnter,r),onEntering:o,onEntered:a,onExit:s,onExiting:c,onExited:(0,Oe.A)(this.handleExited,l),mountOnEnter:O,unmountOnExit:x},A)}return A},t}(i.Component);je.propTypes=ke,je.contextTypes=Se,je.childContextTypes=Ae;var Ce=(0,de.in)("tab-pane",je),Pe=(0,w.A)({},Ce.propTypes,{disabled:m().bool,title:m().node,tabClassName:m().string}),Ne=function(e){function t(){return e.apply(this,arguments)||this}return(0,E.A)(t,e),t.prototype.render=function(){var e=(0,w.A)({},this.props);return delete e.title,delete e.disabled,delete e.tabClassName,i.createElement(Ce,e)},t}(i.Component);Ne.propTypes=Pe,Ne.Container=ce,Ne.Content=ye,Ne.Pane=Ce;var Te=Ne,Ie=n(36856),De=n(96799),Ve=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Le(this,t)).setUpMentionsAutocomplete=e.setUpMentionsAutocomplete.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e),function(e,t){return t&&Re(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.setUpMentionsAutocomplete()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.observation,r=t.activeTab,o=t.content;return n.id!==e.observation.id||r!==e.activeTab||o!==e.content}},{key:"componentDidUpdate",value:function(){this.setUpMentionsAutocomplete()}},{key:"setUpMentionsAutocomplete",value:function(){var e=s().findDOMNode(this);$("textarea",e).textcompleteUsers()}},{key:"postIdentification",value:function(){var e=this.props,t=e.addID,n=e.content,r=e.updateEditorContent,o=$(".id_tab input[name='taxon_name']"),i=o.data("uiAutocomplete").selectedItem;i&&(t(i,{body:n}),o.trigger("resetSelection"),o.val(""),o.data("uiAutocomplete").selectedItem=null,r("activity",""))}},{key:"commentContent",value:function(){var e=this.props,t=e.config,n=e.observation,r=e.content,a=e.updateEditorContent,s=e.confirmResendConfirmation;return null!=t&&t.currentUser?null!=t&&t.currentUserCanInteractWithResource(n)?i.createElement("div",{className:"form-group"},i.createElement(De.A,{key:"comment-editor-".concat(n.id,"-").concat(o().size(n.comments)),placeholder:I18n.t("leave_a_comment"),textareaClassName:"form-control",maxLength:5e3,content:r,showCharsRemainingAt:4e3,onBlur:function(e){return a("activity",e.target.value)}})):i.createElement("div",{className:"confirm-to-interact"},i.createElement("div",{className:"confirm-message"},I18n.t("views.email_confirmation.please_confirm_to_interact")),i.createElement("div",{className:"confirm-button"},i.createElement("a",{href:"/users/edit",onClick:function(e){s(),e.preventDefault(),e.stopPropagation()}},i.createElement("button",{type:"button",className:"btn btn-primary emailConfirmationModalTrigger"},I18n.t("send_confirmation_email"))))):i.createElement("span",{className:"log-in",dangerouslySetInnerHTML:{__html:I18n.t("log_in_or_sign_up_to_add_comments_html")}})}},{key:"idContent",value:function(){var e=this,t=this.props,n=t.config,r=t.observation,a=t.content,s=t.updateEditorContent,c=t.confirmResendConfirmation;if(!n||!n.currentUser)return i.createElement("span",{className:"log-in",dangerouslySetInnerHTML:{__html:I18n.t("log_in_or_sign_up_to_add_identifications_html")}});if(null!=n&&n.currentUserCanInteractWithResource(r)){var l=o().compact(o().map(r.photos,(function(e){if(!e.url||e.preview)return null;var t=e.photoUrl("medium");return t&&t.match(/\/medium[./]/i)?e:null})));return i.createElement("div",null,i.createElement(Ie.A,{bootstrap:!0,searchExternal:!0,perPage:6,resetOnChange:!1,visionParams:l.length>0?{observationID:r.id,observationUUID:r.uuid}:null,config:n,onKeyDown:function(t){13===(t.keyCode||t.which)&&e.postIdentification()}}),i.createElement("div",{className:"form-group"},i.createElement(De.A,{key:"comment-editor-".concat(r.id,"-").concat(o().size(r.identifications)),placeholder:I18n.t("tell_us_why"),className:"upstacked",textareaClassName:"form-control",onBlur:function(e){return s("activity",e.target.value)},content:a,maxLength:5e3,showCharsRemainingAt:4e3})))}return i.createElement("div",{className:"confirm-to-interact"},i.createElement("div",{className:"confirm-message"},I18n.t("views.email_confirmation.please_confirm_to_interact")),i.createElement("div",{className:"confirm-button"},i.createElement("a",{href:"/users/edit",onClick:function(e){c(),e.preventDefault(),e.stopPropagation()}},i.createElement("button",{type:"button",className:"btn btn-primary emailConfirmationModalTrigger"},I18n.t("send_confirmation_email")))))}},{key:"render",value:function(){var e=this.props,t=e.observation,n=e.activeTab,r=e.setActiveTab;if(!t)return i.createElement("div",null);var o=i.createElement(we,{id:"comment-id-tabs",activeKey:n,onSelect:function(e){r(e)}},i.createElement(Te,{eventKey:"comment",title:I18n.t("comment_"),className:"comment_tab"},this.commentContent()),i.createElement(Te,{eventKey:"add_id",title:I18n.t("suggest_an_identification"),className:"id_tab"},this.idContent()));return i.createElement("div",{className:"comment_id_panel",key:"activity-panel-".concat(t.id)},o)}}])}(i.Component);Ve.propTypes={observation:m().object,config:m().object,activeTab:m().string,addID:m().func,content:m().string,setActiveTab:m().func,updateEditorContent:m().func,confirmResendConfirmation:m().func};var qe=Ve,ze=n(62896),We="obs-show/comment_id_panel/SET_ACTIVE_TAB",$e=n(84582),Ge=n(47191),Ye=(0,c.Ng)((function(e){return{observation:Object.assign({},e.observation,{places:e.observationPlaces}),config:e.config,activeTab:e.commentIDPanel.activeTab,content:e.textEditor.activity}}),(function(e){return{addID:function(t,n){e((0,ze.V6)(t,n))},setActiveTab:function(t){e(Ke(t))},updateEditorContent:function(t,n){return e((0,$e.SZ)(t,n))},confirmResendConfirmation:function(t){return e((0,Ge.HB)(t))}}}))(qe),ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),et(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}(t,e),function(e,t){return t&&Qe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){if(window.location.hash){var e=window.location.hash;0===$(e).length&&(e=o().replace("activity_".concat(e.replace("#","")),"-","_"),e="#".concat(e)),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?$.scrollTo(e):setTimeout((function(){var t=$(e);t.length>0&&$(document).scrollTop(t.offset().top)}),2e3)}}},{key:"currentUserIcon",value:function(){var e=this.props.config;return e?i.createElement("div",{className:"icon"},i.createElement(Y.A,{user:e.currentUser})):i.createElement("div",{className:"icon"},i.createElement("div",{className:"UserImage"}))}},{key:"postIdentification",value:function(){var e=this.props,t=e.addID,n=e.content,r=e.updateEditorContent,o=$(".id_tab input[name='taxon_name']"),i=o.data("uiAutocomplete").selectedItem;i&&(t(i,{body:n}),o.trigger("resetSelection"),o.val(""),o.data("uiAutocomplete").selectedItem=null,r("activity",""))}},{key:"doneButton",value:function(){var e=this,t=this.props,n=t.addComment,r=t.config,o=t.content,a=t.updateEditorContent;return r&&r.currentUser?i.createElement(O.A,{className:"comment_id",bsSize:"small",onClick:function(){$(".comment_tab").is(":visible")?o&&(n(o),a("activity","")):e.postIdentification()}},I18n.t("done")):null}},{key:"review",value:function(){var e=this.props,t=e.observation,n=e.config,r=e.review,a=e.unreview;return n&&n.currentUser&&i.createElement(b.A,{placement:"top",trigger:["hover","focus"],delayShow:1e3,overlay:i.createElement(g.A,{id:"mark-as-reviewed-tooltip"},i.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("mark_as_reviewed_desc")}})),container:$("#wrapper.bootstrap").get(0)},i.createElement("div",{className:"review"},i.createElement("label",null,i.createElement("input",{type:"checkbox",id:"reviewed",name:"reviewed",checked:o().includes(t.reviewed_by,n.currentUser.id),onChange:function(){$("#reviewed").is(":checked")?r():a()}}),I18n.t("mark_as_reviewed"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.observation,r=t.config;if(!n)return i.createElement("div",null);var a=r&&r.currentUser&&o().findLast(n.identifications,(function(e){return e.current&&e.user&&e.user.id===r.currentUser.id})),s=o().compact((n.identifications||[]).concat(n.comments));return s=o().sortBy(s,(function(e){return M().parseZone(e.created_at)})),s=(0,U.mq)(s),i.createElement("div",{className:"Activity"},i.createElement("h3",null,I18n.t("activity")),i.createElement("div",{className:"activity ".concat(0===s.length?"empty":"")},s.map((function(t){return i.createElement(X.A,Ze({key:"activity-".concat(t.id,"-").concat(t.created_at),item:t,currentUserID:a,inlineEditing:!0},e.props))}))),this.currentUserIcon(),i.createElement(Ye,Ze({key:"activity-create-panel-".concat(n.id)},this.props)),this.doneButton(),this.review())}}])}(i.Component);ot.propTypes={observation:m().object,config:m().object,observation_places:m().object,addComment:m().func,addID:m().func,content:m().string,createFlag:m().func,deleteComment:m().func,editComment:m().func,deleteFlag:m().func,withdrawID:m().func,confirmDeleteID:m().func,editID:m().func,restoreID:m().func,review:m().func,setFlaggingModalState:m().func,unreview:m().func,onClickCompare:m().func,trustUser:m().func,untrustUser:m().func,updateEditorContent:m().func,showHidden:m().func,performOrOpenConfirmationModal:m().func};var it=ot,at=n(84423),lt=n(22702),ut=n(46666),ft=n(16745),dt=n(96077),pt=(0,c.Ng)((function(e){return{observation:Object.assign({},e.observation,{places:e.observationPlaces}),config:e.config,content:e.textEditor.activity}}),(function(e){return{setFlaggingModalState:function(t){e((0,at._)(t))},addComment:function(t){e((0,ze.BC)(t))},deleteComment:function(t){e((0,ze.Fk)(t))},editComment:function(t,n){e((0,ze.QA)(t,n))},addID:function(t,n){e((0,ze.V6)(t,n))},withdrawID:function(t){e((0,ze.ir)(t))},confirmDeleteID:function(t){e((0,ze.Xl)(t))},editID:function(t,n){e((0,ze.Ws)(t,n))},restoreID:function(t){e((0,ze.Uf)(t))},createFlag:function(t,n,r,o){e(st(t,n,r,o))},deleteFlag:function(t){e(ct(t))},review:function(){e((0,ze.NQ)())},unreview:function(){e((0,ze.CN)())},onClickCompare:function(t,n,r){var o=Object.assign({},r,{taxon:n});return e((0,lt.ej)(o)),e((0,lt._E)()),e((0,ut.zJ)(r)),t.preventDefault(),!1},trustUser:function(t){e((0,ft.U8)(t))},untrustUser:function(t){e((0,ft.$A)(t))},showHidden:function(){return e((0,ft.Nk)({showHidden:!0}))},hideContent:function(t){return e((0,dt.Ps)(t,"hide"))},unhideContent:function(t){return e((0,dt.Ps)(t,"unhide"))},updateEditorContent:function(t,n){return e((0,$e.SZ)(t,n))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,Ge.v8)(t,n))}}}))(it),mt=pt,ht=n(35922),vt=n(47066),yt=n(70602),bt=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config,controlledTerms:e.controlledTerms.terms,loading:!e.controlledTerms.loaded,open:e.controlledTerms.open}}),(function(e){return{addAnnotation:function(t,n){e((0,ze.lC)(t,n))},deleteAnnotation:function(t){e((0,ze.Xm)(t))},voteAnnotation:function(t,n){e((0,ze.SY)(t,n))},unvoteAnnotation:function(t){e((0,ze.hP)(t))},updateSession:function(t){e((0,yt.qO)(t))},fetchControlledTerms:function(){e((0,vt.eY)())}}}))(ht.A),gt=n(13173),jt=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=["date","location","media","ids","metric-date","metric-location","metric-wild","metric-evidence","metric-recent","metric-subject","rank","flags","rank_or_needs_id"];return(e=xt(this,t)).criteriaOrder=o().zipObject(n,function(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(n.length).keys())),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(t,e),function(e,t){return t&&wt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"criteriaList",value:function(){var e=this,t=this.props,n=t.observation,r=t.qualityMetrics,a={},s={};a.date=!n.observed_on,a.media=(n.photos?n.photos.length:0)+(n.sounds?n.sounds.length:0)===0,a.rank=n.taxon&&n.taxon.rank_level>10,a.ids=!n.identifications_most_agree,
a.location=!(n.geojson||n.obscured);var c={},l={};o().each(r,(function(e,t){o().each(e,(function(e){("vote_scope"in e?!e.vote_flag:e.agree)?(c[t]=c[t]||0,c[t]+=1):(l[t]=l[t]||0,l[t]+=1)}))})),o().each(r,(function(e,t){var n=(c[t]||0)-(l[t]||0);n<0?a["metric-".concat(t)]=!0:n>0&&(s["metric-".concat(t)]=!0)}));var u=o().filter(n.flags||[],(function(e){return!e.resolved}));a.flags=u.length>0,n.taxon&&20===n.taxon.rank_level&&(a.rank=!1,s["metric-needs_id"]||(a["metric-needs_id"]=!1,a.rank_or_needs_id=!0)),a["hidden-media"]=o().some(o().flatten([n.photos,n.sounds]),"hidden"),a=o().pickBy(a,(function(e){return!0===e}));var f=o().sortBy(o().map(a,(function(e,t){return{type:t,bool:e}})),(function(t){return e.criteriaOrder[t.type]}));return i.createElement("ul",{className:"remaining"},o().map(f,(function(e){var t,n,r=e.type;if("rank_or_needs_id"===r)return i.createElement("li",{key:"need-rank_or_needs_id",className:o().size(a)>1?"top_border":""},i.createElement("div",{className:"reason"},i.createElement("div",{className:"reason_icon"},i.createElement("i",{className:"fa fa-leaf"})),i.createElement("div",{className:"reason_label"},I18n.t("community_id_is_precise"))),i.createElement("div",{className:"or"},"- ".concat(I18n.t("or")," -")),i.createElement("div",{className:"reason"},i.createElement("div",{className:"reason_icon"},i.createElement("i",{className:"fa fa-gavel"})),i.createElement("div",{className:"reason_label"},I18n.t("the_community_must_feel_that"))));switch(r){case"date":t="fa-calendar",n=I18n.t("date_specified");break;case"location":t="fa-map-marker",n=I18n.t("location_specified");break;case"media":t="fa-file-image-o",n=I18n.t("has_photos_or_sounds");break;case"ids":t="icon-identification",n=I18n.t("has_id_supported_by_two_or_more");break;case"rank":t="fa-leaf",n=I18n.t("community_id_is_precise");break;case"metric-date":t="fa-calendar-check-o",n=I18n.t("date_is_accurate");break;case"metric-location":t="fa-bullseye",n=I18n.t("location_is_accurate");break;case"metric-wild":t="icon-icn-wild",n=I18n.t("organism_is_wild");break;case"metric-evidence":t="icon-icn-dna",n=I18n.t("evidence_of_organism");break;case"metric-subject":t="icon-icn-subject",n=I18n.t("evidence_related_to_single_subject");break;case"metric-recent":t="fa-clock-o",n=I18n.t("recent_evidence_of_organism");break;case"metric-needs_id":t="fa-gavel",n=I18n.t("the_community_must_feel_that");break;case"flags":t="fa-flag danger",n=I18n.t("all_flags_must_be_resolved");break;case"hidden-media":t="fa-eye-slash danger",n=I18n.t("all_media_must_be_unhidden");break;default:return null}return i.createElement("li",{key:"need-".concat(r)},i.createElement("div",{className:"reason_icon"},i.createElement("i",{className:"fa ".concat(t)})),i.createElement("div",{className:"reason_label"},n))})))}},{key:"render",value:function(){var e=this.props,t=e.config,n=e.observation;if(!n||!n.user)return i.createElement("div",null);var r,o,a,s=n.quality_grade,c="needs_id"===s||"research"===s,l=t.currentUser&&t.currentUser.id===n.user.id;return"research"===s?r=i.createElement("span",null,i.createElement("span",{className:"bold"},I18n.t("this_observation_is_research_grade"))," ",n.license_code?I18n.t("it_can_now_be_used_for_research"):I18n.t("however_not_licensed"),!n.license_code&&l&&i.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("however_not_licensed_action_html")}})):(o=this.criteriaList(),r=i.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("the_below_items_are_needed_to_achieve")}})),n.outlinks&&n.outlinks.length>0&&(a=i.createElement("div",{className:"outlinks"},i.createElement("span",{className:"intro"},I18n.t("this_observation_is_featured_on_x_sites",{count:n.outlinks.length}),"research"!==s&&i.createElement("span",{className:"intro-sub"},I18n.t("please_allow_a_few_weeks_for_external_sites"))),n.outlinks.map((function(e){return i.createElement("div",{className:"outlink",key:"outlink-".concat(e.source)},i.createElement("a",{href:e.url},i.createElement("div",{className:"squareIcon"},i.createElement("img",{alt:e.source,src:OUTLINK_SITES[e.source].icon})),i.createElement("div",{className:"title"},e.source)))})))),i.createElement("div",{className:"ResearchGradeProgress"},i.createElement("div",{className:"graphic"},i.createElement("div",{className:"separators"},i.createElement(v.A,{xs:6,className:"left"},i.createElement("div",{className:"separator ".concat(c?"active":"incomplete")})),i.createElement(v.A,{xs:6,className:"right"},i.createElement("div",{className:"separator ".concat("research"===s?"active":"incomplete")}))),i.createElement("div",{className:"checks clearfix"},i.createElement(v.A,{xs:4},i.createElement("div",{className:"check casual active"},i.createElement("i",{className:"fa fa-check"}))),i.createElement(v.A,{xs:4},i.createElement("div",{className:"check needs-id ".concat(c?"active":"incomplete")},i.createElement("i",{className:"fa fa-check"}))),i.createElement(v.A,{xs:4},i.createElement("div",{className:"check research ".concat("research"===s?"active":"incomplete")},i.createElement("i",{className:"fa fa-check"})))),i.createElement("div",{className:"labels"},i.createElement("div",{className:"casual ".concat("casual"===s&&"active")},I18n.t("casual_")),i.createElement("div",{className:"needs-id ".concat("needs_id"===s&&"active")},I18n.t("needs_id_")),i.createElement("div",{className:"research ".concat("research"===s&&"active")},I18n.t("research_grade")))),i.createElement("div",{className:"info"},r),o,a)}}])}(i.Component);jt.propTypes={config:m().object,observation:m().object,qualityMetrics:m().object};var Ct=jt,Dt=(0,c.Ng)((function(e){return{config:e.config,observation:e.observation,qualityMetrics:Tt(Tt({},o().groupBy(e.qualityMetrics,"metric")),o().groupBy(e.observation.votes,"vote_scope"))}}))(Ct),Mt=n(57629),Rt=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config,qualityMetrics:Object.assign({},o().groupBy(e.qualityMetrics,"metric"),o().groupBy(e.observation.votes,"vote_scope"))}}),(function(e){return{setFlaggingModalState:function(t){e((0,at._)(t))},voteMetric:function(t,n){e((0,ze.zN)(t,n))},unvoteMetric:function(t){e((0,ze.yb)(t))},updateSession:function(t){e((0,yt.qO)(t))}}}))(Mt.A),zt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Bt(this,t,[e]);var r=e.config&&e.config.currentUser;return n.state={open:!r||!r.prefers_hide_obs_show_quality_metrics},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qt(e,t)}(t,e),function(e,t){return t&&Lt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.config,r=t.innerWrapper,o=t.observation,a=t.updateSession;if(!o)return i.createElement("span",null);var s=n&&n.currentUser,c=this.state.open,l=r||function(e){return i.createElement("div",null,e.children)};return i.createElement(y.A,null,i.createElement("div",{className:"QualityMetrics collapsible-section"},i.createElement("div",null,i.createElement("h3",{className:"collapsible"},i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){s&&a({prefers_hide_obs_show_quality_metrics:c}),e.setState({open:!c})}},i.createElement("i",{className:"fa fa-chevron-circle-".concat(c?"down":"right")}),I18n.t("data_quality_assessment"))),i.createElement(b.A,{trigger:"click",rootClose:!0,placement:"top",containerPadding:20,overlay:i.createElement(V.A,{className:"DataQualityOverlay PopoverWithHeader",id:"popover-data-quality"},i.createElement("div",{className:"header"},I18n.t("data_quality_assessment")),i.createElement("div",{className:"contents"},i.createElement("p",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_needs_id_lead_html")}}),i.createElement("ul",null,i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_needs_id_has_a_date_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_needs_id_is_georeferenced_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_needs_id_has_photos_or_sounds_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_needs_id_is_not_of_human_html")}})),i.createElement("p",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_research_grade_lead_html")}}),i.createElement("ul",null,i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_research_grade_community_species_html",{site_name:SITE.short_name})}})),i.createElement("p",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_lead_html")}}),i.createElement("ul",null,i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_day_year_not_accurate2_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_location_not_accurate_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_not_wild_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_not_organism_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_not_recent_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_not_one_subject_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_voted_out_html")}}),i.createElement("li",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.dqa_help_casual_opted_out_maverick_html")}})),i.createElement("p",null,I18n.t("views.observations.show.dqa_help_system_lead")),i.createElement("ul",null,i.createElement("li",null,I18n.t("views.observations.show.dqa_help_system_captive_vote"))))),className:"cool"},i.createElement("span",{className:"popover-data-quality-link"},i.createElement("i",{className:"fa fa-info-circle"})))),i.createElement(gt.A,{expanded:c,onToggle:function(){}},i.createElement(gt.A.Collapse,null,i.createElement(l,{config:n},i.createElement(h.A,null,i.createElement(v.A,{xs:7},i.createElement(Rt,null)),i.createElement(v.A,{xs:5},i.createElement(Dt,null))))))))}}])}(i.Component);zt.propTypes={config:m().object,innerWrapper:m().func,observation:m().object,updateSession:m().func};var Wt=zt,Kt=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{updateSession:function(t){e((0,yt.qO)(t))}}}))(Wt),en=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Xt(this,t)).renderTaxonomy=e.renderTaxonomy.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}(t,e),function(e,t){return t&&Gt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"renderTaxonomy",value:function(e,t){var n=e.shift();if(!n)return i.createElement("div",null);var r=0===e.length,o=this.props.communityIDTaxon&&n.id===this.props.communityIDTaxon.id;return i.createElement("ul",{className:"plain taxonomy ".concat(r?"last":null)},i.createElement("li",{className:"".concat(!t&&"child"," ").concat(o&&"boldTaxon")},i.createElement(R.A,{taxon:n,url:"/taxa/".concat(n.id),user:this.props.config.currentUser}),!r&&this.renderTaxonomy(e,!1)))}},{key:"render",value:function(){var e=this.props.identification,t=this.props.contents,n=this.props.agreement,r=(e.taxon.ancestors||[]).concat(e.taxon),o=i.createElement(V.A,{className:"CommunityIDPopoverOverlay PopoverWithHeader ".concat(n?"agree":"disagree"),id:"popover-".concat(e.id)},i.createElement("div",{className:"header"},i.createElement(Y.A,{user:e.user}),i.createElement("a",{href:"/people/".concat(e.user.login)},e.user.login),"'s ID:"),i.createElement("div",{className:"contents"},this.renderTaxonomy(r,!0)));return i.createElement(b.A,{trigger:"click",rootClose:!0,placement:"top",animation:!1,overlay:o,containerPadding:20},i.createElement("span",{className:"CommunityIDPopover ".concat(this.props.className),style:this.props.style},t))}}])}(i.Component);en.propTypes={agreement:m().bool,keyPrefix:m().string,contents:m().object,identification:m().object,communityIDTaxon:m().object,style:m().object,className:m().string,config:m().object},en.defaultProps={config:{}};var tn=en,nn=n(81171),rn=function(e){var t=e.taxon,n=e.contents;if(!t)return i.createElement("div",null);var r=nn.A.taxonImage(t,{size:"medium"}),o=i.createElement(V.A,{className:"TaxonSummaryPopoverOverlay",id:"popover-taxon-".concat(t.id)},i.createElement("div",null,i.createElement("div",{className:"photo"},i.createElement("a",{href:"/taxa/".concat(t.id)},r)),i.createElement("div",{className:"summary"},i.createElement("span",{dangerouslySetInnerHTML:{__html:t.taxon_summary&&t.taxon_summary.wikipedia_summary?t.taxon_summary.wikipedia_summary:I18n.t("no_summary_from_wikipedia")}}),i.createElement("a",{href:"/taxa/".concat(t.id),className:"more"},i.createElement("button",{type:"button",className:"btn btn-default"},i.createElement("i",{className:"fa fa-info-circle"})," ",I18n.t("more_info"))))));return i.createElement(b.A,{trigger:"click",rootClose:!0,placement:"top",animation:!1,overlay:o,containerPadding:20},i.createElement("span",{className:"TaxonSummaryPopover"},n))};rn.propTypes={contents:m().object,taxon:m().object};var on=rn,pn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ln(this,t,[e])).ownerID=null,n.setInstanceVars=n.setInstanceVars.bind(n),n.communityIDOptIn=n.communityIDOptIn.bind(n),n.communityIDOptOut=n.communityIDOptOut.bind(n),n.showCommunityIDModal=n.showCommunityIDModal.bind(n),n.communityIDOverridePanel=n.communityIDOverridePanel.bind(n),n.communityIDOverrideStatement=n.communityIDOverrideStatement.bind(n),n.optOutPopoverClose=n.optOutPopoverClose.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}(t,e),function(e,t){return t&&sn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"setInstanceVars",value:function(){var e=this.props,t=e.observation,n=e.config;this.observerOptedOut=t.user&&t.user.preferences&&!1===t.user.preferences.prefers_community_taxa,this.observationOptedIn=t.preferences&&!0===t.preferences.prefers_community_taxon,this.observationOptedOut=t.preferences&&!1===t.preferences.prefers_community_taxon,this.userIsObserver=n.currentUser&&t.user&&n.currentUser.id===t.user.id,this.communityIDIsRejected=this.observationOptedOut||this.observerOptedOut&&!this.observationOptedIn}},{key:"communityIDOptIn",value:function(e){e.preventDefault(),(0,this.props.updateObservation)({prefers_community_taxon:!0})}},{key:"communityIDOptOut",value:function(e){e.preventDefault(),(0,this.props.updateObservation)({prefers_community_taxon:!1}),this.optOutPopoverClose()}},{key:"optOutPopoverClose",value:function(){this.refs["popover-trigger"].hide()}},{key:"communityIDOverridePanel",value:function(){return this.userIsObserver&&this.communityIDIsRejected?i.createElement("div",{className:"override out"},i.createElement("span",{className:"bold"},I18n.t("views.observations.community_id.you_have_opted_out"),"."),i.createElement("button",{type:"button",className:"btn btn-nostyle linky",href:"#",onClick:this.communityIDOptIn},I18n.t("views.observations.community_id.opt_in_for_this_observation")),i.createElement("span",{className:"separator"},"\xb7"),i.createElement("a",{href:"/users/edit"},I18n.t("edit_your_default_settings"))):i.createElement("div",null)}},{key:"communityIDOverrideStatement",value:function(){var e;return this.communityIDIsRejected&&(e=i.createElement("div",{className:"opted_out stacked"},I18n.t("user_has_opted_out_of_community_id"),i.createElement(b.A,{trigger:"click",rootClose:!0,placement:"top",overlay:i.createElement(V.A,{className:"CommunityIDInfoOverlay",id:"popover-community-id-info"},i.createElement("div",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.community_id.explanation")}})),containerPadding:20},i.createElement("i",{className:"fa fa-question-circle"})))),e}},{key:"optOutPopover",value:function(){var e,t=this.props.observation;if(!(this.userIsObserver&&this.ownerID&&t.taxon)||this.observationOptedOut)return null;if(!(this.ownerID.taxon.id!==t.taxon.id||this.observerOptedOut&&this.observationOptedIn))return null;var n=this.ownerID.taxon.preferred_common_name||this.ownerID.taxon.name;this.ownerID.taxon.id!==t.taxon.id&&(e=i.createElement("span",{className:"something",dangerouslySetInnerHTML:{__html:I18n.t("views.observations.community_id.your_id_does_not_match",{taxon_name:n})}}));var r=i.createElement(V.A,{className:"OptOutPopover",id:"popover-opt-out"},i.createElement("p",null,I18n.t("if_for_some_reason_a_user_doesnt_agree")),i.createElement("p",null,e),i.createElement("div",{className:"action"},i.createElement("button",{type:"button",className:"btn btn-default reject",onClick:this.communityIDOptOut},I18n.t("yes_reject_it")),i.createElement("button",{type:"button",className:"btn btn-nostyle cancel linky",onClick:this.optOutPopoverClose},I18n.t("cancel"))));return i.createElement(b.A,{trigger:"click",rootClose:!0,placement:"top",containerPadding:20,overlay:r,ref:"popover-trigger"},i.createElement("button",{type:"button",className:"btn btn-nostyle linky"},I18n.t("reject?")))}},{key:"showCommunityIDModal",value:function(){(0,this.props.setCommunityIDModalState)({show:!0})}},{key:"sortedIdents",value:function(){var e=this.props.observation,t=o().filter(e.identifications,(function(e){return e.current&&e.taxon.is_active&&!e.hidden})),n=o().countBy(t,(function(e){return e.taxon.id}));return o().sortBy(t,(function(e){return"".concat("maverick"===e.category?1:0,"-").concat(-1*n[e.taxon.id]+1e3)}))}},{key:"dataForTaxon",value:function(e){var t,n=this.props,r=n.observation,a=n.config,s=a&&a.currentUser,c=[],l=[],u=!0,f=nn.A.taxonImage(e),d=s&&o().findLast(r.identifications,(function(e){return e.current&&e.user&&e.user.id===a.currentUser.id}));this.ownerID=o().findLast(r.identifications,(function(e){return e.current&&e.user&&r.user&&e.user.id===r.user.id})),d&&(u=nn.A.taxaDissimilar(d.taxon,e),t=d.agreedTo&&"communityID"===d.agreedTo);var p=this.sortedIdents(),m=!1;if(1===p.length)c.push(p[0]);else if(r.communityTaxon){var h="".concat(r.communityTaxon.id);r.communityTaxon.ancestry&&(h="".concat(r.communityTaxon.ancestry,"/").concat(r.communityTaxon.id));var v=h.split("/"),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t?t.split("/"):v,r=e.split("/");return o().isEmpty(o().difference(r,n))},b="".concat(e.ancestry,"/").concat(e.id);m=!y(b)&&!y(h,b);var g=o().filter(p,(function(e){return e.taxon.id===r.communityTaxon.id}))[0];o().each(p,(function(e){var t="".concat(e.taxon.ancestry,"/").concat(e.taxon.id);y(t)||y(h,t)?y(t)&&h!==t&&e.disagreement||g&&y(t)&&h!==t&&null==e.disagreement&&e.id>g.id?l.push(e):r.communityTaxon.ancestry&&!r.communityTaxon.ancestry.split("/").includes(e.taxon.id)&&c.push(e):r.communityTaxon.ancestry&&!r.communityTaxon.ancestry.split("/").includes(e.taxon.id)&&l.push(e)}))}var _,E,w=c.length+l.length,O=[],x="".concat(o().round(100/w,3),"%"),k=[];o().each(c,(function(t){k.indexOf(t.taxon.id)<0&&k.push(t.taxon.id);var n="for taxon-".concat(k.indexOf(t.taxon.id)," ").concat(e.id===t.taxon.id?"exact":"not-exact");O.push(i.createElement(tn,{className:e.id===t.taxon.id?"exact":"not-exact",key:"community-id-".concat(t.id),keyPrefix:"ids",identification:t,communityIDTaxon:r.communityTaxon,agreement:!0,style:{width:x},contents:i.createElement("div",{className:n})}))})),k=[],o().each(l,(function(t){k.indexOf(t.taxon.id)<0&&k.push(t.taxon.id);var n="against taxon-".concat(k.indexOf(t.taxon.id)," ").concat(e.id===t.taxon.id?"exact":"not-exact");O.push(i.createElement(tn,{className:e.id===t.taxon.id?"exact":"not-exact",key:"community-id-".concat(t.id),keyPrefix:"ids",identification:t,communityID:r.communityTaxon,agreement:!1,style:{width:x},contents:i.createElement("div",{className:n})}))})),O.length>1&&(_=i.createElement("div",{className:"lines"},i.createElement("div",{className:"two-thirds"},"\xa0")),E=i.createElement("div",{className:"numbers"},i.createElement("div",{className:"first"},"0"),i.createElement("div",{className:"two-thirds"},I18n.t("two_thirds")),i.createElement("div",{className:"last"},O.length)));var S=i.createElement("span",null,i.createElement("span",{className:"cumulative"},O.length>1?I18n.t("cumulative_ids",{count:c.length,total:O.length}):""),i.createElement("div",{className:"graphic"},i.createElement("div",{className:"vote-cells"},O),_,E));return{taxon:e,stats:S,photo:i.createElement(on,{taxon:e,contents:f}),canAgree:u,userAgreedToThis:t,taxonIsMaverick:m,sortedIdents:p,votesFor:c}}},{key:"render",value:function(){var e=this.props,t=e.observation,n=e.config,r=e.addID,o=e.onClickCompare,a=e.performOrOpenConfirmationModal,s=n&&n.currentUser,c=t.communityTaxon;if(!t||!t.user)return i.createElement("div",null);this.setInstanceVars();var l,u,f,d=!0,p=nn.A.taxonImage(c);if(c){var m=this.dataForTaxon(c);u=m.stats,f=m.photo,d=m.canAgree,l=m.userAgreedToThis}else d=!1,u=i.createElement("span",null,i.createElement("span",{className:"cumulative"},I18n.t("no_ids_have_been_suggested_yet"))),f=p;var h=s?i.createElement("button",{type:"button",className:"btn btn-default",disabled:!d,onClick:function(){a((function(){r(c,{agreedTo:"communityID"})}))}},l?i.createElement("div",{className:"loading_spinner"}):i.createElement("i",{className:"fa fa-check"})," ",I18n.t("agree_")):i.createElement("a",{href:"/login"},i.createElement("button",{type:"button",className:"btn btn-default"},i.createElement("i",{className:"fa fa-check"}),I18n.t("agree_")));return i.createElement("div",{className:"CommunityIdentification collapsible-section"},i.createElement("h4",null,I18n.t("community_id_heading"),i.createElement("span",{className:"header-actions pull-right"},this.optOutPopover(),s&&!t.communityTaxon&&i.createElement("button",{type:"button",className:"btn btn-nostyle linky compare-link",onClick:function(e){return!o||o(e,t.taxon,t)}},I18n.t("compare")),i.createElement("button",{type:"button",className:"btn btn-nostyle linky",onClick:this.showCommunityIDModal},I18n.t("whats_this?")))),this.communityIDOverrideStatement(),this.communityIDOverridePanel(),c?i.createElement("div",{className:"info"},i.createElement("div",{className:"photo"},f),i.createElement("div",{className:"badges"},i.createElement(W,{taxon:c}),i.createElement(G,{taxon:c})),i.createElement(R.A,{taxon:c,url:c?"/taxa/".concat(c.id):null,user:n.currentUser}),u):i.createElement("div",{className:"info"},i.createElement("div",{className:"about"},I18n.t("the_community_id_requires_at_least_two_identifications"))),c&&i.createElement("div",{className:"action"},i.createElement("div",{className:"btn-space"},h),s&&i.createElement("div",{className:"btn-space"},i.createElement("button",{type:"button",className:"btn btn-default",onClick:function(e){return!o||o(e,c,t)}},i.createElement("i",{className:"fa fa-exchange"})," ",I18n.t("compare"))),i.createElement("div",{className:"btn-space"},i.createElement("button",{type:"button",className:"btn btn-default",onClick:this.showCommunityIDModal},i.createElement("i",{className:"fa fa-info-circle"})," ",I18n.t("about")))))}}])}(i.Component);pn.propTypes={config:m().object,observation:m().object,addID:m().func,setCommunityIDModalState:m().func,updateObservation:m().func,onClickCompare:m().func,performOrOpenConfirmationModal:m().func},pn.defaultProps={config:{}};var mn=pn,hn="obs-show/community_id_modal/SET_COMMUNITY_ID_MODAL_STATE",yn=(0,c.Ng)((function(e){return{observation:Object.assign({},e.observation,{places:e.observationPlaces}),config:e.config}}),(function(e){return{addID:function(t,n){e((0,ze.V6)(t,n))},updateObservation:function(t){e((0,ze.OF)(t))},setCommunityIDModalState:function(t){e(vn(t))},updateSession:function(t){e((0,yt.qO)(t))},onClickCompare:function(t,n,r){var o=Object.assign({},r,{taxon:n});return e((0,lt.ej)(o)),e((0,lt._E)()),e((0,ut.zJ)(r)),t.preventDefault(),!1},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,Ge.v8)(t,n))}}}))(mn),bn=yn,gn=n(47452),An=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=On(this,t,[e,n])).close=r.close.bind(r),r.renderTaxonomy=r.renderTaxonomy.bind(r),r.state={hoverTaxon:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sn(e,t)}(t,e),function(e,t){return t&&En(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"getUsableIdentifications",value:function(){var e=this.props.observation;return e&&e.identifications?e.identifications.filter((function(e){return!e.hidden})):[]}},{key:"close",value:function(){this.props.setCommunityIDModalState({show:!1})}},{key:"renderTaxonomy",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.props,s=a.observation,c=a.config,l=this.getUsableIdentifications(),u=this.state.hoverTaxon,f=[],d=!e;return d?t=[LIFE_TAXON]:(t=o().reverse(o().sortBy(this.children[e.id],(function(e){return n.idTaxonAncestorCounts[e.id]||0}))),t=o().filter(t,(function(t){return t.id!==e.id}))),o().each(t,(function(e){var t,a=n.idTaxonCounts[e.id]||0,p=d?n.currentIDs.length:n.idTaxonAncestorCounts[e.id]||0,m=e.id===LIFE_TAXON.id?0:o().filter(l,(function(t){return t.current&&t.taxon.id!==e.id&&!o().includes(t.taxon.ancestor_ids,e.id)&&!o().includes(e.ancestor_ids,t.taxon.id)})).length,h=n.ancestorDisagreements[e.id]||0,v=d?LIFE_TAXON.default_name.name:i.createElement(R.A,{taxon:e,url:"/taxa/".concat(e.id),user:c.currentUser}),y=p+m+h,b=o().round(p/y,3);s.community_taxon&&s.community_taxon.id===e.id?t="current-id":u&&(u.id===e.id||(t=o().includes(u.ancestor_ids,e.id)||o().includes(e.ancestor_ids,u.id)?"included":"excluded")),s.taxon&&!o().includes(s.taxon.ancestor_ids,e.id)&&(t+=" other-branch"),f.push(i.createElement("tr",{key:"id-breakdown-".concat(e.id),className:t,onMouseEnter:function(){n.setState({hoverTaxon:e})},onMouseLeave:function(){n.setState({hoverTaxon:null})}},i.createElement("td",{className:"taxon-cell",style:{paddingLeft:"".concat(10*r+18,"px")}},v),i.createElement("td",null,a),i.createElement("td",null,p),i.createElement("td",null,m),i.createElement("td",null,h),i.createElement("td",{className:"score"},p," / ","(",p,"+",m,"+",h,"=",y,")"," = ",b)));var g=n.renderTaxonomy(e,r+1);g&&g.length>0&&(f=f.concat(g))})),f}},{key:"render",value:function(){var e=this,t=this.props,n=t.observation,r=t.show;if(!n)return i.createElement("div",null);var a,s=this.getUsableIdentifications(),c={};if(o().each(s,(function(e){c[e.taxon.id]=c[e.taxon.id]||e.taxon,o().each(e.taxon.ancestors,(function(e){c[e.id]=c[e.id]||e}))})),n.communityTaxon){this.roots={},this.children={},this.currentIDs=[],this.idTaxonCounts={},this.idTaxonAncestorCounts={},this.ancestorDisagreements={};var l={};o().each(s,(function(t){if(t.current&&t.taxon&&t.taxon.is_active){e.currentIDs.push(t),e.idTaxonCounts[t.taxon.id]=e.idTaxonCounts[t.taxon.id]||0,e.idTaxonCounts[t.taxon.id]+=1;var n,r=o().clone(t.taxon.ancestorTaxa||[]);if(r.push(t.taxon),t.disagreement&&t.previous_observation_taxon&&o().intersection(t.previous_observation_taxon.ancestor_ids,[t.taxon.id]).length>0){var i=o().difference(t.previous_observation_taxon.ancestor_ids,(t.taxon.ancestor_ids||[]).concat([t.taxon.id]));o().each(c,(function(t){o().intersection((t.ancestor_ids||[]).concat([t.id]),i).length>0&&(e.ancestorDisagreements[t.id]=e.ancestorDisagreements[t.id]||0,e.ancestorDisagreements[t.id]+=1)}))}else null==t.disagreement&&o().each(c,(function(n){var r=o().filter(o().sortBy(s,(function(e){return e.id})),(function(e){return e.taxon.id===n.id}))[0];r&&t.id>r.id&&o().intersection(o().difference(n.ancestor_ids,[n.id]),[t.taxon.id]).length>0&&(e.ancestorDisagreements[n.id]=e.ancestorDisagreements[n.id]||0,e.ancestorDisagreements[n.id]+=1)}));o().each(r,(function(t){e.idTaxonAncestorCounts[t.id]=e.idTaxonAncestorCounts[t.id]||0,e.idTaxonAncestorCounts[t.id]+=1,l[t.id]=t.ancestor_ids,n?(e.children[n.id]=e.children[n.id]||{},e.children[n.id][t.id]=t):e.roots[t.id]=t,n=t}))}})),this.children[LIFE_TAXON.id]=this.roots,a=i.createElement("span",null,i.createElement("h4",null,I18n.t("views.observations.community_id.algorithm_summary")),i.createElement("table",{className:"table"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,I18n.t("taxon")),i.createElement("th",null,I18n.t("views.observations.community_id.identification_count")),i.createElement("th",null,I18n.t("views.observations.community_id.cumulative_count")),i.createElement("th",null,I18n.t("views.observations.community_id.disagreement_count")),i.createElement("th",null,I18n.t("views.observations.community_id.ancestor_disagreements")),i.createElement("th",null,I18n.t("views.observations.community_id.score")))),i.createElement("tbody",null,this.renderTaxonomy())),i.createElement("div",{className:"legend"},i.createElement("span",{className:"included"},I18n.t("views.observations.community_id.agreement")),i.createElement("span",{className:"excluded"},I18n.t("views.observations.community_id.disagreement")),i.createElement("span",{className:"other-branch"},I18n.t("views.observations.community_id.below_cutoff"))),i.createElement("h4",null,I18n.t("terms")),i.createElement("dl",null,i.createElement("dt",null,I18n.t("views.observations.community_id.identification_count")),i.createElement("dd",null,I18n.t("views.observations.show.identification_count_desc")),i.createElement("dt",null,I18n.t("views.observations.community_id.cumulative_count")),i.createElement("dd",null,I18n.t("views.observations.show.cumulative_count_desc")),i.createElement("dt",null,I18n.t("views.observations.community_id.disagreement_count")),i.createElement("dd",null,I18n.t("views.observations.show.disagreement_count_desc")),i.createElement("dt",null,I18n.t("views.observations.community_id.ancestor_disagreements")),i.createElement("dd",null,I18n.t("views.observations.show.ancestor_disagreements_desc2")),i.createElement("dt",null,I18n.t("views.observations.community_id.score")),i.createElement("dd",null,I18n.t("views.observations.show.score_desc"))))}return i.createElement(gn.A,{show:r,className:"CommunityIDModal ".concat(n.communityTaxon?"":"no-taxon"),onHide:this.close},i.createElement(gn.A.Body,null,i.createElement("h4",null,I18n.t("about_community_taxa")),i.createElement("div",{dangerouslySetInnerHTML:{__html:I18n.t("views.observations.show.community_taxon_desc_html",{site_name:SITE.name})}}),a),i.createElement(gn.A.Footer,null,i.createElement("div",{className:"buttons"},i.createElement(O.A,{bsStyle:"primary",onClick:this.close},I18n.t("ok")))))}}])}(i.Component);An.propTypes={observation:m().object,setCommunityIDModalState:m().func,show:m().bool,config:m().object,performOrOpenConfirmationModal:m().func},An.defaultProps={config:{}};var jn=An,Cn=(0,c.Ng)((function(e){return{show:e.communityIDModal.show,observation:e.observation,config:e.config}}),(function(e){return{setCommunityIDModalState:function(t){e(vn(t))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,Ge.v8)(t,n))}}}))(jn),Pn=Cn,Nn=n(32426),Tn=n(67209),In=n(28193),Dn=(0,c.Ng)((function(e){return Object.assign({config:e.config},e.disagreementAlert)}),(function(e){return{onClose:function(){e((0,In.tw)())}}}))(Tn.A),Mn=function(e){var t=e.observation,n=t.user,r=n?n.name||n.login:I18n.t("unknown"),o=i.createElement("span",{
dangerouslySetInnerHTML:{__html:I18n.t("observation_attribution_copyright_html",{user:r,vow_or_con:r[0]})}});if(!t.license_code)return i.createElement("span",null,o," ","\xb7"," ",I18n.t("all_rights_reserved"));var a="cc0"===t.license_code?I18n.t("copyright.no_rights_reserved"):I18n.t("some_rights_reserved");return i.createElement("span",{className:"ObservationAttribution"},"cc0"===t.license_code?I18n.t("observation_attribution",{user:r,vow_or_con:r[0]}):o," ","\xb7"," ",i.createElement("a",{href:iNaturalist.Licenses[t.license_code].url},a,i.createElement("img",{src:iNaturalist.Licenses[t.license_code].icon,alt:t.license_code})))};Mn.propTypes={observation:m().object};var Rn=Mn,zn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Bn(this,t,[e]);var r=e.config&&e.config.currentUser;return n.state={open:!r||!r.prefers_hide_obs_show_copyright},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qn(e,t)}(t,e),function(e,t){return t&&Ln(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.observation,r=t.config,o=this.state.open;if(!n||!n.user)return i.createElement("div",null);var a,s=r&&r.currentUser;n.application&&n.application.name&&(a=i.createElement("span",{className:"app-info"},I18n.t("this_observation_was_created_using"),i.createElement("div",{className:"application"},i.createElement("a",{href:n.application.url},i.createElement("img",{src:n.application.icon,alt:n.application.name}),i.createElement("span",{className:"name"},n.application.name)))));var c=a?I18n.t("copyright_info_and_more"):I18n.t("copyright_info");return i.createElement("div",{className:"Copyright collapsible-section"},i.createElement("h4",{className:"collapsible"},i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){s&&e.props.updateSession({prefers_hide_obs_show_copyright:o}),e.setState({open:!o})}},i.createElement("i",{className:"fa fa-chevron-circle-".concat(this.state.open?"down":"right")}),c)),i.createElement(gt.A,{expanded:this.state.open,onToggle:function(){}},i.createElement(gt.A.Collapse,null,i.createElement(Rn,{observation:n}),a)))}}])}(i.Component);zn.propTypes={config:m().object,observation:m().object,updateSession:m().func};var Wn=zn,Kn=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{updateSession:function(t){e((0,yt.qO)(t))}}}))(Wn),$n=n(36235),Gn=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{fave:function(t){e((0,ze.jT)(t))},unfave:function(t){e((0,ze.yP)(t))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,Ge.v8)(t,n))}}}))($n.A),Yn=Gn,Xn=n(22415),Zn=(0,c.Ng)((function(e){return{config:e.config,state:e.flaggingModal,radioOptions:e.flaggingModal.radioOptions}}),(function(e){return{setFlaggingModalState:function(t){return e((0,at._)(t))},createFlag:function(t,n,r,o){e(st(t,n,r,o))},deleteFlag:function(t){return e(ct(t))}}}))(Xn.A),Qn=n(93930),Jn=n(31092),er=n(3105),tr=(0,c.Ng)((function(e){return{config:e.config,observation:e.observation,subscriptions:e.subscriptions.subscriptions,subscriptionsLoaded:e.subscriptions.loaded,relationships:e.relationships.relationships}}),(function(e){return{followUser:function(){return e((0,ze.pV)())},unfollowUser:function(){return e((0,ze.Qt)())},subscribe:function(){return e((0,ze.Um)())},fetchSubscriptions:function(t){return e((0,Jn.hP)(t))},fetchRelationships:function(t){return e((0,er.E_)(t))}}}))(Qn.A),lr=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=ir(this,t,[e]);var r=e.config&&e.config.currentUser;return n.state={open:!!r&&!r.prefers_hide_obs_show_identifiers},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(t,e),function(e,t){return t&&rr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.loadIdentifiers()}},{key:"componentDidUpdate",value:function(){this.loadIdentifiers()}},{key:"loadIdentifiers",value:function(){var e=this.props,t=e.identifiers,n=e.fetchTaxonIdentifiers;null===t&&this.state.open&&n()}},{key:"render",value:function(){var e=this,t=this.props,n=t.observation,r=t.identifiers,a=t.config;if(!n||!n.taxon)return i.createElement("span",null);if(!n||!n.taxon||n.taxon.rank_level>50)return i.createElement("span",null);var s,c=a&&a.currentUser,l=n.taxon,u=this.state.open,f=iNatModels.Taxon.titleCaseName(l.preferred_common_name)||l.name;return a&&a.currentUser&&a.currentUser.prefers_scientific_name_first&&(f=l.name),s=null===r?i.createElement("div",{className:"loading_spinner"}):o().isEmpty(r)?I18n.t("none_found"):r.map((function(e){return i.createElement("div",{className:"identifier",key:"identifier-".concat(e.user.id)},i.createElement(B.A,{config:a,user:e.user,subtitle:e.count,subtitleIconClass:"icon-identification",subtitleLinkOverwrite:"/identifications?user_id=".concat(e.user.login,"&taxon_id=").concat(l.id)}))})),i.createElement("div",{className:"Identifiers collapsible-section"},i.createElement("h4",{className:"collapsible"},i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){c&&e.props.updateSession({prefers_hide_obs_show_identifiers:u}),e.setState({open:!u})}},i.createElement("i",{className:"fa fa-chevron-circle-".concat(u?"down":"right")}),I18n.t("top_identifiers_of_taxon",{taxon:f}))),i.createElement(gt.A,{expanded:u,onToggle:function(){}},i.createElement(gt.A.Collapse,null,s)))}}])}(i.Component);lr.propTypes={config:m().object,observation:m().object,identifiers:m().array,updateSession:m().func,fetchTaxonIdentifiers:m().func};var ur=lr,fr=(0,c.Ng)((function(e){return{observation:e.observation,identifiers:e.identifications.identifiers,config:e.config}}),(function(e){return{updateSession:function(t){e((0,yt.qO)(t))},fetchTaxonIdentifiers:function(){e((0,ze.J7)())}}}))(ur),gr=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hr(this,t,[e,n])).close=r.close.bind(r),r.save=r.save.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&br(e,t)}(t,e),function(e,t){return t&&pr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"close",value:function(){this.props.setLicensingModalState({show:!1})}},{key:"save",value:function(){var e=$(".LicensingModal input:checked").attr("value")||"",t=$(".LicensingModal #make_default").is(":checked"),n=$(".LicensingModal #update_past").is(":checked"),r={license:e};t&&(r.make_license_default=!0),n&&(r.make_licenses_same=!0),this.props.updateObservation(r),this.props.setAttributes({license_code:e.toLowerCase()}),t&&this.props.updateCurrentUser({preferred_observation_license:e.toLowerCase()}),this.close()}},{key:"render",value:function(){var e=this.props,t=e.observation,n=e.config;if(!t||!t.user||!n.currentUser||n.currentUser.id!==t.user.id)return i.createElement("div",null);var r=n.currentUser.preferred_observation_license,o=iNaturalist.Licenses;return i.createElement(gn.A,{show:this.props.show,className:"LicensingModal",onHide:this.close},i.createElement(gn.A.Body,null,i.createElement("h4",null,I18n.t("edit_license")),i.createElement("p",{dangerouslySetInnerHTML:{__html:I18n.t("views.users.edit.licensing_desc_html",{site_name:SITE.name})}}),i.createElement(y.A,null,i.createElement(h.A,null,i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc0",type:"radio",value:"CC0",name:"license",defaultChecked:"cc0"===t.license_code}),i.createElement("label",{htmlFor:"license_cc0"},i.createElement("img",{src:o.cc0.icon_large,alt:"Cc0"}),I18n.t("cc_0_name"),"cc0"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},i.createElement("div",{className:"preferred"},I18n.t("good_choice_for_sharing")),I18n.t("cc_0_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/publicdomain/zero/1.0/"},I18n.t("view_license")))),i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc-by",type:"radio",value:"CC-BY",name:"license",defaultChecked:"cc-by"===t.license_code}),i.createElement("label",{htmlFor:"license_cc-by"},i.createElement("img",{src:o["cc-by"].icon_large,alt:"Cc by"}),I18n.t("cc_by_name"),"cc-by"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},i.createElement("div",{className:"preferred"},I18n.t("good_choice_for_sharing")),I18n.t("cc_by_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/licenses/by/4.0/"},I18n.t("view_license"))))),i.createElement(h.A,null,i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc-by-nc",type:"radio",value:"CC-BY-NC",name:"license",defaultChecked:"cc-by-nc"===t.license_code}),i.createElement("label",{htmlFor:"license_cc-by-nc"},i.createElement("img",{src:o["cc-by-nc"].icon_large,alt:"Cc by nc"}),I18n.t("cc_by_nc_name"),"cc-by-nc"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},i.createElement("div",{className:"preferred"},I18n.t("good_choice_for_sharing")),I18n.t("cc_by_nc_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/licenses/by-nc/4.0/"},I18n.t("view_license")))),i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc-by-sa",type:"radio",value:"CC-BY-SA",name:"license",defaultChecked:"cc-by-sa"===t.license_code}),i.createElement("label",{htmlFor:"license_cc-by-sa"},i.createElement("img",{src:o["cc-by-sa"].icon_large,alt:"Cc by sa"}),I18n.t("cc_by_sa_name"),"cc-by-sa"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},I18n.t("cc_by_sa_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/licenses/by-sa/4.0/"},I18n.t("view_license"))))),i.createElement(h.A,null,i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc-by-nd",type:"radio",value:"CC-BY-ND",name:"license",defaultChecked:"cc-by-nd"===t.license_code}),i.createElement("label",{htmlFor:"license_cc-by-nd"},i.createElement("img",{src:o["cc-by-nd"].icon_large,alt:"Cc by nd"}),I18n.t("cc_by_nd_name"),"cc-by-nd"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},I18n.t("cc_by_nd_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/licenses/by-nd/4.0/"},I18n.t("view_license")))),i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc-by-nc-sa",type:"radio",value:"CC-BY-NC-SA",name:"license",defaultChecked:"cc-by-nc-sa"===t.license_code}),i.createElement("label",{htmlFor:"license_cc-by-nc-sa"},i.createElement("img",{src:o["cc-by-nc-sa"].icon_large,alt:"Cc by nc sa"}),I18n.t("cc_by_nc_sa_name"),"cc-by-nc-sa"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},I18n.t("cc_by_nc_sa_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/licenses/by-nc-sa/4.0/"},I18n.t("view_license"))))),i.createElement(h.A,null,i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_cc-by-nc-nd",type:"radio",value:"CC-BY-NC-ND",name:"license",defaultChecked:"cc-by-nc-nd"===t.license_code}),i.createElement("label",{htmlFor:"license_cc-by-nc-nd"},i.createElement("img",{src:o["cc-by-nc-nd"].icon_large,alt:"Cc by nc nd"}),I18n.t("cc_by_nc_nd_name"),"cc-by-nc-nd"===r?" (".concat(I18n.t("your_default"),")"):"")),i.createElement("div",{className:"info"},I18n.t("cc_by_nc_nd_description")," ",i.createElement("a",{className:"readmore",rel:"noopener nofollow",target:"_blank",href:"http://creativecommons.org/licenses/by-nc-nd/4.0/"},I18n.t("view_license"))))),i.createElement(h.A,null,i.createElement(v.A,{xs:6,className:"license-col"},i.createElement("div",{className:"field license_field"},i.createElement("input",{id:"license_reserved",type:"radio",name:"license",defaultChecked:!t.license_code}),i.createElement("label",{htmlFor:"license_reserved"},I18n.t("no_license_all_rights_reserved"),r?"":" (".concat(I18n.t("your_default"),")"))),i.createElement("div",{className:"info"},I18n.t("you_retain_full_copyright",{site_name:SITE.name})))))),i.createElement(gn.A.Footer,null,i.createElement("div",{className:"buttons"},i.createElement("input",{type:"checkbox",id:"make_default"}),i.createElement("label",{htmlFor:"make_default"},I18n.t("make_this_your_default_license",{type:I18n.t("observation_")})),i.createElement("input",{type:"checkbox",id:"update_past"}),i.createElement("label",{htmlFor:"update_past"},I18n.t("update_past",{type:I18n.t("observations_")})),i.createElement(O.A,{bsStyle:"default",onClick:this.close},I18n.t("cancel")),i.createElement(O.A,{bsStyle:"primary",onClick:this.save},I18n.t("set_license")))))}}])}(i.Component);gr.propTypes={config:m().object,observation:m().object,setAttributes:m().func,updateCurrentUser:m().func,setLicensingModalState:m().func,updateObservation:m().func,show:m().bool};var _r=gr,Er="obs-show/licensing_modal/SET_LICENSING_MODAL_STATE",Or=(0,c.Ng)((function(e){return{show:e.licensingModal.show,observation:e.observation,config:e.config}}),(function(e){return{updateCurrentUser:function(t){e((0,ft.W3)(t))},setAttributes:function(t){e((0,ze.Wp)(t))},updateObservation:function(t){e((0,ze.OF)(t))},setLicensingModalState:function(t){e(wr(t))}}}))(_r),xr=n(91771),kr=n.n(xr),Sr=n(28439),Ar=n(60166),Mr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Nr(this,t)).state={showAllPlaces:!1,latLngCopied:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(t,e),function(e,t,n){return t&&Cr(e.prototype,t),n&&Cr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e=this,n=this.props,r=n.observation,a=n.observationPlaces,s=n.config;if(!r||!r.user)return i.createElement("div",null);var c=this.state.showAllPlaces,l=s.currentUser,u=r.private_geojson?r.positional_accuracy:r.public_positional_accuracy,f="m";u>1e3&&(u=o().round(u/1e3,2),f="km");var d=I18n.t("open_");"private"===r.geoprivacy?d=I18n.t("private_"):"obscured"===r.geoprivacy?d=I18n.t("obscured"):r.geoprivacy&&(d=I18n.t(r.geoprivacy));var p,m=o().filter(r.project_observations,(function(e){return e.preferences&&e.preferences.allows_curator_coordinate_access})),h=o().map(m,(function(e){return e.project}));o().forEach(r.non_traditional_projects,(function(e){if(e.project_user){var t="any"===e.project_user.prefers_curator_coordinate_access_for,n="taxon"===e.project_user.prefers_curator_coordinate_access_for,o=["obscured","private"].includes(r.geoprivacy),i=["obscured","private"].includes(r.taxon_geoprivacy);(t||n&&!o&&i)&&h.push(e.project)}})),l&&l.id&&(p=o().find(h,(function(e){return e.admins.map((function(e){return e.user_id})).includes(l.id)})));var v=a.filter((function(e){return null!==e.admin_level})),y=a.filter((function(e){return null===e.admin_level})),_=i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"icon-icn-location-obscured"}),I18n.t("label_colon",{label:I18n.t("geoprivacy_is_obscured")}))," ",I18n.t("geoprivacy_is_obscured_desc")),E=(r.latitude||0===r.latitude)&&(r.longitude||0===r.longitude),w=E?i.createElement(b.A,{key:"clipboard-tooltip-".concat(this.state.latLngCopied),delayShow:this.state.latLngCopied?0:1e3,placement:"top",container:$(".MapDetails").get(0),ref:function(t){e.clipboardOverlay=t},overlay:i.createElement(g.A,{id:"clipboard-tooltip"},this.state.latLngCopied?I18n.t("copied!"):I18n.t("copy_to_clipboard"))},i.createElement("button",{type:"button",className:"btn btn-xs btn-default clipboard-copy",onMouseLeave:function(){setTimeout((function(){e.setState({latLngCopied:!1})}),200)},onBlur:function(){setTimeout((function(){e.setState({latLngCopied:!1})}),200)},onClick:function(){navigator.clipboard.writeText([r.latitude,r.longitude].join(", ")),e.setState({latLngCopied:!0}),setTimeout((function(){e.clipboardOverlay.show()}))}},i.createElement("i",{className:"fa fa-clipboard"}))):null;return i.createElement("div",{className:"MapDetails"},i.createElement("div",{className:"top_info"},i.createElement("div",{className:"info"},i.createElement("span",{className:"attr"},I18n.t("label_colon",{label:I18n.t("latlon")}))," ",i.createElement("span",{id:"latlng",className:"value"},E?[t.sliceFloat(r.latitude),t.sliceFloat(r.longitude)].join(", "):""),w),i.createElement("div",{className:"info"},i.createElement("span",{className:"attr"},I18n.t("label_colon",{label:I18n.t("accuracy")}))," ",i.createElement("span",{className:"value"},u?"".concat(u).concat(f):I18n.t("not_recorded"))),i.createElement("div",{className:"info"},i.createElement("span",{className:"attr"},I18n.t("label_colon",{label:I18n.t("geoprivacy")}))," ",i.createElement("span",{className:"value"},d))),i.createElement("div",{className:"places clearfix"},i.createElement("h4",null,I18n.t("encompassing_places")),i.createElement("div",{className:"standard"},i.createElement("span",{className:"attr"},I18n.t("label_colon",{label:I18n.t("standard")})),t.placeList(v)),i.createElement("div",{className:"community"},i.createElement("span",{className:"attr"},I18n.t("label_colon",{label:I18n.t("community_curated")})),y.lenght<10?t.placeList(y):i.createElement("div",null,t.placeList(y.slice(0,c?y.length:10)),y.length>10&&(c?i.createElement("button",{className:"btn btn-link btn-more",type:"button",onClick:function(){return e.setState({showAllPlaces:!1})}},I18n.t("less"),I18n.t("fewer__context_places",{defaultValue:I18n.t("more")})):i.createElement("button",{className:"btn btn-link btn-more",type:"button",onClick:function(){return e.setState({showAllPlaces:!0})}},I18n.t("more__context_places",{defaultValue:I18n.t("more")})))))),r.obscured&&(r.geoprivacy||r.taxon_geoprivacy)&&i.createElement("div",{className:"obscured"},i.createElement("h4",null,I18n.t("why_the_coordinates_are_obscured")),i.createElement("ul",{className:"plain"},"obscured"===r.geoprivacy&&_,"private"===r.geoprivacy&&i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"icon-icn-location-private"}),I18n.t("label_colon",{label:I18n.t("geoprivacy_is_private")}))," ",I18n.t("geoprivacy_is_private_desc")),"obscured"===r.taxon_geoprivacy&&i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"fa fa-flag"}),I18n.t("label_colon",{label:I18n.t("taxon_is_threatened_coordinates_obscured")}))," ",I18n.t("taxon_is_threatened_coordinates_obscured_desc")),"private"===r.taxon_geoprivacy&&i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"fa fa-flag"}),I18n.t("label_colon",{label:I18n.t("taxon_is_threatened_coordinates_hidden")}))," ",I18n.t("taxon_is_threatened_coordinates_hidden_desc"))),i.createElement("h4",null,I18n.t("who_can_see_the_coordinates")),i.createElement("ul",{className:"plain"},i.createElement("li",null,i.createElement("i",{className:"icon-person"}),I18n.t("who_can_see_the_coordinates_observer")),i.createElement("li",null,i.createElement("i",{className:"icon-people"}),I18n.t("who_can_see_the_coordinates_trusted")),h&&h.length>0&&i.createElement("li",null,i.createElement("i",{className:"fa fa-briefcase"}),I18n.t("label_colon",{label:I18n.t("who_can_see_the_coordinates_projects")}),i.createElement("ul",null,h.map((function(e){return i.createElement("li",{key:"map-details-projects-".concat(e.id)},i.createElement("a",{href:"/projects/".concat(e.slug)},e.title))}))))),r.private_geojson&&i.createElement("div",null,i.createElement("h4",null,I18n.t("why_you_can_see_the_coordinates")),i.createElement("ul",{className:"plain"},l&&r.user&&l.id===r.user.id&&i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"icon-person"}),I18n.t("label_colon",{label:I18n.t("this_is_your_observation")}))," ",I18n.t("this_is_your_observation_desc")),p&&i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"fa fa-briefcase"}),I18n.t("label_colon",{label:I18n.t("you_curate_a_project_that_contains_this_observation")}))," ",I18n.t("you_curate_a_project_that_contains_this_observation_desc")),r.viewer_trusted_by_observer&&i.createElement("li",null,i.createElement("strong",null,i.createElement("i",{className:"icon-person"}),I18n.t("label_colon",{label:I18n.t("user_trusts_you_with_their_private_coordinates",{user:r.user.login})}))," ",I18n.t("user_trusts_you_with_their_private_coordinates_desc"))))),i.createElement("div",{className:"links"},i.createElement("span",{className:"attr"},I18n.t("view_on")),i.createElement("span",null,i.createElement("span",{className:"info"},i.createElement("a",{className:"value",href:"https://www.google.com/maps?q=".concat(r.latitude,",").concat(r.longitude)},I18n.t("google"))),i.createElement("span",{className:"info"},i.createElement("a",{className:"value",href:"https://www.openstreetmap.org/?mlat=".concat(r.latitude,"&mlon=").concat(r.longitude)},I18n.t("open_street_map"))),i.createElement("span",{className:"info"},i.createElement("a",{className:"value",href:"https://macrostrat.org/map/loc/".concat(r.longitude,"/").concat(r.latitude,"/#z=").concat(r.map_scale||8)},I18n.t("Macrostrat"))))))}}],[{key:"placeList",value:function(e){return e.map((function(e){var t,n=(t=e&&e.place_type&&iNatModels.Place.PLACE_TYPES[e.place_type]?I18n.t("place_geo.geo_planet_place_types.".concat(o().snakeCase(iNatModels.Place.PLACE_TYPES[e.place_type]))):I18n.t("unknown"))&&i.createElement("span",{className:"type"},o().upperFirst(t));return i.createElement("span",{className:"place",key:"place-".concat(e.id)},i.createElement("a",{href:"/observations?place_id=".concat(e.id)},I18n.t("places_name.".concat(o().snakeCase(e.name)),{defaultValue:e.display_name||e.name})),n)}))}},{key:"sliceFloat",value:function(e){if(!e)return"";var t=e.toString(),n=t.split(".");return 1===n.length?t:"".concat(n[0],".").concat(n[1].slice(0,5))}}])}(i.Component);Mr.propTypes={observation:m().object,observationPlaces:m().array,config:m().object},Mr.defaultProps={config:{},observationPlaces:[]};var Rr=Mr,zr=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Br(this,t)).state={showLongLabel:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qr(e,t)}(t,e),function(e,t){return t&&Lr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.observation,s=r.observationPlaces,c=r.canInterpolate,l=r.config,u=r.updateCurrentUser,f="fa fa-map-marker",d=I18n.t("location_is_public"),p=I18n.t("location_unknown");a.obscured&&(a.geoprivacy||a.taxon_geoprivacy)?"private"===a.geoprivacy||"private"===a.taxon_geoprivacy?(f="icon-icn-location-private",d=I18n.t("location_is_private"),p=I18n.t("location_private")):(f="icon-icn-location-obscured",d=I18n.t("location_is_obscured")):a.latitude||a.private_geojson||(f="icon-no-location",p=I18n.t("location_unknown"),c&&(t=i.createElement("div",null,i.createElement("a",{className:"linky",href:"/observations/".concat(a.id,"/edit?interpolate_coordinates=true")},I18n.t("guess_location_from_other_observations?")))));var m,h=I18n.t("location_unknown");if(a&&(h=a.private_geojson||"private"!==a.geoprivacy?a.private_place_guess||a.place_guess:I18n.t("private_")),!a||!a.latitude)return i.createElement("div",{className:"Map"},i.createElement("div",{className:"TaxonMap empty"},i.createElement("div",{className:"no_location"},i.createElement("i",{className:"fa fa-map-marker"}),i.createElement("span",null,p),t)),i.createElement("div",{className:"map_details"},i.createElement("i",{className:"geoprivacy-icon ".concat(f),title:d,alt:d}),i.createElement("div",{className:"place-guess"},h),i.createElement("div",{className:"details_menu"},i.createElement(x.A,{id:"grouping-control"},i.createElement(x.A.Toggle,null,I18n.t("details")),i.createElement(x.A.Menu,{className:"dropdown-menu-right"},i.createElement("li",null,i.createElement(Rr,{observation:a,observationPlaces:s,config:l})))))));if(a.latitude){var v=o().pick(a,["id","species_guess","latitude","longitude","positional_accuracy","public_positional_accuracy","geoprivacy","user","map_scale"]);a.taxon&&LIFE_TAXON&&a.taxon.id!==LIFE_TAXON.id&&(v.taxon=Object.assign({},a.taxon,{forced_name:kr().renderToString(i.createElement(R.A,{taxon:a.taxon,user:l.currentUser,noParens:!0,iconLink:!0,url:(0,Sr.F$)(a.taxon)}))})),v.coordinates_obscured=a.obscured&&!a.private_geojson;var y="map-for-".concat(a.id,"-").concat(a.taxon?a.taxon.id:null),b=(0,Sr.fV)(v.taxon,{currentUser:l.currentUser,updateCurrentUser:u,observation:a});b.places=!1,b.ranges=!1,e=i.createElement(Ar.A,{key:y,placement:"observations-show",reloadKey:y,taxonLayers:[b],observations:[v],zoomLevel:a.map_scale||8,showAccuracy:!0,enableShowAllLayer:!1,overlayMenu:!0,clickable:!1,zoomControlOptions:{position:"undefined"!=typeof google&&($("html[dir='rtl']").length>0?google.maps.ControlPosition.TOP_RIGHT:google.maps.ControlPosition.TOP_LEFT)},minZoom:1,currentUser:l.currentUser,updateCurrentUser:u})}if(h){var g,_=a.obscured&&!a.private_geojson&&i.createElement("span",{className:"obscured"},"(",I18n.t("obscured"),")"),E=a.obscured?22:32,w=this.state.showLongLabel;h.length>E&&!w&&(h="".concat(h.substring(0,E).trim(),"..."),g=i.createElement("div",{className:"show-more"},i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){n.setState({showLongLabel:!0})}},I18n.t("show")))),m=i.createElement("div",null,i.createElement("span",{className:"place"},h),g,_)}return i.createElement("div",{className:"Map"},e,i.createElement("div",{className:"map_details"},i.createElement("i",{className:"geoprivacy-icon ".concat(f),title:d,alt:d}),i.createElement("div",{className:"place-guess"},m),i.createElement("div",{className:"details_menu"},i.createElement(x.A,{id:"grouping-control"},i.createElement(x.A.Toggle,null,I18n.t("details")),i.createElement(x.A.Menu,{className:"dropdown-menu-right"},i.createElement("li",null,i.createElement(Rr,{observation:a,observationPlaces:s,config:l})))))))}}])}(i.Component);zr.propTypes={observation:m().object,observationPlaces:m().array,canInterpolate:m().bool,config:m().object,updateCurrentUser:m().func};var Wr=zr,$r=(0,c.Ng)((function(e){return{observation:e.observation,observationPlaces:e.observationPlaces,canInterpolate:e.config&&e.config.currentUser&&e.observation&&e.observation.user&&e.config.currentUser.id===e.observation.user.id&&e.observation.time_observed_at&&e.otherObservations&&e.otherObservations.earlierUserObservationsByObserved&&e.otherObservations.laterUserObservationsByObserved&&e.otherObservations.earlierUserObservationsByObserved.filter(Kr).length>0&&e.otherObservations.laterUserObservationsByObserved.filter(Kr).length>0,config:e.config}}),(function(e){return{updateCurrentUser:function(t){return e((0,ft.W3)(t))}}}))(Wr),Gr=(n(44695),n(5110)),no=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qr(this,t,[e,n])).close=r.close.bind(r),r.next=r.next.bind(r),r.prev=r.prev.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&to(e,t)}(t,e),function(e,t){return t&&Xr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.easyzoom()}),200)}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout((function(){e.easyzoom()}),200)}},{key:"easyzoom",value:function(){var e=this;$("#lightboxBackdrop figure > img").wrap((function(){var e=$(this).attr("src");return $(this).attr("srcset")&&(e=$(this).attr("srcset").match(/^(.*?) /)[1]),'<div class="easyzoom"><a href="'.concat(e,'"></a></div>')})),$("#lightboxBackdrop .easyzoom").easyZoom({eventType:"click",onShow:function(){this.$link.addClass("easyzoom-zoomed")},onHide:function(){this.$link.removeClass("easyzoom-zoomed")},loadingNotice:I18n.t("loading")}),$("#lightboxBackdrop .easyzoom a").unbind("click"),$("#lightboxBackdrop .easyzoom a").on("click",(function(t){$(t.target).is("img")||e.close()}))}},{key:"close",value:function(){this.props.setMediaViewerState({show:!1})}},{key:"next",value:function(){this.props.setMediaViewerState({activeIndex:(this.props.mediaViewer.activeIndex||0)+1})}},{key:"prev",value:function(){this.props.setMediaViewerState({activeIndex:(this.props.mediaViewer.activeIndex||0)-1})}},{key:"render",value:function(){var e=this.props.observation;if(!e||!e.user)return i.createElement("div",null);var t=o().filter(this.props.observation.photos,(function(e){return!e.hidden})).map((function(e){var t=e.photoUrl("original"),n=e.photoUrl("large"),r=e.photoUrl("medium");return e.flags&&e.flaggedAsCopyrighted()&&(t=SITE.copyrighted_media_image_urls.original,n=SITE.copyrighted_media_image_urls.large,r=SITE.copyrighted_media_image_urls.medium),e.url||e.preview||(t=SITE.processing_image_urls.small,n=SITE.processing_image_urls.small,r=SITE.processing_image_urls.medium),{src:n,srcset:["".concat(t," 2048w"),"".concat(n," 1024w"),"".concat(r," 200w")]}}));return i.createElement(Gr.A,{key:"lightbox-".concat(this.props.mediaViewer.activeIndex),ref:"lightbox",onClickPrev:this.prev,onClickNext:this.next,isOpen:this.props.mediaViewer.show,currentImage:this.props.mediaViewer.activeIndex,onClose:this.close,onClickShowNextImage:!1,showImageCount:!1,images:t,backdropClosesModal:!0,width:5e3,leftArrowTitle:I18n.t("previous_photo"),rightArrowTitle:I18n.t("next_photo")})}}])}(i.Component);no.propTypes={observation:m().object,mediaViewer:m().object,setMediaViewerState:m().func};var ro=no,oo="obs-show/media_viewer/SET_MEDIA_VIEWER_STATE",ao=(0,c.Ng)((function(e){return{mediaViewer:e.mediaViewer,observation:e.observation}}),(function(e){return{setMediaViewerState:function(t){e(io(t))}}}))(ro),so=function(e){var t,n=e.observation,r=e.otherObservations,a=e.showNewObservation,s=e.config;if(!n||!n.user||o().isEmpty(r.earlierUserObservations)&&o().isEmpty(r.laterUserObservations))return i.createElement("div",null);n.time_observed_at?t=M().tz(n.time_observed_at,n.observed_time_zone):n.observed_on&&(t=M()(n.observed_on));var c=t?t.format("YYYY-MM-DD"):null,l=t?t.format("YYYY/M/D"):null,u=(s||{}).testingApiV2,f=n.user.login,d=o().take(r.earlierUserObservations,3)
;if(d.reverse(),(d=d.concat(o().take(r.laterUserObservations,3))).length<6&&(d=d.concat(r.laterUserObservations.slice(3)),d=o().take(d,6)),d.length<6){var p=o().take(r.earlierUserObservations.slice(3),6-d.length);p.reverse(),d=p.concat(d)}return i.createElement("div",{className:"MoreFromUser"},i.createElement(v.A,{xs:12},i.createElement("h3",null,i.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("more_from_x",{x:'<a href="/people/'.concat(f,'">').concat(f,"</a>")})}}),i.createElement("div",{className:"links"},i.createElement("span",{className:"view"},I18n.t("label_colon",{label:I18n.t("view")})),i.createElement("a",{href:"/observations?user_id=".concat(f,"&place_id=any&verifiable=any")},I18n.t("all")),t?i.createElement("span",null,i.createElement("span",{className:"separator"},"\xb7"),i.createElement("a",{href:"/observations?user_id=".concat(f,"&on=").concat(c,"&place_id=any&verifiable=any")},t.format(I18n.t("momentjs.date_long"))),i.createElement("span",{className:"separator"},"\xb7"),i.createElement("a",{href:"/calendar/".concat(f,"/").concat(l)},I18n.t("calendar"))):""))),i.createElement("div",{className:"list d-flex"},d.map((function(e){var t=I18n.t("unknown");e.taxon&&null!==e.taxon&&(t=i.createElement(R.A,{noParens:!0,taxon:e.taxon,url:"/observations/".concat(e.id),user:s.currentUser}));var n=e.taxon&&e.taxon.iconic_taxon_name?e.taxon.iconic_taxon_name.toLowerCase():"unknown";return i.createElement(v.A,{xs:2,key:"more-obs-".concat(e.uuid),className:"d-flex"},i.createElement("div",{className:"obs d-flex flex-column"},i.createElement("div",{className:"photo"},i.createElement("a",{href:"/observations/".concat(e.id),style:e.photo()?{backgroundImage:"url( '".concat(e.photo("medium"),"' )")}:null,className:"".concat(e.hasMedia()?"":"iconic"," ").concat(e.hasSounds()?"sound":""),onClick:function(t){!function(e,t){e.metaKey||e.ctrlKey||(e.preventDefault(),a(t,{useInstance:!u}))}(t,e)}},i.createElement("i",{className:"taxon-image icon icon-iconic-".concat(n)}))),i.createElement("div",{className:"caption"},t)))}))))};so.propTypes={observation:m().object,otherObservations:m().object,showNewObservation:m().func,config:m().object},so.defaultProps={config:{}};var co=so,lo=(0,c.Ng)((function(e){return{observation:e.observation,otherObservations:e.otherObservations,config:e.config}}),(function(e){return{showNewObservation:function(t,n){e((0,ze.IJ)(t,n))}}}))(co),bo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mo(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yo(e,t)}(t,e),function(e,t){return t&&fo(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.props.contentLoader()}},{key:"componentDidUpdate",value:function(){this.props.contentLoader()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.observations,r=e.searchParams,a=e.showNewObservation,s=e.config,c=(s||{}).testingApiV2,l=o().isEmpty(n),u=i.createElement("span",{className:"none"},I18n.t("none_found"));l||(u=o().filter(n,(function(e){return e.photo()})).map((function(e){return i.createElement(v.A,{xs:2,key:"highlight-".concat(e.uuid)},i.createElement("div",{className:"photo"},i.createElement(b.A,{container:$("#wrapper.bootstrap").get(0),placement:"top",delayShow:200,overlay:i.createElement(g.A,{id:"highlight-link-".concat(e.id),className:"obs-highlight-link"},i.createElement(R.A,{taxon:e.taxon,url:(0,Sr.F$)(e.taxon),noParens:!0,user:s.currentUser}))},i.createElement("a",{href:"/observations/".concat(e.id),style:{backgroundImage:"url( '".concat(e.photo("small"),"' )")},onClick:function(t){return function(e,t){e.metaKey||e.ctrlKey||(e.preventDefault(),a(t,{useInstance:!c}))}(t,e)}},"\xa0"))))})));var f=l?null:i.createElement("a",{href:"/observations?".concat($.param(r))},I18n.t("view_all"));return i.createElement("div",{className:"ObservationsHighlight"},i.createElement(v.A,{xs:12},i.createElement("h3",null,t,f)),i.createElement("div",{className:"list ".concat(l?"empty":"")},u))}}])}(i.Component);bo.propTypes={title:m().string,searchParams:m().object,observations:m().array,showNewObservation:m().func,config:m().object,contentLoader:m().func},bo.defaultProps={config:{}};var go=bo,_o=n(10064),Eo=(0,c.Ng)((function(e){var t,n;return{title:I18n.t("nearby_observations_"),observations:null===(t=e.otherObservations.nearby)||void 0===t?void 0:t.observations,searchParams:null===(n=e.otherObservations.nearby)||void 0===n?void 0:n.params,config:e.config}}),(function(e){return{showNewObservation:function(t,n){e((0,ze.IJ)(t,n))},contentLoader:function(){e((0,_o.qQ)())}}}))(go),wo=n(72044),Oo=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{addObservationFieldValue:function(t){e((0,ze.Tw)(t))},removeObservationFieldValue:function(t){e((0,ze.c7)(t))},updateObservationFieldValue:function(t,n){e((0,ze.lz)(t,n))},updateSession:function(t){e((0,yt.qO)(t))}}}))(wo.A),xo=n(75491),ko=n(27068),So=n(70613),Ao=n(72081),jo=n(34387);"function"==typeof SuppressedError&&SuppressedError;var Jo=Xo((function e(){Go(this,e),this.listeners={}}),[{key:"on",value:function(e,t,n){var r=this;if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){var o=function n(){r.un(e,n),r.un(e,t)};return this.on(e,o),o}return function(){return r.un(e,t)}}},{key:"un",value:function(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"unAll",value:function(){this.listeners={}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.listeners[e]&&this.listeners[e].forEach((function(e){return e.apply(void 0,n)}))}}]),ei={decode:function(e,t){return Qo(this,void 0,void 0,Lo().mark((function n(){var r;return Lo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new AudioContext({sampleRate:t}),n.abrupt("return",r.decodeAudioData(e).finally((function(){return r.close()})));case 2:case"end":return n.stop()}}),n)})))},createBuffer:function(e,t){return"number"==typeof e[0]&&(e=[e]),function(e){var t=e[0];if(t.some((function(e){return e>1||e<-1}))){for(var n=t.length,r=0,o=0;o<n;o++){var i=Math.abs(t[o]);i>r&&(r=i)}var a,s=function(e){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ro(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(e);try{for(s.s();!(a=s.n()).done;)for(var c=a.value,l=0;l<n;l++)c[l]/=r}catch(e){s.e(e)}finally{s.f()}}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:function(t){return null==e?void 0:e[t]},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}},ri=Object.freeze({__proto__:null,createElement:ni,default:ni}),oi={fetchBlob:function(e,t,n){return Qo(this,void 0,void 0,Lo().mark((function r(){var o;return Lo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(e,n);case 2:if(!((o=r.sent).status>=400)){r.next=5;break}throw new Error("Failed to fetch ".concat(e,": ").concat(o.status," (").concat(o.statusText,")"));case 5:return r.abrupt("return",(function(e,t){Qo(this,void 0,void 0,Lo().mark((function n(){var r,o,i,a,s,c=this;return Lo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.body&&e.headers){n.next=2;break}return n.abrupt("return");case 2:r=e.body.getReader(),o=Number(e.headers.get("Content-Length"))||0,i=0,a=function(e){return Qo(c,void 0,void 0,Lo().mark((function n(){var r;return Lo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i+=(null==e?void 0:e.length)||0,r=Math.round(i/o*100),t(r);case 3:case"end":return n.stop()}}),n)})))},s=function e(){return Qo(c,void 0,void 0,Lo().mark((function t(){var n;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.read();case 3:n=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return");case 9:if(t.t1=n.done,t.t1){t.next=14;break}return a(n.value),t.next=14,e();case 14:case"end":return t.stop()}}),t,null,[[0,6]])})))},s();case 6:case"end":return n.stop()}}),n)})))}(o.clone(),t),o.blob()));case 6:case"end":return r.stop()}}),r)})))}},ii=function(e){function t(e){var n;return Go(this,t),(n=Po(this,t)).isExternalMedia=!1,e.media?(n.media=e.media,n.isExternalMedia=!0):n.media=document.createElement("audio"),e.mediaControls&&(n.media.controls=!0),e.autoplay&&(n.media.autoplay=!0),null!=e.playbackRate&&n.onMediaEvent("canplay",(function(){null!=e.playbackRate&&(n.media.playbackRate=e.playbackRate)}),{once:!0}),n}return Io(t,e),Xo(t,[{key:"onMediaEvent",value:function(e,t,n){var r=this;return this.media.addEventListener(e,t,n),function(){return r.media.removeEventListener(e,t,n)}}},{key:"getSrc",value:function(){return this.media.currentSrc||this.media.src||""}},{key:"revokeSrc",value:function(){var e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}},{key:"canPlayType",value:function(e){return""!==this.media.canPlayType(e)}},{key:"setSrc",value:function(e,t){var n=this.getSrc();if(!e||n!==e){this.revokeSrc();var r=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;n&&(this.media.src="");try{this.media.src=r}catch(t){this.media.src=e}}}},{key:"destroy",value:function(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}},{key:"setMediaElement",value:function(e){this.media=e}},{key:"play",value:function(){return Qo(this,void 0,void 0,Lo().mark((function e(){return Lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.media.play());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){this.media.pause()}},{key:"isPlaying",value:function(){return!this.media.paused&&!this.media.ended}},{key:"setTime",value:function(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}},{key:"getDuration",value:function(){return this.media.duration}},{key:"getCurrentTime",value:function(){return this.media.currentTime}},{key:"getVolume",value:function(){return this.media.volume}},{key:"setVolume",value:function(e){this.media.volume=e}},{key:"getMuted",value:function(){return this.media.muted}},{key:"setMuted",value:function(e){this.media.muted=e}},{key:"getPlaybackRate",value:function(){return this.media.playbackRate}},{key:"isSeeking",value:function(){return this.media.seeking}},{key:"setPlaybackRate",value:function(e,t){null!=t&&(this.media.preservesPitch=t),this.media.playbackRate=e}},{key:"getMediaElement",value:function(){return this.media}},{key:"setSinkId",value:function(e){return this.media.setSinkId(e)}}])}(Jo),ai=function(e){function t(e,n){var r;Go(this,t),(r=Po(this,t)).timeouts=[],r.isScrollable=!1,r.audioData=null,r.resizeObserver=null,r.lastContainerWidth=0,r.isDragging=!1,r.subscriptions=[],r.unsubscribeOnScroll=[],r.subscriptions=[],r.options=e;var o=r.parentFromOptionsContainer(e.container);r.parent=o;var i=Mo(r.initHtml(),2),a=i[0],s=i[1];return o.appendChild(a),r.container=a,r.scrollContainer=s.querySelector(".scroll"),r.wrapper=s.querySelector(".wrapper"),r.canvasWrapper=s.querySelector(".canvases"),r.progressWrapper=s.querySelector(".progress"),r.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),r.initEvents(),r}return Io(t,e),Xo(t,[{key:"parentFromOptionsContainer",value:function(e){var t;if("string"==typeof e?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}},{key:"initEvents",value:function(){var e=this,t=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){var n=e.wrapper.getBoundingClientRect(),r=t.clientX-n.left,o=t.clientY-n.top;return[r/n.width,o/n.height]}));if(this.wrapper.addEventListener("click",(function(n){var r=Mo(t(n),2),o=r[0],i=r[1];e.emit("click",o,i)})),this.wrapper.addEventListener("dblclick",(function(n){var r=Mo(t(n),2),o=r[0],i=r[1];e.emit("dblclick",o,i)})),!0!==this.options.dragToSeek&&"object"!=$o(this.options.dragToSeek)||this.initDrag(),this.scrollContainer.addEventListener("scroll",(function(){var t=e.scrollContainer,n=t.scrollLeft,r=t.scrollWidth,o=t.clientWidth,i=n/r,a=(n+o)/r;e.emit("scroll",i,a,n,n+o)})),"function"==typeof ResizeObserver){var n=this.createDelay(100);this.resizeObserver=new ResizeObserver((function(){n().then((function(){return e.onContainerResize()})).catch((function(){}))})),this.resizeObserver.observe(this.scrollContainer)}}},{key:"onContainerResize",value:function(){var e=this.parent.clientWidth;e===this.lastContainerWidth&&"auto"!==this.options.height||(this.lastContainerWidth=e,this.reRender())}},{key:"initDrag",value:function(){var e=this;this.subscriptions.push(function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100;if(!e)return function(){};var s=matchMedia("(pointer: coarse)").matches,c=function(){},l=function(l){if(l.button===i){l.preventDefault(),l.stopPropagation();var u=l.clientX,f=l.clientY,d=!1,p=Date.now(),m=function(r){if(r.preventDefault(),r.stopPropagation(),!(s&&Date.now()-p<a)){var i=r.clientX,c=r.clientY,l=i-u,m=c-f;if(d||Math.abs(l)>o||Math.abs(m)>o){var h=e.getBoundingClientRect(),v=h.left,y=h.top;d||(null==n||n(u-v,f-y),d=!0),t(l,m,i-v,c-y),u=i,f=c}}},h=function(t){if(d){var n=t.clientX,o=t.clientY,i=e.getBoundingClientRect(),a=i.left,s=i.top;null==r||r(n-a,o-s)}c()},v=function(e){e.relatedTarget&&e.relatedTarget!==document.documentElement||h(e)},y=function(e){d&&(e.stopPropagation(),e.preventDefault())},b=function(e){d&&e.preventDefault()};document.addEventListener("pointermove",m),document.addEventListener("pointerup",h),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("click",y,{capture:!0}),c=function(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",h),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",b),setTimeout((function(){document.removeEventListener("click",y,{capture:!0})}),10)}}};return e.addEventListener("pointerdown",l),function(){c(),e.removeEventListener("pointerdown",l)}}(this.wrapper,(function(t,n,r){e.emit("drag",Math.max(0,Math.min(1,r/e.wrapper.getBoundingClientRect().width)))}),(function(t){e.isDragging=!0,e.emit("dragstart",Math.max(0,Math.min(1,t/e.wrapper.getBoundingClientRect().width)))}),(function(t){e.isDragging=!1,e.emit("dragend",Math.max(0,Math.min(1,t/e.wrapper.getBoundingClientRect().width)))})))}},{key:"getHeight",value:function(e,t){var n,r=(null===(n=this.audioData)||void 0===n?void 0:n.numberOfChannels)||1;if(null==e)return 128;if(!isNaN(Number(e)))return Number(e);if("auto"===e){var o=this.parent.clientHeight||128;return(null==t?void 0:t.every((function(e){return!e.overlay})))?o/r:o}return 128}},{key:"initHtml",value:function(){var e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&"string"==typeof this.options.cspNonce?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML="\n      <style".concat(n?' nonce="'.concat(n,'"'):"",">\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ").concat(this.getHeight(this.options.height,this.options.splitChannels),'px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class="scroll" part="scroll">\n        <div class="wrapper" part="wrapper">\n          <div class="canvases" part="canvases"></div>\n          <div class="progress" part="progress"></div>\n          <div class="cursor" part="cursor"></div>\n        </div>\n      </div>\n    '),[e,t]}},{key:"setOptions",value:function(e){if(this.options.container!==e.container){var t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}!0!==e.dragToSeek&&"object"!=$o(this.options.dragToSeek)||this.initDrag(),this.options=e,this.reRender()}},{key:"getWrapper",value:function(){return this.wrapper}},{key:"getWidth",value:function(){return this.scrollContainer.clientWidth}},{key:"getScroll",value:function(){return this.scrollContainer.scrollLeft}},{key:"setScroll",value:function(e){this.scrollContainer.scrollLeft=e}},{key:"setScrollPercentage",value:function(e){var t=this.scrollContainer.scrollWidth*e;this.setScroll(t)}},{key:"destroy",value:function(){var e,t;this.subscriptions.forEach((function(e){return e()})),this.container.remove(),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),null===(t=this.unsubscribeOnScroll)||void 0===t||t.forEach((function(e){return e()})),this.unsubscribeOnScroll=[]}},{key:"createDelay",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=function(){e&&clearTimeout(e),t&&t()};return this.timeouts.push(r),function(){return new Promise((function(o,i){r(),t=i,e=setTimeout((function(){e=void 0,t=void 0,o()}),n)}))}}},{key:"convertColorValues",value:function(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";var t=document.createElement("canvas"),n=t.getContext("2d"),r=t.height*(window.devicePixelRatio||1),o=n.createLinearGradient(0,0,0,r),i=1/(e.length-1);return e.forEach((function(e,t){var n=t*i;o.addColorStop(n,e)})),o}},{key:"getPixelRatio",value:function(){return Math.max(1,window.devicePixelRatio||1)}},{key:"renderBarWaveform",value:function(e,t,n,r){var o=e[0],i=e[1]||e[0],a=o.length,s=n.canvas,c=s.width,l=s.height,u=l/2,f=this.getPixelRatio(),d=t.barWidth?t.barWidth*f:1,p=t.barGap?t.barGap*f:t.barWidth?d/2:0,m=t.barRadius||0,h=c/(d+p)/a,v=m&&"roundRect"in n?"roundRect":"rect";n.beginPath();for(var y=0,b=0,g=0,_=0;_<=a;_++){var E=Math.round(_*h);if(E>y){var w=Math.round(b*u*r),O=w+Math.round(g*u*r)||1,x=u-w;"top"===t.barAlign?x=0:"bottom"===t.barAlign&&(x=l-O),n[v](y*(d+p),x,d,O,m),y=E,b=0,g=0}var k=Math.abs(o[_]||0),S=Math.abs(i[_]||0);k>b&&(b=k),S>g&&(g=S)}n.fill(),n.closePath()}},{key:"renderLineWaveform",value:function(e,t,n,r){var o=function(t){var o=e[t]||e[0],i=o.length,a=n.canvas.height/2,s=n.canvas.width/i;n.moveTo(0,a);for(var c=0,l=0,u=0;u<=i;u++){var f=Math.round(u*s);if(f>c){var d=a+(Math.round(l*a*r)||1)*(0===t?-1:1);n.lineTo(c,d),c=f,l=0}var p=Math.abs(o[u]||0);p>l&&(l=p)}n.lineTo(c,a)};n.beginPath(),o(0),o(1),n.fill(),n.closePath()}},{key:"renderWaveform",value:function(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)t.renderFunction(e,n);else{var r=t.barHeight||1;if(t.normalize){var o=Array.from(e[0]).reduce((function(e,t){return Math.max(e,Math.abs(t))}),0);r=o?1/o:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,n,r):this.renderLineWaveform(e,t,n,r)}}},{key:"renderSingleCanvas",value:function(e,t,n,r,o,i,a){var s=this.getPixelRatio(),c=document.createElement("canvas");c.width=Math.round(n*s),c.height=Math.round(r*s),c.style.width="".concat(n,"px"),c.style.height="".concat(r,"px"),c.style.left="".concat(Math.round(o),"px"),i.appendChild(c);var l=c.getContext("2d");if(this.renderWaveform(e,t,l),c.width>0&&c.height>0){var u=c.cloneNode(),f=u.getContext("2d");f.drawImage(c,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(t.progressColor),f.fillRect(0,0,c.width,c.height),a.appendChild(u)}}},{key:"renderMultiCanvas",value:function(e,n,r,o,i,a){var s=this,c=this.getPixelRatio(),l=this.scrollContainer.clientWidth,u=r/c,f=Math.min(t.MAX_CANVAS_WIDTH,l,u),d={};if(0!==f){if(n.barWidth||n.barGap){var p=n.barWidth||.5,m=p+(n.barGap||p/2);f%m!=0&&(f=Math.floor(f/m)*m)}var h=function(t){if(!(t<0||t>=v||d[t])){d[t]=!0;var r=t*f,c=Math.min(u-r,f);if(!(c<=0)){var l=e.map((function(e){var t=Math.floor(r/u*e.length),n=Math.floor((r+c)/u*e.length);return e.slice(t,n)}));s.renderSingleCanvas(l,n,c,o,r,i,a)}}},v=Math.ceil(u/f);if(this.isScrollable){var y=this.scrollContainer.scrollLeft/u,b=Math.floor(y*v);if(h(b-1),h(b),h(b+1),v>1){var g=this.on("scroll",(function(){var e=s.scrollContainer.scrollLeft,n=Math.floor(e/u*v);Object.keys(d).length>t.MAX_NODES&&(i.innerHTML="",a.innerHTML="",d={}),h(n-1),h(n),h(n+1)}));this.unsubscribeOnScroll.push(g)}}else for(var _=0;_<v;_++)h(_)}}},{key:"renderChannel",value:function(e,t,n,r){var o=t.overlay,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["overlay"]),a=document.createElement("div"),s=this.getHeight(i.height,i.splitChannels);a.style.height="".concat(s,"px"),o&&r>0&&(a.style.marginTop="-".concat(s,"px")),this.canvasWrapper.style.minHeight="".concat(s,"px"),this.canvasWrapper.appendChild(a);var c=a.cloneNode();this.progressWrapper.appendChild(c),this.renderMultiCanvas(e,i,n,s,a,c)}},{key:"render",value:function(e){return Qo(this,void 0,void 0,Lo().mark((function t(){var n,r,o,i,a,s,c,l,u,f=this;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timeouts.forEach((function(e){return e()})),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?"".concat(this.options.width,"px"):this.options.width),r=this.getPixelRatio(),o=this.scrollContainer.clientWidth,i=Math.ceil(e.duration*(this.options.minPxPerSec||0)),this.isScrollable=i>o,a=this.options.fillParent&&!this.isScrollable,s=(a?o:i)*r,this.wrapper.style.width=a?"100%":"".concat(i,"px"),this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor="".concat(this.options.cursorColor||this.options.progressColor),this.cursor.style.width="".concat(this.options.cursorWidth,"px"),this.audioData=e,this.emit("render"),this.options.splitChannels)for(c=0;c<e.numberOfChannels;c++)l=Object.assign(Object.assign({},this.options),null===(n=this.options.splitChannels)||void 0===n?void 0:n[c]),this.renderChannel([e.getChannelData(c)],l,s,c);else u=[e.getChannelData(0)],e.numberOfChannels>1&&u.push(e.getChannelData(1)),this.renderChannel(u,this.options,s,0);Promise.resolve().then((function(){return f.emit("rendered")}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"reRender",value:function(){if(this.unsubscribeOnScroll.forEach((function(e){return e()})),this.unsubscribeOnScroll=[],this.audioData){var e=this.scrollContainer.scrollWidth,t=this.progressWrapper.getBoundingClientRect().right;if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){var n=this.progressWrapper.getBoundingClientRect().right-t;n=(n*=2)<0?Math.floor(n):Math.ceil(n),n/=2,this.scrollContainer.scrollLeft+=n}}}},{key:"zoom",value:function(e){this.options.minPxPerSec=e,this.reRender()}},{key:"scrollIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.scrollContainer,r=n.scrollLeft,o=n.scrollWidth,i=n.clientWidth,a=e*o,s=r,c=r+i,l=i/2;if(this.isDragging)a+30>c?this.scrollContainer.scrollLeft+=30:a-30<s&&(this.scrollContainer.scrollLeft-=30);else{(a<s||a>c)&&(this.scrollContainer.scrollLeft=a-(this.options.autoCenter?l:0));var u=a-r-l;t&&this.options.autoCenter&&u>0&&(this.scrollContainer.scrollLeft+=Math.min(u,10))}var f=this.scrollContainer.scrollLeft,d=f/o,p=(f+i)/o;this.emit("scroll",d,p,f,f+i)}},{key:"renderProgress",value:function(e,t){if(!isNaN(e)){var n=100*e;this.canvasWrapper.style.clipPath="polygon(".concat(n,"% 0, 100% 0, 100% 100%, ").concat(n,"% 100%)"),this.progressWrapper.style.width="".concat(n,"%"),this.cursor.style.left="".concat(n,"%"),this.cursor.style.transform="translateX(-".concat(100===Math.round(n)?this.options.cursorWidth:0,"px)"),this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,t)}}},{key:"exportImage",value:function(e,t,n){return Qo(this,void 0,void 0,Lo().mark((function r(){var o,i;return Lo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((o=this.canvasWrapper.querySelectorAll("canvas")).length){r.next=3;break}throw new Error("No waveform data");case 3:if("dataURL"!==n){r.next=6;break}return i=Array.from(o).map((function(n){return n.toDataURL(e,t)})),r.abrupt("return",Promise.resolve(i));case 6:return r.abrupt("return",Promise.all(Array.from(o).map((function(n){return new Promise((function(r,o){n.toBlob((function(e){e?r(e):o(new Error("Could not export image"))}),e,t)}))}))));case 7:case"end":return r.stop()}}),r,this)})))}}])}(Jo);ai.MAX_CANVAS_WIDTH=8e3,ai.MAX_NODES=10;var si=function(e){function t(){var e;return Go(this,t),(e=Po(this,t,arguments)).unsubscribe=function(){},e}return Io(t,e),Xo(t,[{key:"start",value:function(){var e=this;this.unsubscribe=this.on("tick",(function(){requestAnimationFrame((function(){e.emit("tick")}))})),this.emit("tick")}},{key:"stop",value:function(){this.unsubscribe()}},{key:"destroy",value:function(){this.unsubscribe()}}])}(Jo),ci=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new AudioContext;return Go(this,t),(e=Po(this,t)).bufferNode=null,e.playStartTime=0,e.playedDuration=0,e._muted=!1,e._playbackRate=1,e._duration=void 0,e.buffer=null,e.currentSrc="",e.paused=!0,e.crossOrigin=null,e.seeking=!1,e.autoplay=!1,e.addEventListener=e.on,e.removeEventListener=e.un,e.audioContext=n,e.gainNode=e.audioContext.createGain(),e.gainNode.connect(e.audioContext.destination),e}return Io(t,e),Xo(t,[{key:"load",value:function(){return Qo(this,void 0,void 0,Lo().mark((function e(){return Lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"src",get:function(){return this.currentSrc},set:function(e){var t=this;if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((function(t){if(t.status>=400)throw new Error("Failed to fetch ".concat(e,": ").concat(t.status," (").concat(t.statusText,")"));return t.arrayBuffer()})).then((function(n){return t.currentSrc!==e?null:t.audioContext.decodeAudioData(n)})).then((function(n){t.currentSrc===e&&(t.buffer=n,t.emit("loadedmetadata"),t.emit("canplay"),t.autoplay&&t.play())}))}},{key:"_play",value:function(){var e,t=this;if(this.paused){this.paused=!1,null===(e=this.bufferNode)||void 0===e||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);var n=this.playedDuration*this._playbackRate;(n>=this.duration||n<0)&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=function(){t.currentTime>=t.duration&&(t.pause(),t.emit("ended"))}}}},{key:"_pause",value:function(){var e;this.paused=!0,null===(e=this.bufferNode)||void 0===e||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}},{key:"play",value:function(){return Qo(this,void 0,void 0,Lo().mark((function e(){return Lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.paused&&(this._play(),this.emit("play"));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){this.paused||(this._pause(),this.emit("pause"))}},{key:"stopAt",value:function(e){var t=this,n=e-this.currentTime,r=this.bufferNode;null==r||r.stop(this.audioContext.currentTime+n),null==r||r.addEventListener("ended",(function(){r===t.bufferNode&&(t.bufferNode=null,t.pause())}),{once:!0})}},{key:"setSinkId",value:function(e){return Qo(this,void 0,void 0,Lo().mark((function t(){return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.audioContext.setSinkId(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}},{key:"currentTime",get:function(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate},set:function(e){var t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}},{key:"duration",get:function(){var e,t;return null!==(e=this._duration)&&void 0!==e?e:(null===(t=this.buffer)||void 0===t?void 0:t.duration)||0},set:function(e){this._duration=e}},{key:"volume",get:function(){return this.gainNode.gain.value},set:function(e){this.gainNode.gain.value=e,this.emit("volumechange")}},{key:"muted",get:function(){return this._muted},set:function(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}},{key:"canPlayType",value:function(e){return/^(audio|video)\//.test(e)}},{key:"getGainNode",value:function(){return this.gainNode}},{key:"getChannelData",value:function(){var e=[];if(!this.buffer)return e;for(var t=this.buffer.numberOfChannels,n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}}])}(Jo),li={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3},ui=function(e){function t(e){var n;Go(this,t);var r=e.media||("WebAudio"===e.backend?new ci:void 0);(n=Po(this,t,[{media:r,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}])).plugins=[],n.decodedData=null,n.stopAtPosition=null,n.subscriptions=[],n.mediaSubscriptions=[],n.abortController=null,n.options=Object.assign({},li,e),n.timer=new si;var o=r?void 0:n.getMediaElement();n.renderer=new ai(n.options,o),n.initPlayerEvents(),n.initRendererEvents(),n.initTimerEvents(),n.initPlugins();var i=n.options.url||n.getSrc()||"";return Promise.resolve().then((function(){n.emit("init");var e=n.options,t=e.peaks,r=e.duration;(i||t&&r)&&n.load(i,t,r).catch((function(){return null}))})),n}return Io(t,e),Xo(t,[{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getCurrentTime();return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}},{key:"initTimerEvents",value:function(){var e=this
;this.subscriptions.push(this.timer.on("tick",(function(){if(!e.isSeeking()){var t=e.updateProgress();e.emit("timeupdate",t),e.emit("audioprocess",t),null!=e.stopAtPosition&&e.isPlaying()&&t>=e.stopAtPosition&&e.pause()}})))}},{key:"initPlayerEvents",value:function(){var e=this;this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(function(){var t=e.updateProgress();e.emit("timeupdate",t)})),this.onMediaEvent("play",(function(){e.emit("play"),e.timer.start()})),this.onMediaEvent("pause",(function(){e.emit("pause"),e.timer.stop(),e.stopAtPosition=null})),this.onMediaEvent("emptied",(function(){e.timer.stop(),e.stopAtPosition=null})),this.onMediaEvent("ended",(function(){e.emit("timeupdate",e.getDuration()),e.emit("finish"),e.stopAtPosition=null})),this.onMediaEvent("seeking",(function(){e.emit("seeking",e.getCurrentTime())})),this.onMediaEvent("error",(function(){var t;e.emit("error",null!==(t=e.getMediaElement().error)&&void 0!==t?t:new Error("Media error")),e.stopAtPosition=null})))}},{key:"initRendererEvents",value:function(){var e,t=this;this.subscriptions.push(this.renderer.on("click",(function(e,n){t.options.interact&&(t.seekTo(e),t.emit("interaction",e*t.getDuration()),t.emit("click",e,n))})),this.renderer.on("dblclick",(function(e,n){t.emit("dblclick",e,n)})),this.renderer.on("scroll",(function(e,n,r,o){var i=t.getDuration();t.emit("scroll",e*i,n*i,r,o)})),this.renderer.on("render",(function(){t.emit("redraw")})),this.renderer.on("rendered",(function(){t.emit("redrawcomplete")})),this.renderer.on("dragstart",(function(e){t.emit("dragstart",e)})),this.renderer.on("dragend",(function(e){t.emit("dragend",e)}))),this.subscriptions.push(this.renderer.on("drag",(function(n){var r;t.options.interact&&(t.renderer.renderProgress(n),clearTimeout(e),t.isPlaying()?r=0:!0===t.options.dragToSeek?r=200:"object"==$o(t.options.dragToSeek)&&void 0!==t.options.dragToSeek&&(r=t.options.dragToSeek.debounceTime),e=setTimeout((function(){t.seekTo(n)}),r),t.emit("interaction",n*t.getDuration()),t.emit("drag",n))})))}},{key:"initPlugins",value:function(){var e,t=this;(null===(e=this.options.plugins)||void 0===e?void 0:e.length)&&this.options.plugins.forEach((function(e){t.registerPlugin(e)}))}},{key:"unsubscribePlayerEvents",value:function(){this.mediaSubscriptions.forEach((function(e){return e()})),this.mediaSubscriptions=[]}},{key:"setOptions",value:function(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=ei.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=ei.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),null!=e.mediaControls&&(this.getMediaElement().controls=e.mediaControls)}},{key:"registerPlugin",value:function(e){var t=this;return e._init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",(function(){t.plugins=t.plugins.filter((function(t){return t!==e}))}))),e}},{key:"getWrapper",value:function(){return this.renderer.getWrapper()}},{key:"getWidth",value:function(){return this.renderer.getWidth()}},{key:"getScroll",value:function(){return this.renderer.getScroll()}},{key:"setScroll",value:function(e){return this.renderer.setScroll(e)}},{key:"setScrollTime",value:function(e){var t=e/this.getDuration();this.renderer.setScrollPercentage(t)}},{key:"getActivePlugins",value:function(){return this.plugins}},{key:"loadAudio",value:function(e,t,n,r){return Qo(this,void 0,void 0,Lo().mark((function o(){var i,a,s,c,l,u,f,d=this;return Lo().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,t||n){o.next=9;break}return a=this.options.fetchParams||{},window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=null===(i=this.abortController)||void 0===i?void 0:i.signal),s=function(e){return d.emit("loading",e)},o.next=6,oi.fetchBlob(e,s,a);case 6:t=o.sent,(c=this.options.blobMimeType)&&(t=new Blob([t],{type:c}));case 9:return this.setSrc(e,t),o.next=12,new Promise((function(e){var t=r||d.getDuration();t?e(t):d.mediaSubscriptions.push(d.onMediaEvent("loadedmetadata",(function(){return e(d.getDuration())}),{once:!0}))}));case 12:if(l=o.sent,e||t||(u=this.getMediaElement())instanceof ci&&(u.duration=l),!n){o.next=18;break}this.decodedData=ei.createBuffer(n,l||0),o.next=25;break;case 18:if(!t){o.next=25;break}return o.next=21,t.arrayBuffer();case 21:return f=o.sent,o.next=24,ei.decode(f,this.options.sampleRate);case 24:this.decodedData=o.sent;case 25:this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration());case 26:case"end":return o.stop()}}),o,this)})))}},{key:"load",value:function(e,t,n){return Qo(this,void 0,void 0,Lo().mark((function r(){return Lo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.loadAudio(e,void 0,t,n);case 3:return r.abrupt("return",r.sent);case 6:throw r.prev=6,r.t0=r.catch(0),this.emit("error",r.t0),r.t0;case 9:case"end":return r.stop()}}),r,this,[[0,6]])})))}},{key:"loadBlob",value:function(e,t,n){return Qo(this,void 0,void 0,Lo().mark((function r(){return Lo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.loadAudio("",e,t,n);case 3:return r.abrupt("return",r.sent);case 6:throw r.prev=6,r.t0=r.catch(0),this.emit("error",r.t0),r.t0;case 9:case"end":return r.stop()}}),r,this,[[0,6]])})))}},{key:"zoom",value:function(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}},{key:"getDecodedData",value:function(){return this.decodedData}},{key:"exportPeaks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channels,n=void 0===t?2:t,r=e.maxLength,o=void 0===r?8e3:r,i=e.precision,a=void 0===i?1e4:i;if(!this.decodedData)throw new Error("The audio has not been decoded yet");for(var s=Math.min(n,this.decodedData.numberOfChannels),c=[],l=0;l<s;l++){for(var u=this.decodedData.getChannelData(l),f=[],d=u.length/o,p=0;p<o;p++){for(var m=u.slice(Math.floor(p*d),Math.ceil((p+1)*d)),h=0,v=0;v<m.length;v++){var y=m[v];Math.abs(y)>Math.abs(h)&&(h=y)}f.push(Math.round(h*a)/a)}c.push(f)}return c}},{key:"getDuration",value:function(){var e=Co(To(t.prototype),"getDuration",this).call(this)||0;return 0!==e&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}},{key:"toggleInteraction",value:function(e){this.options.interact=e}},{key:"setTime",value:function(e){this.stopAtPosition=null,Co(To(t.prototype),"setTime",this).call(this,e),this.updateProgress(e),this.emit("timeupdate",e)}},{key:"seekTo",value:function(e){var t=this.getDuration()*e;this.setTime(t)}},{key:"play",value:function(e,n){var r=this,o=Object.create(null,{play:{get:function(){return Co(To(t.prototype),"play",r)}}});return Qo(this,void 0,void 0,Lo().mark((function t(){var r;return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!=e&&this.setTime(e),t.next=3,o.play.call(this);case 3:return r=t.sent,t.abrupt("return",(null!=n&&(this.media instanceof ci?this.media.stopAt(n):this.stopAtPosition=n),r));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"playPause",value:function(){return Qo(this,void 0,void 0,Lo().mark((function e(){return Lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.isPlaying()?this.pause():this.play());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){this.pause(),this.setTime(0)}},{key:"skip",value:function(e){this.setTime(this.getCurrentTime()+e)}},{key:"empty",value:function(){this.load("",[[0]],.001)}},{key:"setMediaElement",value:function(e){this.unsubscribePlayerEvents(),Co(To(t.prototype),"setMediaElement",this).call(this,e),this.initPlayerEvents()}},{key:"exportImage",value:function(){return Qo(this,arguments,void 0,(function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dataURL";return Lo().mark((function o(){return Lo().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",e.renderer.exportImage(t,n,r));case 1:case"end":return o.stop()}}),o)}))()}))}},{key:"destroy",value:function(){var e;this.emit("destroy"),null===(e=this.abortController)||void 0===e||e.abort(),this.plugins.forEach((function(e){return e.destroy()})),this.subscriptions.forEach((function(e){return e()})),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),Co(To(t.prototype),"destroy",this).call(this)}}],[{key:"create",value:function(e){return new t(e)}}])}(ii);ui.BasePlugin=function(e){function t(e){var n;return Go(this,t),(n=Po(this,t)).subscriptions=[],n.options=e,n}return Io(t,e),Xo(t,[{key:"onInit",value:function(){}},{key:"_init",value:function(e){this.wavesurfer=e,this.onInit()}},{key:"destroy",value:function(){this.emit("destroy"),this.subscriptions.forEach((function(e){return e()}))}}])}(Jo),ui.dom=ri,"function"==typeof SuppressedError&&SuppressedError;var Di=Ti((function e(){Pi(this,e),this.listeners={}}),[{key:"on",value:function(e,t,n){var r=this;if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){var o=function n(){r.un(e,n),r.un(e,t)};return this.on(e,o),o}return function(){return r.un(e,t)}}},{key:"un",value:function(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"unAll",value:function(){this.listeners={}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.listeners[e]&&this.listeners[e].forEach((function(e){return e.apply(void 0,n)}))}}]),Mi=function(e){function t(e){var n;return Pi(this,t),(n=Oi(this,t)).subscriptions=[],n.options=e,n}return Ai(t,e),Ti(t,[{key:"onInit",value:function(){}},{key:"_init",value:function(e){this.wavesurfer=e,this.onInit()}},{key:"destroy",value:function(){this.emit("destroy"),this.subscriptions.forEach((function(e){return e()}))}}])}(Di),Ui=1e3*Math.log(10)/107.939,Bi=function(e){function t(e){var n,r,o;if(Pi(this,t),(n=Oi(this,t,[e])).frequenciesDataUrl=e.frequenciesDataUrl,n.container="string"==typeof e.container?document.querySelector(e.container):e.container,e.colorMap&&"string"!=typeof e.colorMap){if(e.colorMap.length<256)throw new Error("Colormap must contain 256 elements");for(var i=0;i<e.colorMap.length;i++)if(4!==e.colorMap[i].length)throw new Error("ColorMap entries must contain 4 values");n.colorMap=e.colorMap}else switch(n.colorMap=e.colorMap||"roseus",n.colorMap){case"gray":n.colorMap=[];for(var a=0;a<256;a++){var s=(255-a)/256;n.colorMap.push([s,s,s,1])}break;case"igray":n.colorMap=[];for(var c=0;c<256;c++){var l=c/256;n.colorMap.push([l,l,l,1])}break;case"roseus":n.colorMap=[[.004528,.004341,.004307,1],[.005625,.006156,.00601,1],[.006628,.008293,.008161,1],[.007551,.010738,.01079,1],[.008382,.013482,.013941,1],[.009111,.01652,.017662,1],[.009727,.019846,.022009,1],[.010223,.023452,.027035,1],[.010593,.027331,.032799,1],[.010833,.031475,.039361,1],[.010941,.035875,.046415,1],[.010918,.04052,.053597,1],[.010768,.045158,.060914,1],[.010492,.049708,.068367,1],[.010098,.054171,.075954,1],[.009594,.058549,.083672,1],[.008989,.06284,.091521,1],[.008297,.067046,.099499,1],[.00753,.071165,.107603,1],[.006704,.075196,.11583,1],[.005838,.07914,.124178,1],[.004949,.082994,.132643,1],[.004062,.086758,.141223,1],[.003198,.09043,.149913,1],[.002382,.09401,.158711,1],[.001643,.097494,.167612,1],[.001009,.100883,.176612,1],[514e-6,.104174,.185704,1],[187e-6,.107366,.194886,1],[66e-6,.110457,.204151,1],[186e-6,.113445,.213496,1],[587e-6,.116329,.222914,1],[.001309,.119106,.232397,1],[.002394,.121776,.241942,1],[.003886,.124336,.251542,1],[.005831,.126784,.261189,1],[.008276,.12912,.270876,1],[.011268,.131342,.280598,1],[.014859,.133447,.290345,1],[.0191,.135435,.300111,1],[.024043,.137305,.309888,1],[.029742,.139054,.319669,1],[.036252,.140683,.329441,1],[.043507,.142189,.339203,1],[.050922,.143571,.348942,1],[.058432,.144831,.358649,1],[.066041,.145965,.368319,1],[.073744,.146974,.377938,1],[.081541,.147858,.387501,1],[.089431,.148616,.396998,1],[.097411,.149248,.406419,1],[.105479,.149754,.415755,1],[.113634,.150134,.424998,1],[.121873,.150389,.434139,1],[.130192,.150521,.443167,1],[.138591,.150528,.452075,1],[.147065,.150413,.460852,1],[.155614,.150175,.469493,1],[.164232,.149818,.477985,1],[.172917,.149343,.486322,1],[.181666,.148751,.494494,1],[.190476,.148046,.502493,1],[.199344,.147229,.510313,1],[.208267,.146302,.517944,1],[.217242,.145267,.52538,1],[.226264,.144131,.532613,1],[.235331,.142894,.539635,1],[.24444,.141559,.546442,1],[.253587,.140131,.553026,1],[.262769,.138615,.559381,1],[.271981,.137016,.5655,1],[.281222,.135335,.571381,1],[.290487,.133581,.577017,1],[.299774,.131757,.582404,1],[.30908,.129867,.587538,1],[.318399,.12792,.592415,1],[.32773,.125921,.597032,1],[.337069,.123877,.601385,1],[.346413,.121793,.605474,1],[.355758,.119678,.609295,1],[.365102,.11754,.612846,1],[.374443,.115386,.616127,1],[.383774,.113226,.619138,1],[.393096,.111066,.621876,1],[.402404,.108918,.624343,1],[.411694,.106794,.62654,1],[.420967,.104698,.628466,1],[.430217,.102645,.630123,1],[.439442,.100647,.631513,1],[.448637,.098717,.632638,1],[.457805,.096861,.633499,1],[.46694,.095095,.6341,1],[.47604,.093433,.634443,1],[.485102,.091885,.634532,1],[.494125,.090466,.63437,1],[.503104,.08919,.633962,1],[.512041,.088067,.633311,1],[.520931,.087108,.63242,1],[.529773,.086329,.631297,1],[.538564,.085738,.629944,1],[.547302,.085346,.628367,1],[.555986,.085162,.626572,1],[.564615,.08519,.624563,1],[.573187,.085439,.622345,1],[.581698,.085913,.619926,1],[.590149,.086615,.617311,1],[.598538,.087543,.614503,1],[.606862,.0887,.611511,1],[.61512,.090084,.608343,1],[.623312,.09169,.605001,1],[.631438,.093511,.601489,1],[.639492,.095546,.597821,1],[.647476,.097787,.593999,1],[.655389,.100226,.590028,1],[.66323,.102856,.585914,1],[.670995,.105669,.581667,1],[.678686,.108658,.577291,1],[.686302,.111813,.57279,1],[.69384,.115129,.568175,1],[.7013,.118597,.563449,1],[.708682,.122209,.558616,1],[.715984,.125959,.553687,1],[.723206,.12984,.548666,1],[.730346,.133846,.543558,1],[.737406,.13797,.538366,1],[.744382,.142209,.533101,1],[.751274,.146556,.527767,1],[.758082,.151008,.522369,1],[.764805,.155559,.516912,1],[.771443,.160206,.511402,1],[.777995,.164946,.505845,1],[.784459,.169774,.500246,1],[.790836,.174689,.494607,1],[.797125,.179688,.488935,1],[.803325,.184767,.483238,1],[.809435,.189925,.477518,1],[.815455,.19516,.471781,1],[.821384,.200471,.466028,1],[.827222,.205854,.460267,1],[.832968,.211308,.454505,1],[.838621,.216834,.448738,1],[.844181,.222428,.442979,1],[.849647,.22809,.43723,1],[.855019,.233819,.431491,1],[.860295,.239613,.425771,1],[.865475,.245471,.420074,1],[.870558,.251393,.414403,1],[.875545,.25738,.408759,1],[.880433,.263427,.403152,1],[.885223,.269535,.397585,1],[.889913,.275705,.392058,1],[.894503,.281934,.386578,1],[.898993,.288222,.381152,1],[.903381,.294569,.375781,1],[.907667,.300974,.370469,1],[.911849,.307435,.365223,1],[.915928,.313953,.360048,1],[.919902,.320527,.354948,1],[.923771,.327155,.349928,1],[.927533,.333838,.344994,1],[.931188,.340576,.340149,1],[.934736,.347366,.335403,1],[.938175,.354207,.330762,1],[.941504,.361101,.326229,1],[.944723,.368045,.321814,1],[.947831,.375039,.317523,1],[.950826,.382083,.313364,1],[.953709,.389175,.309345,1],[.956478,.396314,.305477,1],[.959133,.403499,.301766,1],[.961671,.410731,.298221,1],[.964093,.418008,.294853,1],[.966399,.425327,.291676,1],[.968586,.43269,.288696,1],[.970654,.440095,.285926,1],[.972603,.44754,.28338,1],[.974431,.455025,.281067,1],[.976139,.462547,.279003,1],[.977725,.470107,.277198,1],[.979188,.477703,.275666,1],[.980529,.485332,.274422,1],[.981747,.492995,.273476,1],[.98284,.50069,.272842,1],[.983808,.508415,.272532,1],[.984653,.516168,.27256,1],[.985373,.523948,.272937,1],[.985966,.531754,.273673,1],[.986436,.539582,.274779,1],[.98678,.547434,.276264,1],[.986998,.555305,.278135,1],[.987091,.563195,.280401,1],[.987061,.5711,.283066,1],[.986907,.579019,.286137,1],[.986629,.58695,.289615,1],[.986229,.594891,.293503,1],[.985709,.602839,.297802,1],[.985069,.610792,.302512,1],[.98431,.618748,.307632,1],[.983435,.626704,.313159,1],[.982445,.634657,.319089,1],[.981341,.642606,.32542,1],[.98013,.650546,.332144,1],[.978812,.658475,.339257,1],[.977392,.666391,.346753,1],[.97587,.67429,.354625,1],[.974252,.68217,.362865,1],[.972545,.690026,.371466,1],[.97075,.697856,.380419,1],[.968873,.705658,.389718,1],[.966921,.713426,.399353,1],[.964901,.721157,.409313,1],[.962815,.728851,.419594,1],[.960677,.7365,.430181,1],[.95849,.744103,.44107,1],[.956263,.751656,.452248,1],[.954009,.759153,.463702,1],[.951732,.766595,.475429,1],[.949445,.773974,.487414,1],[.947158,.781289,.499647,1],[.944885,.788535,.512116,1],[.942634,.795709,.524811,1],[.940423,.802807,.537717,1],[.938261,.809825,.550825,1],[.936163,.81676,.564121,1],[.934146,.823608,.577591,1],[.932224,.830366,.59122,1],[.930412,.837031,.604997,1],[.928727,.843599,.618904,1],[.927187,.850066,.632926,1],[.925809,.856432,.647047,1],[.92461,.862691,.661249,1],[.923607,.868843,.675517,1],[.92282,.874884,.689832,1],[.922265,.880812,.704174,1],[.921962,.886626,.718523,1],[.92193,.892323,.732859,1],[.922183,.897903,.747163,1],[.922741,.903364,.76141,1],[.92362,.908706,.77558,1],[.924837,.913928,.789648,1],[.926405,.919031,.80359,1],[.92834,.924015,.817381,1],[.930655,.928881,.830995,1],[.93336,.933631,.844405,1],[.936466,.938267,.857583,1],[.939982,.942791,.870499,1],[.943914,.947207,.883122,1],[.948267,.951519,.895421,1],[.953044,.955732,.907359,1],[.958246,.959852,.918901,1],[.963869,.963887,.930004,1],[.969909,.967845,.940623,1],[.976355,.971737,.950704,1],[.983195,.97558,.960181,1],[.990402,.979395,.968966,1],[.99793,.983217,.97692,1]];break;default:throw Error("No such colormap '"+n.colorMap+"'")}return n.fftSamples=e.fftSamples||512,n.height=e.height||200,n.noverlap=e.noverlap||null,n.windowFunc=e.windowFunc||"hann",n.alpha=e.alpha,n.frequencyMin=e.frequencyMin||0,n.frequencyMax=e.frequencyMax||0,n.gainDB=null!==(r=e.gainDB)&&void 0!==r?r:20,n.rangeDB=null!==(o=e.rangeDB)&&void 0!==o?o:80,n.scale=e.scale||"mel",n.numMelFilters=n.fftSamples/2,n.numLogFilters=n.fftSamples/2,n.numBarkFilters=n.fftSamples/2,n.numErbFilters=n.fftSamples/2,n.createWrapper(),n.createCanvas(),xi(n)}return Ai(t,e),Ti(t,[{key:"onInit",value:function(){var e=this;this.container=this.container||this.wavesurfer.getWrapper(),this.container.appendChild(this.wrapper),this.wavesurfer.options.fillParent&&Object.assign(this.wrapper.style,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.subscriptions.push(this.wavesurfer.on("redraw",(function(){return e.render()})))}},{key:"destroy",value:function(){this.unAll(),this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("redraw",this._onRender),this.wavesurfer=null,this.util=null,this.options=null,this.wrapper&&(this.wrapper.remove(),this.wrapper=null),_i(Si(t.prototype),"destroy",this).call(this)}},{key:"loadFrequenciesData",value:function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}))}(this,0,void 0,fi().mark((function t(){var n,r;return fi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Unable to fetch frequencies data");case 5:return t.next=7,n.json();case 7:r=t.sent,this.drawSpectrogram(r);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"createWrapper",value:function(){this.wrapper=Fi("div",{style:{display:"block",position:"relative",userSelect:"none"}}),this.options.labels&&(this.labelsEl=Fi("canvas",{part:"spec-labels",style:{position:"absolute",zIndex:9,width:"55px",height:"100%"}},this.wrapper)),this.wrapper.addEventListener("click",this._onWrapperClick)}},{key:"createCanvas",value:function(){this.canvas=Fi("canvas",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",zIndex:4}},this.wrapper),this.spectrCc=this.canvas.getContext("2d")}},{key:"render",value:function(){var e;if(this.frequenciesDataUrl)this.loadFrequenciesData(this.frequenciesDataUrl);else{var t=null===(e=this.wavesurfer)||void 0===e?void 0:e.getDecodedData();t&&this.drawSpectrogram(this.getFrequencies(t))}}},{key:"drawSpectrogram",value:function(e){var t=this;isNaN(e[0][0])||(e=[e]),this.wrapper.style.height=this.height*e.length+"px",this.canvas.width=this.getWidth(),this.canvas.height=this.height*e.length;var n=this.spectrCc,r=this.height,o=this.getWidth(),i=this.buffer.sampleRate/2,a=this.frequencyMin,s=this.frequencyMax;if(n){if(s>i){var c=this.colorMap[this.colorMap.length-1];n.fillStyle="rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],", ").concat(c[3],")"),n.fillRect(0,0,o,r*e.length)}for(var l=function(c){for(var l=t.resample(e[c]),u=l[0].length,f=new ImageData(o,u),d=0;d<l.length;d++)for(var p=0;p<l[d].length;p++){var m=t.colorMap[l[d][p]],h=4*((u-p-1)*o+d);f.data[h]=255*m[0],f.data[h+1]=255*m[1],f.data[h+2]=255*m[2],f.data[h+3]=255*m[3]}var v=t.hzToScale(a)/t.hzToScale(i),y=t.hzToScale(s)/t.hzToScale(i),b=Math.min(1,y);createImageBitmap(f,0,Math.round(u*(1-b)),o,Math.round(u*(b-v))).then((function(e){n.drawImage(e,0,r*(c+1-b/y),o,r*b/y)}))},u=0;u<e.length;u++)l(u);this.options.labels&&this.loadLabels(this.options.labelsBackground,"12px","12px","",this.options.labelsColor,this.options.labelsHzColor||this.options.labelsColor,"center","#specLabels",e.length),this.emit("ready")}}},{key:"createFilterBank",value:function(e,t,n,r){for(var o=this,i=n(0),a=n(t/2),s=Array.from({length:e},(function(){return Array(o.fftSamples/2+1).fill(0)})),c=t/this.fftSamples,l=0;l<e;l++){var u=r(i+l/e*(a-i)),f=Math.floor(u/c),d=f*c,p=(u-d)/((f+1)*c-d);s[l][f]=1-p,s[l][f+1]=p}return s}},{key:"hzToMel",value:function(e){return 2595*Math.log10(1+e/700)}},{key:"melToHz",value:function(e){return 700*(Math.pow(10,e/2595)-1)}},{key:"createMelFilterBank",value:function(e,t){return this.createFilterBank(e,t,this.hzToMel,this.melToHz)}},{key:"hzToLog",value:function(e){return Math.log10(Math.max(1,e))}},{key:"logToHz",value:function(e){return Math.pow(10,e)}},{key:"createLogFilterBank",value:function(e,t){return this.createFilterBank(e,t,this.hzToLog,this.logToHz)}},{key:"hzToBark",value:function(e){var t=26.81*e/(1960+e)-.53;return t<2&&(t+=.15*(2-t)),t>20.1&&(t+=.22*(t-20.1)),t}},{key:"barkToHz",value:function(e){return e<2&&(e=(e-.3)/.85),e>20.1&&(e=(e+4.422)/1.22),(e+.53)/(26.28-e)*1960}},{key:"createBarkFilterBank",value:function(e,t){return this.createFilterBank(e,t,this.hzToBark,this.barkToHz)}},{key:"hzToErb",value:function(e){return Ui*Math.log10(1+.00437*e)}},{key:"erbToHz",value:function(e){return(Math.pow(10,e/Ui)-1)/.00437}},{key:"createErbFilterBank",value:function(e,t){return this.createFilterBank(e,t,this.hzToErb,this.erbToHz)}},{key:"hzToScale",value:function(e){switch(this.scale){case"mel":return this.hzToMel(e);case"logarithmic":return this.hzToLog(e);case"bark":return this.hzToBark(e);case"erb":return this.hzToErb(e)}return e}},{key:"scaleToHz",value:function(e){switch(this.scale){case"mel":return this.melToHz(e);case"logarithmic":return this.logToHz(e);case"bark":return this.barkToHz(e);case"erb":return this.erbToHz(e)}return e}},{key:"applyFilterBank",value:function(e,t){for(var n=t.length,r=Float32Array.from({length:n},(function(){return 0})),o=0;o<n;o++)for(var i=0;i<e.length;i++)r[o]+=e[i]*t[o][i];return r}},{key:"getWidth",value:function(){return this.wavesurfer.getWrapper().offsetWidth}},{key:"getFrequencies",value:function(e){var t,n,r=this.fftSamples,o=(null!==(t=this.options.splitChannels)&&void 0!==t?t:null===(n=this.wavesurfer)||void 0===n?void 0:n.options.splitChannels)?e.numberOfChannels:1;if(this.frequencyMax=this.frequencyMax||e.sampleRate/2,e){this.buffer=e;var i=e.sampleRate,a=[],s=this.noverlap;if(!s){var c=e.length/this.canvas.width;s=Math.max(0,Math.round(r-c))}var l,u=new Li(r,i,this.windowFunc,this.alpha);switch(this.scale){case"mel":l=this.createFilterBank(this.numMelFilters,i,this.hzToMel,this.melToHz);break;case"logarithmic":l=this.createFilterBank(this.numLogFilters,i,this.hzToLog,this.logToHz);break;case"bark":l=this.createFilterBank(this.numBarkFilters,i,this.hzToBark,this.barkToHz);break;case"erb":l=this.createFilterBank(this.numErbFilters,i,this.hzToErb,this.erbToHz)}for(var f=0;f<o;f++){for(var d=e.getChannelData(f),p=[],m=0;m+r<d.length;){var h=d.slice(m,m+r),v=new Uint8Array(r/2),y=u.calculateSpectrum(h);l&&(y=this.applyFilterBank(y,l));for(var b=0;b<r/2;b++){var g=y[b]>1e-12?y[b]:1e-12,_=20*Math.log10(g);_<-this.gainDB-this.rangeDB?v[b]=0:_>-this.gainDB?v[b]=255:v[b]=(_+this.gainDB)/this.rangeDB*255+256}p.push(v),m+=r-s}a.push(p)}return a}}},{key:"freqType",value:function(e){return e>=1e3?(e/1e3).toFixed(1):Math.round(e)}},{key:"unitType",value:function(e){return e>=1e3?"kHz":"Hz"}},{key:"getLabelFrequency",value:function(e,t){var n=this.hzToScale(this.frequencyMin),r=this.hzToScale(this.frequencyMax);return this.scaleToHz(n+e/t*(r-n))}},{key:"loadLabels",value:function(e,t,n,r,o,i,a,s,c){e=e||"rgba(68,68,68,0)",t=t||"12px",n=n||"12px",r=r||"Helvetica",o=o||"#fff",i=i||"#fff",a=a||"center";var l=this.height||512,u=l/256*5;this.frequencyMin,this.frequencyMax;var f=this.labelsEl.getContext("2d"),d=window.devicePixelRatio;if(this.labelsEl.height=this.height*c*d,this.labelsEl.width=55*d,f.scale(d,d),f)for(var p=0;p<c;p++){var m=void 0;for(f.fillStyle=e,f.fillRect(0,p*l,55,(1+p)*l),f.fill(),m=0;m<=u;m++){f.textAlign=a,f.textBaseline="middle";var h=this.getLabelFrequency(m,u),v=this.freqType(h),y=this.unitType(h),b=(1+p)*l-m/u*l;b=Math.min(Math.max(b,p*l+10),(1+p)*l-10),f.fillStyle=i,f.font=n+" "+r,f.fillText(y,40,b),f.fillStyle=o,f.font=t+" "+r,f.fillText(v,16,b)}}}},{key:"resample",value:function(e){var t,n=this.getWidth(),r=[],o=1/e.length,i=1/n;for(t=0;t<n;t++){var a=new Array(e[0].length),s=void 0;for(s=0;s<e.length;s++){var c=s*o,l=c+o,u=t*i,f=u+i,d=Math.max(0,Math.min(l,f)-Math.max(c,u)),p=void 0;if(d>0)for(p=0;p<e[0].length;p++)null==a[p]&&(a[p]=0),a[p]+=d/i*e[s][p]}var m=new Uint8Array(e[0].length),h=void 0;for(h=0;h<e[0].length;h++)m[h]=a[h];r.push(m)}return r}}],[{key:"create",value:function(e){return new t(e||{})}}])}(Mi),ea=Qi((function e(){Xi(this,e),this.listeners={}}),[{key:"on",value:function(e,t,n){var r=this;if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==n?void 0:n.once){var o=function n(){r.un(e,n),r.un(e,t)};return this.on(e,o),o}return function(){return r.un(e,t)}}},{key:"un",value:function(e,t){var n;null===(n=this.listeners[e])||void 0===n||n.delete(t)}},{key:"once",value:function(e,t){return this.on(e,t,{once:!0})}},{key:"unAll",value:function(){this.listeners={}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.listeners[e]&&this.listeners[e].forEach((function(e){return e.apply(void 0,n)}))}}]),ta=function(e){function t(e){var n;return Xi(this,t),(n=zi(this,t)).subscriptions=[],n.options=e,n}return $i(t,e),Qi(t,[{key:"onInit",value:function(){}},{key:"_init",value:function(e){this.wavesurfer=e,this.onInit()}},{key:"destroy",value:function(){this.emit("destroy"),this.subscriptions.forEach((function(e){return e()}))}}])}(ea),oa={height:20,timeOffset:0,formatTimeCallback:function(e){return e/60>1?"".concat(Math.floor(e/60),":","".concat((e=Math.round(e%60))<10?"0":"").concat(e)):"".concat(Math.round(1e3*e)/1e3)}},ia=function(e){function t(e){var n;return Xi(this,t),(n=zi(this,t,[e||{}])).options=Object.assign({},oa,e),n.timelineWrapper=n.initTimelineWrapper(),n}return $i(t,e),Qi(t,[{key:"onInit",value:function(){var e,t=this;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");var n=this.wavesurfer.getWrapper();if(this.options.container instanceof HTMLElement)n=this.options.container;else if("string"==typeof this.options.container){var r=document.querySelector(this.options.container);if(!r)throw Error("No Timeline container found matching ".concat(this.options.container));n=r}this.options.insertPosition?(n.firstElementChild||n).insertAdjacentElement(this.options.insertPosition,this.timelineWrapper):n.appendChild(this.timelineWrapper),this.subscriptions.push(this.wavesurfer.on("redraw",(function(){return t.initTimeline()}))),((null===(e=this.wavesurfer)||void 0===e?void 0:e.getDuration())||this.options.duration)&&this.initTimeline()}},{key:"destroy",value:function(){this.timelineWrapper.remove(),Hi(Ki(t.prototype),"destroy",this).call(this)}},{key:"initTimelineWrapper",value:function(){return ra("div",{part:"timeline-wrapper",style:{pointerEvents:"none"}})}},{key:"defaultTimeInterval",value:function(e){return e>=25?1:5*e>=25?5:15*e>=25?15:60*Math.ceil(.5/e)}},{key:"defaultPrimaryLabelInterval",value:function(e){return e>=25?10:5*e>=25?6:4}},{key:"defaultSecondaryLabelInterval",value:function(e){return e>=25?5:2}},{key:"virtualAppend",value:function(e,t,n){var r=this,o=!1,i=function(i,a){if(r.wavesurfer){var s=n.clientWidth,c=e>i&&e+s<a;c!==o&&(o=c,c?t.appendChild(n):n.remove())}};if(this.wavesurfer){var a=this.wavesurfer.getScroll(),s=a+this.wavesurfer.getWidth();i(a,s),this.subscriptions.push(this.wavesurfer.on("scroll",(function(e,t,n,r){i(n,r)})))}}},{key:"initTimeline",value:function(){var e,t,n,r,o,i,a,s,c=null!==(n=null!==(t=null===(e=this.wavesurfer)||void 0===e?void 0:e.getDuration())&&void 0!==t?t:this.options.duration)&&void 0!==n?n:0,l=((null===(r=this.wavesurfer)||void 0===r?void 0:r.getWrapper().scrollWidth)||this.timelineWrapper.scrollWidth)/c,u=null!==(o=this.options.timeInterval)&&void 0!==o?o:this.defaultTimeInterval(l),f=null!==(i=this.options.primaryLabelInterval)&&void 0!==i?i:this.defaultPrimaryLabelInterval(l),d=this.options.primaryLabelSpacing,p=null!==(a=this.options.secondaryLabelInterval)&&void 0!==a?a:this.defaultSecondaryLabelInterval(l),m=this.options.secondaryLabelSpacing,h="beforebegin"===this.options.insertPosition,v=ra("div",{style:Object.assign({height:"".concat(this.options.height,"px"),overflow:"hidden",fontSize:this.options.height/2+"px",whiteSpace:"nowrap"},h?{position:"absolute",top:"0",left:"0",right:"0",zIndex:"2"}:{position:"relative"})});v.setAttribute("part","timeline"),"string"==typeof this.options.style?v.setAttribute("style",v.getAttribute("style")+this.options.style):"object"==Yi(this.options.style)&&Object.assign(v.style,this.options.style);for(var y=ra("div",{style:{width:"0",height:"50%",display:"flex",flexDirection:"column",justifyContent:h?"flex-start":"flex-end",top:h?"0":"auto",bottom:h?"auto":"0",overflow:"visible",borderLeft:"1px solid currentColor",opacity:"".concat(null!==(s=this.options.secondaryLabelOpacity)&&void 0!==s?s:.25),position:"absolute",zIndex:"1"}}),b=0,g=0;b<c;b+=u,g++){var _=y.cloneNode(),E=Math.round(100*b)%Math.round(100*f)==0||d&&g%d==0,w=Math.round(100*b)%Math.round(100*p)==0||m&&g%m==0;(E||w)&&(_.style.height="100%",_.style.textIndent="3px",_.textContent=this.options.formatTimeCallback(b),E&&(_.style.opacity="1"));var O=E?"primary":w?"secondary":"tick";_.setAttribute("part","timeline-notch timeline-notch-".concat(O));var x=Math.round(100*(b+this.options.timeOffset))/100*l;_.style.left="".concat(x,"px"),this.virtualAppend(x,v,_)}this.timelineWrapper.innerHTML="",this.timelineWrapper.appendChild(v),this.emit("ready")}}],[{key:"create",value:function(e){return new t(e)}}])}(ta),aa=function(e){var t=e.soundUrl,n=i.useRef(null);return i.useEffect((function(){if(n.current){var e=ui.create({container:n.current,cursorWidth:2,cursorColor:U.lm.inatGreen,dragToSeek:!0,url:t,mediaControls:!0,height:0});e.registerPlugin(Bi.create({colorMap:"gray",labels:!0,height:350,scale:"linear",labelsBackground:"rgba(0, 0, 0, 0.3)"})),e.registerPlugin(ia.create({style:"color: #333",secondaryLabelOpacity:1}))}}),[]),i.createElement("div",{className:"SoundPlayer",ref:n,style:{width:"100%",height:350}})};aa.propTypes={soundUrl:m().string};var sa=aa,ba=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ma(this,t)).addPhotoButton=e.addPhotoButton.bind(e),e.state={slideIndex:0},
e.galleryRef=i.createRef(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ya(e,t)}(t,e),function(e,t){return t&&da(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){var e=s().findDOMNode(this);$(".add-photo",e).appendTo(".image-gallery-thumbnails-container",e),$(".image-gallery-slide",e).each((function(e,t){$("audio",t).length>0&&$(t).attr("role",null)}));var t=this.galleryRef&&this.galleryRef.current&&this.galleryRef.current.props&&this.galleryRef.current.props.items?this.galleryRef.current.props.items:[],n=o().find(t,(function(e){return!0===e.initialPhoto}));n&&this.setState({slideIndex:n.mediaViewerIndex})}},{key:"componentDidUpdate",value:function(e){var t=s().findDOMNode(this);$(".add-photo",t).appendTo(".image-gallery-thumbnails-container",t);var n=this.props.observation;(e.observation?e.observation.id:null)!==(n?n.id:null)&&this.resetSlideIndex()}},{key:"resetSlideIndex",value:function(){this.setState({slideIndex:0})}},{key:"attributionIcon",value:function(e,t){var n=this.props.observation;return i.createElement(b.A,{container:$("#wrapper.bootstrap").get(0),placement:"top",delayShow:500,trigger:"click",rootClose:!0,overlay:i.createElement(g.A,{id:"add-tip"},i.createElement(So.A,{photo:e,observation:n})),key:"".concat(t,"-").concat(e.id,"-license")},e.license_code&&"C"!==e.license_code?i.createElement("i",{className:"fa fa-creative-commons license"}):i.createElement("i",{className:"fa fa-copyright license"}))}},{key:"addPhotoButton",value:function(){var e=this;return this.viewerIsObserver?i.createElement("span",{className:"add-photo-span"},i.createElement("button",{type:"button",className:"add-photo image-gallery-thumbnail btn btn-nostyle",onClick:function(){return e.refs.dropzone.open()}},i.createElement("i",{className:"fa fa-picture-o"}),i.createElement("i",{className:"fa fa-plus"}))):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,r=t.observation,a=t.onFileDrop,s=t.setFlaggingModalState,c=t.hideContent,l=t.unhideContent,u=t.revealHiddenContent,f=t.setMediaViewerState,d=t.performOrOpenConfirmationModal;if(!r||!r.user)return i.createElement("div",null);var p=n&&n.currentUser;this.viewerIsObserver=p&&p.id===r.user.id;var m,h,v=p&&(p.roles.indexOf("curator")>=0||p.roles.indexOf("admin")>=0),y=p&&p.roles.indexOf("admin")>=0,b=0,g=r.photos.map((function(t){if("processing"===t.api_status)return{loading:!0};var n=(t=new t.constructor(ua(ua({},t),{},{user:r.user}))).photoUrl("original"),a=t.photoUrl("large"),f=t.photoUrl("square");if(t.flags&&t.flaggedAsCopyrighted()){var m=SITE.copyrighted_media_image_urls;n=m.original,a=m.large,f=m.square}t.url||t.preview?t.url||(f=null):(n=SITE.processing_image_urls.small,a=SITE.processing_image_urls.small,f=SITE.processing_image_urls.square);var h,g=o().first(o().orderBy(t.moderator_actions||[],"created_at","desc")),_=g&&"hide"===g.action&&v&&g.user&&p.id===g.user.id;if(t.id&&(h=i.createElement("div",{className:"captions"},i.createElement("div",{className:"captions-box"},e.attributionIcon(t,"photo"),i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){d((function(){s({item:t,show:!0,radioOptions:["spam","copyright infringement","inappropriate"]})}),{permitOwnerOf:r})},title:I18n.t("flag_as_inappropriate"),label:I18n.t("flag_as_inappropriate")},i.createElement("i",{className:"fa fa-flag"})),!e.viewerIsObserver&&(y||!t.hidden&&v||t.hidden&&_&&!(null!=g&&g.private))&&i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return t.hidden?l(t):c(t)},title:t.hidden?I18n.t("unhide_content"):I18n.t("hide_content"),label:t.hidden?I18n.t("unhide_content"):I18n.t("hide_content")},i.createElement("i",{className:"fa ".concat(t.hidden?"fa-eye":"fa-eye-slash")})),!e.viewerIsObserver&&y&&t.hidden&&!(null!=g&&g.private)&&i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return c(t)},title:I18n.t("hide_content"),label:I18n.t("hide_content")},i.createElement("i",{className:"fa fa-lock"})),i.createElement("a",{href:"/photos/".concat(t.id)},i.createElement(q.A,null,i.createElement("i",{className:"fa fa-info"})))))),t.hidden){var E=i.createElement(Ao.A,{item:t,itemType:"photos",itemIDField:"id"});return{original:null,zoom:null,thumbnail:f,description:i.createElement("div",{className:"hidden-media"},E,((null==g?void 0:g.private)&&y||!(null!=g&&g.private)&&(v||e.viewerIsObserver))&&i.createElement("button",{type:"button",className:"btn btn-default btn-xs reveal-hidden",onClick:function(){return u(t)}},I18n.t("show_hidden_content")),h)}}var w={original:a,zoom:n,thumbnail:f,mediaViewerIndex:b,description:h,initialPhoto:!0===t.initialPhoto};return b+=1,w}));if(o().each(r.sounds,(function(t){if("processing"!==t.api_status){t=new t.constructor(ua(ua({},t),{},{user:r.user}));var n,a,f=o().first(o().orderBy(t.moderator_actions||[],"created_at","desc")),m=f&&"hide"===f.action&&v&&f.user&&p.id===f.user.id,h="sound-container-local";if(o().find(t.flags,(function(e){return!e.resolved}))&&(a=i.createElement("p",{className:"flag-notice alert alert-warning"},I18n.t("sounds.sound_has_been_flagged")," ",i.createElement("a",{href:"/sounds/".concat(t.id,"/flags"),className:"linky"},I18n.t("view_flags")))),t.hidden){var b=i.createElement(Ao.A,{item:t,itemType:"sounds",itemIDField:"id"});n=i.createElement("div",{className:"hidden-media"},b,((null==f?void 0:f.private)&&y||!(null!=f&&f.private)&&(v||e.viewerIsObserver))&&i.createElement("button",{type:"button",className:"btn btn-default btn-xs reveal-hidden",onClick:function(){return u(t)}},I18n.t("show_hidden_content")))}else t.play_local||"SoundcloudSound"!==t.subtype&&t.file_url?n=window.location.search.match(/test=spectrogram/)?i.createElement(sa,{soundUrl:t.file_url}):i.createElement("audio",{controls:!0,preload:"none",controlsList:"nodownload"},i.createElement("source",{src:t.file_url,type:t.file_content_type}),I18n.t("your_browser_does_not_support_the_audio_element")):(h="sound-container-soundcloud",n=i.createElement("iframe",{title:"Soundcloud",scrolling:"no",frameBorder:"no",src:"https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F".concat(t.native_sound_id,"&show_artwork=false&secret_token=").concat(t.secret_token)}));var _=n;a&&(_=e.viewerIsObserver||v?i.createElement("div",null,a,n):a),g.push({original:null,zoom:null,thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWQAAAFkCAMAAAAgxbESAAACQFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADTcohLAAAAv3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdJSktMTU5PUFFSVFVWV1hZW1xdXl9hYmNkZmdoaWtsbW9wcXN0dXd4eXt8fn+AgoOFhoiJi4yOj5GSlJWXmJqbnZ6goqOlpqiqq62vsLK0tbe5ury+wMHDxcfIyszOz9HT1dfZ2tze4OLk5ujp6+3v8fP19/n7/astjCAAAA6HSURBVHja7Z35fxRFGoerZzLJJDFgAoqLAcIGZYW4ETFcKrqgguABgqLocrgssohyy6IuoogQQA5R5MqxyE0EEmIgJJn+19b1s7hAvm91zXRnZpj3+/z8vm8PD5Oe7qq3qowhhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQhQTS5Z4tDCQJBae8n/l5BtJuhgoZt/0b7F5EHUMCFv929nxII1Ez3r/Lg6NopSIafD700TNkeJd8RG7K6gmOup8gdUJyomKzZJkv3suH5wj4rgv0zaOfiLhsm9jG+8ZUXDaKtnvrKei8GzzA/iKX+bQTAuS7HdNpKWQxK8HWvZ3xOkpHDOCJfvnK3W/sFXWjK4K9zz7pYPl3il6FQ/a+tsgZe+2qjD/T984WPbXaX0zWfZ/B/8IU2eJi+WTpSrvFLtud7A/zDftwWYHy10jFTref6eDf4Wq9sj3wZZTE7Q79v2Qv01V6/oCNb+s3bHfHvanKbGkN8jycuWOfX9M6LLJfwZZ3qLcsb8ygspDvguwvCem2rG/M5Li9Vfslo/ENDv2j0VTPrbUbvmgp9ixfzKqK1SesFre7el1HJ1kY2ZbnzO+1Os4SsnmPtvcn79VreNIJRuzyDpcpNVxxJJNzS8630q8b/3sSTZJ2y1jsk7HkUs23jr5Yn3DVDqOXrIx0+WrdZRodDwQkk3tTfFyTZ5Cx2lK9oqcJFVdFa/3hULH6UiuXnvt14SLK4Y7/Pz9JF7wbX2O3SWX7Pk958RjgdFx+SW7Rp1jZ8lD2m/POjcl6LYRPyZdsb1Im2NXyWV3v2RcnRQ0LndEuuRObY5dJf+7f2ZLwBqRmDjN+pwyx46ScYdho339Xkx6+eut0OXYUbLQkJx603prLjonXLTZU+XYTXKpmN5q7fUqbRfSVqhy7CZ5pKXAYtu3svKGkPXwve94nx+t5PqM+92k/56zniLHbpLH2fvdbL0bs4WkdxQ5dpM8NKDIYkuu0PqSGqzHsZtkryegyl65r8JrwimH9Th2fITbEFSmSV7ulOzEKfVqHDtKLksF1blQJiaPxRlXYlocu75Wzwws1CE/MX+MM97V4th5FG5xYKXuB8SPdQa/XZcocew+njyhO6jUdXFN2RB8t9moxHEaMyOJdUG1rokDP/NwwmAdjtOa46v4IqDYldI0hkp/5RsdjtOcSB16wF7tojTr8RCOH6LCcdotAbWnrOUOe2k9YexU4TiDvotnbO1u/lohK95xz3+VM3acSXNLfI2t4Ewh68l7vWs5c8eZdRANO2OpWC0k4TGMcgWOM2zT8tbKFaUpfzy0vEqB44x74abIaxd2CCl74GtfUeE7zrzh8P5LYs1nhAwYPKfwHYfo6kyInVg9wo12Ewq+VPiOw7TOejuloidwwn0weHTBOw7Xn/y5VPUFHA9fy78ueMchm8CltevdxXg0DgYXF7rjsJ320nf5Uxy+F8W+mANzsaqasY7s9XMtWWyjwdviDIddSFlXXL0r5WeTsGtGYidx3TM4HA4v3Z/lb/F2P8uEXphTgkd+/Kkw+tncr3BItPr5JLlyfuOpM/vff8j+oYfjP73LcNAzhjo4zmf1d+xHP48kl319K+b0NOvs/Yu48gwY/FGup6He8/NI8ujbNz3tnGlrENyNewQ856e4+dlzXNKbR5JH3HUT+Nmy4ilxDZbGe5Wh2b6W7El+wc8fySX9N+/9Uu7Ewl2fV2HsK7l9H9mbR5JR81vHCPGj4+1R61BoOYp8ImuSL+aP5AQOnid99CRs+zwCY1tA5CdZk9yXP5KfEKLXSJ/9NRgO2+NeBoG/ZE2ynz+SxeccaQdVfFDReuf7xX0KJcv9yNIf9mQ4txRzvS1OVih5vZwgzXyeRcGPo8iVIHCTQsm2XbGexp++wXlOdQx6CVco+Y+WjD7ch+yhs4pS6ByMOKqa0CfZ67B1FcbchzCeQpFoZfsIfZLtZ+JsgClF6BEUNscuzGFnQD5JNtadp2tgCprx70GjRLUg8HONkuWZaF9atDsMhaKd4EpA3DmVkqU1S78xF2agn77XUSC643sqJZvH5WO0rsPTs9D5LodQIOq/GKRTsknuEdMWoni0BDuFHkXmgMCxSiUbM6lL6l6Bj3GoBx89VT8K4l5SK9mUHBTynkXRn4BAdFzMIBC3Uq9kaRDTP41iJzjKi4G4XZolm1q8DwO6DaC9in5ANa/m7BkuTyWbWthYsQyFglt4r+NMW59uyWau8zQp6lhGq1RXgbiYbsnmMMpEHSnzHd/5UFxSueQqlIk2g6wDcejY+6dB3BDlkuFABpruQ/1BaPXkn0DcKO2S0frzNjTcCeKWOtZ7TLtk8zNIReMX4EEENd2jJToN6iWvcuyqaOsfth+EFYNyM9RLRr9otSAO7Ez9o+Nt5TX1ktHzxTQQ91X/sFbH9+qF6iWjr96rIO7T/mEX0EQtKPe2esnIylsgbmP/sA7Hf+tf1Us2js9mH4K5VMdyyykZpC4BYWBJyE3HcsvUS3b9pQJtAe2Od5/31Esudpyy/sxtoBhJXqReMuqpmOQ21tkMwlA73AL1kic5jugcd5saQcslXlEveYvjgDKYV9qH5mcdh051SUatAZ7bv2Gz43T1k9olo/Hfnxx/H9E5DA+DuLHaJX8HMtc7/j5OB3HjQVy1csloAQL8854I4h4Fcc+BuPt1S47Bg7LQxOe7IG4oiHsLxJXolgzXQqFbsjnoKO8jx99RPZLhknM40GlAs9F1x3t8j9Es+Q2cWO74ZLbP8YmwVbHk+DacdwAFT3ccJkZv1dv1Sq6+LOShZwazAwQ+4TiZtUyr5NgqKe0inD7pcXwyG5+zt+r8kzxS3r0XLoJE21DDNWZoId9onZKXyFm4mRitl4LbnaK1KGUaJcePWLLgOIOHVkvBlhVwwlGW2pPzS3L8hCVpt/vLN7olo21FmhVKtu4D2IP/tNH2cHDfG9SOtEGh5LdtOc/DFHi49RYUuTR3Dxf5JDl+05LSiD/+YufHabT/3jB9kussGZfwoRUxdA54t+c4su/H9ElearkhC+O+cPUOvNPWu47pFbjkTXLCo8IvJdzrpQaFgn45/wOFkuVtGKTpTnh2ZBccI0bbp45XKFncTUvavy0BT1CFnVdwKVXWzqTtyR/JY4T78Rjps+ORpFLXp5C2bDk2Z/JHMtwV3b8kLrXDB4jgw/bacnlLNtvy6GUEzXTujosfHR/RACf50c4jcPnJwDAxjyTH+u0KeX2q/MlnwdKnnMf2Utk78T7WkUcDRGWdd70fWzbrHow3JZ4Agy+7zmUNENPyaaiz7PZzVxorLR/bwwd3wG1HTI2fw4GL39icT4P23rz/vSj3rbc396zGlcfB4K9QaDKbkr3P8mr6yatZ8OHHi+oCbphTcOEmGIx6Zv1jJrvMuZl3fRcBDBV2iccPDGiji2xtpHXbq9O85ntKcmk7rnsQh1/J+d3i1l9pIunI8pxLTpzDZVMV7kOoB0x+szzHkmPSTKCwXqwFxU40hW45lOT4caFqG27RRHv6CqcLFJTlMJKLmtJqGTDmBxS71phCtxxCcqk4orUdJ8DDO7O0wVNOLWcu+YFrUs0rwkjS/gF5hrwHLGf8b5woD3/jQ2jNaBg8yRS+5Qwle2vkku8LOXCI45pnCt9yZpLLjssVWwRt8LQX+WC0QrKckeSZlpmyrnLhuw/byXuLjALLGUh+wNaLKG5UCKezxZOkCsty2pKLN1nrzZJuMPAA2FTSaLCcpuTYAvuc+kYpEZ9NusYYDZbTkuxND5ghOyQ9K+CjKu+1L3KmltORPOFCQLFj0jBEvKMwvsgZWnaX/HBLUK0WsWdgI+6VKTY6LDtLXhFY6ox4pt54nLDIGB2WXXc43BFY6bzYz1aMj4TpjBkllh0lrw4uJJ8N+S3OmG6MEsuZ7wR+J9/KX8uXcUazMVosu0neFVTmM3mcZ1gKp/zBqLHsJDkeVGWJ5Q1RmM7eaoway06Sh9tr3LDs+e8dxTnXE0aPZSfJddYSreWWVOks96nG6LHsJPlxW4VPbMPuL0nv38YosuwkuVrObx9nS/yzkNVbbjRZdpKcENO3xK3/OUKfXHZ7ZXNv2e0R7nthWvoRa1blDeGiO41RZdlNMmz96XnT/l5c1i7dYoqMLsuOr9XgbWRDwBhambRHlHCAewFbdt3T/vRdeY1BW2uWX5Uu+TdjlFl2HepM3LHLyNbKoPgK6V7hN3tGm2Xn8WRv4a1FAL0rSwOjB4vzVL0VxmiznMb0U1HDp0cv/rip3uFna8QN8YL1xqizPCD9fg0p8XrvGKPP8kBIXihfbrsxCi1HL9nbIF+tOWY0Wo5ccskx+WIdSWM0Wo5a8shO+Vp9w4xRaTliyfNt/6FPGaPTcqSSixttjmcao9RylJLrfrE5ftUYrZajk5ywr75fZIxay5FJbrB+jbN0OGeeWj4STfVBB+yP4x8ao9hyJK9gseUpu+MNxmi2vDiCwlODNk9aZoxqyw+Frjr6VNAg1CxjVFtuDVtyxMEgxX31xui2PDLcWNDk1sAB6+4Rxui2HOrhteitruCZl/ZKo487xnpXhKk0o9thCrE5aTTy2O+zyJ1hFugX7XeZC9/kGZ14fzn833//0dlhBtCLzzoo7nvGaCaRCPcV81odHF+sMiQEKxwc74rTUxiSqUDFqdepKRxzAx2fGExLIWkM+sV7jY5Cc97u+GgFFYWnzaa4dw4FRcEPFsc7y+knEj4QFTdV005EjJK2Nmygm+iA+4v0LPBoJkLAOuC+1cX0Ei2z7x6afy9BKZFzxyYW117lOMWAUP37SaeXpvNePGDUrmnp6jj29xqaIIQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEJU8h8hV2HY8RLFyQAAAABJRU5ErkJggg==",description:i.createElement("div",{className:"sound-container ".concat(h)},i.createElement("div",{className:"sound"},_),i.createElement("div",{className:"captions"},i.createElement("div",{className:"captions-box"},e.attributionIcon(t,"sound")," ",i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){d((function(){s({item:t,show:!0,radioOptions:["spam","copyright infringement","inappropriate"]})}),{permitOwnerOf:r})},title:I18n.t("flag_this_sound"),label:I18n.t("flag_this_sound")},i.createElement("i",{className:"fa fa-flag"})),!e.viewerIsObserver&&(y||!t.hidden&&v||t.hidden&&m&&!(null!=f&&f.private))&&i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return t.hidden?l(t):c(t)},title:t.hidden?I18n.t("unhide_content"):I18n.t("hide_content"),label:t.hidden?I18n.t("unhide_content"):I18n.t("hide_content")},i.createElement("i",{className:"fa ".concat(t.hidden?"fa-eye":"fa-eye-slash")})),!e.viewerIsObserver&&y&&t.hidden&&!(null!=f&&f.private)&&i.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return c(t)},title:I18n.t("hide_content"),label:I18n.t("hide_content")},i.createElement("i",{className:"fa fa-lock"})))))})}else g.push({loading:!0})})),o().isEmpty(g)){var _=r.taxon&&r.taxon.iconic_taxon_name?r.taxon.iconic_taxon_name.toLowerCase():"unknown";m=i.createElement("div",null,i.createElement("i",{className:"fa icon-iconic-".concat(_)}),i.createElement("span",{className:"nophoto"},I18n.t("no_photo")),this.addPhotoButton())}else h=!!this.viewerIsObserver||g.length>1,m=i.createElement(xo.A,{key:"media-for-".concat(r.id),ref:this.galleryRef,items:g,showThumbnails:h,lazyLoad:!1,disableArrowKeys:!0,showNav:!1,showFullscreenButton:!1,showPlayButton:!1,slideDuration:0,startIndex:this.state.slideIndex,renderCustomControls:this.addPhotoButton,onClick:function(t){if($(t.target).is("img")){var n=e.galleryRef.current.state.currentIndex;o().has(g[n],"mediaViewerIndex")&&f({show:!0,activeIndex:g[n].mediaViewerIndex})}},onSlide:function(t){e.state.slideIndex=t,o().has(g[t],"mediaViewerIndex")&&f({activeIndex:g[t].mediaViewerIndex}),$(".PhotoBrowser audio").each((function(e,t){t.pause()}))},renderItem:function(e){return i.createElement("div",{className:"image-gallery-image"},e.imageSet&&i.createElement("picture",null,e.imageSet.map((function(e,t){return i.createElement("source",{key:t,media:e.media,srcSet:e.srcSet,type:e.type})})),i.createElement("img",{alt:e.originalAlt,src:e.original})),!e.imageSet&&e.original&&i.createElement("img",{src:e.original,alt:e.originalAlt,srcSet:e.srcSet,sizes:e.sizes,title:e.originalTitle,draggable:"false"}),e.description&&i.createElement("span",{className:"image-gallery-description"},e.description),e.loading&&i.createElement("div",{className:"loading_spinner"}))},renderThumbInner:function(e){return e.thumbnail?i.createElement("div",{className:"image-gallery-thumbnail-inner"},i.createElement("img",{draggable:!1,src:e.thumbnail,alt:e.thumbnailAlt,title:e.thumbnailTitle}),i.createElement("div",{className:"image-gallery-thumbnail-label"},e.thumbnailLabel)):i.createElement("div",{className:"loading_spinner"})}});var E=[];o().isEmpty(g)&&E.push("empty"),h||E.push("no-thumbs");var w=i.createElement("div",{className:"PhotoBrowser ".concat(E.join(" "))},m);return this.viewerIsObserver?i.createElement(ko.A,{ref:"dropzone",className:"dropzone ".concat(o().isEmpty(g)?"empty":""),onDrop:function(e,t,n){n.nativeEvent.dataTransfer&&n.nativeEvent.dataTransfer.items&&n.nativeEvent.dataTransfer.items.length>0&&"string"===n.nativeEvent.dataTransfer.items[0].kind||(o().each(e,(function(e){try{e.preview=e.preview||window.URL.createObjectURL(e)}catch(t){console.error("Failed to generate preview for file",e,t)}})),a(e,t,n))},activeClassName:"hover",disableClick:!0,disablePreview:!0,accept:jo.Bo,maxSize:jo.w3},w,i.createElement("div",{className:"hover-drop"},I18n.t("drop_it"))):w}}])}(i.Component);ba.propTypes={config:m().object,observation:m().object,setMediaViewerState:m().func,onFileDrop:m().func,setFlaggingModalState:m().func,hideContent:m().func,unhideContent:m().func,revealHiddenContent:m().func,performOrOpenConfirmationModal:m().func};var ga=ba,_a=(0,c.Ng)((function(e){return{config:e.config,observation:e.observation}}),(function(e){return{onFileDrop:function(t,n,r){e((0,ze.ze)(t,n,r))},setMediaViewerState:function(t){e(io(t))},setFlaggingModalState:function(t){return e((0,at._)(t))},hideContent:function(t){return e((0,dt.Ps)(t,"hide"))},unhideContent:function(t){return e((0,dt.Ps)(t,"unhide"))},revealHiddenContent:function(t){return e((0,dt.lK)(t))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,Ge.v8)(t,n))}}}))(ga),Ea=_a,wa=function(e){var t=e.otherObservations,n=e.showNewObservation,r=e.config,a=e.observation;if(a&&a.obscured&&!a.private_geojson||o().isEmpty(a))return i.createElement("div",null);var s,c,l=o().isEmpty(t.earlierUserObservations),u=o().isEmpty(t.laterUserObservations),f=(r||{}).testingApiV2,d=function(e){return e.preventDefault(),!1},p=function(e){return e.preventDefault(),!1},m=I18n.t("unknown"),h=I18n.t("unknown"),v=r&&r.currentUser&&r.currentUser.prefers_scientific_name_first;l||(d=function(e){return e.preventDefault(),n(s,{useInstance:!f}),!1},(s=t.earlierUserObservations[0]).taxon?(m=s.taxon.name,s.taxon.preferred_common_name&&!v&&(m=iNatModels.Taxon.titleCaseName(s.taxon.preferred_common_name))):s.species_guess&&(m=s.species_guess)),u||(p=function(e){return e.preventDefault(),n(c,{useInstance:!f}),!1},(c=t.laterUserObservations[0]).taxon?(h=c.taxon.name,c.taxon.preferred_common_name&&!v&&(h=iNatModels.Taxon.titleCaseName(c.taxon.preferred_common_name))):c.species_guess&&(h=c.species_guess));var y=$("html[dir='rtl']").length>0;return i.createElement("div",{className:"PreviousNextButtons"},i.createElement("a",{href:"/observations/".concat(s?s.id||s.uuid:a.user.login),className:"previous ".concat(l?"disabled":""),onClick:d,alt:I18n.t("previous_observation"),title:m},i.createElement("i",{className:"fa fa-chevron-".concat(y?"right":"left")})),i.createElement("a",{href:"/observations/".concat(c?c.id||c.uuid:a.user.login),className:"next ".concat(u?"disabled":""),onClick:p,alt:I18n.t("next_observation"),title:h},i.createElement("i",{className:"fa fa-chevron-".concat(y?"left":"right")})))};wa.propTypes={otherObservations:m().object,showNewObservation:m().func,config:m().object,observation:m().object};var Oa=wa,xa=(0,c.Ng)((function(e){return{observation:e.observation,otherObservations:e.otherObservations,config:e.config}}),(function(e){return{showNewObservation:function(t,n){e((0,ze.IJ)(t,n))}}}))(Oa),ka=n(79497),Sa=n(34157),Aa=(0,c.Ng)((function(e){return Object.assign({},e.projectFieldsModal,{observation:e.observation,config:e.config})}),(function(e){return{addObservationFieldValue:function(t){e((0,ze.Tw)(t))},updateObservationFieldValue:function(t,n){e((0,ze.lz)(t,n))},setProjectFieldsModalState:function(t,n){e((0,Sa.l)(t,n))}}}))(ka.A),ja=n(6363),Ca=n(98741),Pa=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{addToProject:function(t){e((0,ze.Yy)(t))},removeFromProject:function(t){e((0,ze.Mf)(t))},joinProject:function(t){e((0,ze.Y_)(t))},removeObservationFieldValue:function(t){e((0,ze.c7)(t))},updateCuratorAccess:function(t,n){e((0,Ca.o)(t,n))},updateObservationFieldValue:function(t,n){e((0,ze.lz)(t,n))},updateSession:function(t){e((0,yt.qO)(t))},showProjectFieldsModal:function(t){e((0,Sa.l)({show:!0,alreadyInProject:!0,project:t}))}}}))(ja.A),Na=(0,c.Ng)((function(e){var t,n;return{title:I18n.t("observations_of_relatives"),observations:null===(t=e.otherObservations.moreFromClade)||void 0===t?void 0:t.observations,searchParams:null===(n=e.otherObservations.moreFromClade)||void 0===n?void 0:n.params,config:e.config}}),(function(e){return{showNewObservation:function(t,n){e((0,ze.IJ)(t,n))},contentLoader:function(){e((0,_o.Nj)())}}}))(go),Ta=n(2480),Ba=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ra(this,t,[e])).submitTag=n.submitTag.bind(n),n.removeTag=n.removeTag.bind(n);var r=e.config&&e.config.currentUser;return n.state={open:!r||!r.prefers_hide_obs_show_tags},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ua(e,t)}(t,e),function(e,t){return t&&Da(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"submitTag",value:function(e){e.preventDefault();var t=$(e.target).find("input");(0,this.props.addTag)(o().trim(t.val())),t.val("")}},{key:"removeTag",value:function(e){(0,this.props.removeTag)(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,r=t.observation,a=t.updateSession,s=this.state.open,c=n&&n.currentUser;if(!r||!r.user)return i.createElement("div",null);var l,u=r.tags||[],f=c&&n.currentUser.id===r.user.id;if(o().isEmpty(r.tags)&&!f)return i.createElement("div",null);f&&(l=i.createElement("form",{onSubmit:this.submitTag},i.createElement("div",{className:"form-group"},i.createElement("input",{type:"text",placeholder:I18n.t("add_tag"),className:"form-control"}))));var d=u.length>0?"(".concat(u.length,")"):"";return i.createElement("div",{className:"Tags collapsible-section"},i.createElement("h4",{className:"collapsible",onClick:function(){c&&a({prefers_hide_obs_show_tags:s}),e.setState({open:!s})}},i.createElement("i",{className:"fa fa-chevron-circle-".concat(s?"down":"right")}),I18n.t("tags")," ",d),i.createElement(gt.A,{expanded:s,onToggle:function(){}},i.createElement(gt.A.Collapse,null,l,o().sortBy(u,(function(e){return o().lowerCase(e.tag||e)})).map((function(t){var n,r=t.tag||t;return f&&(n=t.api_status?i.createElement("div",{className:"loading_spinner"}):i.createElement(Ta.A,{glyph:"remove-circle",onClick:function(){e.removeTag(r)}})),i.createElement("div",{className:"tag ".concat(t.api_status?"loading":""),key:r},i.createElement("a",{href:"/observations?q=".concat(t,"&search_on=tags")},r),n)})))))}}])}(i.Component);Ba.propTypes={config:m().object,observation:m().object,addTag:m().func,removeTag:m().func,updateSession:m().func};var Ha=Ba,Va=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{addTag:function(t){e((0,ze.Ap)(t))},removeTag:function(t){e((0,ze.b4)(t))},updateSession:function(t){e((0,yt.qO)(t))}}}))(Ha),qa=n(34330),Ga=(0,c.Ng)((function(e){return Ka(Ka({},e.moderatorActions),{},{config:e.config})}),(function(e){return{submit:function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e((0,ze.c)(t,"processing")),e((0,dt.CP)(t,n,r,o)).then((function(){return e((0,ze.r8)())})).catch((function(t){return e((0,ze.r8)({error:t}))})),e((0,dt.m6)())},hide:function(){return e((0,dt.m6)())},revealHiddenContent:function(t){return e((0,dt.lK)(t))}}}))(qa.A),Ya=Ga,Xa=n(98678),Za=n(15292),Qa=(0,c.Ng)((function(e){var t,n=e.observation;if(n&&n.photos&&n.photos.length>0){var r="medium";$(".ObservationModal .image-gallery").width()>600&&(r="large"),t=n.photos.map((function(e){return{original:e.photoUrl(r),zoom:e.photoUrl("original"),thumbnail:e.photoUrl("square"),originalDimensions:e.original_dimensions}}))}var o={},i=Object.keys(e.brightnesses),a=n&&n.id;return i.forEach((function(t){t.includes(a)&&(o[t]=e.brightnesses[t])})),Object.assign({},{images:t,brightnesses:o,currentUser:e.config.currentUser,tab:"suggestions",tabs:["suggestions"],tabTitles:{suggestions:I18n.t("compare")},hidePrevNext:!0,hideTools:!0,updateSuggestionSession:!1},e.currentObservation)}),(function(e){return{onClose:function(){e((0,ut.iM)())},setImagesCurrentIndex:function(t){e((0,ut.PF)({imagesCurrentIndex:t}))},chooseSuggestedTaxon:function(t,n){e((0,ze.V6)(Object.assign({},t,{isVisionResult:n.vision}))),e((0,ut.iM)())},updateCurrentUser:function(t){return e((0,ft.W3)(t))},increaseBrightness:function(){return e((0,Za.s2)())},decreaseBrightness:function(){return e((0,Za.s)())},resetBrightness:function(){return e((0,Za.Rh)())}}}))(Xa.A),Ja=n(38312),es=function(e){var t=e.config,n=e.children;return i.createElement(I.A,{debounce:!1,height:t.currentUser&&t.currentUser.prefers_hide_obs_show_quality_metrics?70:670,verticalOffset:500},n)};es.propTypes={children:m().any,config:m().object};var ts=es;M().updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"%ds",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"1mo",MM:"%dmo",y:"1y",yy:"%dy"}});var ls=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),is(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cs(e,t)}(t,e),function(e,t){return t&&rs(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"linkDateToObservationSearch",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o().isEmpty(e))return null;var r=this.props.observation,a="/observations?user_id=".concat(r.user.login,"&place_id=any&verifiable=any&");if(a+=$.param(o().pickBy(n,(function(e){return!o().isNil(e)}))),null!==(t=I18n.t("momentjs.datetime_with_offset"))&&void 0!==t&&t.match(/ \xb7 LT Z$/)&&e.match(/ \xb7 /)){var s=e.split(" \xb7 ");return i.createElement("span",null,i.createElement("a",{href:a},s[0])," \xb7 ",s[1])}return i.createElement("a",{href:a},e)}},{key:"displayDateObserved",value:function(){var e,t,n,r,o=this.props.observation,a=M()(o.time_observed_at||o.observed_on),s=a.format();o.observed_on&&(e=o.observed_on_details.year,t=o.observed_on_details.month,n=o.observed_on_details.day,o.obscured&&!o.private_geojson?(r=a.format(I18n.t("momentjs.month_year")),s=a.format("YYYY-MM"),n=null):r=o.time_observed_at?(0,U.en)(o.time_observed_at,o.observed_time_zone):a.format("ll"));var c=e&&t&&n?{on:"".concat(e,"-").concat(t,"-").concat(n)}:{year:e,month:t,day:n};return i.createElement("span",{className:"date",title:s},o.observed_on&&o.obscured&&!o.private_geojson&&i.createElement("i",{className:"icon-icn-location-obscured",title:I18n.t("date_obscured_notice")}),this.linkDateToObservationSearch(r,c)||I18n.t("missing_date"))}},{key:"displayDateAdded",value:function(){var e=this.props,t=e.observation,n=e.config,r=M().tz.guess();n&&n.currentUser&&n.currentUser.time_zone&&(r=n.currentUser.time_zone);var o=M()(t.created_at),a=o.format(),s=t.created_at_details.year,c=t.created_at_details.month,l=t.created_at_details.day,u=(0,U.en)(M().tz(t.created_at,t.created_time_zone),r);t.obscured&&!t.private_geojson&&(u=o.format(I18n.t("momentjs.month_year")),a=o.format("YYYY-MM"),l=null);var f=s&&c&&l?{created_on:"".concat(s,"-").concat(c,"-").concat(l)}:{created_year:s,created_month:c,created_day:l};return i.createElement("span",{className:"date",title:a},t.obscured&&!t.private_geojson&&i.createElement("i",{className:"icon-icn-location-obscured",title:I18n.t("date_obscured_notice")}),this.linkDateToObservationSearch(u,f))}},{key:"render",value:function(){var e=this.props,t=e.observation,n=e.config,r=e.deleteObservation,a=e.setLicensingModalState;if(o().isEmpty(t)||o().isEmpty(t.user))return i.createElement("div",{id:"initial-loading",className:"text-center"},i.createElement("div",{className:"loading_spinner"}));var s,c=n&&n.currentUser&&n.currentUser.id===t.user.id,l=t.photos&&0!==t.photos.length||t.sounds&&0!==t.sounds.length?null:"empty",u=t.taxon?"/taxa/".concat(t.taxon.id):null,f=t.description?i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement("h3",null,I18n.t("notes",{defaultValue:I18n.t("activerecord.attributes.observation.description")})),i.createElement(F.A,{text:t.description}))):"",d="research"===t.quality_grade?"research_grade":t.quality_grade;return s="casual"===d?I18n.t("casual_tooltip_html"):"needs_id"===d?I18n.t("needs_id_tooltip_html"):I18n.t("research_grade_tooltip_html"),i.createElement("div",{id:"ObservationShow"},i.createElement(H.A,{item:t,manageFlagsPath:"/observations/".concat(t.id,"/flags"),showBlocks:!0}),i.createElement("div",{className:"upper"},i.createElement(y.A,null,i.createElement(h.A,{className:"title_row"},i.createElement(v.A,{xs:10},i.createElement("div",{className:"ObservationTitle"},i.createElement(R.A,{taxon:t.taxon,url:u,placeholder:t.species_guess,user:n.currentUser}),i.createElement(W,{observation:t}),i.createElement(G,{observation:t}),i.createElement(b.A,{placement:"bottom",trigger:["hover","click"],delayHide:1e3,overlay:i.createElement(g.A,{id:"quality-grade-tooltip"},i.createElement("p",{dangerouslySetInnerHTML:{__html:s}})),container:$("#wrapper.bootstrap").get(0)},i.createElement("span",{className:"quality_grade ".concat(t.quality_grade," ")},I18n.t("".concat(d,"_"),{defaultValue:I18n.t(d)}))))),c?i.createElement(v.A,{xs:2,className:"edit-button"},i.createElement(N,{bsStyle:"primary",className:"edit",href:"/observations/".concat(t.id,"/edit"),title:I18n.t("edit"),id:"edit-dropdown",pullRight:!0,onSelect:function(e){"delete"===e?r():"license"===e&&a({show:!0})}},i.createElement(T.A,{eventKey:"edit",href:"/observations/".concat(t.id,"/edit")},i.createElement("i",{className:"fa fa-pencil"}),I18n.t("edit")),i.createElement(T.A,{eventKey:"duplicate",href:"/observations/new?copy=".concat(t.id)},i.createElement("i",{className:"fa fa-files-o"}),I18n.t("duplicate_verb")),i.createElement(T.A,{eventKey:"license"},i.createElement("i",{className:"fa fa-copyright"}),I18n.t("edit_license")),i.createElement("li",{role:"separator",className:"divider"}),i.createElement(T.A,{eventKey:"delete"},i.createElement("i",{className:"fa fa-trash"}),I18n.t("delete")))):(null==n?void 0:n.currentUserCanInteractWithResource(t))&&i.createElement(tr,null)),i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(y.A,{className:"top_container"},i.createElement(h.A,{className:"top_row"},i.createElement(v.A,{xs:7,className:"photos_column ".concat(l)},i.createElement(Ea,null)),i.createElement(v.A,{xs:5,className:"info_column"},i.createElement("div",{className:"user_info"},i.createElement(xa,null),i.createElement(B.A,{config:n,user:t.user,hideSubtitle:t.obscured&&!t.private_geojson})),i.createElement(h.A,{className:"date_row"},i.createElement(v.A,{xs:6},i.createElement("span",{className:"bold_label"},I18n.t("label_colon",{label:I18n.t("observed")})),this.displayDateObserved(),t.observed_on&&!t.obscured&&i.createElement(L.A,{config:n,user:t.user,date:t.observed_on,uniqueKey:"DateObserved"})),i.createElement(v.A,{xs:6},i.createElement("span",{className:"bold_label"},I18n.t("label_colon",{label:I18n.t("submitted")})),this.displayDateAdded())),i.createElement($r,null),i.createElement(h.A,{className:"faves_row"},i.createElement(v.A,{xs:12},i.createElement(Yn,null)))))))),i.createElement(h.A,null,i.createElement(v.A,{xs:7,className:"middle_left"},f,i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(mt,null)))),i.createElement(v.A,{xs:5,className:"opposite_activity"},i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(bn,null))),i.createElement(h.A,null,i.createElement(I.A,{debounce:!1,offset:100,height:30},i.createElement(v.A,{xs:12},i.createElement(bt,{key:"activity-panel-".concat(t.uuid)})))),i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(Pa,null))),(n.currentUser&&n.currentUser.id===t.user.id||t&&t.tags&&t.tags.length>0)&&i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(Va,null))),i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(Oo,null))),i.createElement(h.A,null,i.createElement(v.A,{xs:12
},i.createElement(fr,null))),i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(Kn,null))))))),i.createElement("div",{className:"data_quality_assessment"},i.createElement(Kt,{innerWrapper:ts})),(!t.obscured||t.private_geojson)&&i.createElement(I.A,{debounce:!1,offset:500},i.createElement("div",{className:"more_from"},i.createElement(y.A,null,i.createElement(h.A,null,i.createElement(v.A,{xs:12},i.createElement(lo,null)))),i.createElement(y.A,null,i.createElement(h.A,null,i.createElement(v.A,{xs:6},i.createElement(Eo,null)),i.createElement(v.A,{xs:6},i.createElement(Na,null)))))),i.createElement(Zn,null),i.createElement(Nn.A,null),i.createElement(Dn,null),i.createElement(Pn,null),i.createElement(Or,null),i.createElement(ao,null),i.createElement(Aa,null),i.createElement(Qa,null),i.createElement(Ya,null),i.createElement(Ja.A,{config:n}))}}])}(i.Component);ls.propTypes={config:m().object,observation:m().object,deleteObservation:m().func,setLicensingModalState:m().func};var us=ls,fs=(0,c.Ng)((function(e){return{observation:e.observation,config:e.config}}),(function(e){return{leaveTestGroup:function(t){e((0,yt.Rh)(t))},deleteObservation:function(){e((0,ze.ic)())},setLicensingModalState:function(t){e(wr(t))}}}))(us),ds=n(99520),ps=n(78765),ms=n(38323),hs=n(95089),vs=n(6738),ys=function(e,t){(0,vs.bind)(e,(function(){return t(),!1}))},bs=function(){var e=$(".comment_id_panel .active input:visible").filter(":text").first();(e=e.length>0?e:$(".comment_id_panel .active textarea:visible").first()).focus()},gs=n(37797),_s=n(24056),ks=I18n.t("momentjs")?I18n.t("momentjs").shortRelativeTime:null,Ss=Os(Os({},I18n.t("momentjs",{locale:"en"}).shortRelativeTime),ks);u().locale(I18n.locale),u().updateLocale(u().locale(),{relativeTime:Ss}),_s.A.injectReducers({commentIDPanel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{activeTab:"comment"},t=arguments.length>1?arguments[1]:void 0;return t.type===We?Object.assign({},e,{activeTab:t.activeTab}):e},communityIDModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===hn?Object.assign({},t.newState):e},confirmModal:ds.Ay,controlledTerms:vt.Ay,flaggingModal:at.A,identifications:ps.Ay,licensingModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===Er?Object.assign({},t.newState):e},mediaViewer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===oo?Object.assign({},e,t.newState):e},observation:ze.Ay,observationPlaces:ms.Ay,otherObservations:_o.Ay,projectFieldsModal:Sa.A,qualityMetrics:hs.Ay,textEditor:$e.Ay,subscriptions:Jn.Ay,relationships:er.Ay,disagreementAlert:In.Ay,moderatorActions:dt.Ay,currentObservation:gs.A,suggestions:lt.Ay,brightnesses:Za.Ay}),o().isEmpty(CURRENT_USER)||_s.A.dispatch((0,ft.lt)(CURRENT_USER)),o().isEmpty(PREFERRED_PLACE)||_s.A.dispatch((0,ft.Nk)({preferredPlace:PREFERRED_PLACE}));var As=new URLSearchParams(window.location.search),js=document.querySelector('meta[name="config:inaturalist_api_url"]'),Cs=js&&js.getAttribute("content");Cs&&(_s.A.dispatch((0,ft.Nk)({testingApiV2:!0})),d().setConfig({apiURL:Cs.replace("/v1","/v2"),writeApiURL:Cs.replace("/v1","/v2")}));var Ps,Ns=As.get("test_feature");Ns&&_s.A.dispatch((0,ft.Nk)({testFeature:Ns})),_s.A.dispatch((0,ze.B1)(INITIAL_OBSERVATION_UUID,{fetchAll:!0,replaceState:!0,initialPhotoID:As.get("photo_id"),callback:function(){(0,a.render)(i.createElement(c.Kq,{store:_s.A},i.createElement(fs,null)),document.getElementById("app"))}})),Ps=_s.A.dispatch,ys("i",(function(){Ps(io({show:!1})),Ps(Ke("add_id")),setTimeout(bs,300)})),ys("c",(function(){Ps(io({show:!1})),Ps(Ke("comment")),setTimeout(bs,300)})),ys("z",(function(){Ps((function(e,t){e(io({show:!t().mediaViewer.show}))}))})),window.onpopstate=function(e){e.state&&e.state.observation&&_s.A.dispatch((0,ze.IJ)(e.state.observation,{skipSetState:!0}))}},45206:function(e,t,n){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function p(e,t,n){return t=h(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(61549),s=n(92276),c=n.n(s),l=n(34387),y=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=p(this,t,[e,n])).onClick=r.onClick.bind(r),r.onChange=r.onChange.bind(r),r.close=r.close.bind(r),r.pickerState=r.pickerState.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){c().locale(I18n.locale),this.close()}},{key:"shouldComponentUpdate",value:function(e){return this.props.reactKey!==e.reactKey}},{key:"onClick",value:function(){this.refs.datetime&&this.refs.datetime.onClick()}},{key:"onChange",value:function(e,t){var n=this.props.inputFormat,r=t,o=parseInt(e,10),i=(0,l.p9)();if(e&&o){var a=new Date(o);a&&(r=c()(a).format(n||i))}this.props.onChange(r)}},{key:"close",value:function(){this.refs.datetime&&this.refs.datetime.closePicker()}},{key:"pickerState",value:function(){if(this.refs.datetime)return this.refs.datetime.state}},{key:"render",value:function(){var e=this.props,t=e.allowFutureDates,n=e.dateTime,o=e.defaultText,i=e.inputFormat,s=e.inputProps,u=e.minDate,f=e.mode,d=e.size;return r.createElement(a.A,{ref:"datetime",key:"datetime",className:"datetime",mode:f,size:d,minDate:u||c()().subtract(130,"years"),maxDate:t?null:c()(),inputProps:s,defaultText:o||"",dateTime:n,inputFormat:i||(0,l.p9)(),onChange:this.onChange})}}],o&&f(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);y.propTypes={inputProps:i().object,onChange:i().func,reactKey:i().string,defaultText:i().string,mode:i().string,inputFormat:i().string,size:i().string,allowFutureDates:i().bool,dateTime:i().oneOfType([i().string,i().number,i().object]),minDate:i().object},t.A=y},36856:function(e,t,n){"use strict";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function O(e,t,n){return t=k(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],k(e).constructor):t.apply(e,n))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var r,o=n(16154),i=n.n(o),a=n(24577),s=n(995),c=n.n(s),l=n(23539),u=n.n(l),f=n(91771),d=n.n(f),p=n(64165),m=n.n(p),h=n(2480),v=n(42395),A={ancestor_ids:!0,default_photo:{url:!0},representative_photo:{url:!0},iconic_taxon_id:!0,iconic_taxon_name:!0,is_active:!0,matched_term:!0,name:!0,preferred_common_name:!0,rank:!0,rank_level:!0},j=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=O(this,t,[e,n])).source=r.source.bind(r),r.select=r.select.bind(r),r.fetchTaxon=r.fetchTaxon.bind(r),r.idElement=r.idElement.bind(r),r.inputElement=r.inputElement.bind(r),r.inputValue=r.inputValue.bind(r),r.template=r.template.bind(r),r.resultTemplate=t.resultTemplate.bind(r),r.placeholderTemplate=t.placeholderTemplate.bind(r),r.searchExternalTemplate=t.searchExternalTemplate.bind(r),r.searchExternalElement=r.searchExternalElement.bind(r),r.thumbnailElement=r.thumbnailElement.bind(r),r.autocomplete=r.autocomplete.bind(r),r.updateWithSelection=r.updateWithSelection.bind(r);var o=(e.config||{}).currentUser;return r.state={viewNotNearby:o&&o.prefers_not_nearby_suggestions,numNearby:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.afterUnselect,r=t.initialSelection,o=this,s=function(){return o.state},c=g(g({},this.props),{},{extraClass:"taxon",idEl:this.idElement(),source:this.source,select:this.select,template:this.template,appendTo:this.idElement().parent(),minLength:0,renderMenu:function(e,t){var n=this;if(e.removeClass("ui-corner-all").removeClass("ui-menu"),e.addClass("ac-menu"),1!==t.length||"loadingSuggestions"!==t[0].label)if(1!==t.length||"noResults"!==t[0].label){var r=t[0]&&t[0].isVisionResult,a=!1,c=!1,l=!1;$.each(t,(function(t,o){if(r)if(o.isExperimental&&!l&&(e.append("<li class='non-option warning'>Experimental: ".concat(o.isExperimental,"</li>")),l=!0),o.isCommonAncestor){var s=i().snakeCase(o.rank),u=I18n.t("were_pretty_sure_this_is_in_the_".concat(s),{locale:"en"}),f=I18n.t("were_pretty_sure_this_is_in_the_rank",{rank:I18n.t("ranks_lowercase_".concat(s),{defaultValue:o.rank}),gender:s,iconic_taxon:o.iconic_taxon_name}),d=I18n.t("were_pretty_sure_this_is_in_the_".concat(s),{defaultValue:f,iconic_taxon:o.iconic_taxon_name});"en"!==I18n.locale&&d===u&&(d=f),e.append("<li class='category header-category non-option'>".concat(d,"</li>")),a=!0}else if(!c){var p=I18n.t("here_are_our_top_species_suggestions");p=a?I18n.t("here_are_our_top_suggestions"):I18n.t("not_confident_top_suggestions"),e.append("<li class='category header-category non-option'>".concat(p,"</li>")),c=!0}n._renderItemData(e,o)}));var u=o.inputElement().val(),f=u&&u.length>=0,d=s(),p=d.numNearby,m=d.numSuggested,h=d.viewNotNearby;if(!f&&p>0&&p!==m){var y=$("<button />").attr("type","button").append(h?I18n.t("only_view_nearby_suggestions"):I18n.t("include_suggestions_not_expected_nearby")).click((function(e){e.preventDefault();var t,n=s().viewNotNearby;return $(e.target).text(n?I18n.t("include_suggestions_not_expected_nearby"):I18n.t("only_view_nearby_suggestions")),t={viewNotNearby:!n},o.setState(t),(0,v.qO)({prefers_not_nearby_suggestions:!n}),o.inputElement().autocomplete("search"),!1}));e.append($("<li />").addClass("non-option nearby-toggle").append(y))}}else e.append($("<li />").addClass("category non-option").text(I18n.t("not_confident")));else e.append('<li class="category non-option">'.concat(I18n.t("loading_suggestions"),"</li>"))},menuClass:"taxon-autocomplete",position:{collision:"flip none"}});this.inputElement().genericAutocomplete(c),this.fetchTaxon(),this.inputElement().bind("assignSelection",(function(t,n,r){n.title||(n.title=e.resultTitle(n),n.textTitle=i().first(n.title.split(" \xb7 "))),e.updateWithSelection(n,r)})),this.inputElement().unbind("resetSelection"),this.inputElement().bind("resetSelection",(function(){e.idElement().val()&&(e.thumbnailElement().css({"background-image":"none"}),e.thumbnailElement().html(d().renderToString(a.createElement(h.A,{glyph:"search"}))),e.idElement().val(null),n&&n()),e._mounted&&(e.inputElement().selection=null)})),r&&this.inputElement().trigger("assignSelection",[r,{initial:!0}]),this._mounted=!0}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.initialTaxonID,r=t.visionParams;n&&n!==e.initialTaxonID&&this.fetchTaxon(),i().isEqual(r,e.visionParams)||(this.cachedVisionResponse=null)}},{key:"componentWillUnmount",value:function(){this.inputElement().unbind(),this._mounted=!1,this.inputElement().autocomplete("destroy")}},{key:"returnVisionResults",value:function(e,t){var n=e.results,r=this.state.viewNotNearby,o=i().filter(e.results,(function(e){return e.frequency_score&&e.frequency_score>0}));this.setState({numSuggested:e.results.length,numNearby:o.length}),o.length>0&&!r&&(n=o);var a=i().map(n.slice(0,8),(function(t){var n=new iNatModels.Taxon(t.taxon);return n.isVisionResult=!0,n.visionScore=t.vision_score,n.frequencyScore=t.frequency_score,n.isExperimental=e.experimental,n}));if(e.common_ancestor){var s=new iNatModels.Taxon(e.common_ancestor.taxon);s.isVisionResult=!0,s.isCommonAncestor=!0,s.isExperimental=e.experimental,a.unshift(s)}0===a.length?t(["noResults"]):t(a)}},{key:"inputElement",value:function(){var e=u().findDOMNode(this);return $("input[name='taxon_name']",e)}},{key:"inputValue",value:function(){return this.inputElement().val()}},{key:"idElement",value:function(){var e=u().findDOMNode(this);return $("input[name='taxon_id']",e)}},{key:"searchExternalElement",value:function(){return $(".ac[data-type='search_external']",this.autocomplete().menu.element)}},{key:"thumbnailElement",value:function(){var e=u().findDOMNode(this);return $(".ac-select-thumb",e)}},{key:"autocomplete",value:function(){return this.inputElement().data("uiAutocomplete")}},{key:"fetchTaxon",value:function(){var e=this,t=this.props.initialTaxonID;t&&m().taxa.fetch(t).then((function(t){t.results.length>0&&e.updateTaxon({taxon:t.results[0]})}))}},{key:"updateTaxon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.taxon&&this.inputElement().trigger("assignSelection",e.taxon)}},{key:"updateWithSelection",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.props,o=r.onSelectReturn,a=r.afterSelect,s=r.noThumbnail;if(o)o({item:e});else{if(e.id){var c=e.title||e.name;this.inputElement().val(i().first(c.split(" \xb7 ")))}if(this.idElement().val(e.id),!s){var l=e.representative_photo||e.default_photo;l?(this.thumbnailElement().css({"background-image":"url('".concat(l.square_url,"')"),"background-repeat":"no-repeat","background-size":"cover","background-position":"center"}),this.thumbnailElement().html("")):(this.thumbnailElement().css({"background-image":"none"}),this.thumbnailElement().html(d().renderToString(t.itemIcon(e))))}this.inputElement().selection=e,a&&!n.initial&&a({item:e})}}},{key:"visionAutocompleteSource",value:function(e){var t=this,n=this.props,r=n.config,o=n.visionParams;if(this.cachedVisionResponse)this.returnVisionResults(this.cachedVisionResponse,e);else if(o){var i=r.testingApiV2?{fields:{frequency_score:!0,vision_score:!0,taxon:A}}:{};if(i.include_representative_photos=!0,r.currentUser&&r.currentUser.roles&&r.currentUser.roles.indexOf("admin")>=0&&r.testFeature&&(i.test_feature=r.testFeature),o.image)m().computervision.score_image(Object.assign(i,o)).then((function(n){t.cachedVisionResponse=n,t.returnVisionResults(n,e)})).catch((function(e){console.log(["Error fetching vision response for photo",e])})),e(["loadingSuggestions"]);else if(o.observationID||o.observationUUID){var a=o.observationID,s=o.observationUUID;r.testingApiV2&&s&&(a=s);var c=Object.assign(i,{id:a});m().computervision.score_observation(c).then((function(n){t.cachedVisionResponse=n,t.returnVisionResults(n,e)})).catch((function(e){console.log(["Error fetching vision response for observation",e])})),e(["loadingSuggestions"])}}}},{key:"taxonAutocompleteSource",value:function(e,t){var n=this,r=this.props,o=r.perPage,a=r.searchExternal,s=r.showPlaceholder,c=r.notIDs,l=r.observedByUserID,u=r.config,f=a&&("undefined"==typeof CONFIG||!CONFIG.content_freeze_enabled),d={q:e.term,per_page:o||10,locale:I18n.locale,preferred_place_id:PREFERRED_PLACE?PREFERRED_PLACE.id:null};c&&(d.not_id=c.slice(0,750).join(",")),l&&(d.observed_by_user_id=l),u&&u.testingApiV2&&(d.fields=A),m().taxa.autocomplete(d).then((function(e){var r=e.results||[];!1!==f&&r.push({type:"search_external",title:I18n.t("search_external_name_providers")}),s&&!n.idElement().val()&&n.inputValue()&&r.unshift({id:0,type:"placeholder",title:n.inputValue()}),t(i().map(r,(function(e){return new iNatModels.Taxon(e)})))}))}},{key:"source",value:function(e,t){e.term?e.term&&this.taxonAutocompleteSource(e,t):this.visionAutocompleteSource(t)}},{key:"select",value:function(e,t){var n=this;if(e.toElement&&$(e.toElement).hasClass("ac-view"))return!1;var o=this.props,a=o.perPage,s=o.showPlaceholder;if("search_external"===t.item.type&&this.inputValue()){var c=Math.random();r=c;var l=this.searchExternalElement();return l.find(".title").removeClass("linky"),l.find(".title").text(I18n.t("loading")),l.closest("li").removeClass("active"),l.attr("data-type","message"),$.ajax({url:"/taxa/search.json?per_page=".concat(a,"&include_external=1&partial=elastic&q=").concat(this.inputValue()),dataType:"json",success:function(e){if(r===c){r=!1,n.autocomplete().menu.element.empty();var t=e;0===(t=i().map(t,(function(e){var t=new iNatModels.Taxon(e);return t.preferred_common_name=t.preferredCommonName(iNaturalist.localeParams()),t}))).length&&t.push({type:"message",title:I18n.t("no_results_found")}),s&&n.inputValue()&&t.unshift({id:0,type:"placeholder",title:n.inputValue()}),n.autocomplete()._suggest(t),n.inputElement().focus()}},error:function(){r=!1}}),this.autocomplete().keepOpen=!0,setTimeout((function(){n.autocomplete().keepOpen=!1}),10),e.preventDefault(),!1}return this.updateWithSelection(t.item),!1}},{key:"resultTitle",value:function(e){var t=this.props.config,n=e.name;return t&&t.currentUser&&t.currentUser.prefers_scientific_name_first||(n=i().isEmpty(e.preferred_common_names)?iNatModels.Taxon.titleCaseName(e.preferred_common_name)||e.name:i().map(e.preferred_common_names,(function(e){return iNatModels.Taxon.titleCaseName(e.name)})).join(" \xb7 ")),n}},{key:"template",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.props.config,s=i().clone(e),c=o&&o.currentUser&&o.currentUser.prefers_scientific_name_first;if(s.title||(s.title=this.resultTitle(s),e.title=s.title,c&&s.rank_level<=20&&(s.title=a.createElement("i",null,s.title))),s.title){if(c)if(i().isEmpty(s.preferred_common_names))s.subtitle=iNatModels.Taxon.titleCaseName(s.preferred_common_name);else{var l=i().map(s.preferred_common_names,(function(e){return iNatModels.Taxon.titleCaseName(e.name)}));s.subtitle=l.join(" \xb7 ")}s.subtitle||s.name===s.title||(s.rank_level<=20?s.subtitle=a.createElement("i",null,s.name):s.subtitle=s.name)}var u=t.differentMatchedTerm(e,n);if(u&&(s.title=a.createElement("span",null,s.title," ",u)),s.rank&&(s.rank_level>10||!s.subtitle)){var f=I18n.t("ranks.".concat(s.rank),{defaultValue:s.rank});s.subtitle=a.createElement("span",null,f," ",s.subtitle)}return t.resultTemplate(s,n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.small,r=t.value,o=t.onChange,i=t.placeholder,s=t.onKeyDown,c=t.inputGroupClass,l=n?"input-sm":"",u=["ac-chooser","input-group"];return n&&u.push("small"),c&&u.push(c),a.createElement("div",{className:"form-group TaxonAutocomplete"},a.createElement("input",{type:"hidden",name:"taxon_id"}),a.createElement("div",{className:u.join(" ")},a.createElement("div",{className:"ac-select-thumb input-group-addon ".concat(l)},a.createElement(h.A,{glyph:"search"})),a.createElement("input",{type:"text",name:"taxon_name",value:r,className:"form-control ".concat(l),onChange:o,placeholder:i||I18n.t("species_name_cap"),autoComplete:"off",onKeyDown:s}),a.createElement(h.A,{className:"searchclear",glyph:"remove-circle",onClick:function(){return e.inputElement().trigger("resetAll")}})))}}],s=[{key:"differentMatchedTerm",value:function(e,t){return!!e.matched_term&&!i().includes(e.title,t)&&!i().includes(e.subtitle,t)&&!i().includes(e.title,e.matched_term)&&!i().includes(e.subtitle,e.matched_term)&&" (".concat(e.matched_term,")")}},{key:"itemPhoto",value:function(e){var t=e.representative_photo||e.default_photo;return t?a.createElement("img",{alt:"thumbnail",src:t.url}):null}},{key:"itemIcon",value:function(e){var t=i().isFunction(e.iconicTaxonName)?e.iconicTaxonName().toLowerCase():"unknown";return a.createElement("i",{className:"icon icon-iconic-".concat(t)})}},{key:"placeholderTemplate",value:function(e){return d().renderToString(a.createElement("div",{className:"ac ac-message","data-type":"placeholder"},a.createElement("div",{className:"ac-thumb"},a.createElement(h.A,{glyph:"search"})),a.createElement("div",{className:"ac-label"},a.createElement("span",{className:"title",dangerouslySetInnerHTML:{__html:I18n.t("use_name_as_a_placeholder",{name:e})}}),a.createElement("span",{className:"subtitle"}))))}},{key:"searchExternalTemplate",value:function(){return d().renderToString(a.createElement("div",{className:"ac ac-message","data-type":"search_external"},a.createElement("div",{className:"ac-thumb"},a.createElement(h.A,{glyph:"search"})),a.createElement("div",{className:"ac-label"},a.createElement("span",{className:"title linky"},I18n.t("search_external_name_providers")))))}},{key:"resultTemplate",value:function(e){var n;if("placeholder"===e.type)return t.placeholderTemplate(e.title);if("search_external"===e.type)return t.searchExternalTemplate();var r=t.itemPhoto(e)||t.itemIcon(e),o="/taxa/".concat(e.id);e.representative_photo&&e.representative_photo.id!==(null===(n=e.default_photo)||void 0===n?void 0:n.id)&&(o+="?photo_id=".concat(e.representative_photo.id));var i,s="ac";if(e.isVisionResult){s+=" vision";var c=[];e.visionScore&&c.push(I18n.t("visually_similar")),e.frequencyScore&&c.push(I18n.t("expected_nearby")),i=a.createElement("span",{className:"subtitle vision"},c.join(" / "))}return d().renderToString(a.createElement("div",{className:s,"data-taxon-id":e.id},a.createElement("div",{className:"ac-thumb has-photo"},r),a.createElement("div",{className:"ac-label"},a.createElement("div",null,a.createElement("span",{className:"title"},e.title),a.createElement("span",{className:"subtitle"},e.subtitle),i)),"message"!==e.type&&a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o,className:"ac-view"},I18n.t("view"))))}}],o&&E(n.prototype,o),s&&E(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,s}(a.Component);j.propTypes={onChange:c().func,small:c().bool,placeholder:c().string,resetOnChange:c().bool,searchExternal:c().bool,showPlaceholder:c().bool,allowPlaceholders:c().bool,noThumbnail:c().bool,afterSelect:c().func,afterUnselect:c().func,onSelectReturn:c().func,value:c().string,visionParams:c().object,initialSelection:c().object,initialTaxonID:c().number,notIDs:c().array,observedByUserID:c().number,perPage:c().number,config:c().object,onKeyDown:c().func,inputGroupClass:c().string},t.A=j},34387:function(e,t,n){"use strict";function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,f(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}var e=v(),t=e.m(u),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor,o={throw:1,return:2,break:3,continue:3};return(u=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new b(e,t)},AsyncIterator:h,async:function(e,t,n,o,a){return(r(t)?m:p)(i(e),t,n,o,a)},keys:d,values:f}})()}function f(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(l(e)+" is not iterable")}function d(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function p(e,t,n,r,o){var i=m(e,t,n,r,o);return i.next().then((function(e){return e.done?e.value:i.next()}))}function m(e,t,n,r,o){return new h(v().w(e,t,n,r),o||Promise)}function h(e,t){function n(r,o,i,a){try{var s=e[r](o),c=s.value;return c instanceof b?t.resolve(c.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(c).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var r;this.next||(y(h.prototype),y(h.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),y(this,"_invoke",(function(e,o,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}),!0)}function v(){function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return y(l,"_invoke",function(n,r,o){function p(n,r){for(s=n,c=r,t=0;!f&&l&&!o&&t<u.length;t++){var o,i=u[t],p=d.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}var i,s,c,l=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,d.n=n,a}};return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,c=m;(t=s<2?e:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,c)):d.n=c:d.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}function s(){}function c(){}function l(){}function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag",a={};t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(y(t={},r,(function(){return this})),t),f=l.prototype=s.prototype=Object.create(u);return c.prototype=l,y(f,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,o,"GeneratorFunction"),y(f),y(f,o,"Generator"),y(f,r,(function(){return this})),y(f,"toString",(function(){return"[object Generator]"})),(v=function(){return{w:i,m:d}})()}function y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}y=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){y(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},y(e,t,n,r)}function b(e,t){this.v=e,this.k=t}function g(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}function A(){return c()().format(I18n.t("momentjs.time_hours")).match(/[AP]M/i)?k:S}n.d(t,{Bo:function(){return w},Xt:function(){return x},p9:function(){return A},w3:function(){return O}});var r=n(16154),o=n.n(r),i=n(80568),a=n.n(i),s=n(92276),c=n.n(s),w=["image/jpeg","image/png","image/gif","image/heic","image/heif","audio/x-wav","audio/wav","audio/wave","audio/mp3","audio/mpeg","audio/x-mp3","audio/mp4","audio/x-m4a","audio/amr","video/mp4"].join(", "),O=20971520,x="YYYY/MM/DD h:mm A z",k="YYYY/MM/DD h:mm A",S="YYYY/MM/DD HH:mm",j=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"isOnline",value:(n=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a()("/ping",{method:"head",mode:"no-cors",cache:"no-store"});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){function a(e){g(i,r,o,a,s,"next",e)}function s(e){g(i,r,o,a,s,"throw",e)}var i=n.apply(e,t);a(void 0)}))},function(){return r.apply(this,arguments)})},{key:"reverseGeocode",value:function(e,t){if("undefined"==typeof google)return new Promise;var n=new google.maps.Geocoder;return new Promise((function(r){n.geocode({location:{lat:e,lng:t}},(function(e,t){var n;if(t===google.maps.GeocoderStatus.OK&&e[0]){e.reverse();var i=o().find(e,(function(e){return o().includes(e.types,"neighborhood")})),a=o().find(e,(function(e){return o().includes(e.types,"locality")})),s=o().find(e,(function(e){return o().includes(e.types,"sublocality")})),c=o().find(e,(function(e){return o().includes(e.types,"administrative_area_level_2")})),l=o().find(e,(function(e){return o().includes(e.types,"administrative_area_level_1")}));i?n=i.formatted_address:s?n=s.formatted_address:a?n=a.formatted_address:c?n=c.formatted_address:l&&(n=l.formatted_address)}r(n)}))}))}},{key:"gpsCoordConvert",value:function(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}},{key:"countPending",value:function(e){return o().size(o().pickBy(e,(function(e){return"pending"===e.uploadState||"uploading"===e.uploadState})))}},{key:"dateInvalid",
value:function(e){var t=!1;if(e){var n=c()(),r=c()(e.split(" ")[0],"YYYY/MM/DD",!0);r.isValid()?r.isAfter(n)&&!r.isSame(n,"day")&&(t=!0):t=!0}return t}},{key:"errorJSON",value:function(e){try{return JSON.parse(e)}catch(e){return null}}}],t&&_(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();t.Ay=j},62086:function(e,t,n){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function p(e,t,n){return t=h(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(59659),l=n(47452),y=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=p(this,t)).cancel=e.cancel.bind(e),e.close=e.close.bind(e),e.confirm=e.confirm.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,r=[{key:"close",value:function(){var e=this.props,t=e.updateConfirmModalState;e.preventClose||t({show:!1})}},{key:"confirm",value:function(){var e=this.props.onConfirm;if(o().isFunction(e)){var t={};o().each($(".ConfirmModal input"),(function(e){var n=$(e);n.is("[type=checkbox]")?t[n.attr("name")]=n.is(":checked"):t[n.attr("name")]=n.val()})),e(t)}this.close()}},{key:"cancel",value:function(){var e=this.props.onCancel;o().isFunction(e)&&e(),this.close()}},{key:"render",value:function(){var e,t,n,r=this.props,a=r.cancelText,s=r.confirmClass,u=r.confirmText,f=r.errors,d=r.hideCancel,p=r.hideFooter,m=r.message,h=r.show,v=r.type;if(d||(e=i.createElement(c.A,{bsStyle:"default",onClick:this.cancel},a||I18n.t("cancel"))),"error"===v&&(f&&(n=i.createElement("ul",null,o().map(f,(function(e,t){return i.createElement("li",{key:"error-".concat(t)},e)})))),t=i.createElement("span",null,m,n)),"EmailConfirmation"===v){var y=m;t=i.createElement("div",null,i.createElement("p",null,I18n.t("views.email_confirmation.please_confirm_to_interact_and_access")),i.createElement("p",null,I18n.t("views.email_confirmation.here_is_the_email_colon")),i.createElement("pre",{className:"text-center text-large"},y),i.createElement("p",null,I18n.t("views.email_confirmation.if_you_do_not_receive_the_email_here_are_tips_colon")),i.createElement("ul",null,i.createElement("li",null,i.createElement("p",null,I18n.t("views.email_confirmation.tips_check_your_spam_folder"))),i.createElement("li",null,i.createElement("p",null,I18n.t("views.email_confirmation.tips_check_email_filters")))),i.createElement("p",{dangerouslySetInnerHTML:{__html:I18n.t("views.email_confirmation.if_you_are_still_not_receiving_email_contact_us_html")}}))}var b=t||m;return i.createElement(l.A,{show:h,className:"ConfirmModal confirm ".concat(v),backdropClassName:"bootstrap-modal",onHide:this.cancel},i.createElement(l.A.Body,null,o().isObject(b)?i.createElement("div",{className:"text"},b):i.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:b}})),!p&&i.createElement(l.A.Footer,null,i.createElement("div",{className:"buttons"},e,i.createElement(c.A,{bsStyle:s||"primary",onClick:this.confirm},u||I18n.t("confirm")))))}}],r&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.Component);y.propTypes={show:s().bool,confirmClass:s().string,message:s().any,errors:s().array,type:s().string,onCancel:s().func,onConfirm:s().func,cancelText:s().string,confirmText:s().string,updateConfirmModalState:s().func,hideCancel:s().bool,hideFooter:s().bool,preventClose:s().bool},t.A=y},3279:function(e,t,n){"use strict";function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function h(e,t,n){return t=y(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(23539),s=n.n(a),c=n(32120),l=n.n(c),u=n(16154),f=n.n(u),g=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=h(this,t)).state={loaded:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){this.mounted=!0,this.loadOrDelayImages()}},{key:"componentWillReceiveProps",value:function(e){this.props.src!==e.src&&(this.setState({loaded:!1}),this.loadOrDelayImages(e,{force:!0}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"loadOrDelayImages",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s().findDOMNode(this),i=e||this.props,a=this;if(i.lazyLoad){var c=new(l()),u="#".concat(t.idForUrl(i.src));c.on("enter",u,(function(){!r.force&&a.state.loaded||n.loadImages(i,o,r),c.off("enter",u)}))}else this.loadImages(i,o,r)}},{key:"loadImages",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e||this.props;if(!this.state.loaded||r.force)if(o.low){t.style.backgroundImage="url(".concat(o.low,")");var i=new Image;i.src=o.src,i.onload=function(){n.mounted&&(t.classList.add("loaded"),n.setState({loaded:!0}),t.style.backgroundImage='url("'.concat(i.src,'")'))}}else this.mounted&&(t.classList.add("loaded"),this.setState({loaded:!0}),t.style.backgroundImage='url("'.concat(o.src,'")'))}},{key:"render",value:function(){var e=this.props,n=e.low,o=e.src,i=e.className,a=e.height,s=e.backgroundSize,c=e.backgroundPosition,l=n||o;return r.createElement("div",{id:t.idForUrl(o),className:"CoverImage low ".concat(i),style:{width:"100%",minHeight:a,backgroundSize:s,backgroundPosition:c,backgroundRepeat:"no-repeat",backgroundImage:"url('".concat(l,"')")}})}}],i=[{key:"idForUrl",value:function(e){return"cover-image-".concat(f().kebabCase(e))}}],o&&p(n.prototype,o),i&&p(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(r.Component);g.propTypes={src:i().string.isRequired,low:i().string,height:i().number,className:i().string,lazyLoad:i().bool,backgroundSize:i().string,backgroundPosition:i().string},g.defaultProps={backgroundSize:"cover",backgroundPosition:"center"},t.A=g},22213:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}function l(e,t,n){return t=f(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var r=n(24577),o=n(995),i=n.n(o),p=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,t,[e])).state={error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,i=[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}],(o=[{key:"componentDidCatch",value:function(e){iNaturalist.logError(e)}},{key:"render",value:function(){var e=this.state.error,t=this.props.renderError;return e?"function"==typeof t?t(e):r.createElement("div",{className:"nocontent alert alert-danger"},I18n.t("doh_something_went_wrong_error",{error:e})):this.props.children}}])&&s(n.prototype,o),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(r.Component);p.propTypes={renderError:i().func},t.A=p},5110:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}function a(e,t,n){return t=c(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(t,e),n=t,(r=[{key:"handleKeyboardInput",value:function(e){var t=$("html[dir='rtl']").length>0;return 37===e.keyCode?(t?this.gotoNext(e):this.gotoPrev(e),!0):39===e.keyCode?(t?this.gotoPrev(e):this.gotoNext(e),!0):27===e.keyCode&&(this.props.onClose(),!0)}}])&&o(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(n(82905).A);t.A=u},16447:function(e,t,n){"use strict";var r=n(92276),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(29691),l=n(16414),u=function(e){var t=e.config,n=e.date,r=(e.text,e.uniqueKey),a=e.user,s=o()(a.created_at),u=n?o()(n):o()();if(s.month()!==u.month()||s.date()!==u.date()||s.year()===u.year())return null;var f=t&&t.currentUser?t.currentUser:null;if(!(f&&f.roles&&f.roles.indexOf("admin")>=0))return null;var d=n?"\n      ".concat(a.name||a.login," observed this on their iNativersary, exactly\n      ").concat(u.year()-s.year()," years after they joined iNat!\n    "):"\n      It's ".concat(a.name||a.login,"'s iNativersary!\n      As of today they've been on iNat for ").concat(u.year()-s.year()," years!\n    ");return i.createElement(c.A,{trigger:"click",rootClose:!0,placement:"bottom",containerPadding:20,overlay:i.createElement(l.A,{className:"InativersaryOverlay",id:"popover-inativersary-".concat(r)},i.createElement("div",{className:"contents"},i.createElement("img",{src:"/assets/walrus.svg",alt:"iNativersary",className:"inativersary"}),i.createElement("div",null,d,"\xa0",i.createElement("span",null,"Why is there a walrus? Reasons."))))},i.createElement("button",{type:"button",className:"btn btn-nostyle btn-inativersary","aria-label":"iNativersary"},i.createElement("i",{className:"fa fa-birthday-cake"})))};u.propTypes={config:s().object,date:s().string,text:s().string,uniqueKey:s().string,user:s().object},t.A=u},34330:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(47452),s=n(64165),c=n(41361),l=n(72081),u=function(e){var t,n=e.visible,o=e.hide,i=e.item,u=e.action,f=e.submit,d=e.revealHiddenContent,p=e.config;if(!i)return null;var m,h,v=(null===(t=p.currentUser)||void 0===t||null===(t=t.roles)||void 0===t?void 0:t.indexOf("admin"))>=0,y=I18n.t("hide_content"),b=I18n.t("please_explain_why_you_want_to_hide_this");if("unhide"===u&&(y=I18n.t("unhide_content"),b=I18n.t("please_explain_why_you_want_to_unhide_this")),i instanceof s.Comment||i instanceof s.Identification)m=r.createElement(c.A,{item:i,config:p,hideUserIcon:!0,hideCompare:!0,hideMenu:!0,hideAgree:!0});else if(i.hidden&&(i instanceof s.Photo||i instanceof s.Sound))m=r.createElement("div",{className:"hidden-media"},r.createElement(l.A,{item:i,itemType:"photos",itemIDField:"id"}),r.createElement("button",{type:"button",className:"btn btn-default btn-xs reveal-hidden",onClick:function(){return d(i)}},I18n.t("show_hidden_content")));else if(i instanceof s.Photo)m=r.createElement("div",{className:"image-preview"},r.createElement("img",{src:i.photoUrl("large"),alt:""}));else{if(!(i instanceof s.Sound))throw new Error("Can't moderate content of an unknown type");var g,_="sound-container-local";i.play_local||"SoundcloudSound"!==i.subtype&&i.file_url?g=r.createElement("audio",{controls:!0,preload:"none",controlsList:"nodownload"},r.createElement("source",{src:i.file_url,type:i.file_content_type}),I18n.t("your_browser_does_not_support_the_audio_element")):(_="sound-container-soundcloud",g=r.createElement("iframe",{title:"Soundcloud",scrolling:"no",frameBorder:"no",src:"https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F".concat(i.native_sound_id,"&show_artwork=false&secret_token=").concat(i.secret_token)})),m=r.createElement("div",{className:"sound-container ".concat(_)},r.createElement("div",{className:"sound"},g))}return"hide"===u&&v&&(i instanceof s.Photo||i instanceof s.Sound)&&(h=r.createElement("label",null,r.createElement("input",{type:"checkbox",name:"private"}),I18n.t("make_private"))),r.createElement(a.A,{show:n,className:"ModeratorActionModal",onHide:function(){return o()}},r.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.target),n=t.get("reason"),r=t.get("private");return f(i,u,n,r),!1}},r.createElement(a.A.Header,{closeButton:!0},r.createElement(a.A.Title,null,y)),r.createElement(a.A.Body,null,m,r.createElement("div",{className:"form-group"},r.createElement("textarea",{name:"reason",className:"form-control",placeholder:b,required:!0})),h,r.createElement("input",{type:"hidden",name:"action",value:u||""}),r.createElement("div",{className:"text upstacked text-muted"},r.createElement("p",null,"unhide"===u?I18n.t("unhide_desc"):I18n.t("hide_desc")),"hide"===u&&r.createElement("p",null,I18n.t("hide_desc_staff_can_unhide")))),r.createElement(a.A.Footer,null,r.createElement("div",{className:"buttons"},r.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return o()}},I18n.t("cancel")),r.createElement("input",{type:"submit",className:"btn btn-primary",value:y})))))};u.propTypes={config:i().object,visible:i().bool,hide:i().func,action:i().string,item:i().object,submit:i().func,revealHiddenContent:i().func},u.defaultProps={action:"hide",visible:!1},t.A=u},70613:function(e,t,n){"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}function l(e,t,n){return t=f(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var r=n(24577),o=n(995),i=n.n(o),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props.photo,t=this.props.photo.user;if(!t&&this.props.observation&&(t=this.props.observation.user),!t)return r.createElement("span",null,e.attribution);var n=t.name||t.login,o="cc0"===e.license_code||"pd"===e.license_code?n:"\xa9 ".concat(n);if(!e.license_code||"c"===e.license_code.toLowerCase())return r.createElement("span",null,o,", ",I18n.t("all_rights_reserved"));if("pd"===e.license_code)return r.createElement("span",null,o,", ",I18n.t("copyright.no_known_copyright_restrictions_text")," (",I18n.t("public_domain"),")");var i="cc0"===e.license_code?I18n.t("copyright.no_rights_reserved"):I18n.t("some_rights_reserved");return r.createElement("span",null,o,", ",r.createElement("a",{href:iNaturalist.Licenses[e.license_code.toLowerCase()].url},i," (",iNaturalist.Licenses[e.license_code.toLowerCase()].code,")"))}}])&&s(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);p.propTypes={photo:i().object,observation:i().object},t.A=p},45899:function(e,t,n){"use strict";var r=n(16154),o=n.n(r),i=n(24577),a=n(995),s=n.n(a),c=n(34387),l=function(e){var t=e.rejectedFiles,n=e.supportedFilesRegex,r=e.unsupportedFileTypeMessage,a=e.maxFileSizeInBytes,s={},c=!1,l=o().filter(t,(function(e){return e.name&&e.name.length>0}));return o().forEach(l,(function(e){s[e.name]=s[e.name]||[],e.size>a&&(s[e.name].push(I18n.t("uploader.errors.file_too_big",{megabytes:a/1024/1024})),c=e.type&&e.type.match(/image/)),e.type&&e.type.match(new RegExp(n,"i"))||s[e.name].push(r),window.location.search.match(/debug=true/)&&console.log("[DEBUG] rejected file: ",e)})),0===o().keys(s).length?null:i.createElement("div",{className:"RejectedFilesError"},I18n.t("there_were_some_problems_with_these_files"),o().map(s,(function(e,t){return i.createElement("div",{key:"file-errors-".concat(t)},i.createElement("code",null,t),i.createElement("ul",null,o().map(e,(function(e,n){return i.createElement("li",{key:"file-errors-".concat(t,"-").concat(n)},e)}))))})),i.createElement("p",{className:"small text-muted"},c&&I18n.t("uploader.resize_tip")))};l.propTypes={rejectedFiles:s().array,supportedFilesRegex:s().string,unsupportedFileTypeMessage:s().string,maxFileSizeInBytes:s().number},l.defaultProps={rejectedFiles:[],supportedFilesRegex:"gif|png|jpe?g|heic|heif|wav|mpe?g|mp3|aac|3gpp|amr|mp4",unsupportedFileTypeMessage:I18n.t("uploader.errors.unsupported_file_type"),maxFileSizeInBytes:c.w3},t.A=l},38312:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(44087),s=function(e){var t=e.config;return t&&t.currentUser&&(t.currentUser.roles.indexOf("curator")>=0||t.currentUser.roles.indexOf("admin")>=0||["ar","fa","he"].indexOf(t.currentUser.locale)>=0)?r.createElement("div",{className:"container"},r.createElement("div",{className:"row"},r.createElement("div",{className:"cols-xs-12"},r.createElement(a.A,{group:"rtl",joinPrompt:I18n.t("rtl_test_prompt"),joinedStatus:I18n.t("rtl_test_joined_status"),user:t.currentUser})))):null};s.propTypes={config:i().object},t.A=s},24561:function(e,t,n){"use strict";function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var r=n(24577),o=n(91771),i=n.n(o),a=n(995),s=n.n(a),c=n(16154),l=n.n(c),u=n(42395),b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,t)).keyBase=(0,u.HO)(e.props),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,o=[{key:"LinkElement",value:function(){var e=this.props,t=e.url,n=e.onClick;return t||n?"a":"span"}},{key:"truncateText",value:function(e){var t=this.props.truncate;return t?l().truncate(e,{length:t}):e}},{key:"showScinameFirst",value:function(){var e=this.props,t=e.sciFirst,n=e.user;return t||n&&n.prefers_scientific_name_first}},{key:"icon",value:function(){var e=this.props,t=e.taxon,n=e.showIcon,o=e.url;if(!n)return null;var i="icon icon-iconic-";t&&t.iconic_taxon_name?i+=t.iconic_taxon_name.toString().toLowerCase():i+="unknown";var a=this.LinkElement();return r.createElement(a,{key:"".concat(this.keyBase,"-icon"),href:o,className:i})}},{key:"taxonClass",value:function(){var e=this.props,t=e.taxon,n=e.noParens,r="taxon";return t?(r+=" ".concat(t.rank," ").concat(t.iconic_taxon_name),l().isEmpty(t.preferred_common_names)&&!t.preferred_common_name||(r+=" has-com-name")):r+=" Unknown",r+(n?" no-parens":" parens")}},{key:"title",value:function(){var e=this.props,t=e.taxon,n=e.user,r="";if(t){if(r=t.name,t.rank&&t.rank_level>10&&(r=I18n.t("rank_sciname",{rank:I18n.t("ranks.".concat(t.rank.toLowerCase())),name:t.name})),!l().isEmpty(t.preferred_common_names)){var o=l().map(t.preferred_common_names,(function(e){return l().trim(iNatModels.Taxon.titleCaseName(e.name))}));return n&&n.prefers_scientific_name_first?"".concat(r," (").concat(o.join(" \xb7 "),")"):"".concat(o.join(" \xb7 ")," (").concat(l().trim(r),")")}if(t.preferred_common_name){var i=iNatModels.Taxon.titleCaseName(t.preferred_common_name);return n&&n.prefers_scientific_name_first?"".concat(r," (").concat(l().trim(i),")"):"".concat(i," (").concat(l().trim(r),")")}}return r}},{key:"placeholderName",value:function(){var e=this.props,t=e.displayClassName,n=e.placeholder,o=e.url,i=e.onClick,a=e.target,s="".concat(this.keyBase,"-comName"),c=this.LinkElement(),l=t||"";return l="noname display-name ".concat(l),r.createElement("span",{key:s},r.createElement(c,{className:l,href:o,onClick:i,target:a,rel:"_blank"===a?"noopener noreferrer":null},I18n.t("unknown"))," ",r.createElement("span",{className:"altname"},"(",I18n.t("label_colon",{label:I18n.t("placeholder")})," ",n,")"))}},{key:"unknownName",value:function(){var e=this.props,t=e.displayClassName,n=e.url,o=e.onClick,i=e.target,a="".concat(this.keyBase,"-comName"),s=this.LinkElement(),c=t||"";return c="noname display-name ".concat(c),r.createElement(s,{key:a,className:c,href:n,onClick:o,target:i,rel:"_blank"===i?"noopener noreferrer":null},I18n.t("unknown"))}},{key:"comNames",value:function(){var e=this,t=this.props,n=t.taxon,o=t.placeholder,i=t.displayClassName,a=t.url,s=t.target,c=t.onClick;if(!n)return o?this.placeholderName():this.unknownName();if(!l().isEmpty(n.preferred_common_names)){var u=this.showScinameFirst()?"secondary-names":"display-names",f=l().uniq(l().map(n.preferred_common_names,(function(t,n){return e.comName(t.name,n,{nolink:!0})})));f=f.reduce((function(e,t){return[e," \xb7 ",t]}));var d=i||"",p=this.LinkElement();d=this.showScinameFirst()?"secondary-name ".concat(d):"display-name ".concat(d);var m="".concat(this.keyBase,"-comNames");return r.createElement("span",{key:"comnames",className:"comname ".concat(u)},r.createElement(p,{key:m,className:"comname ".concat(d),href:a,target:s,onClick:c,rel:"_blank"===s?"noopener noreferrer":null},f))}return n.preferred_common_name?this.comName(n.preferred_common_name):null}},{key:"comName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.props,i=o.displayClassName,a=o.url,s=o.target,c=o.onClick,l=i||"",u=this.LinkElement(),f="".concat(this.keyBase,"-comName-").concat(t);l=this.showScinameFirst()?"secondary-name ".concat(l):"display-name ".concat(l);var d=iNatModels.Taxon.titleCaseName(e);return n.nolink?this.truncateText(d):r.createElement(u,{key:f,className:"comname ".concat(l),href:a,target:s,onClick:c,rel:"_blank"===s?"noopener noreferrer":null},this.truncateText(d))}},{key:"sciName",value:function(){var e=this.props,t=e.taxon,n=e.displayClassName,o=e.url,i=e.onClick,a=e.target,s=e.noRank;if(!t)return null;var c="".concat(this.keyBase,"-sciName"),u=this.LinkElement(),f="sciname ".concat(t.rank);!t.preferred_common_name&&l().isEmpty(t.preferred_common_names)||this.showScinameFirst()?f+=" display-name ".concat(n||""):f+=" secondary-name";var d=t.name;if("stateofmatter"===t.rank&&(d=I18n.t("all_taxa.life")),t.rank_level<10){var p,m=d.split(" ");"variety"===t.rank?p="var.":"subspecies"===t.rank?p="ssp.":"form"===t.rank&&(p="f."),p&&(d=r.createElement("span",null,m.slice(0,m.length-1).join(" ")," ",r.createElement("span",{className:"rank"},p),"\xa0",m[m.length-1]))}return t.rank&&t.rank_level>10?r.createElement(u,{key:c,className:f,href:o,onClick:i,target:a,rel:"_blank"===a?"noopener noreferrer":null},!s&&r.createElement("span",{className:"rank"},I18n.t("ranks.".concat(t.rank.toLowerCase()))),!s&&"\xa0",this.truncateText(d)):r.createElement(u,{key:c,className:f,href:o,onClick:i,target:a,rel:"_blank"===a?"noopener noreferrer":null},this.truncateText(d))}},{key:"inactive",value:function(){var e=this.props,t=e.taxon,n=e.noInactive,o=e.target;return!t||t.is_active||n?null:r.createElement("span",{key:"".concat(this.keyBase,"-inactive"),className:"inactive"},r.createElement("a",{href:"/taxon_changes?taxon_id=".concat(t.id),target:o,rel:"_blank"===o?"noopener noreferrer":null},r.createElement("i",{className:"fa fa-exclamation-circle"})," ",I18n.t("inactive_taxon")))}},{key:"extinct",value:function(){var e=this.props.taxon;return e&&e.extinct?r.createElement("span",{key:"".concat(this.keyBase,"-extinct"),className:"extinct"},"[",I18n.t("extinct"),"]"):null}},{key:"memberGroup",value:function(){var e,n,o=this.props,a=o.taxon,s=o.showMemberGroup,c=o.user,u=a&&a.rank_level<20&&a.rank_level>10;return s&&a&&(!a.preferred_common_name&&!l().isEmpty(a.ancestors)||u)&&(n=u?l().find(a.ancestors,(function(e){return"genus"===e.rank})):l().head(l().reverse(l().filter(a.ancestors,(function(e){return e.preferred_common_name&&e.rank_level>20})))))&&(e=r.createElement("span",{key:"".concat(this.keyBase,"-memberGroup"),className:"member-group",dangerouslySetInnerHTML:{__html:I18n.t("a_member_of_taxon_html",{taxon:i().renderToString(r.createElement(t,{taxon:n,url:"/taxa/".concat(n.id),user:c}))})}})),e}},{key:"linkIcon",value:function(){var e=this.props,t=e.iconLink,n=e.target,o=e.url,i=null;return t&&(i=r.createElement("a",{target:n,href:o,className:"direct-link",key:"".concat(this.keyBase,"-linkIcon"),rel:"_blank"===n?"noopener noreferrer":null},r.createElement("i",{className:"icon-link"}))),i}},{key:"render",value:function(){var e,t,n=this.props,o=n.taxon;n.componentClassName,this.showScinameFirst()?(e=this.sciName(),t=this.comNames(o)):(e=this.comNames(o),t=this.sciName())
;var i=l().compact([this.icon(),e,t,this.inactive(),this.extinct(),this.memberGroup(),this.linkIcon()]),a=l().compact(["SplitTaxon",this.taxonClass()]).join(" ");return r.createElement("span",{title:this.title(),className:a},l().flatten(l().map(i,(function(e,t){return 0===t?e:[" ",e]}))))}}],o&&d(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);b.propTypes={taxon:s().object,url:s().string,target:s().string,noParens:s().bool,noRank:s().bool,placeholder:s().string,displayClassName:s().string,showIcon:s().bool,truncate:s().number,onClick:s().func,noInactive:s().bool,showMemberGroup:s().bool,user:s().object,iconLink:s().bool,sciFirst:s().bool},b.defaultProps={target:"_self"},t.A=b},82789:function(e,t,n){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(23539),s=n.n(a),c=n(64165),l=n.n(c),_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v(this,t,[e,n])).fetchTaxon=r.fetchTaxon.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){var e=this.props.config,t=s().findDOMNode(this),n=d(d({},this.props),{},{idEl:$("input[name='taxon_id']",t),preventEnterSubmit:!0,react:!0,user:e&&e.user,useAPIv2:e&&e.testingApiV2});$("input[name='taxon_name']",t).taxonAutocomplete(n),this.fetchTaxon()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.initialTaxonID,r=t.initialSelection;n===e.initialTaxonID&&r===e.initialSelection||this.fetchTaxon()}},{key:"fetchTaxon",value:function(){var e=this,t=this.props,n=t.initialTaxonID,r=t.initialSelection,o=t.config;if(n&&!r){var i={};o&&o.testingApiV2&&(i.fields={id:!0,name:!0,rank:!0,rank_level:!0,iconic_taxon_name:!0,preferred_common_name:!0,is_active:!0,extinct:!0,ancestor_ids:!0,default_photo:{square_url:!0}}),l().taxa.fetch(n,i).then((function(t){t.results.length>0&&e.updateTaxon({taxon:t.results[0]})}))}else this.updateTaxon({taxon:r})}},{key:"updateTaxon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s().findDOMNode(this);e.taxon?$("input[name='taxon_name']",t).trigger("assignSelection",e.taxon):$("input[name='taxon_name']",t).trigger("resetAll")}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.value,o=e.inputClassName,i=e.onChange,a=e.placeholder,s=e.disabled;return r.createElement("span",{className:"TaxonAutocomplete ".concat(t)},r.createElement("div",{className:"form-group"},r.createElement("input",{type:"search",name:"taxon_name",value:n,className:"form-control ".concat(o),onChange:i,placeholder:a,autoComplete:"off",disabled:s})),r.createElement("input",{type:"hidden",name:"taxon_id"}))}}],o&&m(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);_.propTypes={onChange:i().func,resetOnChange:i().bool,bootstrapClear:i().bool,searchExternal:i().bool,showPlaceholder:i().bool,allowPlaceholders:i().bool,afterSelect:i().func,afterUnselect:i().func,value:i().string,initialSelection:i().object,initialTaxonID:i().number,perPage:i().number,className:i().string,inputClassName:i().string,position:i().object,placeholder:i().string,disabled:i().bool,config:i().object},_.defaultProps={placeholder:I18n.t("search_species"),config:{},disabled:!1},t.A=_},25173:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(29691),s=n(16414),c=n(16154),l=n.n(c),u=n(28439),f=n(42395),d=n(24561),p=function(e){var t=e.taxon,n=e.allChildrenShown,o=e.toggleAllChildrenShown,i=e.currentUser,c=e.chooseTaxon,p=e.noHideable,m=e.tabular,h=[],v=Object.assign({},t);if(t)if(t.ancestors){var y=Object.assign([],v.ancestors);y.push(v),h.push(Object.assign({},y.shift()));for(var b=h[0],g=0;g<y.length;g+=1)b.children=b.children||[],b.children.push(Object.assign({},y[g])),b=b.children[b.children.length-1]}else h.push(t);var _=i&&i.roles&&(i.roles.indexOf("curator")>=0||i.roles.indexOf("admin")>=0);return r.createElement("div",{className:"TaxonomicBranch"},function e(v){return r.createElement("ul",{className:"plain taxonomy"},(l().sortBy(v,(function(e){return[100-e.rank_level,e.name]}))||[]).map((function(v){var y="",b=v.id===h[0].id,g=v.id===t.id,E=v.ancestor_ids&&v.ancestor_ids.indexOf(t.id)>=0,w=!g,O=g&&t.complete_rank&&t.rank_level>u.hD[t.complete_rank],x=E&&("hybrid"===v.rank||"genushybrid"===v.rank||!v.is_active||v.extinct),k=(v.children||[]).length,S=l().filter(v.children||[],(function(e){return"genushybrid"===e.rank||"hybrid"===e.rank||!e.is_active||e.extinct})).length;return g&&(y+="current"),b&&(y+=" root"),O&&(y+=" complete"),x&&(y+=" hidable"),(k<=1||n)&&(y+=" all-shown"),m&&(y+=" tabular"),k>0&&(y+=" has-children"),r.createElement("li",{key:"taxonomy-".concat(v.id),className:y},r.createElement("div",{className:"row-content"},r.createElement("div",{className:"name-row"},r.createElement(d.A,{taxon:v,url:w?(0,u.F$)(v):null,user:i,onClick:function(e){return!(w&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),c(v),1))}}),E&&_&&r.createElement("span",null," ",r.createElement("a",{href:"/taxa/".concat(v.id,"/edit")},r.createElement("i",{className:"fa fa-pencil",alt:I18n.t("edit")}))),O?r.createElement("div",{className:"inlineblock taxonomy-complete-notice"},r.createElement("div",{className:"label-complete"},I18n.t("all_rank_added_to_the_database.".concat(t.complete_rank||"species"))),r.createElement(a.A,{container:$(".suggestions-detail").get(0),trigger:"click",rootClose:!0,placement:"top",animation:!1,overlay:r.createElement(s.A,{id:"complete-taxon-popover-".concat(v.id),className:"complete-taxon-popover",title:I18n.t("about_complete_taxa")},I18n.t("views.taxa.show.complete_taxon_desc"))},r.createElement("a",{href:(0,u.F$)(v),onClick:function(e){return e.preventDefault(),!1}},r.createElement("i",{className:"fa fa-info-circle"})," ",I18n.t("info"))),p||k<=1||0===S?null:r.createElement("span",null,r.createElement("span",{className:"text-muted"},"\u2022"),r.createElement("button",{type:"button",className:"btn btn-nostyle linky",onClick:function(e){return e.preventDefault(),o(),!1}},n?I18n.t("hide_uncountable_species"):I18n.t("show_uncountable_species")))):null),m&&g&&k>0?r.createElement("div",{style:{whiteSpace:"nowrap"}},I18n.t("observations")):null,m&&E?r.createElement("div",{className:"text-".concat(0===v.observations_count?"default":"success"," label-obs-count")},0===v.observations_count?v.observations_count:r.createElement("a",{href:"/observations?taxon_id=".concat(v.id,"&place_id=any&verifiable=any")},(0,f.qC)(v.observations_count))):null),v.children&&v.children.length>0?e(v.children):null)})))}(h))};p.propTypes={taxon:i().object,allChildrenShown:i().bool,toggleAllChildrenShown:i().func,currentUser:i().object,chooseTaxon:i().func,noHideable:i().bool,tabular:i().bool},p.defaultProps={noHideable:!1},t.A=p},44087:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=function(e){var t=e.group,n=e.joinPrompt,o=e.joinedStatus,i=e.user;if(!i)return r.createElement("div",null);var a=$("meta[name=csrf-param]").attr("content"),s=$("meta[name=csrf-token]").attr("content"),c=i.testGroups&&i.testGroups.indexOf(t)>=0,l=function(){var e=new FormData;e.append(a,s);var n={method:"put",credentials:"same-origin",body:e},r="/users/".concat(i.id,"/join_test?test=").concat(t);return c&&(r="/users/".concat(i.id,"/leave_test?test=").concat(t)),fetch(r,n).then((function(e){if(!(e.status>=200&&e.status<300))throw new Error("there was a problem leaving the test group");location.reload()})).catch((function(e){alert(e)}))};return r.createElement("div",{className:"TestGroupToggle alert alert-warning text-center"},c?r.createElement("div",null,o,r.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(){return l()},style:{marginInlineStart:"0.5em"}},I18n.t("stop_testing"))):r.createElement("div",null,n,r.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return l()},style:{marginInlineStart:"0.5em"}},I18n.t("yes"))))};a.propTypes={group:i().string.isRequired,joinPrompt:i().string.isRequired,joinedStatus:i().string.isRequired,user:i().object},t.A=a},96799:function(e,t,n){"use strict";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function p(e,t,n){return t=h(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}function O(e,t,n){return t=k(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,n||[],k(e).constructor):t.apply(e,n))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}n.d(t,{A:function(){return j}});var r=n(24577),o=n(995),i=n.n(o),a=n(6738),s=n.n(a),c=n(23539),l=n.n(c),y=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=p(this,t,[e,n])).button=r.createRef(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,(o=[{key:"handleClick",value:function(){var e=this.props,t=e.textarea,n=e.template,r=e.newSelectionOffset,o=e.newSelectionOffsetLength,i=e.placeholder,a=e.textareaOnChange;if(t&&t.current){var s=t.current,c=s.selectionStart,l=s.selectionEnd;if(void 0!==c&&void 0!==l){var u=s.value.substring(c,l);0===u.length&&i&&(u=i);var f=n(u,s.value.substring(0,c)),d="function"==typeof r?r(u.length):r,p="function"==typeof o?o(u.length):o;s.value=s.value.substring(0,c)+f+s.value.substring(l,s.value.length),a&&a(s.value);var m=c+d,h=c+d+(void 0===p?f.length:p);s.setSelectionRange(m,h)}s.focus()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,o=t.className,i=t.disabled,a=t.tip;return r.createElement("button",{type:"button",tabIndex:"-1",className:o,disabled:i,title:a,"aria-label":a,ref:this.button,onClick:function(){e.handleClick()}},n)}}])&&f(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);y.propTypes={textarea:i().object.isRequired,textareaOnChange:i().func,label:i().oneOfType([i().string,i().element]).isRequired,template:i().func.isRequired,className:i().string,newSelectionOffset:i().oneOfType([i().number,i().func]),newSelectionOffsetLength:i().oneOfType([i().number,i().func]),disabled:i().bool,placeholder:i().string,tip:i().string},y.defaultProps={newSelectionOffset:0};var b=y,g=n(55077),A=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=O(this,t,[e,n])).textarea=r.createRef(),o.boldButton=r.createRef(),o.italicButton=r.createRef(),o.linkButton=r.createRef(),o.state={preview:!1,content:e.content},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){var e=this,t=this.props.mentions;if(s()(this.textarea.current).bind("mod+b",(function(t){t.preventDefault(),e.boldButton.button.current.click()})),s()(this.textarea.current).bind("mod+i",(function(t){t.preventDefault(),e.italicButton.button.current.click()})),s()(this.textarea.current).bind("mod+k",(function(t){t.preventDefault(),e.linkButton.button.current.click()})),t){var n=l().findDOMNode(this);$(this.textarea.current,n).textcompleteUsers(),$(this.textarea.current,n).on("textComplete:select",(function(t){e.setState({content:t.target.value})}))}}},{key:"componentWillReceiveProps",value:function(e){this.setState({content:e.content})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.changeHandler,r=this.state.content;t.content!==r&&(n&&n(r),window.onbeforeunload=function(){return r.length>0||null})}},{key:"componentWillUnmount",value:function(){window.onbeforeunload=function(){return null}}},{key:"render",value:function(){var e=this,t=this.props,n=t.maxLength,o=t.placeholder,i=t.className,a=t.textareaClassName,s=t.showCharsRemainingAt,c=t.onBlur,l=this.state,u=l.preview,f=l.content,d=f?f.length:0;return r.createElement("div",{className:"TextEditor ".concat(i||""," ").concat(u?"with-preview":"")},this.textarea&&r.createElement("div",{className:"btn-toolbar",role:"toolbar","aria-label":I18n.t("text_editing_controls")},r.createElement("div",{className:"btn-group format-controls",role:"group","aria-label":I18n.t("text_formatting_controls")},r.createElement(b,{textarea:this.textarea,textareaOnChange:function(t){e.setState({content:t})},className:"btn btn-default btn-xs",label:r.createElement("i",{className:"fa fa-bold"}),template:function(e){return"**".concat(e,"**")},placeholder:I18n.t("bold_text"),ref:function(t){e.boldButton=t},newSelectionOffset:2,newSelectionOffsetLength:function(e){return e},disabled:u,tip:I18n.t("add_bold_text")}),r.createElement(b,{textarea:this.textarea,textareaOnChange:function(t){e.setState({content:t})},className:"btn btn-default btn-xs",label:r.createElement("i",{className:"fa fa-italic"}),template:function(e){return"*".concat(e,"*")},placeholder:I18n.t("italic_text"),ref:function(t){e.italicButton=t},newSelectionOffset:1,newSelectionOffsetLength:function(e){return e},disabled:u,tip:I18n.t("add_italic_text")}),r.createElement(b,{textarea:this.textarea,textareaOnChange:function(t){e.setState({content:t})},className:"btn btn-default btn-xs",label:r.createElement("i",{className:"icon-link"}),template:function(e){return"[".concat(e,"](url)")},placeholder:I18n.t("linked_text"),ref:function(t){e.linkButton=t},newSelectionOffset:function(e){return e+3},newSelectionOffsetLength:3,disabled:u,tip:I18n.t("add_a_link")})),r.createElement("div",{className:"btn-group block-controls",role:"group","aria-label":I18n.t("text_block_controls")},r.createElement(b,{textarea:this.textarea,textareaOnChange:function(t){e.setState({content:t})},className:"btn btn-default btn-xs",label:r.createElement("i",{className:"fa fa-quote-right"}),template:function(e,t){var n=e.toString().split("\n").map((function(e){return"> ".concat(e)})).join("\n");return""===t||"\n\n"===t.slice(t.length-2)?n:"\n"===t[t.length-1]?"\n".concat(n):"\n\n".concat(n)},disabled:u,tip:I18n.t("insert_a_quote")}),r.createElement(b,{textarea:this.textarea,textareaOnChange:function(t){e.setState({content:t})},className:"btn btn-default btn-xs",label:r.createElement("i",{className:"fa fa-list-ul"}),template:function(e,t){var n=e.toString().split("\n").map((function(e){return"* ".concat(e)})).join("\n");return""===t||"\n\n"===t.slice(t.length-2)?n:"\n"===t[t.length-1]?"\n".concat(n):"\n\n".concat(n)},disabled:u,tip:I18n.t("add_a_bulleted_list")}),r.createElement(b,{textarea:this.textarea,textareaOnChange:function(t){e.setState({content:t})},className:"btn btn-default btn-xs",label:r.createElement("i",{className:"fa fa-list-ol"}),template:function(e,t){var n=e.toString().split("\n").map((function(e){return"1. ".concat(e)})).join("\n");return""===t||"\n\n"===t.slice(t.length-2)?n:"\n"===t[t.length-1]?"\n".concat(n):"\n\n".concat(n)},disabled:u,tip:I18n.t("add_a_numbered_list")})),r.createElement("div",{className:"btn-group pull-right",role:"group","aria-label":I18n.t("preview")},u?r.createElement("button",{type:"button",tabIndex:"-1",className:"btn btn-primary btn-xs btn-edit",onClick:function(){return e.setState({preview:!1})}},I18n.t("edit")):r.createElement("button",{type:"button",tabIndex:"-1",className:"btn btn-default btn-xs btn-preview",onClick:function(){return e.setState({preview:!0})}},I18n.t("preview")))),r.createElement("textarea",{ref:this.textarea,className:a,maxLength:n,placeholder:o,onChange:function(t){e.setState({content:t.target.value})},onBlur:c,value:f||""}),n&&d>s&&r.createElement("div",{className:"text-muted small chars-remaining"},I18n.t("x_of_y_short",{x:d,y:n})),u&&r.createElement(g.A,{className:"preview",text:this.textarea.current.value,markdown:!0}))}}],o&&E(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);A.propTypes={maxLength:i().number,content:i().string,placeholder:i().string,changeHandler:i().func,mentions:i().bool,className:i().string,textareaClassName:i().string,showCharsRemainingAt:i().number,onBlur:i().func},A.defaultProps={showCharsRemainingAt:0,mentions:!1};var j=A},60905:function(e,t,n){"use strict";function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return{};if(!e.icon_url)return{};var n=t.size||"medium",r=e.icon_url.replace(/(mini|thumb|medium|large|original)/,n),o="url( ".concat(r," )"),i=function(e){if(!e)return null;var t=e.match(/(mini|thumb|medium|large|original)\.\w+/);if(!t)return null;if(t.length<2)return null;var n=t[1];if(!n)return null;var r=a[n],o=Object.keys(a).toSorted((function(e,t){return a[e]-a[t]})).find((function(e){return a[e]>=2*r}));return o?e.replace(n,o):null}(r);return i&&(o="url( ".concat(i," ), ").concat(o)),{backgroundImage:o}}var r=n(24577),o=n(995),i=n.n(o),a={original:2048,large:500,medium:300,thumb:48,mini:16},c=function(e){var t=e.linkTarget,n=e.size,o=e.user,i=r.createElement("i",{className:"icon-person",style:{display:o&&o.icon_url?"none":"inline-block"}});return o?r.createElement("a",{className:"userimage UserImage",href:"/people/".concat(o.login||o.id),title:o.login,style:s(o,{size:n}),target:t,rel:"_blank"===t?"noopener noreferrer":null},i):r.createElement("span",{className:"userimage UserImage"},i)};c.propTypes={linkTarget:i().string,size:i().string,user:i().object},c.defaultProps={linkTarget:"_self",size:"thumb"},t.A=c},15872:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(16447),s=function(e){var t=e.className,n=e.config,o=e.noInativersary,i=e.target,s=e.uniqueKey,c=e.user,l=e.useName;if(!c)return null;var u=c.login;return l&&c.name&&c.name.length>0&&(u=c.name),r.createElement("span",{className:"userlink"},r.createElement("a",{className:t,href:"/people/".concat(c.login||c.id),rel:"_blank"===i?"noopener noreferrer":null,target:i,title:u},u),!o&&r.createElement(a.A,{config:n,uniqueKey:s,user:c}))};s.propTypes={className:i().string,config:i().object,noInativersary:i().bool,target:i().string,uniqueKey:i().string,useName:i().bool,user:i().object},t.A=s},55077:function(e,t,n){"use strict";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function v(e,t,n){return t=b(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(1008),s=n.n(a),c=n(29141),l=n(10313),u=n.n(l),f=n(64035),d=n.n(f),_="\n  a\n  abbr\n  acronym\n  b\n  blockquote\n  br\n  cite\n  code\n  del\n  div\n  dl\n  dt\n  em\n  h1\n  h2\n  h3\n  h4\n  h5\n  h6\n  hr\n  i\n  img\n  ins\n  li\n  ol\n  p\n  pre\n  s\n  small\n  strike\n  strong\n  sub\n  sup\n  t\n  table\n  tbody\n  td\n  th\n  thead\n  tr\n  tt\n  ul\n".split(/\s+/m).filter((function(e){return""!==e})),E="href src width height alt cite title class name abbr value align rel".split(" "),w={a:["href"]};_.filter((function(e){return"a"!==e})).forEach((function(e){w[e]=E}));var O={allowedTags:_,allowedAttributes:w,allowedSchemes:["http","https"]},x=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=v(this,t)).state={more:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,i=[{key:"hyperlinkMentions",value:function(e){return e.replace(/(.?)(\B)@([A-z][\\\w\\\-_]*)/g,(function(e,t,n,r){return"/"===t?e:"".concat(t).concat(n,'<a href="/people/').concat(r,'">@').concat(r,"</a>")}))}}],(o=[{key:"toggle",value:function(){var e=this.state.more;this.setState({more:!e})}},{key:"render",value:function(){var e=this,n=this.props,o=n.text,i=n.truncate,a=n.config,l=n.moreToggle,f=n.stripTags,p=n.stripWhitespace,m=n.className,h=n.markdown,v=this.state.more;if(!o||0===o.length)return r.createElement("div",{className:"UserText ".concat(m)});var y,b,g=o;if(g=g.replace(/&(\w+=)/g,"&amp;$1"),h){var w=new(d())({html:!0,breaks:!0});w.renderer.rules.table_open=function(){return'<table class="table">\n'},g=i&&!v?w.renderInline(g):w.render(g)}else g=o.trim().replace(/\n/gm,"<br />");g=u()(t.hyperlinkMentions(g),a||O),g=(0,c.A)(g,{className:null,attributes:{rel:"nofollow noopener"},ignoreTags:["a","code","pre"]}),f&&(g=u()(g,{allowedTags:[],allowedAttributes:{}})),i&&i>0&&!v&&(y=s()(g,i)).length>i&&f&&(y=g.slice(0,i)),i&&y!==g&&l&&(b=r.createElement("button",{type:"button",onClick:function(){return e.toggle(),!1},className:"btn btn-nostyle linky ".concat(i&&i>0?"more":"collapse")},v?I18n.t("less__context_text",{defaultValue:I18n.t("less")}):I18n.t("more__context_text",{defaultValue:I18n.t("more")})));var x=y||g;return f||(x=u()(y||g,{allowedTags:_,allowedAttributes:{"*":E},exclusiveFilter:p&&function(e){return"a"===e.tag&&!e.text.trim()}})),p&&(x=x.trim().replace(/^(<br *\/?>\s*)+/,"")),r.createElement("div",{className:"UserText ".concat(m)},r.createElement("span",{className:"content",dangerouslySetInnerHTML:{__html:x}}),b?" ":null,b)}}])&&m(n.prototype,o),i&&m(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(r.Component);x.propTypes={text:i().string,truncate:i().number,config:i().object,className:i().string,moreToggle:i().bool,stripTags:i().bool,stripWhitespace:i().bool,markdown:i().bool},x.defaultProps={className:"",moreToggle:!0,markdown:!0},t.A=x},32426:function(e,t,n){"use strict";var r=n(65614),o=n(62086),i=n(99520),a=(0,r.Ng)((function(e){return e.confirmModal}),(function(e){return{updateConfirmModalState:function(t){return e((0,i.yl)(t))}}}))(o.A);t.A=a},36163:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var r=n(65614),o=n(16154),i=n.n(o),a=n(24577),s=n(995),c=n.n(s),l=function(e){var t=e.config,n=e.item,r=e.itemTypeLabel,o=e.manageFlagsPath,s=e.setFlaggingModalState,c=e.performOrOpenConfirmationModal,l=t.currentUser,u=i().filter(n.flags||[],(function(e){return!e.resolved})),f=null==t?void 0:t.currentUserCanInteractWithResource(n);if(u.length>0){var d,p=i().groupBy(u,(function(e){return e.flag}));p.spam?d="spam":p.inappropriate&&(d="inappropriate");var m=f?a.createElement("a",{href:o,className:"view"},I18n.t("add_edit_flags")):null,h=r;return a.createElement("div",{className:"FlagAnItem alert alert-danger"},a.createElement("i",{className:"fa fa-flag"})," ",d?I18n.t("x_flagged_as_flag",{x:h,flag:d}):I18n.t("x_flagged",{x:h})," ",m)}var v=l?a.createElement("button",{type:"button",className:"btn btn-nostyle linky",onClick:function(){return c((function(){s({item:n,show:!0})}),{permitOwnerOf:n})}},I18n.t("flag_as_inappropriate")):a.createElement("a",{className:"linky",href:"/login"},I18n.t("flag_as_inappropriate"));return a.createElement("div",{className:"FlagAnItem"},I18n.t("inappropriate_content")," ",v)};l.propTypes={config:c().object,setFlaggingModalState:c().func,manageFlagsPath:c().string,item:c().object,itemTypeLabel:c().string.isRequired,performOrOpenConfirmationModal:c().func};var u=l,f=n(84423),d=n(47191),p=(0,r.Ng)((function(e){return{config:e.config}}),(function(e){return{setFlaggingModalState:function(t){return e((0,f._)(t))},performOrOpenConfirmationModal:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e((0,d.v8)(t,n))}}}))(u),m=p},11608:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var r=n(65614),o=n(16154),i=n.n(o),a=n(24577),s=n(995),c=n.n(s),l=n(13030),u=n.n(l),f=n(87386),d=function(e){var t=e.config,n=e.item,r=e.manageFlagsPath,o=e.showBlocks,s=[];if(i().isEmpty(RAILS_FLASH)||i().each([{flashType:"notice",bootstrapType:"success"},{flashType:"alert",bootstrapType:"success"},{flashType:"warning",bootstrapType:"warning"},{flashType:"error",bootstrapType:"error"}],(function(e){RAILS_FLASH[e.flashType]&&RAILS_FLASH["".concat([e.flashType],"_title")]!==I18n.t("views.shared.spam.this_has_been_flagged_as_spam")&&s.push(a.createElement(f.A,{key:"flash_".concat(e.flashType),title:RAILS_FLASH["".concat([e.flashType],"_title")],message:RAILS_FLASH[e.flashType],type:e.bootstrapType}))})),!i().isEmpty(n)){if(!i().isEmpty(n.flags)){var c=i().filter(n.flags,(function(e){return!e.resolved}));if(i().find(c,(function(e){return"spam"===e.flag}))){var l=a.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("item_flagged_notice_html",{help_email:SITE.help_email,manage_flags_path:r})}});s.push(a.createElement(f.A,{key:"flash_flag",title:I18n.t("views.shared.spam.this_has_been_flagged_as_spam"),message:l,type:"flag"}))}}o&&n.user&&t.currentUser&&i().find(t.currentUser.blockedByUserHashes,(function(e){return u()(n.user.id.toString()).toString()===e}))?s.push(a.createElement(f.A,{key:"flash_blocked",title:I18n.t("views.shared.blocked.youve_been_blocked"),message:I18n.t("views.shared.blocked.youve_been_blocked_desc"),type:"warning"})):t.currentUser&&i().find(t.currentUser.blockedUserHashes,(function(e){return u()(n.user.id.toString()).toString()===e}))&&s.push(a.createElement(f.A,{key:"flash_blocked",title:I18n.t("views.shared.blocked.youve_blocked"),message:I18n.t("views.shared.blocked.youve_blocked_desc"),type:"warning"}))}return i().isEmpty(s)?a.createElement("span",null):a.createElement("div",{className:"FlashMessages"},s)};d.propTypes={config:c().object,showBlocks:c().bool,manageFlagsPath:c().string,item:c().object};var p=d,m=(0,r.Ng)((function(e){return{config:e.config}}))(p)},72081:function(e,t,n){"use strict";n.d(t,{A:function(){return v}});var r=n(65614),o=n(16154),i=n.n(o),a=n(24577),s=n(995),c=n.n(s),l=n(91771),u=n.n(l),f=n(29691),d=n(16414),p=n(55077),m=function(e){var t=e.item,n=e.itemType,r=e.itemIDField,o=e.shrinkOnNarrowDisplays,s=e.config;if(!t.hidden)return null;var c=s&&s.currentUser?s.currentUser:null,l=c&&t.user.id===c.id,m=c&&c.roles&&(c.roles.indexOf("admin")>=0||c.roles.indexOf("curator")>=0),h=i().sortBy(i().filter(t.moderator_actions,(function(e){return"hide"===e.action})),(function(e){return-1*e.id}))[0],v=h.user?a.createElement("a",{href:"/people/".concat(h.user.login),target:"_blank",rel:"noopener noreferrer"},"@".concat(h.user.login)):I18n.t("deleted_user");return a.createElement(f.A,{
key:"hidden-tooltip-".concat(n,"-").concat(t[r]),container:$("#wrapper.bootstrap").get(0),placement:"top",trigger:"click",rootClose:!0,delayShow:200,overlay:a.createElement(d.A,{id:"hidden-".concat(n,"-").concat(t[r]),className:"unhide-popover"},m?a.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("content_hidden_by_user_on_date_because_reason_html",{user:u().renderToString(v),date:I18n.localize("date.formats.month_day_year",h.created_at),reason:u().renderToString(a.createElement(p.A,{text:h.reason,className:"inline",stripWhitespace:!0}))})}}):a.createElement("span",{dangerouslySetInnerHTML:{__html:I18n.t("content_hidden_on_date_because_reason_html",{date:I18n.localize("date.formats.month_day_year",h.created_at),reason:u().renderToString(a.createElement(p.A,{text:h.reason,className:"inline",stripWhitespace:!0}))})}}),a.createElement("div",{className:"upstacked text-muted"},a.createElement("a",{href:"/".concat(n,"/").concat(t[r],"/flags"),target:"_blank",rel:"noopener noreferrer",className:"linky"},I18n.t("view_flags")),l&&a.createElement("span",null,a.createElement("br",null),a.createElement("a",{href:"/help",target:"_blank",rel:"noopener noreferrer",className:"linky"},I18n.t("contact_support")))))},a.createElement("span",{className:"item-status hidden-status"},a.createElement("i",{className:"fa fa-eye-slash",title:I18n.t("content_hidden")}),a.createElement("span",{className:o?"hidden-xs hidden-sm":""}," ",I18n.t("content_hidden"))))};m.propTypes={item:c().object,itemType:c().string,itemIDField:c().string,shrinkOnNarrowDisplays:c().bool,config:c().object},m.defaultProps={shrinkOnNarrowDisplays:!1,itemIDField:"uuid"};var h=m,v=(0,r.Ng)((function(e){return{config:e.config}}))(h)},29598:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{visible:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===s?i({visible:!0,content:t.content},t.options):t.type===c?i(i({},e),{},{visible:!1}):e}function u(e){return{type:s,content:e,options:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}function f(){return{type:c}}n.d(t,{Ay:function(){return l},Hd:function(){return f},S7:function(){return u}});var s="show_alert",c="hide_alert"},14251:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return i({},t.newState);case c:return i(i({},e),t.updatedState)}return e}function u(e){return{type:s,newState:e}}function f(e){return{type:c,updatedState:e}}n.d(t,{Ay:function(){return l},K9:function(){return f},LN:function(){return u}});var s="shared/confirm_email_modal/SET_CONFIRM_EMAIL_MODAL_STATE",c="shared/confirm_email_modal/UPDATE_CONFIRM_EMAIL_MODAL_STATE"},99520:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return s({},t.newState);case u:return s(s({},e),t.updatedState)}return e}function d(e){return{type:l,newState:e}}function p(e){return{type:u,updatedState:e}}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e&&t?function(r){if(e.response&&e.response.status){var i=function(e){var i;e&&e.errors&&Array.isArray(e.errors)&&o().isObject(e.errors[0])&&"externalAPI"===e.errors[0].from&&e.errors[0].message?i=JSON.parse(e.errors[0].message).errors:e&&e.error&&e.error.original&&e.error.original.errors?i=e.error.original.errors:e&&e.error&&e.error.original&&e.error.original.error?i=[e.error.original.error]:e&&e.error&&e.error.original?i=o().flatten(o().map(e.error.original,(function(e,t){return o().map(e,(function(e){return"".concat(t,": ").concat(e)}))}))):e&&e.error&&("string"==typeof e.error?i=JSON.parse(e.error).errors:e.error.errors&&(i=e.error.errors)),r(d({show:!0,type:"error",hideCancel:!0,confirmText:"OK",message:t,errors:i,onConfirm:n.onConfirm,onCancel:n.onConfirm}))};e.response.bodyUsed?i(JSON.parse(e.message)):e.response.text().then((function(e){i(JSON.parse(e))})).catch((function(e){console.warn("[WARNING] : Failed to parse an error response: ",e)}))}}:null}n.d(t,{Ay:function(){return f},Rn:function(){return d},t6:function(){return m},yl:function(){return p}});var r=n(16154),o=n.n(r),l="obs-show/confirm_modal/SET_CONFIRM_MODAL_STATE",u="obs-show/confirm_modal/UPDATE_CONFIRM_MODAL_STATE"},96077:function(e,t,n){"use strict";n.d(t,{CP:function(){return u},Ps:function(){return l},lK:function(){return d},m6:function(){return f}});var r=n(16154),o=n.n(r),i=n(64165),a=n(42395),s="observations-shared/moderator_actions/show_moderator_action_form",c="observations-shared/moderator_actions/hide_moderator_action_form",l=function(e,t){return{type:s,item:e,action:t}},u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var s=new FormData;if(s.append("authenticity_token",$("meta[name=csrf-token]").attr("content")),e.taxon)s.append("moderator_action[resource_type]","Identification");else if(e instanceof i.Comment)s.append("moderator_action[resource_type]","Comment");else if(e instanceof i.Photo)s.append("moderator_action[resource_type]","Photo");else{if(!(e instanceof i.Sound))throw new Error("Can't submit moderator action on an unknown type");s.append("moderator_action[resource_type]","Sound")}return s.append("moderator_action[resource_id]",e.id),s.append("moderator_action[reason]",n),s.append("moderator_action[action]",t),r&&s.append("moderator_action[private]","true"),(0,a.hd)("/moderator_actions.json",{method:"POST",body:s}).then((function(e){e.status>=400&&e.json().then((function(e){var t="Could not save moderator action";o().forEach(e.errors,(function(n,r){t+="\n".concat(e.errors[r].map((function(e){return"".concat(r," ").concat(e)})).join("\n"))})),alert(t)}))})).catch((function(e){alert(I18n.t("doh_something_went_wrong_error",{error:e.message}))}))}},f=function(){return{type:c}},d=function(e){if(!(e instanceof i.Photo||e instanceof i.Sound))return null;var t=o().first(o().orderBy(e.moderator_actions,["created_at","desc"]));return t?function(){var e=window.open();return(0,a.hd)("/moderator_actions/".concat(t.id,"/resource_url"),{method:"GET",headers:{Accept:"application/json","X-CSRF-Token":$("meta[name=csrf-token]").attr("content")}}).then((function(t){200===t.status&&t.json().then((function(t){t&&t.resource_url&&(e.location=t.resource_url,e.focus())}))})).catch((function(e){alert(I18n.t("doh_something_went_wrong_error",{error:e.message}))}))}:null};t.Ay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{visible:!1,item:null,action:"hide"},t=arguments.length>1?arguments[1]:void 0;return t.type===s?(e.visible=!0,e.item=t.item,e.action="unhide"===t.action?"unhide":"hide"):t.type===c&&(e.visible=!1),e}},47191:function(e,t,n){"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(){function r(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===n||"GeneratorFunction"===(t.displayName||t.name))}function i(e){var t,n;return function(r){t||(t={stop:function(){return n(r.a,2)},catch:function(){return r.v},abrupt:function(e,t){return n(r.a,o[e],t)},delegateYield:function(e,o,i){return t.resultName=o,n(r.d,l(e),i)},finish:function(e){return n(r.f,e)}},n=function(e,n,o){r.p=t.prev,r.n=t.next;try{return e(n,o)}finally{t.next=r.n}}),t.resultName&&(t[t.resultName]=r.v,t.resultName=void 0),t.sent=r.v,t.next=r.n;try{return e.call(this,t)}finally{r.p=t.prev,r.n=t.next}}}var e=m(),t=e.m(c),n=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor,o={throw:1,return:2,break:3,continue:3};return(c=function(){return{wrap:function(t,n,r,o){return e.w(i(t),n,r,o&&o.reverse())},isGeneratorFunction:r,mark:e.m,awrap:function(e,t){return new v(e,t)},AsyncIterator:p,async:function(e,t,n,o,a){return(r(t)?d:f)(i(e),t,n,o,a)},keys:u,values:l}})()}function l(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(s(e)+" is not iterable")}function u(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function f(e,t,n,r,o){var i=d(e,t,n,r,o);return i.next().then((function(e){return e.done?e.value:i.next()}))}function d(e,t,n,r,o){return new p(m().w(e,t,n,r),o||Promise)}function p(e,t){function n(r,o,i,a){try{var s=e[r](o),c=s.value;return c instanceof v?t.resolve(c.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(c).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var r;this.next||(h(p.prototype),h(p.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),h(this,"_invoke",(function(e,o,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}),!0)}function m(){function i(n,r,o,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return h(l,"_invoke",function(n,r,o){function p(n,r){for(s=n,c=r,t=0;!f&&l&&!o&&t<u.length;t++){var o,i=u[t],p=d.p,m=i[2];n>3?(o=m===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<m&&(o=n<3||i[0]>r||r>m)&&(i[4]=n,i[5]=r,d.n=m,s=0))}if(o||n>1)return a;throw f=!0,r}var i,s,c,l=0,u=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,d.n=n,a}};return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,m),s=u,c=m;(t=s<2?e:c)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,c)):d.n=c:d.v=c);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?c:n.call(r,d))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}function s(){}function c(){}function l(){}function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,h(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag",a={};t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(h(t={},r,(function(){return this})),t),f=l.prototype=s.prototype=Object.create(u);return c.prototype=l,h(f,"constructor",l),h(l,"constructor",c),c.displayName="GeneratorFunction",h(l,o,"GeneratorFunction"),h(f),h(f,o,"Generator"),h(f,r,(function(){return this})),h(f,"toString",(function(){return"[object Generator]"})),(m=function(){return{w:i,m:d}})()}function h(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}h=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var i=function(t,n){h(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},h(e,t,n,r)}function v(e,t){this.v=e,this.k=t}function y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{confirmationEmailSent:!1},t=arguments.length>1?arguments[1]:void 0;return t.type===b?{confirmationEmailSent:t.value}:e}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r,s,l=n();(0,a.CE)("emailConfirmation",{extra:{action:"modalOpen"}}),t((0,i.LN)({show:!0,hideCancel:!1===e.cancellable,preventClose:!1===e.cancellable,message:l.config.currentUser.email,type:"EmailConfirmation",confirmText:I18n.t("send_confirmation_email"),onConfirm:(r=c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(0,a.CE)("emailConfirmation",{extra:{action:"confirmationSent"}}),o().users.resendConfirmation({useAuth:!0}).then((function(){!1!==e.cancellable&&t({type:b,value:!0})})).catch(console.log);case 2:case"end":return n.stop()}}),n)})),s=function(){var e=this,t=arguments;return new Promise((function(n,o){function a(e){y(i,n,o,a,s,"next",e)}function s(e){y(i,n,o,a,s,"throw",e)}var i=r.apply(e,t);a(void 0)}))},function(){return s.apply(this,arguments)})}))}}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var o,i,a,s,c=r();null!=c&&null!==(o=c.config)&&void 0!==o&&o.currentUser&&((null===(i=t.permitOwnerOf)||void 0===i||null===(i=i.user)||void 0===i?void 0:i.id)!==(null==c||null===(a=c.config)||void 0===a||null===(a=a.currentUser)||void 0===a?void 0:a.id)?null!==(s=c.config.currentUser)&&void 0!==s&&s.privilegedWith("interaction")?e():n(_()):e())}}n.d(t,{Ay:function(){return g},HB:function(){return _},v8:function(){return E}});var r=n(64165),o=n.n(r),i=n(14251),a=n(42395),b="users-confirmation-banner/SET_CONFIRMATION_EMAIL_SENT"},24056:function(e,t,n){"use strict";function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p,r=n(16154),o=n.n(r),i=(n(70051),n(24837),n(16450)),a=n(83324),s=n(16745),m={config:s.Ay},h=function(e){return(0,a.combineReducers)(f(f({},m),e))},v=(0,a.createStore)(h(),a.compose.apply(void 0,function(e){if(Array.isArray(e))return l(e)}(p=o().compact([(0,a.applyMiddleware)(i.A),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()]))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(p)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(p)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()));v.asyncReducers={},v.injectReducer=function(e,t){v.asyncReducers[e]=t,v.replaceReducer(h(v.asyncReducers))},v.injectReducers=function(e){o().each(e,(function(e,t){v.asyncReducers[t]=e})),v.replaceReducer(h(v.asyncReducers))},o().isEmpty(CURRENT_USER)||v.dispatch((0,s.lt)(CURRENT_USER)),t.A=v},29212:function(e,t,n){"use strict";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}function _(e,t,n){return t=w(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var r=n(24577),o=n(995),i=n.n(o),a=n(29691),s=n(16414),c=n(64165),l=n.n(c),u=n(16154),f=n.n(u),d=n(6738),p=n.n(d),x={0:"Undefined",1:"Building",2:"Street Segment",3:"Nearby Building",5:"Intersection",6:"Street",7:"Town",8:"State",9:"County",10:"Local Administrative Area",11:"Postal Code",12:"Country",13:"Island",14:"Airport",15:"Drainage",16:"Land Feature",17:"Miscellaneous",18:"Nationality",19:"Supername",20:"Point of Interest",21:"Region",22:"Suburb",23:"Sports Team",24:"Colloquial",25:"Zone",26:"Historical State",27:"Historical County",29:"Continent",31:"Time Zone",32:"Nearby Intersection",33:"Estate",35:"Historical Town",36:"Aggregate",100:"Open Space",101:"Territory",102:"District",103:"Province",1e3:"Municipality",1001:"Parish",1002:"Department Segment",1003:"City Building",1004:"Commune",1005:"Governorate",1006:"Prefecture",1007:"Canton",1008:"Republic",1009:"Division",1010:"Subdivision",1011:"Village block",1012:"Sum",1013:"Unknown",1014:"Shire",1015:"Prefecture City",1016:"Regency",1017:"Constituency",1018:"Local Authority",1019:"Poblacion",1020:"Delegation"},k={id:!0,uuid:!0,name:!0,display_name:!0,place_type:!0},S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_(this,t,[e])).state={places:[],current:-1},n.input=r.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){this.setPlacesFromProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.setPlacesFromProps(e)}},{key:"handlePlacesResponse",value:function(e){var t=this,n=e.results;this.props.defaultPlace&&this.props.place&&this.props.place.id!==this.props.defaultPlace.id&&(n=f().filter(n,(function(e){return e.id!==t.props.defaultPlace.id}))).splice(0,0,this.props.defaultPlace),this.setState({places:n})}},{key:"setPlacesFromProps",value:function(e){var t=v(v({},e),this.props),n=this.state.places;if(t.defaultPlace){var r=n;(r=f().filter(r,(function(e){return e.id!==t.defaultPlace.id}))).splice(0,0,t.defaultPlace),this.setState({places:r})}if(t.defaultPlaces){var o=t.defaultPlaces;t.defaultPlace&&((o=f().filter(o,(function(e){return e.id!==t.defaultPlace.id}))).splice(0,0,t.defaultPlace),this.setState({places:o})),this.setState({places:o})}else t.place&&t.place.ancestor_place_ids&&t.place.ancestor_place_ids.length>0&&this.fetchPlaces(t.place.ancestor_place_ids)}},{key:"searchPlaces",value:function(e){var t=this,n=this.props.config.testingApiV2,r=n?l().places.search:l().places.autocomplete,o={q:e};this.props.withBoundaries&&(o.geo=!0),n&&(o.fields=k),r(o).then((function(e){return t.handlePlacesResponse(e)}))}},{key:"fetchPlaces",value:function(e){var t=this,n={};this.props.config.testingApiV2&&(n.fields=k),l().places.fetch(e,n).then((function(e){return t.handlePlacesResponse(e)}))}},{key:"highlightNext",value:function(){var e=this.state,t=e.places,n=e.current;this.setState({current:Math.min(t.length,n+1)})}},{key:"highlightPrev",value:function(){var e=this.state.current;this.setState({current:Math.max(-1,e-1)})}},{key:"chooseCurrent",value:function(){var e=this.state.places[this.state.current];$("body").click(),e?this.props.setPlace(e):this.props.clearPlace()}},{key:"bindArrowKeys",value:function(){var e=this,t=this.input.current;p()(t).bind("up",(function(){return e.highlightPrev()})),p()(t).bind("down",(function(){return e.highlightNext()})),p()(t).bind("enter",(function(){return e.chooseCurrent()}))}},{key:"unbindArrowKeys",value:function(){var e=this.input.current;p()(e).unbind("up"),p()(e).unbind("down"),p()(e).unbind("enter")}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.clearButton,i=t.clearPlace,c=t.container,l=t.label,u=t.place,d=t.postIconClass,p=t.preIconClass;return r.createElement(a.A,{trigger:"click",placement:"bottom",rootClose:!0,container:c,onEntered:function(){e.bindArrowKeys(),$(e.input.current).focus()},onExit:function(){e.unbindArrowKeys()},overlay:r.createElement(s.A,{id:"place-chooser",className:"PlaceChooserPopover RecordChooserPopover"},r.createElement("div",{className:"form-group"},r.createElement("input",{type:"text",ref:this.input,placeholder:I18n.t("search"),className:"form-control",onChange:function(t){var n=t.target.value||"";0===n.length?e.setState({places:[]}):e.searchPlaces(n)}})),r.createElement("ul",{className:"list-unstyled"},r.createElement("li",{className:-1===this.state.current?"current pinned":"pinned",onMouseOver:function(){return e.setState({current:-1})},onFocus:function(){return e.setState({current:-1})},style:{display:this.props.place?"block":"none"}},r.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return e.chooseCurrent()}},r.createElement("i",{className:"fa fa-times"}),I18n.t("clear"))),f().map(this.state.places,(function(t,n){var o;if(t&&x[t.place_type]){var i=f().snakeCase(x[t.place_type]);o=I18n.t("place_geo.geo_planet_place_types.".concat(f().capitalize(i)),{defaultValue:I18n.t("place_geo.geo_planet_place_types.".concat(i))})}return r.createElement("li",{key:"place-chooser-place-".concat(t.id),className:"media ".concat(e.state.current===n?"current":"","\n                      ").concat(e.props.defaultPlace&&t.id===e.props.defaultPlace.id?"pinned":""),onMouseOver:function(){return e.setState({current:n})},onFocus:function(){return e.setState({current:n})}},r.createElement("button",{type:"button",className:"btn btn-nostyle",onClick:function(){return e.chooseCurrent()}},r.createElement("div",{className:"media-left"},r.createElement("i",{className:"media-object fa fa-map-marker"})),r.createElement("div",{className:"media-body"},I18n.t("places_name.".concat(f().snakeCase(t.name)),{defaultValue:t.display_name})," ",o&&r.createElement("span",{className:"text-muted place-type"},"(".concat(o,")")))))}))))},r.createElement("div",{className:"PlaceChooserPopoverTrigger RecordChooserPopoverTrigger ".concat(u?"chosen":""," ").concat(n)},p&&r.createElement("i",{className:"".concat(p," pre-icon")}),l?r.createElement("label",null,l):null,u?I18n.t("places_name.".concat(f().snakeCase(u.name)),{defaultValue:u.display_name}):I18n.t("filter_by_place"),u&&o&&r.createElement("button",{type:"button",className:"btn btn-nostyle clear-button",onClick:i},r.createElement("i",{className:"fa fa-times"})),d&&r.createElement("i",{className:"".concat(d," post-icon")})))}}],o&&b(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);S.propTypes={clearButton:i().bool,place:i().object,defaultPlace:i().object,defaultPlaces:i().array,className:i().string,setPlace:i().func,clearPlace:i().func,container:i().object,preIconClass:i().oneOfType([i().string,i().bool]),postIconClass:i().oneOfType([i().string,i().bool]),label:i().string,withBoundaries:i().bool,config:i().object},S.defaultProps={preIconClass:"fa fa-map-marker"},t.A=S},70760:function(e,t,n){"use strict";var r=n(24577),o=n(995),i=n.n(o),a=n(3279),s=n(24561),c=n(28439),l=function(e){var t,n=e.photo,o=e.taxon,i=e.observation,l=e.width,u=e.height,f=e.showTaxonPhotoModal,d=e.className,p=e.size,m=e.backgroundSize,h=e.backgroundPosition,v=e.showTaxon,y=e.linkTaxon,b=e.onClickTaxon,g=e.config;v&&(t=r.createElement("div",{className:"photo-taxon"},r.createElement(s.A,{taxon:o,noParens:!0})),y&&(t=r.createElement("div",{className:"photo-taxon"},r.createElement(s.A,{taxon:o,noParens:!0,url:(0,c.F$)(o),onClick:function(e){return!(b&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),b(o),1))},user:g.currentUser}),r.createElement("a",{href:(0,c.F$)(o),className:"btn btn-link info-link"},r.createElement("i",{className:"fa fa-info-circle"})))));var _={};return l&&(_={width:l,maxWidth:2*l}),r.createElement("div",{className:"TaxonPhoto ".concat(d),style:_,key:"TaxonPhoto-taxon-".concat(o.id,"-photo-").concat(n.id)},r.createElement("div",{className:"photo-hover"},r.createElement("button",{type:"button",className:"btn btn-link modal-link",onClick:function(e){return e.preventDefault(),f(n,o,i),!1}},r.createElement("i",{className:"fa fa-search-plus"})),t),r.createElement(a.A,{src:n.photoUrl(p)||n.photoUrl("small"),low:n.photoUrl("small"),height:u,backgroundSize:m,backgroundPosition:h}))};l.propTypes={photo:i().object.isRequired,taxon:i().object.isRequired,showTaxonPhotoModal:i().func.isRequired,width:i().number,height:i().number.isRequired,observation:i().object,className:i().string,size:i().string,backgroundSize:i().string,backgroundPosition:i().string,showTaxon:i().bool,linkTaxon:i().bool,onClickTaxon:i().func,config:i().object},l.defaultProps={size:"medium",config:{}},t.A=l},28439:function(e,t,n){"use strict";n.d(t,{$s:function(){return f},F$:function(){return a},Qo:function(){return y},Sp:function(){return c},WM:function(){return l},av:function(){return s},fV:function(){return m},hD:function(){return v},j:function(){return h},k:function(){return u},p3:function(){return p},up:function(){return d}});var r=n(16154),o=n.n(r),i=(n(24577),n(42395)),a=function(e){return e?"/taxa/".concat(e.id,"-").concat(e.name.replace(/\W/g,"-")):null},s=function(e,t){var n="/taxa/".concat(e.id,"-").concat(e.name.replace(/\W/g,"-"),"/browse_photos");return t&&(n+="?".concat(o().map(t,(function(e,t){return"".concat(t,"=").concat(e)})).join("&"))),n},c=function(e){return"/people/".concat(e.login)},l=function(e){return"/places/".concat(e.slug||e.id)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.config,r={verifiable:!0,taxon_id:e.taxon.taxon?e.taxon.taxon.id:null,place_id:e.config.chosenPlace?e.config.chosenPlace.id:null,preferred_place_id:e.config.preferredPlace?e.config.preferredPlace.id:null};return e.config.chosenPlace&&(r.place_id=n.testingApiV2&&!t.forExplore?e.config.chosenPlace.uuid:e.config.chosenPlace.id),o().pickBy(r,(function(e){return!o().isNil(e)}))},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.separator||"",r=t.name||"";0===r.length&&(r=e.native_realname||r),0===r.length&&(r=e.native_username||r);var o,i,a=e.user||t.user||(t.observation?t.observation.user:null);if(a&&0===r.length&&(r=a.name||a.login||r),0===r.length&&e.attribution_name&&(r=e.attribution_name),0===r.length&&e.attribution){var s=e.attribution.match(/\(.+\) (.+?),/);s&&(r=s[1])}r=0===r.length?I18n.t("unknown"):r,o="pd"===e.license_code?I18n.t("copyright.no_known_copyright_restrictions",{name:r,license_name:I18n.t("public_domain")}):"cc0"===e.license_code?r===I18n.t("unknown")?"":I18n.t("by_user",{user:r}):"(c) ".concat(r);var c=I18n.t("all_rights_reserved");return e.license_code&&(o.length>0&&(o+=n),"cc0"===e.license_code?(i="http://creativecommons.org/publicdomain/zero/1.0/",c="".concat(I18n.t("copyright.no_rights_reserved")," (CC0)")):(i="pd"===e.license_code?"https://en.wikipedia.org/wiki/Public_domain":"http://creativecommons.org/licenses/".concat(e.license_code.replace(/cc-?/,""),"/4.0"),
c="".concat(I18n.t("some_rights_reserved"),"\n        (").concat(e.license_code.replace(/cc-?/,"CC ").toUpperCase(),")"))),(o&&o.length>0?"".concat(o," \u2013 "):"")+(i?"<a href=".concat(i," title=").concat(e.license_code,">").concat(c,"</a>"):c)},d=function(e){var t=I18n.t("list_with_n_items",{one:"-ONE-",two:"-TWO-",three:"-THREE-"}),n=I18n.t("list_with_two_items",{one:"-ONE-",two:"-TWO-"}),r=t.match(/-ONE-(.*)-TWO-/)[1],o=t.match(/-TWO-(.*)-THREE-/)[1],i=n.match(/-ONE-(.*)-TWO-/)[1];if(e.length<=2)return e.join(i);var a=e.pop();return"".concat(e.join(r)).concat(o).concat(a)},p=function(e){var t=e.name;if(e.rank_level>10)t="".concat(I18n.t("ranks.".concat(e.rank.toString().toLowerCase()))," ").concat(e.name);else if(e.rank_level<10){var n;if("variety"===e.rank?n="var.":"subspecies"===e.rank?n="ssp.":"form"===e.rank&&(n="f."),n){var r=e.name.split(" ");t=[r.slice(0,r.length-1).join(" "),n,r[r.length-1]].join(" ")}}var o=t;return e.preferred_common_name&&(o="".concat(iNatModels.Taxon.titleCaseName(e.preferred_common_name)," (").concat(t,")")),{state:{taxon:{id:e.id,name:e.name,preferred_common_name:e.preferred_common_name,iconic_taxon_name:e.iconic_taxon_name,rank_level:e.rank_level,rank:e.rank,is_active:e.is_active,ancestor_ids:e.ancestor_ids}},title:o,url:"".concat(a(e)).concat(window.location.search)}},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.currentUser,r=t.updateCurrentUser,o=t.observation,a=n||{prefers_captive_obs_maps:!1,prefers_gbif_layer_maps:!1,prefers_medialess_obs_maps:!1},s=a.prefers_captive_obs_maps,c=a.prefers_gbif_layer_maps,l=a.prefers_medialess_obs_maps;return{taxon:e,observationLayers:[{label:I18n.t("verifiable_observations"),verifiable:!0},{label:I18n.t("observations_without_media"),verifiable:!1,captive:!1,photos:!1,sounds:!1,color:i.lm.maroon,disabled:!l,observation_id:o&&o.obscured&&o.private_geojson&&o.id,onChange:n&&function(e){return r({prefers_medialess_obs_maps:e.target.checked})}},{label:I18n.t("captive_cultivated"),verifiable:!1,captive:!0,color:i.lm.blue,observation_id:o&&o.obscured&&o.private_geojson&&o.id,disabled:!s,onChange:n&&function(e){return r({prefers_captive_obs_maps:e.target.checked})}}],gbif:{disabled:!c,legendColor:"#F7005A",onChange:n&&function(e){return r({prefers_gbif_layer_maps:e.target.checked})}},places:!0,ranges:!0,geomodel_thresholded:!0}},h=function(){var e=window.location.hash.match(/^#([a-z-]+)-tab$/);if(e){var t=e[1];if(o().includes(["map","articles","highlights","interactions","taxonomy","status","similar","curation"],t))return t}return null},v={root:100,kingdom:70,subkingdom:67,phylum:60,subphylum:57,superclass:53,class:50,subclass:47,infraclass:45,superorder:43,order:40,suborder:37,infraorder:35,parvorder:34.5,zoosection:34,zoosubsection:33.5,superfamily:33,epifamily:32,family:30,subfamily:27,supertribe:26,tribe:25,subtribe:24,genus:20,genushybrid:20,subgenus:15,section:13,subsection:12,species:10,hybrid:10,subspecies:5,variety:5,form:5,infrahybrid:5},y=12},4256:function(e,t,n){n(40802),n(33791),e.exports=n(10251).Array.from},60680:function(e,t,n){n(11700),e.exports=n(10251).Array.isArray},72397:function(e,t,n){n(94863),e.exports=n(10251).Object.assign},8560:function(e,t,n){n(70010);var r=n(10251).Object;e.exports=function(e,t){return r.create(e,t)}},23890:function(e,t,n){n(47469),e.exports=n(10251).Object.entries},97119:function(e,t,n){n(26273),e.exports=n(10251).Object.setPrototypeOf},88562:function(e,t,n){n(2335),e.exports=n(10251).Object.values},63423:function(e,t,n){n(59230),e.exports=n(10251).parseInt},57834:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},78023:function(e,t,n){var r=n(85442);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},5025:function(e,t,n){var r=n(77048),o=n(41758),i=n(60474);e.exports=function(e){return function(t,n,a){var s,c=r(t),l=o(c.length),u=i(a,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},64923:function(e,t,n){var r=n(41950),o=n(32505)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},41950:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},10251:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},15632:function(e,t,n){"use strict";var r=n(50188),o=n(68819);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},93719:function(e,t,n){var r=n(57834);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},78463:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},88716:function(e,t,n){e.exports=!n(87199)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},75835:function(e,t,n){var r=n(85442),o=n(55931).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},63351:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},55926:function(e,t,n){var r=n(55931),o=n(10251),i=n(93719),a=n(1452),s=n(6934),c="prototype",l=function e(t,n,l){var u,f,d,p=t&e.F,m=t&e.G,h=t&e.S,v=t&e.P,y=t&e.B,b=t&e.W,g=m?o:o[n]||(o[n]={}),_=g[c],E=m?r:h?r[n]:(r[n]||{})[c];for(u in m&&(l=n),l)(f=!p&&E&&void 0!==E[u])&&s(g,u)||(d=f?E[u]:l[u],g[u]=m&&"function"!=typeof E[u]?l[u]:y&&f?i(d,r):b&&E[u]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(d):v&&"function"==typeof d?i(Function.call,d):d,v&&((g.virtual||(g.virtual={}))[u]=d,t&e.R&&_&&!_[u]&&a(_,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},87199:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},55931:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},6934:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},1452:function(e,t,n){var r=n(50188),o=n(68819);e.exports=n(88716)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},4941:function(e,t,n){var r=n(55931).document;e.exports=r&&r.documentElement},38701:function(e,t,n){e.exports=!n(88716)&&!n(87199)((function(){return 7!=Object.defineProperty(n(75835)("div"),"a",{get:function(){return 7}}).a}))},77634:function(e,t,n){var r=n(41950);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},52627:function(e,t,n){var r=n(26653),o=n(32505)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},83304:function(e,t,n){var r=n(41950);e.exports=Array.isArray||function(e){return"Array"==r(e)}},85442:function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){return"object"===t(e)?null!==e:"function"==typeof e}},64071:function(e,t,n){var r=n(78023);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},57563:function(e,t,n){"use strict";var r=n(48184),o=n(68819),i=n(17279),a={};n(1452)(a,n(32505)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},38416:function(e,t,n){"use strict";var r=n(76741),o=n(55926),i=n(7698),a=n(1452),s=n(26653),c=n(57563),l=n(17279),u=n(92826),f=n(32505)("iterator"),d=!([].keys&&"next"in[].keys()),p="keys",m="values",h=function(){return this};e.exports=function(e,t,n,v,y,b,g){c(n,t,v);var _,E,w,O=function(e){if(!d&&e in A)return A[e];switch(e){case p:case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",k=y==m,S=!1,A=e.prototype,j=A[f]||A["@@iterator"]||y&&A[y],C=j||O(y),P=y?k?O("entries"):C:void 0,N="Array"==t&&A.entries||j;if(N&&(w=u(N.call(new e)))!==Object.prototype&&w.next&&(l(w,x,!0),r||"function"==typeof w[f]||a(w,f,h)),k&&j&&j.name!==m&&(S=!0,C=function(){return j.call(this)}),r&&!g||!d&&!S&&A[f]||a(A,f,C),s[t]=C,s[x]=h,y)if(_={values:k?C:O(m),keys:b?C:O(p),entries:P},g)for(E in _)E in A||i(A,E,_[E]);else o(o.P+o.F*(d||S),t,_);return _}},53420:function(e,t,n){var r=n(32505)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},26653:function(e){e.exports={}},76741:function(e){e.exports=!0},20053:function(e,t,n){"use strict";var r=n(88716),o=n(26016),i=n(58111),a=n(65892),s=n(41013),c=n(77634),l=Object.assign;e.exports=!l||n(87199)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e){for(var n=s(e),l=arguments.length,u=1,f=i.f,d=a.f;l>u;)for(var p,m=c(arguments[u++]),h=f?o(m).concat(f(m)):o(m),v=h.length,y=0;v>y;)p=h[y++],r&&!d.call(m,p)||(n[p]=m[p]);return n}:l},48184:function(e,t,n){var r=n(78023),o=n(43619),i=n(63351),a=n(41959)("IE_PROTO"),s=function(){},c="prototype",l=function(){var e,t=n(75835)("iframe"),r=i.length;for(t.style.display="none",n(4941).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object</script>"),e.close(),l=e.F;r--;)delete l[c][i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},50188:function(e,t,n){var r=n(78023),o=n(38701),i=n(74505),a=Object.defineProperty;t.f=n(88716)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},43619:function(e,t,n){var r=n(50188),o=n(78023),i=n(26016);e.exports=n(88716)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},24270:function(e,t,n){var r=n(65892),o=n(68819),i=n(77048),a=n(74505),s=n(6934),c=n(38701),l=Object.getOwnPropertyDescriptor;t.f=n(88716)?l:function(e,t){if(e=i(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},58111:function(e,t){t.f=Object.getOwnPropertySymbols},92826:function(e,t,n){var r=n(6934),o=n(41013),i=n(41959)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},84836:function(e,t,n){var r=n(6934),o=n(77048),i=n(5025)(!1),a=n(41959)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)n!=a&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(l,n)||l.push(n));return l}},26016:function(e,t,n){var r=n(84836),o=n(63351);e.exports=Object.keys||function(e){return r(e,o)}},65892:function(e,t){t.f={}.propertyIsEnumerable},94085:function(e,t,n){var r=n(88716),o=n(26016),i=n(77048),a=n(65892).f;e.exports=function(e){return function(t){for(var n,s=i(t),c=o(s),l=c.length,u=0,f=[];l>u;)n=c[u++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},64009:function(e,t,n){var r=n(55931).parseInt,o=n(76282).trim,i=n(85900),a=/^[-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},68819:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7698:function(e,t,n){e.exports=n(1452)},97:function(e,t,n){var r=n(85442),o=n(78023),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(93719)(Function.call,n(24270).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},17279:function(e,t,n){var r=n(50188).f,o=n(6934),i=n(32505)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},41959:function(e,t,n){var r=n(66385)("keys"),o=n(42896);e.exports=function(e){return r[e]||(r[e]=o(e))}},66385:function(e,t,n){var r=n(10251),o=n(55931),i="__core-js_shared__",a=o[i]||(o[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(76741)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},66871:function(e,t,n){var r=n(13494),o=n(78463);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},76282:function(e,t,n){var r=n(55926),o=n(78463),i=n(87199),a=n(85900),s="["+a+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,n){var o={},s=i((function(){return!!a[e]()||"\u200b\x85"!="\u200b\x85"[e]()})),c=o[e]=s?t(f):a[e];n&&(o[n]=c),r(r.P+r.F*s,"String",o)},f=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},85900:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},60474:function(e,t,n){var r=n(13494),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},13494:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},77048:function(e,t,n){var r=n(77634),o=n(78463);e.exports=function(e){return r(o(e))}},41758:function(e,t,n){var r=n(13494),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},41013:function(e,t,n){var r=n(78463);e.exports=function(e){return Object(r(e))}},74505:function(e,t,n){var r=n(85442);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},42896:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},32505:function(e,t,n){var r=n(66385)("wks"),o=n(42896),i=n(55931).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},55177:function(e,t,n){var r=n(64923),o=n(32505)("iterator"),i=n(26653);e.exports=n(10251).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},33791:function(e,t,n){"use strict";var r=n(93719),o=n(55926),i=n(41013),a=n(64071),s=n(52627),c=n(41758),l=n(15632),u=n(55177);o(o.S+o.F*!n(53420)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,f,d=i(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,y=0,b=u(d);if(v&&(h=r(h,m>2?arguments[2]:void 0,2)),null==b||p==Array&&s(b))for(n=new p(t=c(d.length));t>y;y++)l(n,y,v?h(d[y],y):d[y]);else for(f=b.call(d),n=new p;!(o=f.next()).done;y++)l(n,y,v?a(f,h,[o.value,y],!0):o.value);return n.length=y,n}})},11700:function(e,t,n){var r=n(55926);r(r.S,"Array",{isArray:n(83304)})},94863:function(e,t,n){var r=n(55926);r(r.S+r.F,"Object",{assign:n(20053)})},70010:function(e,t,n){var r=n(55926);r(r.S,"Object",{create:n(48184)})},26273:function(e,t,n){var r=n(55926);r(r.S,"Object",{setPrototypeOf:n(97).set})},59230:function(e,t,n){var r=n(55926),o=n(64009);r(r.G+r.F*(parseInt!=o),{parseInt:o})},40802:function(e,t,n){"use strict";var r=n(66871)(!0);n(38416)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},47469:function(e,t,n){var r=n(55926),o=n(94085)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},2335:function(e,t,n){var r=n(55926),o=n(94085)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},44695:function(e,t,n){var r;!function(o){"use strict";function i(e,t){this.$target=o(e),this.opts=o.extend({},u,t,this.$target.data()),void 0===this.isOpen&&this._init()}var a,s,c,l,u={loadingNotice:"Loading image",errorNotice:"The image could not be loaded",errorDuration:2500,linkAttribute:"href",preventClicks:!0,beforeShow:o.noop,beforeHide:o.noop,onShow:o.noop,onHide:o.noop,onMove:o.noop,eventType:"mouseenter"};i.prototype._init=function(){this.$link=this.$target.find("a"),this.$image=this.$target.find("img"),this.$initializeEventTimestamp=new Event("easyzoom-initialized").timeStamp,this.$flyout=o('<div class="easyzoom-flyout" />'),this.$notice=o('<div class="easyzoom-notice" />'),this.$target.on({"mousemove.easyzoom touchmove.easyzoom":o.proxy(this._onMove,this)}),"click"===this.opts.eventType?(this.$flyout.on({"mousedown.easyzoom touchstart.easyzoom":o.proxy(this._onLeave,this)}),this.$image.on({"mousedown.easyzoom touchstart.easyzoom":o.proxy(this._onEnter,this)})):this.$target.on({"mousemove.easyzoom touchstart.easyzoom":o.proxy(this._onEnter,this),"mouseleave.easyzoom touchend.easyzoom":o.proxy(this._onLeave,this)}),this.opts.preventClicks&&this.$target.on("click.easyzoom",(function(e){e.preventDefault()}))},i.prototype.show=function(e,t){var n,r,o,i,c,l,u=this;if(!1!==this.opts.beforeShow.call(this)){if(!this.isReady)return this._loadImage(this.$link.attr(this.opts.linkAttribute),(function(){!u.isMouseOver&&t||u.show(e)}));this.$target.append(this.$flyout),n=this.$target.width(),r=this.$target.height(),o=this.$flyout.width(),i=this.$flyout.height(),c=this.$zoom.width()-o,l=this.$zoom.height()-i,c<0&&(c=0,this.$flyout.addClass("narrow")),l<0&&(l=0,this.$flyout.addClass("short")),requestAnimationFrame((function(){var t=u.$zoom[0].offsetWidth,o=u.$zoom[0].offsetHeight,i=u.$flyout[0].offsetWidth,c=u.$flyout[0].offsetHeight,l=Math.max(0,t-i),f=Math.max(0,o-c);a=l/n,s=f/r,u.isOpen=!0,u.opts.onShow.call(u),e&&u._move(e)}))}},i.prototype._onEnter=function(e){var t=e.originalEvent.touches;this.isMouseOver=!0,t&&1!=t.length||(e.preventDefault(),this.show(e,!0))},i.prototype._onMove=function(e){this.isOpen&&(e.preventDefault(),this._move(e))},i.prototype._onLeave=function(){this.isMouseOver=!1,this.isOpen&&this.hide()},i.prototype._onLoad=function(e){e.currentTarget.width&&(this.isReady=!0,this.$notice.detach(),this.$flyout.html(this.$zoom),this.$target.removeClass("is-loading").addClass("is-ready"),e.data.call&&e.data())},i.prototype._onError=function(){var e=this;this.$notice.text(this.opts.errorNotice),this.$target.removeClass("is-loading").addClass("is-error"),this.detachNotice=setTimeout((function(){e.$notice.detach(),e.detachNotice=null}),this.opts.errorDuration)},i.prototype._loadImage=function(e,t){var n=new Image;this.$target.addClass("is-loading").append(this.$notice.text(this.opts.loadingNotice)),this.$zoom=o(n).on("error",o.proxy(this._onError,this)).on("load",t,o.proxy(this._onLoad,this)),n.style.position="absolute",n.src=e},i.prototype._move=function(e){if(0===e.type.indexOf("touch")){var t=e.touches||e.originalEvent.touches;c=t[0].pageX,l=t[0].pageY}else c=e.pageX||c,l=e.pageY||l;var n=this.$target.offset(),r=l-n.top,o=c-n.left,i=Math.ceil(r*s),u=Math.ceil(o*a);if(u<0||i<0||u>void 0||i>void 0)this.hide();else{var f=-1*i,d=-1*u;this.$zoom.css({top:f,left:d}),this.opts.onMove.call(this,f,d)}},i.prototype.hide=function(){this.isOpen&&!1!==this.opts.beforeHide.call(this)&&(this.$flyout.detach(),this.isOpen=!1,this.opts.onHide.call(this))},i.prototype.swap=function(e,t,n){this.hide(),this.isReady=!1,this.detachNotice&&clearTimeout(this.detachNotice),this.$notice.parent().length&&this.$notice.detach(),this.$target.removeClass("is-loading is-ready is-error"),this.$image.attr({src:e,srcset:o.isArray(n)?n.join():n}),this.$link.attr(this.opts.linkAttribute,t)},i.prototype.teardown=function(){this.hide(),this.$target.off(".easyzoom").removeClass("is-loading is-ready is-error"),this.detachNotice&&clearTimeout(this.detachNotice),delete this.$link,delete this.$zoom,delete this.$image,delete this.$notice,delete this.$flyout,delete this.isOpen,delete this.isReady},o.fn.easyZoom=function(e){return this.each((function(){var t=o.data(this,"easyZoom");t?void 0===t.isOpen&&t._init():o.data(this,"easyZoom",new i(this,e))}))},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}(jQuery)},17907:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=(o=n(70731))&&o.__esModule?o:{default:o},s=n(65900);t.generateCSS=function e(t,n,r,o){var i=n.reduce(s.recursiveMerge),a={},l={},u={};return Object.keys(i).forEach((function(e){":"===e[0]?u[e]=i[e]:"@"===e[0]?l[e]=i[e]:a[e]=i[e]})),c(t,a,r,o)+Object.keys(u).map((function(e){return c(t+e,u[e],r,o)})).join("")+Object.keys(l).map((function(n){return n+"{"+e(t,[l[n]],r,o)+"}"})).join("")};var c=function(e,t,n,o){var c=function(e,t){var n={};return Object.keys(e).forEach((function(r){t&&t.hasOwnProperty(r)?n[r]=t[r](e[r]):n[r]=e[r]})),n}(t,n),l=(0,a.default)(c),u=(0,s.flatten)((0,s.objectToPairs)(l).map((function(e){var t,n,o=i(e,2),a=o[0],s=o[1];if(Array.isArray(s)){var c=(t=[],n=[],s.forEach((function(e){0===e.indexOf("-")?t.push(e):n.push(e)})),t.sort(),n.sort(),{v:t.concat(n).map((function(e){return[a,e]}))});if("object"===r(c))return c.v}return[[a,s]]}))).map((function(e){var t=i(e,2),n=t[0],r=t[1],a=(0,s.stringifyValue)(n,r),c=(0,s.kebabifyStyleName)(n)+":"+a+";";return!1===o?c:(0,s.importantify)(c)})).join("");return u?e+"{"+u+"}":""};t.generateCSSRuleset=c},25666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(65900),o=n(78345),i={create:function(e){return(0,r.mapObj)(e,(function(e){var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2),n=t[0],o=t[1];return[n,{_name:n+"_"+(0,r.hashObject)(o),_definition:o}]}))},rehydrate:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];(0,o.addRenderedClassNames)(e)}},a={renderStatic:function(e){return(0,o.reset)(),(0,o.startBuffering)(),{html:e(),css:{content:(0,o.flushToString)(),renderedClassNames:(0,o.getRenderedClassNames)()}}}},s={suppressStyleInjection:function(){(0,o.reset)(),(0,o.startBuffering)()},clearBufferAndResumeStyleInjection:function(){(0,o.reset)()}};t.default={StyleSheet:i,StyleSheetServer:a,StyleSheetTestUtils:s,css:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.injectAndGetClassName)(!0,t)}},e.exports=t.default},78345:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=(o=n(5129))&&o.__esModule?o:{default:o},a=n(17907),s=n(65900),c=null,l={fontFamily:function e(t){return Array.isArray(t)?t.map(e).join(","):"object"===r(t)?(m(t.fontFamily,"@font-face",[t],!1),'"'+t.fontFamily+'"'):t},animationName:function(e){if("object"!==r(e))return e;var t="keyframe_"+(0,s.hashObject)(e),n="@keyframes "+t+"{";return Object.keys(e).forEach((function(t){n+=(0,a.generateCSS)(t,[e[t]],l,!1)})),p(t,n+="}"),t}},u={},f="",d=!1,p=function(e,t){if(!u[e]){if(!d){if("undefined"==typeof document)throw new Error("Cannot automatically buffer without a document");d=!0,(0,i.default)(v)}f+=t,u[e]=!0}},m=function(e,t,n,r){if(!u[e]){var o=(0,a.generateCSS)(t,n,l,r);p(e,o)}};t.injectStyleOnce=m,t.reset=function(){f="",u={},d=!1,c=null},t.startBuffering=function(){if(d)throw new Error("Cannot buffer while already buffering");d=!0};var h=function(){d=!1;var e=f;return f="",e};t.flushToString=h;var v=function(){var e=h();e.length>0&&function(e){if(null==c&&null==(c=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(c=document.createElement("style")).type="text/css",c.setAttribute("data-aphrodite",""),t.appendChild(c)}c.styleSheet?c.styleSheet.cssText+=e:c.appendChild(document.createTextNode(e))}(e)};t.flushToStyleTag=v,t.getRenderedClassNames=function(){return Object.keys(u)},t.addRenderedClassNames=function(e){e.forEach((function(e){u[e]=!0}))},t.injectAndGetClassName=function(e,t){var n=t.filter((function(e){return e}));if(0===n.length)return"";var r=n.map((function(e){return e._name})).join("-o_O-");return m(r,"."+r,n.map((function(e){return e._definition})),e),r}},3476:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(78345),o=n(25666);t.StyleSheet=o.StyleSheet,t.StyleSheetServer=o.StyleSheetServer,t.StyleSheetTestUtils=o.StyleSheetTestUtils,t.css=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.injectAndGetClassName)(!1,t)}},65900:function(e,t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))};t.objectToPairs=o,t.mapObj=function(e,t){return n=o(e).map(t),r={},n.forEach((function(e){var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2),n=t[0],o=t[1];r[n]=o})),r;var n,r},t.flatten=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])};var i=/([A-Z])/g,a=/^ms-/;t.kebabifyStyleName=function(e){return function(e){return e.replace(i,"-$1").toLowerCase()}(e).replace(a,"-ms-")},t.recursiveMerge=function e(t,o){if("object"!==n(t))return o;var i=r({},t);return Object.keys(o).forEach((function(n){i.hasOwnProperty(n)?i[n]=e(t[n],o[n]):i[n]=o[n]})),i};var s={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c=["Webkit","ms","Moz","O"];Object.keys(s).forEach((function(e){c.forEach((function(t){s[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=s[e]}))})),t.stringifyValue=function(e,t){return"number"==typeof t?s[e]?""+t:t+"px":t},t.hashObject=function(e){return function(e){for(var t=e.length,n=t,r=0,o=void 0;t>=4;)o=1540483477*(65535&(o=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+((1540483477*(o>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),t-=4,++r;switch(t){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),((n^=n>>>15)>>>0).toString(36)}(JSON.stringify(e))};var l=/^([^:]+:.*?)( !important)?;$/;t.importantify=function(e){return e.replace(l,(function(e,t){return t+" !important;"}))}},72496:function(e,t,n){e.exports=n(3476)},5129:function(e,t,n){"use strict";function s(e){var t;(t=o.length?o.pop():new c).task=e,r(t)}function c(){this.task=null}var r=n(79336),o=[],i=[],a=r.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));e.exports=s,c.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(i.push(e),a())}finally{this.task=null,o[o.length]=this}}},79336:function(e,t,n){"use strict";function r(e){i.length||o(),i[i.length]=e}function s(){for(;a<i.length;){var e=a;if(a+=1,i[e].call(),a>1024){for(var t=0,n=i.length-a;t<n;t++)i[t]=i[t+a];i.length-=a,a=0}}i.length=0,a=0}function p(e){return function(){function r(){clearTimeout(t),clearInterval(n),e()}var t=setTimeout(r,0),n=setInterval(r,50)}}e.exports=r;var o,c,l,u,i=[],a=0,f=void 0!==n.g?n.g:self,d=f.MutationObserver||f.WebKitMutationObserver;"function"==typeof d?(c=1,l=new d(s),u=document.createTextNode(""),l.observe(u,{characterData:!0}),o=function(){c=-c,u.data=c}):o=p(s),r.requestFlush=o,r.makeRequestCallFromTimer=p},8006:function(e,t,n){function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var r;!function(){"use strict";function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(a.apply(null,n));else if("object"===r)for(var s in n)i.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}var i={}.hasOwnProperty;e.exports?e.exports=a:"object"===o(n.amdO)&&n.amdO?void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r):window.classNames=a}()},4686:function(e,t,n){function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var r,o,i,a;a=function(){var e=e||function(e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(25156)}catch(e){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){
var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var s=0;s<o;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),u=a.enc={},f=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},m=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,i);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(o,f);n=o.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(s.Hasher=m.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math);return e},"object"===s(t)?e.exports=t=a():(o=[],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i))},13030:function(e,t,n){function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var r,o,i,a;a=function(e){return function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(s[o]=n(t.pow(r,.5))),c[o]=n(t.pow(r,1/3)),o++),r++}();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],f=n[6],d=n[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var m=l[p-15],h=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,v=l[p-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[p]=h+l[p-7]+y+l[p-16]}var b=r&o^r&i^o&i,g=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&f)+c[p]+l[p];d=f,f=u,u=s,s=a+_|0,a=i,i=o,o=r,r=_+(g+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256},"object"===s(t)?e.exports=t=a(n(4686)):(o=[n(4686)],void 0===(i="function"==typeof(r=a)?r.apply(t,o):r)||(e.exports=i))},71568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.default)();try{return e.activeElement}catch(e){}};var r,o=(r=n(34020))&&r.__esModule?r:{default:r};e.exports=t.default},83224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r,o=(r=n(74621))&&r.__esModule?r:{default:r};e.exports=t.default},74621:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},68121:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasClass=t.removeClass=t.addClass=void 0;var r=a(n(83224)),o=a(n(37057)),i=a(n(74621));t.addClass=r.default,t.removeClass=o.default,t.hasClass=i.default,t.default={addClass:r.default,removeClass:o.default,hasClass:i.default}},37057:function(e){"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},36906:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n){var i=n.currentTarget,a=n.target;(0,o.default)(i,e).some((function(e){return(0,r.default)(e,a)}))&&t.call(this,n)}};var r=i(n(57048)),o=i(n(21813));e.exports=t.default},67822:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=s(n(65349)),o=s(n(54699)),i=s(n(36906)),a=s(n(39727));r.default,o.default,i.default,a.default,t.Ay={on:r.default,off:o.default,filter:i.default,listen:a.default}},39727:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(78210)),o=a(n(65349)),i=a(n(54699)),s=function(){};r.default&&(s=function(e,t,n,r){return(0,o.default)(e,t,n,r),function(){(0,i.default)(e,t,n,r)}}),t.default=s,e.exports=t.default},54699:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){};((r=n(78210))&&r.__esModule?r:{default:r}).default&&(o=document.addEventListener?function(e,t,n,r){return e.removeEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0),t.default=o,e.exports=t.default},65349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){};((r=n(78210))&&r.__esModule?r:{default:r}).default&&(o=document.addEventListener?function(e,t,n,r){return e.addEventListener(t,n,r||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,(function(t){(t=t||window.event).target=t.target||t.srcElement,t.currentTarget=e,n.call(e,t)}))}:void 0),t.default=o,e.exports=t.default},34020:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&e.ownerDocument||document},e.exports=t.default},57048:function(e,t,n){"use strict";function i(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=n(78210))&&r.__esModule?r:{default:r};t.default=o.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):i(e,t)}:i,e.exports=t.default},11001:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)},e.exports=t.default},69218:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.default)(e),n=(0,o.default)(t),a=t&&t.documentElement,s={top:0,left:0,height:0,width:0};if(t)return(0,r.default)(a,e)?(void 0!==e.getBoundingClientRect&&(s=e.getBoundingClientRect()),{top:s.top+(n.pageYOffset||a.scrollTop)-(a.clientTop||0),left:s.left+(n.pageXOffset||a.scrollLeft)-(a.clientLeft||0),width:(null==s.width?e.offsetWidth:s.width)||0,height:(null==s.height?e.offsetHeight:s.height)||0}):s};var r=a(n(57048)),o=a(n(11001)),i=a(n(34020));e.exports=t.default},83610:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.nodeName&&e.nodeName.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(0,r.default)(e),n=e&&e.offsetParent;n&&"html"!==a(e)&&"static"===(0,o.default)(n,"position");)n=n.offsetParent;return n||t.documentElement};var r=i(n(34020)),o=i(n(14888));e.exports=t.default},2746:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){var n,l={top:0,left:0};return"fixed"===(0,c.default)(e,"position")?n=e.getBoundingClientRect():(t=t||(0,i.default)(e),n=(0,o.default)(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(t)&&(l=(0,o.default)(t)),l.top+=parseInt((0,c.default)(t,"borderTopWidth"),10)-(0,a.default)(t)||0,l.left+=parseInt((0,c.default)(t,"borderLeftWidth"),10)-(0,s.default)(t)||0),r({},n,{top:n.top-l.top-(parseInt((0,c.default)(e,"marginTop"),10)||0),left:n.left-l.left-(parseInt((0,c.default)(e,"marginLeft"),10)||0)})};var o=l(n(69218)),i=l(n(83610)),a=l(n(47441)),s=l(n(14593)),c=l(n(14888));e.exports=t.default},21813:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var o,i="#"===t[0],a="."===t[0],s=i||a?t.slice(1):t;return n.test(s)?i?(o=(e=e.getElementById?e:document).getElementById(s))?[o]:[]:e.getElementsByClassName&&a?r(e.getElementsByClassName(s)):r(e.getElementsByTagName(t)):r(e.querySelectorAll(t))};var n=/^[\w-]*$/,r=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=t.default},14593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e);if(void 0===t)return n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft;n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t};var r,o=(r=n(11001))&&r.__esModule?r:{default:r};e.exports=t.default},47441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e);if(void 0===t)return n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop;n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t};var r,o=(r=n(11001))&&r.__esModule?r:{default:r};e.exports=t.default},9906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;"float"==(t=(0,o.default)(t))&&(t="styleFloat");var r=e.currentStyle[t]||null;if(null==r&&n&&n[t]&&(r=n[t]),a.test(r)&&!i.test(t)){var s=n.left,c=e.runtimeStyle,l=c&&c.left;l&&(c.left=e.currentStyle.left),n.left="fontSize"===t?"1em":r,r=n.pixelLeft+"px",n.left=s,l&&(c.left=l)}return r}}};var r,o=(r=n(26946))&&r.__esModule?r:{default:r},i=/^(top|right|bottom|left)$/,a=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=t.default},14888:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var l="",u="",f=t;if("string"==typeof t){if(void 0===n)return e.style[(0,r.default)(t)]||(0,i.default)(e).getPropertyValue((0,o.default)(t));(f={})[t]=n}Object.keys(f).forEach((function(t){var n=f[t];n||0===n?(0,c.default)(t)?u+=t+"("+n+") ":l+=(0,o.default)(t)+": "+n+";":(0,a.default)(e,(0,o.default)(t))})),u&&(l+=s.transform+": "+u+";"),e.style.cssText+=";"+l};var r=l(n(26946)),o=l(n(37590)),i=l(n(9906)),a=l(n(88537)),s=n(70339),c=l(n(53920));e.exports=t.default},88537:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)},e.exports=t.default},53920:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!(!e||!n.test(e))};var n=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.exports=t.default},70339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,o="transform",i=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=void 0,f=void 0,d=void 0,p=void 0,m=void 0,h=void 0;if(((r=n(78210))&&r.__esModule?r:{default:r}).default){var v=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,o=void 0,i="",a=0;a<n.length;a++){var s=n[a];if(s+"TransitionProperty"in e){i="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),o=t[s]("AnimationEnd");break}}return!r&&"transitionProperty"in e&&(r="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:r,prefix:i}}();i=v.prefix,t.transitionEnd=a=v.transitionEnd,t.animationEnd=s=v.animationEnd,t.transform=o=i+"-"+o,t.transitionProperty=c=i+"-transition-property",t.transitionDuration=l=i+"-transition-duration",t.transitionDelay=f=i+"-transition-delay",t.transitionTiming=u=i+"-transition-timing-function",t.animationName=d=i+"-animation-name",t.animationDuration=p=i+"-animation-duration",t.animationTiming=m=i+"-animation-delay",t.animationDelay=h=i+"-animation-timing-function"}t.transform=o,t.transitionProperty=c,t.transitionTiming=u,t.transitionDelay=f,t.transitionDuration=l,t.transitionEnd=a,t.animationName=d,t.animationDuration=p,t.animationTiming=m,t.animationDelay=h,t.animationEnd=s,t.default={transform:o,end:a,property:c,timing:u,delay:f,duration:l}},33835:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(n,(function(e,t){return t.toUpperCase()}))};var n=/-(.)/g;e.exports=t.default},26946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e.replace(i,"ms-"))};var r,o=(r=n(33835))&&r.__esModule?r:{default:r},i=/^-ms-/;e.exports=t.default},78223:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(n,"-$1").toLowerCase()};var n=/([A-Z])/g;e.exports=t.default},37590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e).replace(i,"-ms-")};var r,o=(r=n(78223))&&r.__esModule?r:{default:r},i=/^ms-/;e.exports=t.default},78210:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},56856:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((!i&&0!==i||e)&&o.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return i};var r,o=(r=n(78210))&&r.__esModule?r:{default:r},i=void 0;e.exports=t.default},88318:function(e,t,n){var r,o;void 0===(o="function"==typeof(r=function(){function e(e,t){return function(n,r,o,i){n[e]?n[e](r,o,i):n[t]&&n[t]("on"+r,o)}}return{add:e("addEventListener","attachEvent"),remove:e("removeEventListener","detachEvent")}})?r.call(t,n,t,e):r)||(e.exports=o)},61082:function(e,t,n){function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var r;!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};"object"===o(n.amdO)&&n.amdO?void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r):e.exports?e.exports=a:window.ExecutionEnvironment=a}()},39646:function(e){"use strict";var t=/[A-Z]/g,n=/^ms-/,r={};e.exports=function(e){return e in r?r[e]:r[e]=e.replace(t,"-$&").toLowerCase().replace(n,"-ms-")}},56566:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&t.indexOf("calc(")>-1)return(0,r.default)(e,t,(function(e,t){return t.replace(/calc\(/g,e+"calc(")}))};var r=i(n(45337)),o=i(n(33121));e.exports=t.default},46693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&i[t])return(0,o.default)(e,t)};var r,o=(r=n(45337))&&r.__esModule?r:{default:r},i={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},46308:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&n[t])return{display:["-webkit-box","-moz-box","-ms-"+t+"box","-webkit-"+t,t]}};var n={flex:!0,"inline-flex":!0};e.exports=t.default},34317:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(r[e])return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r[e],n[t]||t)};var n={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},r={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msPreferredSize"};e.exports=t.default},16382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"flexDirection"===e&&"string"==typeof t?{WebkitBoxOrient:t.indexOf("column")>-1?"vertical":"horizontal",WebkitBoxDirection:t.indexOf("reverse")>-1?"reverse":"normal"}:r[e]?function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r[e],n[t]||t):void 0};var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},23559:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&!(0,o.default)(t)&&null!==t.match(a))return(0,r.default)(e,t)};var r=i(n(45337)),o=i(n(33121)),a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},34936:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return{position:["-webkit-sticky","sticky"]}},e.exports=t.default},8341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i[e]&&a[t])return(0,o.default)(e,t)};var r,o=(r=n(45337))&&r.__esModule?r:{default:r},i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},a={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},76224:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"==typeof t&&l[e]){var n,s=function(e){if((0,i.default)(e))return e;var t=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g);return t.forEach((function(e,n){t[n]=Object.keys(a.default).reduce((function(t,n){var o="-"+n.toLowerCase()+"-";return Object.keys(a.default[n]).forEach((function(n){var i=(0,r.default)(n);e.indexOf(i)>-1&&"order"!==i&&(t=e.replace(i,o+i)+","+t)})),t}),e)})),t.join(",")}(t),u=s.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return null===e.match(/-moz-|-ms-/)})).join(",");return e.indexOf("Webkit")>-1?c({},e,u):(c(n={},"Webkit"+(0,o.default)(e),u),c(n,e,s),n)}};var r=s(n(39646)),o=s(n(46612)),i=s(n(33121)),a=s(n(36722)),l={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0};e.exports=t.default},41835:function(e,t,n){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return Object.keys(t).forEach((function(n){var i=t[n];i instanceof Object&&!Array.isArray(i)?t[n]=e(i):Object.keys(r.default).forEach((function(e){r.default[e][n]&&(t[e+(0,o.default)(n)]=i)}))})),Object.keys(t).forEach((function(e){[].concat(t[e]).forEach((function(n){v.forEach((function(r){return function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];Object.keys(t).forEach((function(n){var r=e[n];Array.isArray(r)?[].concat(t[n]).forEach((function(t){var o=r.indexOf(t);o>-1&&e[n].splice(o,1),e[n].push(t)})):e[n]=t[n]}))}(t,r(e,n))}))}))})),(0,i.default)(t)};var r=h(n(36722)),o=h(n(46612)),i=h(n(46017)),a=h(n(34936)),s=h(n(56566)),c=h(n(46693)),l=h(n(46308)),u=h(n(8341)),f=h(n(23559)),d=h(n(76224)),p=h(n(34317)),m=h(n(16382)),v=[a.default,s.default,c.default,u.default,f.default,d.default,p.default,m.default,l.default];e.exports=t.default},36722:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Webkit:{transform:!0,transformOrigin:!0,transformOriginX:!0,transformOriginY:!0,backfaceVisibility:!0,perspective:!0,perspectiveOrigin:!0,transformStyle:!0,transformOriginZ:!0,animation:!0,animationDelay:!0,animationDirection:!0,animationFillMode:!0,animationDuration:!0,animationIterationCount:!0,animationName:!0,animationPlayState:!0,animationTimingFunction:!0,appearance:!0,userSelect:!0,fontKerning:!0,textEmphasisPosition:!0,textEmphasis:!0,textEmphasisStyle:!0,textEmphasisColor:!0,boxDecorationBreak:!0,clipPath:!0,maskImage:!0,maskMode:!0,maskRepeat:!0,maskPosition:!0,maskClip:!0,maskOrigin:!0,maskSize:!0,maskComposite:!0,mask:!0,maskBorderSource:!0,maskBorderMode:!0,maskBorderSlice:!0,maskBorderWidth:!0,maskBorderOutset:!0,maskBorderRepeat:!0,maskBorder:!0,maskType:!0,textDecorationStyle:!0,textDecorationSkip:!0,textDecorationLine:!0,textDecorationColor:!0,filter:!0,fontFeatureSettings:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,columnCount:!0,columnFill:!0,columnGap:!0,columnRule:!0,columnRuleColor:!0,columnRuleStyle:!0,columnRuleWidth:!0,columns:!0,columnSpan:!0,columnWidth:!0,flex:!0,flexBasis:!0,flexDirection:!0,flexGrow:!0,flexFlow:!0,flexShrink:!0,flexWrap:!0,alignContent:!0,alignItems:!0,alignSelf:!0,justifyContent:!0,order:!0,transition:!0,transitionDelay:!0,transitionDuration:!0,transitionProperty:!0,transitionTimingFunction:!0,backdropFilter:!0,scrollSnapType:!0,scrollSnapPointsX:!0,scrollSnapPointsY:!0,scrollSnapDestination:!0,scrollSnapCoordinate:!0,shapeImageThreshold:!0,shapeImageMargin:!0,shapeImageOutside:!0,hyphens:!0,flowInto:!0,flowFrom:!0,regionFragment:!0,textSizeAdjust:!0},Moz:{appearance:!0,userSelect:!0,boxSizing:!0,textAlignLast:!0,textDecorationStyle:!0,textDecorationSkip:!0,textDecorationLine:!0,textDecorationColor:!0,tabSize:!0,hyphens:!0,fontFeatureSettings:!0,breakAfter:!0,breakBefore:!0,breakInside:!0,columnCount:!0,columnFill:!0,columnGap:!0,columnRule:!0,columnRuleColor:!0,columnRuleStyle:!0,columnRuleWidth:!0,columns:!0,columnSpan:!0,columnWidth:!0},ms:{flex:!0,flexBasis:!1,flexDirection:!0,flexGrow:!1,flexFlow:!0,flexShrink:!1,flexWrap:!0,alignContent:!1,alignItems:!1,alignSelf:!1,justifyContent:!1,order:!1,transform:!0,transformOrigin:!0,transformOriginX:!0,transformOriginY:!0,userSelect:!0,wrapFlow:!0,wrapThrough:!0,wrapMargin:!0,scrollSnapType:!0,scrollSnapPointsX:!0,scrollSnapPointsY:!0,scrollSnapDestination:!0,scrollSnapCoordinate:!0,touchAction:!0,hyphens:!0,flowInto:!0,flowFrom:!0,breakBefore:!0,breakAfter:!0,breakInside:!0,regionFragment:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridTemplate:!0,gridAutoColumns:!0,gridAutoRows:!0,gridAutoFlow:!0,grid:!0,gridRowStart:!0,gridColumnStart:!0,gridRowEnd:!0,gridRow:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnGap:!0,gridRowGap:!0,gridArea:!0,gridGap:!0,textSizeAdjust:!0}},e.exports=t.default},46612:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},86411:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return null!==e.match(/^(Webkit|Moz|O|ms)/)},e.exports=t.default},33121:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Array.isArray(e)&&(e=e.join(",")),null!==e.match(/-webkit-|-moz-|-ms-/)},e.exports=t.default},45337:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?function(e,t){return e+t}:arguments[2];return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,["-webkit-","-moz-",""].map((function(e){return n(e,t)})))},e.exports=t.default},46017:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).sort((function(e,t){return(0,o.default)(e)&&!(0,o.default)(t)?-1:!(0,o.default)(e)&&(0,o.default)(t)?1:0})).reduce((function(t,n){return t[n]=e[n],t}),{})};var r,o=(r=n(86411))&&r.__esModule?r:{default:r};e.exports=t.default},70731:function(e,t,n){e.exports=n(41835)},36668:function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){if(e&&"object"===n(e)){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var r,a=String(e);return(r=o[a.toLowerCase()])?r:(r=i[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}r.isEventKey=function(e,t){if(e&&"object"===n(e)){var r=e.which||e.keyCode||e.charCode;if(null==r)return!1;if("string"==typeof t){var a;if(a=o[t.toLowerCase()])return a===r;if(a=i[t.toLowerCase()])return a===r}else if("number"==typeof t)return t===r;return!1}};var o=(t=e.exports=r).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)o[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)o[a-48]=a;for(a=1;a<13;a++)o["f"+a]=a+111;for(a=0;a<10;a++)o["numpad "+a]=a+96;var s=t.names=t.title={};for(a in o)s[o[a]]=a;for(var c in i)o[c]=i[c]},6738:function(e,t,n){var r;!function(o,i){function p(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function v(e,t,n){return n||(n=function(){if(!s)for(var e in s={},c)e>95&&e<112||c.hasOwnProperty(e)&&(s[c[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function y(e,t){var n,r,o,i=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),o=0;o<n.length;++o)r=n[o],f[r]&&(r=f[r]),t&&"keypress"!=t&&u[r]&&(r=u[r],i.push("shift")),h(r)&&i.push(r);return{key:r,modifiers:i,action:t=v(r,i,t)}}function b(e,t){return null!==e&&e!==i&&(e===t||b(e.parentNode,t))}function g(e){function c(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function l(e,n,o,i,a,s){var c,l,u,f,d=[],p=o.type;if(!t._callbacks[e])return[];for("keyup"==p&&h(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)if(l=t._callbacks[e][c],(i||!l.seq||r[l.seq]==l.level)&&p==l.action&&("keypress"==p&&!o.metaKey&&!o.ctrlKey||(u=n,f=l.modifiers,u.sort().join(",")===f.sort().join(",")))){var m=!i&&l.combo==a,v=i&&l.seq==i&&l.level==s;(m||v)&&t._callbacks[e].splice(c,1),d.push(l)}return d}function u(e,n,r,o){t.stopCallback(n,n.target||n.srcElement,r,o)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function f(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=m(e);n&&("keyup"!=e.type||o!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function d(e,i,a,f,p){t._directMap[e+":"+a]=i;var h,v=(e=e.replace(/\s+/g," ")).split(" ");v.length>1?function(e,t,i,a){function l(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(c,1e3)}}function f(t){u(i,t,e),"keyup"!==a&&(o=m(t)),setTimeout(c,10)}r[e]=0;for(var p=0;p<t.length;++p){var h=p+1===t.length?f:l(a||y(t[p+1]).action);d(t[p],h,a,e,p)}}(e,v,i,a):(h=y(e,a),t._callbacks[h.key]=t._callbacks[h.key]||[],l(h.key,h.modifiers,{type:h.action},f,e,p),t._callbacks[h.key][f?"unshift":"push"]({callback:i,modifiers:h.modifiers,action:h.action,seq:f,level:p,combo:e}))}var t=this;if(e=e||i,!(t instanceof g))return new g(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},o=!1,a=!1,s=!1;t._handleKey=function(e,t,n){var r,o=l(e,t,n),i={},f=0,d=!1;for(r=0;r<o.length;++r)o[r].seq&&(f=Math.max(f,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!=f)continue;d=!0,i[o[r].seq]=1,u(o[r].callback,n,o[r].combo,o[r].seq)}else d||u(o[r].callback,n,o[r].combo);var p="keypress"==n.type&&a;n.type!=s||h(e)||p||c(i),a=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)d(e[r],t,n)},p(e,"keypress",f),p(e,"keydown",f),p(e,"keyup",f)}if(o){for(var s,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",
45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)c[111+d]="f"+d;for(d=0;d<=9;++d)c[d+96]=d.toString();g.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},g.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},g.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},g.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},g.prototype.stopCallback=function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&!b(t,this.target)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},g.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},g.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);s=null},g.init=function(){var e=g(i);for(var t in e)"_"!==t.charAt(0)&&(g[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},g.init(),o.Mousetrap=g,e.exports&&(e.exports=g),void 0===(r=function(){return g}.call(t,n,t,e))||(e.exports=r)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},32120:function(e,t,n){function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var r,o,i;i=function(){"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tolerance:0};if(!e)throw new Error("You should specify the element you want to test");"string"==typeof e&&(e=document.querySelector(e));var n=e.getBoundingClientRect();return n.bottom-t.tolerance>0&&n.right-t.tolerance>0&&n.left+t.tolerance<(window.innerWidth||document.documentElement.clientWidth)&&n.top+t.tolerance<(window.innerHeight||document.documentElement.clientHeight)}function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tolerance:0,container:""};if(!e)throw new Error("You should specify the element you want to test");if("string"==typeof e&&(e=document.querySelector(e)),"string"==typeof t&&(t={tolerance:0,container:document.querySelector(t)}),"string"==typeof t.container&&(t.container=document.querySelector(t.container)),t instanceof HTMLElement&&(t={tolerance:0,container:t}),!t.container)throw new Error("You should specify a container element");var n=t.container.getBoundingClientRect();return e.offsetTop+e.clientHeight-t.tolerance>t.container.scrollTop&&e.offsetLeft+e.clientWidth-t.tolerance>t.container.scrollLeft&&e.offsetLeft+t.tolerance<n.width+t.container.scrollLeft&&e.offsetTop+t.tolerance<n.height+t.container.scrollTop}function n(){var e,t,n,r=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tolerance:0,debounce:100,container:window};this.options={},this.trackedElements={},Object.defineProperties(this.options,{container:{configurable:!1,enumerable:!1,get:function(){var e=void 0;return"string"==typeof o.container?e=document.querySelector(o.container):o.container instanceof HTMLElement&&(e=o.container),e||window},set:function(e){o.container=e}},debounce:{get:function(){return parseInt(o.debounce,10)||100},set:function(e){o.debounce=e}},tolerance:{get:function(){return parseInt(o.tolerance,10)||0},set:function(e){o.tolerance=e}}}),Object.defineProperty(this,"_scroll",{enumerable:!1,configurable:!1,writable:!1,value:this._debouncedScroll.call(this)}),e=document.querySelector("body"),t=function(){Object.keys(r.trackedElements).forEach((function(e){r.on("enter",e),r.on("leave",e)}))},(n=window.MutationObserver||window.WebKitMutationObserver)?new n(t).observe(e,{childList:!0,subtree:!0}):(e.addEventListener("DOMNodeInserted",t,!1),e.addEventListener("DOMNodeRemoved",t,!1)),this.attach()}return Object.defineProperties(n.prototype,{_debouncedScroll:{configurable:!1,writable:!1,enumerable:!1,value:function(){var n=this,r=void 0;return function(){clearTimeout(r),r=setTimeout((function(){!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tolerance:0},o=Object.keys(n),i=void 0;o.length&&(i=r.container===window?e:t,o.forEach((function(e){n[e].nodes.forEach((function(t){if(i(t.node,r)?(t.wasVisible=t.isVisible,t.isVisible=!0):(t.wasVisible=t.isVisible,t.isVisible=!1),!0===t.isVisible&&!1===t.wasVisible){if(!n[e].enter)return;Object.keys(n[e].enter).forEach((function(r){"function"==typeof n[e].enter[r]&&n[e].enter[r](t.node,"enter")}))}if(!1===t.isVisible&&!0===t.wasVisible){if(!n[e].leave)return;Object.keys(n[e].leave).forEach((function(r){"function"==typeof n[e].leave[r]&&n[e].leave[r](t.node,"leave")}))}}))})))}(n.trackedElements,n.options)}),n.options.debounce)}}},attach:{configurable:!1,writable:!1,enumerable:!1,value:function(){var e=this.options.container;e instanceof HTMLElement&&"static"===window.getComputedStyle(e).position&&(e.style.position="relative"),e.addEventListener("scroll",this._scroll),window.addEventListener("resize",this._scroll),this._scroll(),this.attached=!0}},destroy:{configurable:!1,writable:!1,enumerable:!1,value:function(){this.options.container.removeEventListener("scroll",this._scroll),window.removeEventListener("resize",this._scroll),this.attached=!1}},off:{configurable:!1,writable:!1,enumerable:!1,value:function(e,t,n){var r=Object.keys(this.trackedElements[t].enter||{}),o=Object.keys(this.trackedElements[t].leave||{});if({}.hasOwnProperty.call(this.trackedElements,t))if(n){if(this.trackedElements[t][e]){var i="function"==typeof n?n.name:n;delete this.trackedElements[t][e][i]}}else delete this.trackedElements[t][e];r.length||o.length||delete this.trackedElements[t]}},on:{configurable:!1,writable:!1,enumerable:!1,value:function(e,t,n){if(!e)throw new Error("No event given. Choose either enter or leave");if(!t)throw new Error("No selector to track");if(["enter","leave"].indexOf(e)<0)throw new Error(e+" event is not supported");({}).hasOwnProperty.call(this.trackedElements,t)||(this.trackedElements[t]={}),this.trackedElements[t].nodes=[];for(var r=0,o=document.querySelectorAll(t);r<o.length;r++){var i={isVisible:!1,wasVisible:!1,node:o[r]};this.trackedElements[t].nodes.push(i)}"function"==typeof n&&(this.trackedElements[t][e]||(this.trackedElements[t][e]={}),this.trackedElements[t][e][n.name||"anonymous"]=n)}}}),n.check=e,n},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o)},2467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=null;return t.forEach((function(e){if(null==o){var t=e.apply(void 0,n);null!=t&&(o=t)}})),o}))};var r,o=(r=n(69444))&&r.__esModule?r:{default:r};e.exports=t.default},18644:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},i=s(n(24577)),a=s(n(69444));t.default=(0,a.default)((function(e,t,n,r,a){var s=e[t],c=void 0===s?"undefined":o(s);return i.default.isValidElement(s)?new Error("Invalid "+r+" `"+a+"` of type ReactElement supplied to `"+n+"`, expected a ReactComponent or a DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===c&&"function"==typeof s.render||1===s.nodeType?null:new Error("Invalid "+r+" `"+a+"` of value `"+s+"` supplied to `"+n+"`, expected a ReactComponent or a DOMElement.")})),e.exports=t.default},21147:function(e,t,n){"use strict";function a(e,t){return function(n,r,a,s,c){var l=a||"<<anonymous>>",u=c||r;if(null!=n[r]){var f=a+"."+r;(0,o.default)(i[f],"The "+s+" `"+u+"` of `"+l+"` is deprecated. "+t+"."),i[f]=!0}for(var d=arguments.length,p=Array(d>5?d-5:0),m=5;m<d;m++)p[m-5]=arguments[m];return e.apply(void 0,[n,r,a,s,c].concat(p))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r,o=(r=n(59158))&&r.__esModule?r:{default:r},i={};a._resetWarned=function(){i={}},e.exports=t.default},94220:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(24577)),o=n(15876),i=a(n(69444));t.default=(0,i.default)((function(e,t,n,i,a){var s=e[t];return r.default.isValidElement(s)?new Error("Invalid "+i+" `"+a+"` of type ReactElement supplied to `"+n+"`,expected an element type (a string , component class, or function component)."):(0,o.isValidElementType)(s)?null:new Error("Invalid "+i+" `"+a+"` of value `"+s+"` supplied to `"+n+"`, expected an element type (a string , component class, or function component).")})),e.exports=t.default},2120:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,r,o,i){var a=r||"<<anonymous>>",s=i||n;if(null==t[n])return new Error("The "+o+" `"+s+"` is required to make `"+a+"` accessible for users of assistive technologies such as screen readers.");for(var c=arguments.length,l=Array(c>5?c-5:0),u=5;u<c;u++)l[u-5]=arguments[u];return e.apply(void 0,[t,n,r,o,i].concat(l))}},e.exports=t.default},69444:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,o,i,a){var s=o||"<<anonymous>>",c=a||r;if(null==n[r])return t?new Error("Required "+i+" `"+c+"` was not specified in `"+s+"`."):null;for(var l=arguments.length,u=Array(l>6?l-6:0),f=6;f<l;f++)u[f-6]=arguments[f];return e.apply(void 0,[n,r,s,i,c].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},39299:function(e){"use strict";e.exports={MODE_DATE:"date",MODE_DATETIME:"datetime",MODE_TIME:"time",SIZE_SMALL:"sm",SIZE_MEDIUM:"md",SIZE_LARGE:"lg"}},61549:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function p(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(24577),s=p(a),c=p(n(995)),l=p(n(92276)),u=p(n(8006)),f=p(n(52155)),d=p(n(39299)),m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resolvePropsInputFormat=function(){if(n.props.inputFormat)return n.props.inputFormat;switch(n.props.mode){case d.default.MODE_TIME:return"h:mm A";case d.default.MODE_DATE:return"MM/DD/YY";default:return"MM/DD/YY h:mm A"}},n.state={showDatePicker:n.props.mode!==d.default.MODE_TIME,showTimePicker:n.props.mode===d.default.MODE_TIME,inputFormat:n.resolvePropsInputFormat(),buttonIcon:n.props.mode===d.default.MODE_TIME?"glyphicon-time":"glyphicon-calendar",widgetStyle:{display:"block",position:"absolute",left:-9999,zIndex:"9999 !important"},viewDate:(0,l.default)(n.props.dateTime,n.props.format,!0).startOf("month"),selectedDate:(0,l.default)(n.props.dateTime,n.props.format,!0),inputValue:void 0!==n.props.defaultText?n.props.defaultText:(0,l.default)(n.props.dateTime,n.props.format,!0).format(n.resolvePropsInputFormat())},n.componentWillReceiveProps=function(e){var t={};return e.inputFormat!==n.props.inputFormat&&(t.inputFormat=e.inputFormat,t.inputValue=(0,l.default)(e.dateTime,e.format,!0).format(e.inputFormat)),e.dateTime!==n.props.dateTime&&(0,l.default)(e.dateTime,e.format,!0).isValid()&&(t.viewDate=(0,l.default)(e.dateTime,e.format,!0).startOf("month"),t.selectedDate=(0,l.default)(e.dateTime,e.format,!0),t.inputValue=(0,l.default)(e.dateTime,e.format,!0).format(e.inputFormat?e.inputFormat:n.state.inputFormat)),n.setState(t)},n.onChange=function(e){var t=null==e.target?e:e.target.value;return(0,l.default)(t,n.state.inputFormat,!0).isValid()&&n.setState({selectedDate:(0,l.default)(t,n.state.inputFormat,!0),viewDate:(0,l.default)(t,n.state.inputFormat,!0).startOf("month")}),n.setState({inputValue:t},(function(){return this.props.onChange((0,l.default)(this.state.inputValue,this.state.inputFormat,!0).format(this.props.format),t)}))},n.getValue=function(){return(0,l.default)(n.state.inputValue,n.props.inputFormat,!0).format(n.props.format)},n.setSelectedDate=function(e){var r,t=e.target;if(t.className&&!t.className.match(/disabled/g))return r=t.className.indexOf("new")>=0?n.state.viewDate.month()+1:t.className.indexOf("old")>=0?n.state.viewDate.month()-1:n.state.viewDate.month(),n.setState({selectedDate:n.state.viewDate.clone().month(r).date(parseInt(e.target.innerHTML)).hour(n.state.selectedDate.hours()).minute(n.state.selectedDate.minutes())},(function(){return this.closePicker(),this.props.onChange(this.state.selectedDate.format(this.props.format)),this.setState({inputValue:this.state.selectedDate.format(this.state.inputFormat)})}))},n.setSelectedHour=function(e){return n.setState({selectedDate:n.state.selectedDate.clone().hour(parseInt(e.target.innerHTML)).minute(n.state.selectedDate.minutes())},(function(){return this.closePicker(),this.props.onChange(this.state.selectedDate.format(this.props.format)),this.setState({inputValue:this.state.selectedDate.format(this.state.inputFormat)})}))},n.setSelectedMinute=function(e){return n.setState({selectedDate:n.state.selectedDate.clone().hour(n.state.selectedDate.hours()).minute(parseInt(e.target.innerHTML))},(function(){return this.closePicker(),this.props.onChange(this.state.selectedDate.format(this.props.format)),this.setState({inputValue:this.state.selectedDate.format(this.state.inputFormat)})}))},n.setViewMonth=function(e){return n.setState({viewDate:n.state.viewDate.clone().month(e)})},n.setViewYear=function(e){return n.setState({viewDate:n.state.viewDate.clone().year(e)})},n.addMinute=function(){return n.setState({selectedDate:n.state.selectedDate.clone().add(1,"minutes")},(function(){return this.props.onChange(this.state.selectedDate.format(this.props.format)),this.setState({inputValue:this.state.selectedDate.format(this.resolvePropsInputFormat())})}))},n.addHour=function(){return n.setState({selectedDate:n.state.selectedDate.clone().add(1,"hours")},(function(){return this.props.onChange(this.state.selectedDate.format(this.props.format)),this.setState({inputValue:this.state.selectedDate.format(this.resolvePropsInputFormat())})}))},n.addMonth=function(){return n.setState({viewDate:n.state.viewDate.add(1,"months")})},n.addYear=function(){return n.setState({viewDate:n.state.viewDate.add(1,"years")})},n.addDecade=function(){return n.setState({viewDate:n.state.viewDate.add(10,"years")})},n.subtractMinute=function(){return n.setState({selectedDate:n.state.selectedDate.clone().subtract(1,"minutes")},(function(){return n.props.onChange(n.state.selectedDate.format(n.props.format)),n.setState({inputValue:n.state.selectedDate.format(n.resolvePropsInputFormat())})}))},n.subtractHour=function(){return n.setState({selectedDate:n.state.selectedDate.clone().subtract(1,"hours")},(function(){return n.props.onChange(n.state.selectedDate.format(n.props.format)),n.setState({inputValue:n.state.selectedDate.format(n.resolvePropsInputFormat())})}))},n.subtractMonth=function(){return n.setState({viewDate:n.state.viewDate.subtract(1,"months")})},n.subtractYear=function(){return n.setState({viewDate:n.state.viewDate.subtract(1,"years")})},n.subtractDecade=function(){return n.setState({viewDate:n.state.viewDate.subtract(10,"years")})},n.togglePeriod=function(){return n.state.selectedDate.hour()>12?n.onChange(n.state.selectedDate.clone().subtract(12,"hours").format(n.state.inputFormat)):n.onChange(n.state.selectedDate.clone().add(12,"hours").format(n.state.inputFormat))},n.togglePicker=function(){return n.setState({showDatePicker:!n.state.showDatePicker,showTimePicker:!n.state.showTimePicker})},n.onClick=function(){var e=void 0,t=void 0,r=void 0,o=void 0,i=void 0;return n.state.showPicker?n.closePicker():(n.setState({showPicker:!0}),e={"bootstrap-datetimepicker-widget":!0,"dropdown-menu":!0},(r={top:(t=n.dtpbutton.current.getBoundingClientRect()).top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}).top=r.top+n.datetimepicker.current.offsetHeight,o=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,"top"===("up"===n.props.direction?"top":"bottom"===n.props.direction?"bottom":"auto"===n.props.direction?r.top+n.widget.current.offsetHeight>window.offsetHeight+o&&n.widget.current.offsetHeight+n.datetimepicker.current.offsetHeight>r.top?"top":"bottom":void 0)?(r.top=-n.widget.current.offsetHeight-n.clientHeight-2,e.top=!0,e.bottom=!1,e["pull-right"]=!0):(r.top=40,e.top=!1,e.bottom=!0,e["pull-right"]=!0),i={display:"block",position:"absolute",top:r.top,left:"auto",right:40},n.setState({widgetStyle:i,widgetClasses:e}))},n.closePicker=function(){var e=o({},n.state.widgetStyle);return e.left=-9999,e.display="none",n.setState({showPicker:!1,widgetStyle:e})},n.size=function(){switch(n.props.size){case d.default.SIZE_SMALL:return"form-group-sm";case d.default.SIZE_LARGE:return"form-group-lg"}return""},n.renderOverlay=function(){var e={position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:""+n.props.zIndex};return n.state.showPicker?s.default.createElement("div",{className:"bootstrap-datetimepicker-overlay",onClick:n.closePicker,style:e}):s.default.createElement("span",null)},n.widget=s.default.createRef(),n.datetimepicker=s.default.createRef(),n.dtpbutton=s.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",null,this.renderOverlay(),s.default.createElement(f.default,{addDecade:this.addDecade,addHour:this.addHour,addMinute:this.addMinute,addMonth:this.addMonth,addYear:this.addYear,daysOfWeekDisabled:this.props.daysOfWeekDisabled,maxDate:this.props.maxDate,minDate:this.props.minDate,mode:this.props.mode,ref:this.widget,selectedDate:this.state.selectedDate,setSelectedDate:this.setSelectedDate,setSelectedHour:this.setSelectedHour,setSelectedMinute:this.setSelectedMinute,setViewMonth:this.setViewMonth,setViewYear:this.setViewYear,showDatePicker:this.state.showDatePicker,showTimePicker:this.state.showTimePicker,showToday:this.props.showToday,subtractDecade:this.subtractDecade,subtractHour:this.subtractHour,subtractMinute:this.subtractMinute,subtractMonth:this.subtractMonth,subtractYear:this.subtractYear,togglePeriod:this.togglePeriod,togglePicker:this.togglePicker,viewDate:this.state.viewDate,viewMode:this.props.viewMode,widgetClasses:this.state.widgetClasses,widgetStyle:this.state.widgetStyle}),s.default.createElement("div",{className:"input-group date "+this.size(),ref:this.datetimepicker},s.default.createElement("input",o({className:"form-control",onChange:this.onChange,type:"text",value:this.state.inputValue},this.props.inputProps)),s.default.createElement("span",{className:"input-group-addon",onBlur:this.onBlur,onClick:this.onClick,ref:this.dtpbutton},s.default.createElement("span",{className:(0,u.default)("glyphicon",this.state.buttonIcon)}))))}}]),t}(a.Component);m.defaultProps={dateTime:(0,l.default)().format("x"),format:"x",showToday:!0,viewMode:"days",daysOfWeekDisabled:[],size:d.default.SIZE_MEDIUM,mode:d.default.MODE_DATETIME,zIndex:999,onChange:function(e){console.log(e)}},m.propTypes={dateTime:c.default.oneOfType([c.default.string,c.default.number]),onChange:c.default.func,format:c.default.string,inputProps:c.default.object,inputFormat:c.default.string,defaultText:c.default.string,mode:c.default.oneOf([d.default.MODE_DATE,d.default.MODE_DATETIME,d.default.MODE_TIME]),minDate:c.default.object,maxDate:c.default.object,direction:c.default.string,showToday:c.default.bool,viewMode:c.default.string,zIndex:c.default.number,size:c.default.oneOf([d.default.SIZE_SMALL,d.default.SIZE_MEDIUM,d.default.SIZE_LARGE]),daysOfWeekDisabled:c.default.arrayOf(c.default.number)},t.A=m},52155:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=d(i),s=d(n(995)),c=d(n(8006)),l=d(n(47495)),u=d(n(79550)),f=d(n(39299)),m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderDatePicker=function(){if(r.props.showDatePicker)return a.default.createElement("li",null,a.default.createElement(l.default,{addDecade:r.props.addDecade,addMonth:r.props.addMonth,addYear:r.props.addYear,daysOfWeekDisabled:r.props.daysOfWeekDisabled,maxDate:r.props.maxDate,minDate:r.props.minDate,selectedDate:r.props.selectedDate,setSelectedDate:r.props.setSelectedDate,setViewMonth:r.props.setViewMonth,setViewYear:r.props.setViewYear,showToday:r.props.showToday,subtractDecade:r.props.subtractDecade,subtractMonth:r.props.subtractMonth,subtractYear:r.props.subtractYear,viewDate:r.props.viewDate,viewMode:r.props.viewMode}))},r.renderTimePicker=function(){if(r.props.showTimePicker)return a.default.createElement("li",null,a.default.createElement(u.default,{addHour:r.props.addHour,addMinute:r.props.addMinute,mode:r.props.mode,selectedDate:r.props.selectedDate,setSelectedHour:r.props.setSelectedHour,setSelectedMinute:r.props.setSelectedMinute,subtractHour:r.props.subtractHour,subtractMinute:r.props.subtractMinute,togglePeriod:r.props.togglePeriod,viewDate:r.props.viewDate}))},r.renderSwitchButton=function(){return r.props.mode===f.default.MODE_DATETIME?a.default.createElement("li",null,a.default.createElement("span",{className:"btn picker-switch",onClick:r.props.togglePicker,style:{width:"100%"}},a.default.createElement("span",{className:(0,c.default)("glyphicon",r.props.showTimePicker?"glyphicon-calendar":"glyphicon-time")}))):null},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:(0,c.default)(this.props.widgetClasses),style:this.props.widgetStyle},a.default.createElement("ul",{className:"list-unstyled"},this.renderDatePicker(),this.renderSwitchButton(),this.renderTimePicker()))}}]),t}(i.Component);m.propTypes={showDatePicker:s.default.bool,showTimePicker:s.default.bool,subtractMonth:s.default.func.isRequired,addMonth:s.default.func.isRequired,viewDate:s.default.object.isRequired,selectedDate:s.default.object.isRequired,showToday:s.default.bool,viewMode:s.default.oneOfType([s.default.string,s.default.number]),mode:s.default.oneOf([f.default.MODE_DATE,f.default.MODE_DATETIME,f.default.MODE_TIME]),daysOfWeekDisabled:s.default.array,setSelectedDate:s.default.func.isRequired,subtractYear:s.default.func.isRequired,addYear:s.default.func.isRequired,setViewMonth:s.default.func.isRequired,setViewYear:s.default.func.isRequired,subtractHour:s.default.func.isRequired,addHour:s.default.func.isRequired,subtractMinute:s.default.func.isRequired,addMinute:s.default.func.isRequired,addDecade:s.default.func.isRequired,subtractDecade:s.default.func.isRequired,togglePeriod:s.default.func.isRequired,minDate:s.default.object,maxDate:s.default.object,widgetClasses:s.default.object,widgetStyle:s.default.object,togglePicker:s.default.func,setSelectedHour:s.default.func,setSelectedMinute:s.default.func},t.default=m},47495:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=f(i),s=f(n(995)),c=f(n(68700)),l=f(n(89872)),u=f(n(32133)),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.showMonths=function(){return n.setState({daysDisplayed:!1,monthsDisplayed:!0})},n.showYears=function(){return n.setState({monthsDisplayed:!1,yearsDisplayed:!0})},n.setViewYear=function(e){return n.props.setViewYear(e.target.innerHTML),n.setState({yearsDisplayed:!1,monthsDisplayed:!0})},n.setViewMonth=function(e){return n.props.setViewMonth(e.target.innerHTML),n.setState({monthsDisplayed:!1,daysDisplayed:!0})},n.renderDays=function(){return n.state.daysDisplayed?a.default.createElement(c.default,{addMonth:n.props.addMonth,daysOfWeekDisabled:n.props.daysOfWeekDisabled,maxDate:n.props.maxDate,minDate:n.props.minDate,selectedDate:n.props.selectedDate,setSelectedDate:n.props.setSelectedDate,showMonths:n.showMonths,showToday:n.props.showToday,subtractMonth:n.props.subtractMonth,viewDate:n.props.viewDate}):null},n.renderMonths=function(){return n.state.monthsDisplayed?a.default.createElement(l.default,{addYear:n.props.addYear,selectedDate:n.props.selectedDate,setViewMonth:n.setViewMonth,showYears:n.showYears,subtractYear:n.props.subtractYear,viewDate:n.props.viewDate}):null},n.renderYears=function(){return n.state.yearsDisplayed?a.default.createElement(u.default,{addDecade:n.props.addDecade,selectedDate:n.props.selectedDate,setViewYear:n.setViewYear,subtractDecade:n.props.subtractDecade,viewDate:n.props.viewDate}):null};var o={days:{daysDisplayed:!0,monthsDisplayed:!1,yearsDisplayed:!1},months:{daysDisplayed:!1,monthsDisplayed:!0,yearsDisplayed:!1},years:{daysDisplayed:!1,monthsDisplayed:!1,yearsDisplayed:!0}};return n.state=o[n.props.viewMode]||o[Object.keys(o)[n.props.viewMode]]||o.days,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"datepicker"},this.renderDays(),this.renderMonths(),this.renderYears())}}]),t}(i.Component);d.propTypes={subtractMonth:s.default.func.isRequired,addMonth:s.default.func.isRequired,viewDate:s.default.object.isRequired,selectedDate:s.default.object.isRequired,showToday:s.default.bool,viewMode:s.default.oneOfType([s.default.string,s.default.number]),daysOfWeekDisabled:s.default.array,setSelectedDate:s.default.func.isRequired,subtractYear:s.default.func.isRequired,addYear:s.default.func.isRequired,setViewMonth:s.default.func.isRequired,setViewYear:s.default.func.isRequired,addDecade:s.default.func.isRequired,subtractDecade:s.default.func.isRequired,minDate:s.default.object,maxDate:s.default.object},t.default=d},68700:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=u(i),s=u(n(995)),c=u(n(92276)),l=u(n(8006)),d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderDays=function(){var e,t,n,o,i,s,u,f,d,p,m;for(m=r.props.viewDate.year(),i=r.props.viewDate.month(),n=(u=r.props.viewDate.clone().subtract(1,"months")).daysInMonth(),u.date(n).startOf("week"),s=(0,c.default)(u).clone().add(42,"d"),f=r.props.minDate?r.props.minDate.clone().subtract(1,"days"):r.props.minDate,d=r.props.maxDate?r.props.maxDate.clone():r.props.maxDate,o=[],e=[];u.isBefore(s);)t={day:!0},u.year()<m||u.year()===m&&u.month()<i?t.old=!0:(u.year()>m||u.year()===m&&u.month()>i)&&(t.new=!0),u.isSame((0,c.default)({y:r.props.selectedDate.year(),M:r.props.selectedDate.month(),d:r.props.selectedDate.date()}))&&(t.active=!0),r.props.showToday&&u.isSame((0,c.default)(),"day")&&(t.today=!0),(f&&u.isBefore(f)||d&&u.isAfter(d))&&(t.disabled=!0),r.props.daysOfWeekDisabled.length>0&&(t.disabled=-1!==r.props.daysOfWeekDisabled.indexOf(u.day())),e.push(a.default.createElement("td",{className:(0,l.default)(t),key:u.month()+"-"+u.date(),onClick:r.props.setSelectedDate},u.date())),u.weekday()===(0,c.default)().endOf("week").weekday()&&(p=a.default.createElement("tr",{key:u.month()+"-"+u.date()},e),o.push(p),e=[]),u.add(1,"d");return o},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=(0,c.default)().startOf("week");return a.default.createElement("div",{className:"datepicker-days",style:{display:"block"}},a.default.createElement("table",{className:"table-condensed"
},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",{className:"prev",onClick:this.props.subtractMonth},a.default.createElement("span",{className:"glyphicon glyphicon-chevron-left"})),a.default.createElement("th",{className:"switch",colSpan:"5",onClick:this.props.showMonths},c.default.months()[this.props.viewDate.month()]," ",this.props.viewDate.year()),a.default.createElement("th",{className:"next",onClick:this.props.addMonth},a.default.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))),a.default.createElement("tr",null,a.default.createElement("th",{className:"dow"},e.format("dd")),a.default.createElement("th",{className:"dow"},e.add(1,"days").format("dd")),a.default.createElement("th",{className:"dow"},e.add(1,"days").format("dd")),a.default.createElement("th",{className:"dow"},e.add(1,"days").format("dd")),a.default.createElement("th",{className:"dow"},e.add(1,"days").format("dd")),a.default.createElement("th",{className:"dow"},e.add(1,"days").format("dd")),a.default.createElement("th",{className:"dow"},e.add(1,"days").format("dd")))),a.default.createElement("tbody",null,this.renderDays())))}}]),t}(i.Component);d.propTypes={subtractMonth:s.default.func.isRequired,addMonth:s.default.func.isRequired,viewDate:s.default.object.isRequired,selectedDate:s.default.object.isRequired,showToday:s.default.bool,daysOfWeekDisabled:s.default.array,setSelectedDate:s.default.func.isRequired,showMonths:s.default.func.isRequired,minDate:s.default.object,maxDate:s.default.object},d.defaultProps={showToday:!0},t.default=d},68488:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=l(i),s=l(n(995)),c=l(n(39299)),f=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderSwitchButton=function(){return r.props.mode===c.default.MODE_TIME?a.default.createElement("ul",{className:"list-unstyled"},a.default.createElement("li",null,a.default.createElement("span",{className:"btn picker-switch",onClick:r.props.onSwitch,style:{width:"100%"}},a.default.createElement("span",{className:"glyphicon glyphicon-time"})))):null},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"timepicker-hours","data-action":"selectHour",style:{display:"block"}},this.renderSwitchButton(),a.default.createElement("table",{className:"table-condensed"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"01"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"02"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"03"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"04")),a.default.createElement("tr",null,a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"05"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"06"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"07"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"08")),a.default.createElement("tr",null,a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"09"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"10"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"11"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"12")),a.default.createElement("tr",null,a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"13"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"14"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"15"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"16")),a.default.createElement("tr",null,a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"17"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"18"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"19"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"20")),a.default.createElement("tr",null,a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"21"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"22"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"23"),a.default.createElement("td",{className:"hour",onClick:this.props.setSelectedHour},"24")))))}}]),t}(i.Component);f.propTypes={setSelectedHour:s.default.func.isRequired,onSwitch:s.default.func.isRequired,mode:s.default.string.isRequired},t.default=f},21046:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=l(i),s=l(n(995)),c=l(n(39299)),f=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderSwitchButton=function(){return r.props.mode===c.default.MODE_TIME?a.default.createElement("ul",{className:"list-unstyled"},a.default.createElement("li",null,a.default.createElement("span",{className:"btn picker-switch",onClick:r.props.onSwitch,style:{width:"100%"}},a.default.createElement("span",{className:"glyphicon glyphicon-time"})))):null},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"timepicker-minutes","data-action":"selectMinute",style:{display:"block"}},this.renderSwitchButton(),a.default.createElement("table",{className:"table-condensed"},a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"00"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"05"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"10"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"15")),a.default.createElement("tr",null,a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"20"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"25"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"30"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"35")),a.default.createElement("tr",null,a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"40"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"45"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"50"),a.default.createElement("td",{className:"minute",onClick:this.props.setSelectedMinute},"55")))))}}]),t}(i.Component);f.propTypes={setSelectedMinute:s.default.func.isRequired,onSwitch:s.default.func.isRequired,mode:s.default.string.isRequired},t.default=f},89872:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=u(i),s=u(n(995)),c=u(n(8006)),l=u(n(92276)),d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderMonths=function(){var e,t,n,o,i;for(n=r.props.selectedDate.month(),i=l.default.monthsShort(),t=0,o=[];t<12;)e={month:!0,active:t===n&&r.props.viewDate.year()===r.props.selectedDate.year()},o.push(a.default.createElement("span",{className:(0,c.default)(e),key:t,onClick:r.props.setViewMonth},i[t])),t++;return o},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){return a.default.createElement("div",{className:"datepicker-months",style:{display:"block"}},a.default.createElement("table",{className:"table-condensed"},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",{className:"prev",onClick:this.props.subtractYear},"\u2039"),a.default.createElement("th",{className:"switch",colSpan:"5",onClick:this.props.showYears},this.props.viewDate.year()),a.default.createElement("th",{className:"next",onClick:this.props.addYear},"\u203a"))),a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{colSpan:"7"},this.renderMonths())))))}}]),t}(i.Component);d.propTypes={subtractYear:s.default.func.isRequired,addYear:s.default.func.isRequired,viewDate:s.default.object.isRequired,selectedDate:s.default.object.isRequired,showYears:s.default.func.isRequired,setViewMonth:s.default.func.isRequired},t.default=d},79550:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(24577),s=d(a),c=d(n(995)),l=d(n(21046)),u=d(n(68488)),f=d(n(39299)),m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={minutesDisplayed:!1,hoursDisplayed:!1},r.goBack=function(){return r.setState({minutesDisplayed:!1,hoursDisplayed:!1})},r.showMinutes=function(){return r.setState({minutesDisplayed:!0})},r.showHours=function(){return r.setState({hoursDisplayed:!0})},r.renderMinutes=function(){return r.state.minutesDisplayed?s.default.createElement(l.default,o({},r.props,{onSwitch:r.goBack})):null},r.renderHours=function(){return r.state.hoursDisplayed?s.default.createElement(u.default,o({},r.props,{onSwitch:r.goBack})):null},r.renderPicker=function(){return r.state.minutesDisplayed||r.state.hoursDisplayed?"":s.default.createElement("div",{className:"timepicker-picker"},s.default.createElement("table",{className:"table-condensed"},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("a",{className:"btn",onClick:r.props.addHour},s.default.createElement("span",{className:"glyphicon glyphicon-chevron-up"}))),s.default.createElement("td",{className:"separator"}),s.default.createElement("td",null,s.default.createElement("a",{className:"btn",onClick:r.props.addMinute},s.default.createElement("span",{className:"glyphicon glyphicon-chevron-up"}))),s.default.createElement("td",{className:"separator"})),s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("span",{className:"timepicker-hour",onClick:r.showHours},r.props.selectedDate.format("h"))),s.default.createElement("td",{className:"separator"},":"),s.default.createElement("td",null,s.default.createElement("span",{className:"timepicker-minute",onClick:r.showMinutes},r.props.selectedDate.format("mm"))),s.default.createElement("td",{className:"separator"}),s.default.createElement("td",null,s.default.createElement("button",{className:"btn btn-primary",onClick:r.props.togglePeriod,type:"button"},r.props.selectedDate.format("A")))),s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("a",{className:"btn",onClick:r.props.subtractHour},s.default.createElement("span",{className:"glyphicon glyphicon-chevron-down"}))),s.default.createElement("td",{className:"separator"}),s.default.createElement("td",null,s.default.createElement("a",{className:"btn",onClick:r.props.subtractMinute},s.default.createElement("span",{className:"glyphicon glyphicon-chevron-down"}))),s.default.createElement("td",{className:"separator"})))))},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"timepicker"},this.renderPicker(),this.renderHours(),this.renderMinutes())}}]),t}(a.Component);m.propTypes={setSelectedHour:c.default.func.isRequired,setSelectedMinute:c.default.func.isRequired,subtractHour:c.default.func.isRequired,addHour:c.default.func.isRequired,subtractMinute:c.default.func.isRequired,addMinute:c.default.func.isRequired,viewDate:c.default.object.isRequired,selectedDate:c.default.object.isRequired,togglePeriod:c.default.func.isRequired,mode:c.default.oneOf([f.default.MODE_DATE,f.default.MODE_DATETIME,f.default.MODE_TIME])},t.default=m,e.exports=m},32133:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=l(i),s=l(n(995)),c=l(n(8006)),f=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.renderYears=function(){var e,t,n,o;for(o=[],n=10*parseInt(r.props.viewDate.year()/10,10),n--,t=-1;t<11;)e={year:!0,old:-1===t|10===t,active:r.props.selectedDate.year()===n},o.push(a.default.createElement("span",{className:(0,c.default)(e),key:n,onClick:r.props.setViewYear},n)),n++,t++;return o},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e;return e=10*parseInt(this.props.viewDate.year()/10,10),a.default.createElement("div",{className:"datepicker-years",style:{display:"block"}},a.default.createElement("table",{className:"table-condensed"},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",{className:"prev",onClick:this.props.subtractDecade},"\u2039"),a.default.createElement("th",{className:"switch",colSpan:"5"},e," - ",e+9),a.default.createElement("th",{className:"next",onClick:this.props.addDecade},"\u203a"))),a.default.createElement("tbody",null,a.default.createElement("tr",null,a.default.createElement("td",{colSpan:"7"},this.renderYears())))))}}]),t}(i.Component);f.propTypes={subtractDecade:s.default.func.isRequired,addDecade:s.default.func.isRequired,viewDate:s.default.object.isRequired,selectedDate:s.default.object.isRequired,setViewYear:s.default.func.isRequired},t.default=f},38152:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(554),d={pullRight:u().bool},p=function(e){function t(){return e.apply(this,arguments)||this}(0,i.A)(t,e);var n=t.prototype;return n.hasContent=function(e){var t=!1;return c.Children.forEach(e,(function(e){t||(e||0===e)&&(t=!0)})),t},n.render=function(){var e=this.props,t=e.pullRight,n=e.className,i=e.children,a=(0,o.A)(e,["pullRight","className","children"]),l=(0,f.UM)(a),u=l[0],d=l[1],p=(0,r.A)({},(0,f.nG)(u),{"pull-right":t,hidden:!this.hasContent(i)});return c.createElement("span",(0,r.A)({},d,{className:s()(n,p)}),i)},t}(c.Component);p.propTypes=d,p.defaultProps={pullRight:!1},t.A=(0,f.in)("badge",p)},59659:function(e,t,n){"use strict";var r=n(85749),o=n.n(r),i=n(60879),a=n(63916),s=n(29932),c=n(8006),l=n.n(c),u=n(24577),f=n(995),d=n.n(f),p=n(94220),m=n.n(p),h=n(554),v=n(84266),y=n(28939),b={active:d().bool,disabled:d().bool,block:d().bool,onClick:d().func,componentClass:m(),href:d().string,type:d().oneOf(["button","reset","submit"])},g=function(e){function t(){return e.apply(this,arguments)||this}(0,s.A)(t,e);var n=t.prototype;return n.renderAnchor=function(e,t){return u.createElement(y.A,(0,a.A)({},e,{className:l()(t,e.disabled&&"disabled")}))},n.renderButton=function(e,t){var n=e.componentClass,r=(0,i.A)(e,["componentClass"]),o=n||"button";return u.createElement(o,(0,a.A)({},r,{type:r.type||"button",className:t}))},n.render=function(){var e,t=this.props,n=t.active,r=t.block,o=t.className,s=(0,i.A)(t,["active","block","className"]),c=(0,h.UM)(s),u=c[0],f=c[1],d=(0,a.A)({},(0,h.nG)(u),((e={active:n})[(0,h.Pl)(u,"block")]=r,e)),p=l()(o,d);return f.href?this.renderAnchor(f,p):this.renderButton(f,p)},t}(u.Component);g.propTypes=b,g.defaultProps={active:!1,block:!1,disabled:!1},t.A=(0,h.in)("btn",(0,h.Ep)([v.or.LARGE,v.or.SMALL,v.or.XSMALL],(0,h.EP)(o()(v.Uw).concat([v.OF.DEFAULT,v.OF.PRIMARY,v.OF.LINK]),v.OF.DEFAULT,g)))},8436:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(2467),d=n.n(f),p=n(59659),m=n(554),h={vertical:u().bool,justified:u().bool,block:d()(u().bool,(function(e){var t=e.block,n=e.vertical;return t&&!n?new Error("`block` requires `vertical` to be set to have any effect"):null}))},v=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.block,i=t.justified,a=t.vertical,l=t.className,u=(0,o.A)(t,["block","justified","vertical","className"]),f=(0,m.UM)(u),d=f[0],h=f[1],v=(0,r.A)({},(0,m.nG)(d),((e={})[(0,m.Pl)(d)]=!a,e[(0,m.Pl)(d,"vertical")]=a,e[(0,m.Pl)(d,"justified")]=i,e[(0,m.Pl)(p.A.defaultProps,"block")]=n,e));return c.createElement("div",(0,r.A)({},h,{className:s()(l,v)}))},t}(c.Component);v.propTypes=h,v.defaultProps={block:!1,justified:!1,vertical:!1},t.A=(0,m.in)("btn-group",v)},69277:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(94220),d=n.n(f),p=n(554),m=n(84266),h={componentClass:d(),xs:u().number,sm:u().number,md:u().number,lg:u().number,xsHidden:u().bool,smHidden:u().bool,mdHidden:u().bool,lgHidden:u().bool,xsOffset:u().number,smOffset:u().number,mdOffset:u().number,lgOffset:u().number,xsPush:u().number,smPush:u().number,mdPush:u().number,lgPush:u().number,xsPull:u().number,smPull:u().number,mdPull:u().number,lgPull:u().number},v=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,o.A)(e,["componentClass","className"]),a=(0,p.UM)(i),l=a[0],u=a[1],f=[];return m.IY.forEach((function(e){function t(t,n){var r=""+e+t,o=u[r];null!=o&&f.push((0,p.Pl)(l,""+e+n+"-"+o)),delete u[r]}t("",""),t("Offset","-offset"),t("Push","-push"),t("Pull","-pull");var n=e+"Hidden";u[n]&&f.push("hidden-"+e),delete u[n]})),c.createElement(t,(0,r.A)({},u,{className:s()(n,f)}))},t}(c.Component);v.propTypes=h,v.defaultProps={componentClass:"div"},t.A=(0,p.in)("col",v)},88397:function(e,t,n){"use strict";function v(e){return""+e.charAt(0).toUpperCase()+e.slice(1)}n.d(t,{A:function(){return x}});var y,r=n(63916),o=n(60879),i=n(29932),a=n(11184),s=n.n(a),c=n(8006),l=n.n(c),u=n(14888),f=n.n(u),d=n(24577),p=n(995),m=n.n(p),h=n(61346),b=n(51429),g={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]},_=((y={})[h.EXITED]="collapse",y[h.EXITING]="collapsing",y[h.ENTERING]="collapsing",y[h.ENTERED]="collapse in",y),E={in:m().bool,mountOnEnter:m().bool,unmountOnExit:m().bool,appear:m().bool,timeout:m().number,onEnter:m().func,onEntering:m().func,onEntered:m().func,onExit:m().func,onExiting:m().func,onExited:m().func,dimension:m().oneOfType([m().oneOf(["height","width"]),m().func]),getDimensionValue:m().func,role:m().string},w={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,dimension:"height",getDimensionValue:function(e,t){var n=t["offset"+v(e)],r=g[e];return n+s()(f()(t,r[0]),10)+s()(f()(t,r[1]),10)}},O=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(e){e.style[t.getDimension()]="0"},t.handleEntering=function(e){var n=t.getDimension();e.style[n]=t._getScrollDimensionValue(e,n)},t.handleEntered=function(e){e.style[t.getDimension()]=null},t.handleExit=function(e){var n=t.getDimension();e.style[n]=t.props.getDimensionValue(n,e)+"px",e.offsetHeight},t.handleExiting=function(e){e.style[t.getDimension()]="0"},t}(0,i.A)(t,e);var n=t.prototype;return n.getDimension=function(){return"function"==typeof this.props.dimension?this.props.dimension():this.props.dimension},n._getScrollDimensionValue=function(e,t){return e["scroll"+v(t)]+"px"},n.render=function(){var e=this,t=this.props,n=t.onEnter,i=t.onEntering,a=t.onEntered,s=t.onExit,c=t.onExiting,u=t.className,f=t.children,p=(0,o.A)(t,["onEnter","onEntering","onEntered","onExit","onExiting","className","children"]);delete p.dimension,delete p.getDimensionValue;var m=(0,b.A)(this.handleEnter,n),v=(0,b.A)(this.handleEntering,i),y=(0,b.A)(this.handleEntered,a),g=(0,b.A)(this.handleExit,s),E=(0,b.A)(this.handleExiting,c);return d.createElement(h.default,(0,r.A)({},p,{"aria-expanded":p.role?p.in:null,onEnter:m,onEntering:v,onEntered:y,onExit:g,onExiting:E}),(function(t,n){return d.cloneElement(f,(0,r.A)({},n,{className:l()(u,f.props.className,_[t],"width"===e.getDimension()&&"width")}))}))},t}(d.Component);O.propTypes=E,O.defaultProps=w;var x=O},52717:function(e,t,n){"use strict";n.d(t,{A:function(){return K}});var r=n(63916),o=n(60879),i=n(29932),a=n(27429),s=n(8006),c=n.n(s),l=n(71568),u=n.n(l),f=n(57048),d=n.n(f),p=n(36668),m=n.n(p),h=n(24577),v=n(995),y=n.n(v),b=n(23539),g=n.n(b),_=n(2467),E=n.n(_),w=n(94220),O=n.n(w),x=n(2120),k=n.n(x),S=n(93100),A=(n(59158),n(8436)),j=n(37729),C=n.n(j),P=n(26690),N=n.n(P),T=n(554),I=n(51429),D=n(40935),M={open:y().bool,pullRight:y().bool,onClose:y().func,labelledBy:y().oneOfType([y().string,y().number]),onSelect:y().func,rootCloseEvent:y().oneOf(["click","mousedown"])},R=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleRootClose=n.handleRootClose.bind((0,a.A)((0,a.A)(n))),n.handleKeyDown=n.handleKeyDown.bind((0,a.A)((0,a.A)(n))),n}(0,i.A)(t,e);var n=t.prototype;return n.getFocusableMenuItems=function(){var e=g().findDOMNode(this);return e?C()(e.querySelectorAll('[tabIndex="-1"]')):[]},n.getItemsAndActiveIndex=function(){var e=this.getFocusableMenuItems(),t=e.indexOf(document.activeElement);return{items:e,activeIndex:t}},n.focusNext=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;0!==t.length&&t[n===t.length-1?0:n+1].focus()},n.focusPrevious=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;0!==t.length&&t[0===n?t.length-1:n-1].focus()},n.handleKeyDown=function(e){switch(e.keyCode){case m().codes.down:this.focusNext(),e.preventDefault();break;case m().codes.up:this.focusPrevious(),e.preventDefault();break;case m().codes.esc:case m().codes.tab:this.props.onClose(e,{source:"keydown"})}},n.handleRootClose=function(e){this.props.onClose(e,{source:"rootClose"})},n.render=function(){var e,t=this,n=this.props,i=n.open,a=n.pullRight,s=n.labelledBy,l=n.onSelect,u=n.className,f=n.rootCloseEvent,d=n.children,p=(0,o.A)(n,["open","pullRight","labelledBy","onSelect","className","rootCloseEvent","children"]),m=(0,T.M0)(p,["onClose"]),v=m[0],y=m[1],b=(0,r.A)({},(0,T.nG)(v),((e={})[(0,T.Pl)(v,"right")]=a,e));return h.createElement(N(),{disabled:!i,onRootClose:this.handleRootClose,event:f},h.createElement("ul",(0,r.A)({},y,{role:"menu",className:c()(u,b),"aria-labelledby":s}),D.A.map(d,(function(e){return h.cloneElement(e,{onKeyDown:(0,I.A)(e.props.onKeyDown,t.handleKeyDown),onSelect:(0,I.A)(e.props.onSelect,l)})}))))},t}(h.Component);R.propTypes=M,R.defaultProps={bsRole:"menu",pullRight:!1};var F=(0,T.in)("dropdown-menu",R),L=n(4278),U=n(4643),B=L.A.defaultProps.bsRole,H=F.defaultProps.bsRole,V={dropup:y().bool,id:k()(y().oneOfType([y().string,y().number])),componentClass:O(),children:E()((0,U.bF)(B,H),(0,U.Si)(H)),disabled:y().bool,pullRight:y().bool,open:y().bool,defaultOpen:y().bool,onToggle:y().func,onSelect:y().func,role:y().string,rootCloseEvent:y().oneOf(["click","mousedown"]),onMouseEnter:y().func,onMouseLeave:y().func},q={componentClass:A.A},z=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,a.A)((0,a.A)(r))),r.handleKeyDown=r.handleKeyDown.bind((0,a.A)((0,a.A)(r))),r.handleClose=r.handleClose.bind((0,a.A)((0,a.A)(r))),r._focusInDropdown=!1,r.lastOpenEventType=null,r}(0,i.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.focusNextOnOpen()},n.UNSAFE_componentWillUpdate=function(e){!e.open&&this.props.open&&(this._focusInDropdown=d()(g().findDOMNode(this.menu),u()(document)))},n.componentDidUpdate=function(e){var t=this.props.open,n=e.open;t&&!n&&this.focusNextOnOpen(),!t&&n&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},n.focus=function(){var e=g().findDOMNode(this.toggle);e&&e.focus&&e.focus()},n.focusNextOnOpen=function(){var e=this.menu;e&&e.focusNext&&("keydown"!==this.lastOpenEventType&&"menuitem"!==this.props.role||e.focusNext())},n.handleClick=function(e){this.props.disabled||this.toggleOpen(e,{source:"click"})},n.handleClose=function(e,t){this.props.open&&this.toggleOpen(e,t)},n.handleKeyDown=function(e){if(!this.props.disabled)switch(e.keyCode){case m().codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen(e,{source:"keydown"}),e.preventDefault();break;case m().codes.esc:case m().codes.tab:this.handleClose(e,{source:"keydown"})}},n.toggleOpen=function(e,t){var n=!this.props.open;n&&(this.lastOpenEventType=t.source),this.props.onToggle&&this.props.onToggle(n,e,t)},n.renderMenu=function(e,t){var n=this,i=t.id,a=t.onSelect,s=t.rootCloseEvent,c=(0,o.A)(t,["id","onSelect","rootCloseEvent"]),l=function(e){n.menu=e};return"string"==typeof e.ref||(l=(0,I.A)(e.ref,l)),(0,h.cloneElement)(e,(0,r.A)({},c,{ref:l,labelledBy:i,bsClass:(0,T.Pl)(c,"menu"),onClose:(0,I.A)(e.props.onClose,this.handleClose),onSelect:(0,I.A)(e.props.onSelect,a,(function(e,t){return n.handleClose(t,{source:"select"})})),rootCloseEvent:s}))},n.renderToggle=function(e,t){var n=this,o=function(e){n.toggle=e};return"string"==typeof e.ref||(o=(0,I.A)(e.ref,o)),(0,h.cloneElement)(e,(0,r.A)({},t,{ref:o,bsClass:(0,T.Pl)(t,"toggle"),onClick:(0,I.A)(e.props.onClick,this.handleClick),onKeyDown:(0,I.A)(e.props.onKeyDown,this.handleKeyDown)}))},n.render=function(){var e,t=this,n=this.props,i=n.componentClass,a=n.id,s=n.dropup,l=n.disabled,u=n.pullRight,f=n.open,d=n.onSelect,p=n.role,m=n.bsClass,v=n.className,y=n.rootCloseEvent,b=n.children,g=(0,o.A)(n,["componentClass","id","dropup","disabled","pullRight","open","onSelect","role","bsClass","className","rootCloseEvent","children"]);delete g.onToggle;var _=((e={})[m]=!0,e.open=f,e.disabled=l,e);return s&&(_[m]=!1,_.dropup=!0),h.createElement(i,(0,r.A)({},g,{className:c()(v,_)}),D.A.map(b,(function(e){switch(e.props.bsRole){case B:return t.renderToggle(e,{id:a,disabled:l,open:f,role:p,bsClass:m});case H:return t.renderMenu(e,{id:a,open:f,pullRight:u,bsClass:m,onSelect:d,rootCloseEvent:y});default:return e}})))},t}(h.Component);z.propTypes=V,z.defaultProps=q,(0,T.in)("dropdown",z);var W=(0,S.Pd)(z,{open:"onToggle"});W.Toggle=L.A,W.Menu=F;var K=W},4278:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(24577),s=n(995),c=n.n(s),l=n(8006),u=n.n(l),f=n(59659),d=n(28939),p=n(554),m={noCaret:c().bool,open:c().bool,title:c().string,useAnchor:c().bool},h=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){
var e=this.props,t=e.noCaret,n=e.open,i=e.useAnchor,s=e.bsClass,c=e.className,l=e.children,p=(0,o.A)(e,["noCaret","open","useAnchor","bsClass","className","children"]);delete p.bsRole;var m=i?d.A:f.A,h=!t;return a.createElement(m,(0,r.A)({},p,{role:"button",className:u()(c,s),"aria-haspopup":!0,"aria-expanded":n}),l||p.title,h&&" ",h&&a.createElement("span",{className:"caret"}))},t}(a.Component);h.propTypes=m,h.defaultProps={open:!1,useAnchor:!1,bsRole:"toggle"},t.A=(0,p.in)("dropdown-toggle",h)},5345:function(e,t,n){"use strict";var r,o=n(63916),i=n(60879),a=n(29932),s=n(8006),c=n.n(s),l=n(24577),u=n(995),f=n.n(u),d=n(61346),p={in:f().bool,mountOnEnter:f().bool,unmountOnExit:f().bool,appear:f().bool,timeout:f().number,onEnter:f().func,onEntering:f().func,onEntered:f().func,onExit:f().func,onExiting:f().func,onExited:f().func},m=((r={})[d.ENTERING]="in",r[d.ENTERED]="in",r),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,a.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=(0,i.A)(e,["className","children"]);return l.createElement(d.default,r,(function(e,r){return l.cloneElement(n,(0,o.A)({},r,{className:c()("fade",t,n.props.className,m[e])}))}))},t}(l.Component);h.propTypes=p,h.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},t.A=h},2480:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(554),d={glyph:u().string.isRequired},p=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.glyph,i=t.className,a=(0,o.A)(t,["glyph","className"]),l=(0,f.UM)(a),u=l[0],d=l[1],p=(0,r.A)({},(0,f.nG)(u),((e={})[(0,f.Pl)(u,n)]=!0,e));return c.createElement("span",(0,r.A)({},d,{className:s()(i,p)}))},t}(c.Component);p.propTypes=d,t.A=(0,f.in)("glyphicon",p)},93895:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(94220),d=n.n(f),p=n(554),m={fluid:u().bool,componentClass:d()},h=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.fluid,n=e.componentClass,i=e.className,a=(0,o.A)(e,["fluid","componentClass","className"]),l=(0,p.UM)(a),u=l[0],f=l[1],d=(0,p.Pl)(u,t&&"fluid");return c.createElement(n,(0,r.A)({},f,{className:s()(i,d)}))},t}(c.Component);h.propTypes=m,h.defaultProps={componentClass:"div",fluid:!1},t.A=(0,p.in)("container",h)},63039:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(27429),s=n(8006),c=n.n(s),l=n(24577),u=n(995),f=n.n(u),d=n(2467),p=n.n(d),m=n(28939),h=n(554),v=n(51429),y={active:f().bool,disabled:f().bool,divider:p()(f().bool,(function(e){var t=e.divider,n=e.children;return t&&n?new Error("Children will not be rendered for dividers"):null})),eventKey:f().any,header:f().bool,href:f().string,onClick:f().func,onSelect:f().func},b=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,a.A)((0,a.A)(r))),r}(0,i.A)(t,e);var n=t.prototype;return n.handleClick=function(e){var t=this.props,n=t.href,r=t.disabled,o=t.onSelect,i=t.eventKey;n&&!r||e.preventDefault(),r||o&&o(i,e)},n.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.divider,a=e.header,s=e.onClick,u=e.className,f=e.style,d=(0,o.A)(e,["active","disabled","divider","header","onClick","className","style"]),p=(0,h.M0)(d,["eventKey","onSelect"]),y=p[0],b=p[1];return i?(b.children=void 0,l.createElement("li",(0,r.A)({},b,{role:"separator",className:c()(u,"divider"),style:f}))):a?l.createElement("li",(0,r.A)({},b,{role:"heading",className:c()(u,(0,h.Pl)(y,"header")),style:f})):l.createElement("li",{role:"presentation",className:c()(u,{active:t,disabled:n}),style:f},l.createElement(m.A,(0,r.A)({},b,{role:"menuitem",tabIndex:"-1",onClick:(0,v.A)(s,this.handleClick)})))},t}(l.Component);b.propTypes=y,b.defaultProps={divider:!1,disabled:!1,header:!1},t.A=(0,h.in)("dropdown",b)},47452:function(e,t,n){"use strict";function ee(e){return v.createElement(A.A,(0,a.A)({},e,{timeout:ne.TRANSITION_DURATION}))}function te(e){return v.createElement(A.A,(0,a.A)({},e,{timeout:ne.BACKDROP_TRANSITION_DURATION}))}n.d(t,{A:function(){return re}});var r=n(60879),o=n(29932),i=n(27429),a=n(63916),s=n(8006),c=n.n(s),l=n(67822),u=n(34020),f=n.n(u),d=n(78210),p=n.n(d),m=n(56856),h=n.n(m),v=n(24577),y=n(995),b=n.n(y),g=n(23539),_=n.n(g),E=n(98636),w=n.n(E),O=n(6321),x=n.n(O),k=n(94220),S=n.n(k),A=n(5345),j=n(554),C={componentClass:S()},P=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,o=(0,r.A)(e,["componentClass","className"]),i=(0,j.UM)(o),s=i[0],l=i[1],u=(0,j.nG)(s);return v.createElement(t,(0,a.A)({},l,{className:c()(n,u)}))},t}(v.Component);P.propTypes=C,P.defaultProps={componentClass:"div"};var N=(0,j.in)("modal-body",P),T=n(84266),I={dialogClassName:b().string},D=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.dialogClassName,o=t.className,i=t.style,s=t.children,l=t.onMouseDownDialog,u=(0,r.A)(t,["dialogClassName","className","style","children","onMouseDownDialog"]),f=(0,j.UM)(u),d=f[0],p=f[1],m=(0,j.Pl)(d),h=(0,a.A)({display:"block"},i),y=(0,a.A)({},(0,j.nG)(d),((e={})[m]=!1,e[(0,j.Pl)(d,"dialog")]=!0,e));return v.createElement("div",(0,a.A)({},p,{tabIndex:"-1",role:"dialog",style:h,className:c()(o,m)}),v.createElement("div",{className:c()(n,y),onMouseDown:l},v.createElement("div",{className:(0,j.Pl)(d,"content"),role:"document"},s)))},t}(v.Component);D.propTypes=I;var M=(0,j.in)("modal",(0,j.Ep)([T.or.LARGE,T.or.SMALL],D)),R={componentClass:S()},F=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,o=(0,r.A)(e,["componentClass","className"]),i=(0,j.UM)(o),s=i[0],l=i[1],u=(0,j.nG)(s);return v.createElement(t,(0,a.A)({},l,{className:c()(n,u)}))},t}(v.Component);F.propTypes=R,F.defaultProps={componentClass:"div"};var L=(0,j.in)("modal-footer",F),U=n(51429),B={label:b().string.isRequired,onClick:b().func},H=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.label,n=e.onClick;return v.createElement("button",{type:"button",className:"close",onClick:n},v.createElement("span",{"aria-hidden":"true"},"\xd7"),v.createElement("span",{className:"sr-only"},t))},t}(v.Component);H.propTypes=B,H.defaultProps={label:"Close"};var V=H,q={closeLabel:b().string,closeButton:b().bool,onHide:b().func},z={$bs_modal:b().shape({onHide:b().func})},W=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.closeLabel,n=e.closeButton,o=e.onHide,i=e.className,s=e.children,l=(0,r.A)(e,["closeLabel","closeButton","onHide","className","children"]),u=this.context.$bs_modal,f=(0,j.UM)(l),d=f[0],p=f[1],m=(0,j.nG)(d);return v.createElement("div",(0,a.A)({},p,{className:c()(i,m)}),n&&v.createElement(V,{label:t,onClick:(0,U.A)(u&&u.onHide,o)}),s)},t}(v.Component);W.propTypes=q,W.defaultProps={closeLabel:"Close",closeButton:!1},W.contextTypes=z;var K=(0,j.in)("modal-header",W),$={componentClass:S()},G=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,o=(0,r.A)(e,["componentClass","className"]),i=(0,j.UM)(o),s=i[0],l=i[1],u=(0,j.nG)(s);return v.createElement(t,(0,a.A)({},l,{className:c()(n,u)}))},t}(v.Component);G.propTypes=$,G.defaultProps={componentClass:"h4"};var Y=(0,j.in)("modal-title",G),X=n(33170),Z=(0,a.A)({},w().propTypes,M.propTypes,{backdrop:b().oneOf(["static",!0,!1]),backdropClassName:b().string,keyboard:b().bool,animation:b().bool,dialogComponentClass:S(),autoFocus:b().bool,enforceFocus:b().bool,restoreFocus:b().bool,show:b().bool,onHide:b().func,onEnter:b().func,onEntering:b().func,onEntered:b().func,onExit:b().func,onExiting:b().func,onExited:b().func,container:w().propTypes.container}),Q=(0,a.A)({},w().defaultProps,{animation:!0,dialogComponentClass:M}),J={$bs_modal:b().shape({onHide:b().func})},ne=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleDialogBackdropMouseDown=function(){r._waitingForMouseUp=!0},r.handleMouseUp=function(e){var t=r._modal.getDialogElement();r._waitingForMouseUp&&e.target===t&&(r._ignoreBackdropClick=!0),r._waitingForMouseUp=!1},r.handleEntering=r.handleEntering.bind((0,i.A)((0,i.A)(r))),r.handleExited=r.handleExited.bind((0,i.A)((0,i.A)(r))),r.handleWindowResize=r.handleWindowResize.bind((0,i.A)((0,i.A)(r))),r.handleDialogClick=r.handleDialogClick.bind((0,i.A)((0,i.A)(r))),r.setModalRef=r.setModalRef.bind((0,i.A)((0,i.A)(r))),r.state={style:{}},r}(0,o.A)(t,e);var n=t.prototype;return n.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},n.componentWillUnmount=function(){this.handleExited()},n.setModalRef=function(e){this._modal=e},n.handleDialogClick=function(e){this._ignoreBackdropClick||e.target!==e.currentTarget?this._ignoreBackdropClick=!1:this.props.onHide()},n.handleEntering=function(){l.Ay.on(window,"resize",this.handleWindowResize),this.updateStyle()},n.handleExited=function(){l.Ay.off(window,"resize",this.handleWindowResize)},n.handleWindowResize=function(){this.updateStyle()},n.updateStyle=function(){if(p()){var e=this._modal.getDialogElement(),t=e.scrollHeight,n=f()(e),r=x()(_().findDOMNode(this.props.container||n.body)),o=t>n.documentElement.clientHeight;this.setState({style:{paddingRight:r&&!o?h()():void 0,paddingLeft:!r&&o?h()():void 0}})}},n.render=function(){var e=this.props,t=e.backdrop,n=e.backdropClassName,o=e.animation,i=e.show,s=e.dialogComponentClass,l=e.className,u=e.style,f=e.children,d=e.onEntering,p=e.onExited,m=(0,r.A)(e,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),h=(0,X.A)(m,w()),y=h[0],b=h[1],g=i&&!o&&"in";return v.createElement(w(),(0,a.A)({},y,{ref:this.setModalRef,show:i,containerClassName:(0,j.Pl)(m,"open"),transition:o?ee:void 0,backdrop:t,backdropTransition:o?te:void 0,backdropClassName:c()((0,j.Pl)(m,"backdrop"),n,g),onEntering:(0,U.A)(d,this.handleEntering),onExited:(0,U.A)(p,this.handleExited),onMouseUp:this.handleMouseUp}),v.createElement(s,(0,a.A)({},b,{style:(0,a.A)({},this.state.style,u),className:c()(l,g),onClick:!0===t?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),f))},t}(v.Component);ne.propTypes=Z,ne.defaultProps=Q,ne.childContextTypes=J,ne.Body=N,ne.Header=K,ne.Title=Y,ne.Footer=L,ne.Dialog=M,ne.TRANSITION_DURATION=300,ne.BACKDROP_TRANSITION_DURATION=150;var re=(0,j.in)("modal",(0,j.Ep)([T.or.LARGE,T.or.SMALL],ne))},98422:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(36668),l=n.n(c),u=n(24577),f=n(995),d=n.n(f),p=n(23539),m=n.n(p),h=n(2467),v=n.n(h),y=(n(59158),n(554)),b=n(51429),g=n(40935),_={activeKey:d().any,activeHref:d().string,stacked:d().bool,justified:v()(d().bool,(function(e){var t=e.justified,n=e.navbar;return t&&n?Error("justified navbar `Nav`s are not supported"):null})),onSelect:d().func,role:d().string,navbar:d().bool,pullRight:d().bool,pullLeft:d().bool},E={$bs_navbar:d().shape({bsClass:d().string,onSelect:d().func}),$bs_tabContainer:d().shape({activeKey:d().any,onSelect:d().func.isRequired,getTabId:d().func.isRequired,getPaneId:d().func.isRequired})},w=function(e){function t(){return e.apply(this,arguments)||this}(0,i.A)(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this;if(this._needsRefocus){this._needsRefocus=!1;var t=this.props.children,n=this.getActiveProps(),r=n.activeKey,o=n.activeHref,i=g.A.find(t,(function(t){return e.isActive(t,r,o)})),a=g.A.toArray(t).indexOf(i),s=m().findDOMNode(this).children,c=s&&s[a];c&&c.firstChild&&c.firstChild.focus()}},n.getActiveProps=function(){return this.context.$bs_tabContainer||this.props},n.getNextActiveChild=function(e){var t=this,n=this.props.children,r=g.A.filter(n,(function(e){return null!=e.props.eventKey&&!e.props.disabled})),o=this.getActiveProps(),i=o.activeKey,a=o.activeHref,s=g.A.find(n,(function(e){return t.isActive(e,i,a)})),c=r.indexOf(s);if(-1===c)return r[0];var l=c+e,u=r.length;return l>=u?l=0:l<0&&(l=u-1),r[l]},n.getTabProps=function(e,t,n,r,o){var i=this;if(!t&&"tablist"!==n)return null;var a=e.props,s=a.id,c=a["aria-controls"],l=a.eventKey,u=a.role,f=a.onKeyDown,d=a.tabIndex;return t&&(s=t.getTabId(l),c=t.getPaneId(l)),"tablist"===n&&(u=u||"tab",f=(0,b.A)((function(e){return i.handleTabKeyDown(o,e)}),f),d=r?d:-1),{id:s,role:u,onKeyDown:f,"aria-controls":c,tabIndex:d}},n.handleTabKeyDown=function(e,t){var n;switch(t.keyCode){case l().codes.left:case l().codes.up:n=this.getNextActiveChild(-1);break;case l().codes.right:case l().codes.down:n=this.getNextActiveChild(1);break;default:return}t.preventDefault(),e&&n&&null!=n.props.eventKey&&e(n.props.eventKey),this._needsRefocus=!0},n.isActive=function(e,t,n){var r=e.props;return!!(r.active||null!=t&&r.eventKey===t||n&&r.href===n)||r.active},n.render=function(){var e,t=this,n=this.props,i=n.stacked,a=n.justified,c=n.onSelect,l=n.role,f=n.navbar,d=n.pullRight,p=n.pullLeft,m=n.className,h=n.children,v=(0,o.A)(n,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),_=this.context.$bs_tabContainer,E=l||(_?"tablist":null),w=this.getActiveProps(),O=w.activeKey,x=w.activeHref;delete v.activeKey,delete v.activeHref;var k,S,A=(0,y.UM)(v),j=A[0],C=A[1],P=(0,r.A)({},(0,y.nG)(j),((e={})[(0,y.Pl)(j,"stacked")]=i,e[(0,y.Pl)(j,"justified")]=a,e)),N=null!=f?f:this.context.$bs_navbar;if(N){var T=this.context.$bs_navbar||{bsClass:"navbar"};P[(0,y.Pl)(T,"nav")]=!0,S=(0,y.Pl)(T,"right"),k=(0,y.Pl)(T,"left")}else S="pull-right",k="pull-left";return P[S]=d,P[k]=p,u.createElement("ul",(0,r.A)({},C,{role:E,className:s()(m,P)}),g.A.map(h,(function(e){var n=t.isActive(e,O,x),o=(0,b.A)(e.props.onSelect,c,N&&N.onSelect,_&&_.onSelect);return(0,u.cloneElement)(e,(0,r.A)({},t.getTabProps(e,_,E,n,o),{active:n,activeKey:O,activeHref:x,onSelect:o}))})))},t}(u.Component);w.propTypes=_,w.defaultProps={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},w.contextTypes=E,t.A=(0,y.in)("nav",(0,y.EP)(["tabs","pills"],w))},14521:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(27429),s=n(8006),c=n.n(s),l=n(24577),u=n(995),f=n.n(u),d=n(28939),p=n(51429),m={active:f().bool,disabled:f().bool,role:f().string,href:f().string,onClick:f().func,onSelect:f().func,eventKey:f().any},h=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,a.A)((0,a.A)(r))),r}(0,i.A)(t,e);var n=t.prototype;return n.handleClick=function(e){this.props.disabled?e.preventDefault():this.props.onSelect&&this.props.onSelect(this.props.eventKey,e)},n.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.onClick,a=e.className,s=e.style,u=(0,o.A)(e,["active","disabled","onClick","className","style"]);return delete u.onSelect,delete u.eventKey,delete u.activeKey,delete u.activeHref,u.role?"tab"===u.role&&(u["aria-selected"]=t):"#"===u.href&&(u.role="button"),l.createElement("li",{role:"presentation",className:c()(a,{active:t,disabled:n}),style:s},l.createElement(d.A,(0,r.A)({},u,{disabled:n,onClick:(0,p.A)(i,this.handleClick)})))},t}(l.Component);h.propTypes=m,h.defaultProps={active:!1,disabled:!1},t.A=h},30959:function(e,t,n){"use strict";var r=n(60879),o=n(29932),i=n(63916),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(74017),d=n.n(f),p=n(94220),m=n.n(p),h=n(5345),v=(0,i.A)({},d().propTypes,{show:u().bool,rootClose:u().bool,onHide:u().func,animation:u().oneOfType([u().bool,m()]),onEnter:u().func,onEntering:u().func,onEntered:u().func,onExit:u().func,onExiting:u().func,onExited:u().func,placement:u().oneOf(["top","right","bottom","left"])}),y={animation:h.A,rootClose:!1,show:!1,placement:"right"},b=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.A)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.animation,o=t.children,a=(0,r.A)(t,["animation","children"]),l=!0===n?h.A:n||null;return e=l?o:(0,c.cloneElement)(o,{className:s()(o.props.className,"in")}),c.createElement(d(),(0,i.A)({},a,{transition:l}),e)},t}(c.Component);b.propTypes=v,b.defaultProps=y,t.A=b},29691:function(e,t,n){"use strict";function b(e,t){return c()(t)?t.indexOf(e)>=0:e===t}var r=n(60879),o=n(29932),i=n(27429),a=n(63916),s=n(28653),c=n.n(s),l=n(57048),u=n.n(l),f=n(24577),d=n(995),p=n.n(d),m=n(23539),h=n.n(m),v=(n(59158),n(30959)),y=n(51429),g=p().oneOf(["click","hover","focus"]),_=(0,a.A)({},v.A.propTypes,{trigger:p().oneOfType([g,p().arrayOf(g)]),delay:p().number,delayShow:p().number,delayHide:p().number,defaultOverlayShown:p().bool,overlay:p().node.isRequired,onBlur:p().func,onClick:p().func,onFocus:p().func,onMouseOut:p().func,onMouseOver:p().func,target:p().oneOf([null]),onHide:p().oneOf([null]),show:p().oneOf([null])}),E=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleToggle=r.handleToggle.bind((0,i.A)((0,i.A)(r))),r.handleDelayedShow=r.handleDelayedShow.bind((0,i.A)((0,i.A)(r))),r.handleDelayedHide=r.handleDelayedHide.bind((0,i.A)((0,i.A)(r))),r.handleHide=r.handleHide.bind((0,i.A)((0,i.A)(r))),r.handleMouseOver=function(e){return r.handleMouseOverOut(r.handleDelayedShow,e,"fromElement")},r.handleMouseOut=function(e){return r.handleMouseOverOut(r.handleDelayedHide,e,"toElement")},r._mountNode=null,r.state={show:t.defaultOverlayShown},r}(0,o.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._mountNode=document.createElement("div"),this.renderOverlay()},n.componentDidUpdate=function(){this.renderOverlay()},n.componentWillUnmount=function(){h().unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},n.handleDelayedHide=function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;t?this._hoverHideDelay=setTimeout((function(){e._hoverHideDelay=null,e.hide()}),t):this.hide()}},n.handleDelayedShow=function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;t?this._hoverShowDelay=setTimeout((function(){e._hoverShowDelay=null,e.show()}),t):this.show()}},n.handleHide=function(){this.hide()},n.handleMouseOverOut=function(e,t,n){var r=t.currentTarget,o=t.relatedTarget||t.nativeEvent[n];o&&o===r||u()(r,o)||e(t)},n.handleToggle=function(){this.state.show?this.hide():this.show()},n.hide=function(){this.setState({show:!1})},n.makeOverlay=function(e,t){return f.createElement(v.A,(0,a.A)({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)},n.show=function(){this.setState({show:!0})},n.renderOverlay=function(){h().unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},n.render=function(){var e=this.props,t=e.trigger,n=e.overlay,o=e.children,i=e.onBlur,a=e.onClick,s=e.onFocus,c=e.onMouseOut,l=e.onMouseOver,u=(0,r.A)(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete u.delay,delete u.delayShow,delete u.delayHide,delete u.defaultOverlayShown;var d=f.Children.only(o),p=d.props,m={};return this.state.show&&(m["aria-describedby"]=n.props.id),m.onClick=(0,y.A)(p.onClick,a),b("click",t)&&(m.onClick=(0,y.A)(m.onClick,this.handleToggle)),b("hover",t)&&(m.onMouseOver=(0,y.A)(p.onMouseOver,l,this.handleMouseOver),m.onMouseOut=(0,y.A)(p.onMouseOut,c,this.handleMouseOut)),b("focus",t)&&(m.onFocus=(0,y.A)(p.onFocus,s,this.handleDelayedShow),m.onBlur=(0,y.A)(p.onBlur,i,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,u),(0,f.cloneElement)(d,m)},t}(f.Component);E.propTypes=_,E.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]},t.A=E},13173:function(e,t,n){"use strict";n.d(t,{A:function(){return ee}});var r=n(6654),o=n.n(r),i=n(85749),a=n.n(i),s=n(63916),c=n(29932),l=n(8006),u=n.n(l),f=n(995),d=n.n(f),p=n(24577),m=n(93100),h=(n(59158),n(554)),v=n(84266),y=n(88397),b={onEnter:d().func,onEntering:d().func,onEntered:d().func,onExit:d().func,onExiting:d().func,onExited:d().func},g={$bs_panel:d().shape({headingId:d().string,bodyId:d().string,bsClass:d().string,expanded:d().bool})},_=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.A)(t,e),t.prototype.render=function(){var e=this.props.children,t=this.context.$bs_panel||{},n=t.headingId,r=t.bodyId,o=t.bsClass,i=t.expanded,a=(0,h.UM)(this.props),c=a[0],l=a[1];return c.bsClass=o||c.bsClass,n&&r&&(l.id=r,l.role=l.role||"tabpanel",l["aria-labelledby"]=n),p.createElement(y.A,(0,s.A)({in:i},l),p.createElement("div",{className:(0,h.Pl)(c,"collapse")},e))},t}(p.Component);_.propTypes=b,_.contextTypes=g;var E=(0,h.in)("panel",_),w={collapsible:d().bool.isRequired},O={$bs_panel:d().shape({bsClass:d().string})},x=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.collapsible,o=(this.context.$bs_panel||{}).bsClass,i=(0,h.M0)(this.props,["collapsible"]),a=i[0],c=i[1];a.bsClass=o||a.bsClass;var l=p.createElement("div",(0,s.A)({},c,{className:u()(n,(0,h.Pl)(a,"body"))}),t);return r&&(l=p.createElement(E,null,l)),l},t}(p.Component);x.propTypes=w,x.defaultProps={collapsible:!1},x.contextTypes=O;var k=(0,h.in)("panel",x),S=n(60879),A=n(22053),j={componentClass:A.A},C={$bs_panel:d().shape({headingId:d().string,bsClass:d().string})},P=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.componentClass,o=(0,S.A)(e,["children","className","componentClass"]),i=this.context.$bs_panel||{},a=i.headingId,c=i.bsClass,l=(0,h.UM)(o),f=l[0],d=l[1];return f.bsClass=c||f.bsClass,a&&(d.role=d.role||"tab",d.id=a),p.createElement(r,(0,s.A)({},d,{className:u()(n,(0,h.Pl)(f,"heading"))}),t)},t}(p.Component);P.propTypes=j,P.defaultProps={componentClass:"div"},P.contextTypes=C;var N=(0,h.in)("panel",P),T=n(27429),I=n(28939),D=n(51429),M={onClick:d().func,componentClass:A.A},R={componentClass:I.A},F={$bs_panel:d().shape({bodyId:d().string,onToggle:d().func,expanded:d().bool})},L=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handleToggle=t.handleToggle.bind((0,T.A)((0,T.A)(t))),t}(0,c.A)(t,e);var n=t.prototype;return n.handleToggle=function(e){var t=(this.context.$bs_panel||{}).onToggle;t&&t(e)},n.render=function(){var e=this.props,t=e.onClick,n=e.className,r=e.componentClass,o=(0,S.A)(e,["onClick","className","componentClass"]),i=this.context.$bs_panel||{},a=i.expanded,s=i.bodyId,c=r;return o.onClick=(0,D.A)(t,this.handleToggle),o["aria-expanded"]=a,o.className=u()(n,!a&&"collapsed"),s&&(o["aria-controls"]=s),p.createElement(c,o)},t}(p.Component);L.propTypes=M,L.defaultProps=R,L.contextTypes=F;var U=L,B={componentClass:A.A,toggle:d().bool},H={$bs_panel:d().shape({bsClass:d().string})},V=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.toggle,o=e.componentClass,i=(0,S.A)(e,["children","className","toggle","componentClass"]),a=(this.context.$bs_panel||{}).bsClass,c=(0,h.UM)(i),l=c[0],f=c[1];return l.bsClass=a||l.bsClass,r&&(t=p.createElement(U,null,t)),p.createElement(o,(0,s.A)({},f,{className:u()(n,(0,h.Pl)(l,"title"))}),t)},t}(p.Component);V.propTypes=B,V.defaultProps={componentClass:"div"},V.contextTypes=H;var q=(0,h.in)("panel",V),z={$bs_panel:d().shape({bsClass:d().string})},W=function(e){function t(){return e.apply(this,arguments)||this}return(0,c.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=(this.context.$bs_panel||{}).bsClass,o=(0,h.UM)(this.props),i=o[0],a=o[1];return i.bsClass=r||i.bsClass,p.createElement("div",(0,s.A)({},a,{className:u()(n,(0,h.Pl)(i,"footer"))}),t)},t}(p.Component);W.contextTypes=z;var K=(0,h.in)("panel",W),$=Object.prototype.hasOwnProperty,G=function(e,t){return e?e+"--"+t:null},Y={expanded:d().bool,onToggle:d().func,eventKey:d().any,id:d().string},X={$bs_panelGroup:d().shape({getId:d().func,activeKey:d().any,onToggle:d().func})},Z={$bs_panel:d().shape({headingId:d().string,bodyId:d().string,bsClass:d().string,onToggle:d().func,expanded:d().bool})},Q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).handleToggle=function(e){var n=t.context.$bs_panelGroup,r=!t.getExpanded();n&&n.onToggle?n.onToggle(t.props.eventKey,r,e):t.props.onToggle(r,e)},t}(0,c.A)(t,e);var n=t.prototype;return n.getChildContext=function(){var e,t=this.props,n=t.eventKey,r=t.id,o=null==n?r:n;if(null!==o){var i=this.context.$bs_panelGroup,a=i&&i.getId||G;e={headingId:a(o,"heading"),bodyId:a(o,"body")}}return{$bs_panel:(0,s.A)({},e,{bsClass:this.props.bsClass,expanded:this.getExpanded(),onToggle:this.handleToggle})}},n.getExpanded=function(){var e=this.context.$bs_panelGroup;return e&&$.call(e,"activeKey")?e.activeKey===this.props.eventKey:!!this.props.expanded},n.render=function(){var e=this.props,t=e.className,n=e.children,r=(0,h.M0)(this.props,["onToggle","eventKey","expanded"]),o=r[0],i=r[1];return p.createElement("div",(0,s.A)({},i,{className:u()(t,(0,h.nG)(o))}),n)},t}(p.Component);Q.propTypes=Y,Q.contextTypes=X,Q.childContextTypes=Z;var J=(0,m.Pd)((0,h.in)("panel",(0,h.EP)(a()(v.Uw).concat([v.OF.DEFAULT,v.OF.PRIMARY]),v.OF.DEFAULT,Q)),{expanded:"onToggle"});o()(J,{Heading:N,Title:q,Body:k,Footer:K,Toggle:U,Collapse:E});var ee=J},16414:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(2120),d=n.n(f),p=n(554),m={id:d()(u().oneOfType([u().string,u().number])),placement:u().oneOf(["top","right","bottom","left"]),positionTop:u().oneOfType([u().number,u().string]),positionLeft:u().oneOfType([u().number,u().string]),arrowOffsetTop:u().oneOfType([u().number,u().string]),arrowOffsetLeft:u().oneOfType([u().number,u().string]),title:u().node},h=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,a=t.positionLeft,l=t.arrowOffsetTop,u=t.arrowOffsetLeft,f=t.title,d=t.className,m=t.style,h=t.children,v=(0,o.A)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","title","className","style","children"]),y=(0,p.UM)(v),b=y[0],g=y[1],_=(0,r.A)({},(0,p.nG)(b),((e={})[n]=!0,e)),E=(0,r.A)({display:"block",top:i,left:a},m),w={top:l,left:u};return c.createElement("div",(0,r.A)({},g,{role:"tooltip",className:s()(d,_),style:E}),c.createElement("div",{className:"arrow",style:w}),f&&c.createElement("h3",{className:(0,p.Pl)(b,"title")},f),c.createElement("div",{className:(0,p.Pl)(b,"content")},h))},t}(c.Component);h.propTypes=m,h.defaultProps={placement:"right"},t.A=(0,p.in)("popover",h)},80779:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(94220),u=n.n(l),f=n(554),d={componentClass:u()},p=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,o.A)(e,["componentClass","className"]),a=(0,f.UM)(i),l=a[0],u=a[1],d=(0,f.nG)(l);return c.createElement(t,(0,r.A)({},u,{className:s()(n,d)}))},t}(c.Component);p.propTypes=d,p.defaultProps={componentClass:"div"},t.A=(0,f.in)("row",p)},28939:function(e,t,n){"use strict";function m(e){return!e||"#"===e.trim()}var r=n(63916),o=n(60879),i=n(29932),a=n(27429),s=n(24577),c=n(995),l=n.n(c),u=n(94220),f=n.n(u),d=n(51429),p={href:l().string,onClick:l().func,onKeyDown:l().func,disabled:l().bool,role:l().string,tabIndex:l().oneOfType([l().number,l().string]),componentClass:f()},h=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleClick=r.handleClick.bind((0,a.A)((0,a.A)(r))),r.handleKeyDown=r.handleKeyDown.bind((0,a.A)((0,a.A)(r))),r}(0,i.A)(t,e);var n=t.prototype;return n.handleClick=function(e){var t=this.props,n=t.disabled,r=t.href,o=t.onClick;(n||m(r))&&e.preventDefault(),n?e.stopPropagation():o&&o(e)},n.handleKeyDown=function(e){" "===e.key&&(e.preventDefault(),this.handleClick(e))},n.render=function(){var e=this.props,t=e.componentClass,n=e.disabled,i=e.onKeyDown,a=(0,o.A)(e,["componentClass","disabled","onKeyDown"]);return m(a.href)&&(a.role=a.role||"button",a.href=a.href||"#"),n&&(a.tabIndex=-1,a.style=(0,r.A)({pointerEvents:"none"},a.style)),s.createElement(t,(0,r.A)({},a,{onClick:this.handleClick,onKeyDown:(0,d.A)(this.handleKeyDown,i)}))},t}(s.Component);h.propTypes=p,h.defaultProps={componentClass:"a"},t.A=h},24248:function(e,t,n){"use strict";var r=n(63916),o=n(60879),i=n(29932),a=n(8006),s=n.n(a),c=n(24577),l=n(995),u=n.n(l),f=n(2120),d=n.n(f),p=n(554),m={id:d()(u().oneOfType([u().string,u().number])),placement:u().oneOf(["top","right","bottom","left"]),positionTop:u().oneOfType([u().number,u().string]),positionLeft:u().oneOfType([u().number,u().string]),arrowOffsetTop:u().oneOfType([u().number,u().string]),arrowOffsetLeft:u().oneOfType([u().number,u().string])},h=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.A)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,a=t.positionLeft,l=t.arrowOffsetTop,u=t.arrowOffsetLeft,f=t.className,d=t.style,m=t.children,h=(0,o.A)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),v=(0,p.UM)(h),y=v[0],b=v[1],g=(0,r.A)({},(0,p.nG)(y),((e={})[n]=!0,e)),_=(0,r.A)({top:i,left:a},d),E={top:l,left:u};return c.createElement("div",(0,r.A)({},b,{role:"tooltip",className:s()(f,g),style:_}),c.createElement("div",{className:(0,p.Pl)(y,"arrow"),style:E}),c.createElement("div",{className:(0,p.Pl)(y,"inner")},m))},t}(c.Component);h.propTypes=m,h.defaultProps={placement:"right"},t.A=(0,p.in)("tooltip",h)},4643:function(e,t,n){"use strict";function l(e){return function(t){var n=null;if(!t.generateChildId){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];(n=c.apply(void 0,[t].concat(o)))||t.id||(n=new Error("In order to properly initialize the "+e+" in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to "+e+" is required"))}return n}}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a()((function(e,n,r){var o;return t.every((function(t){return!!s.A.some(e.children,(function(e){return e.props.bsRole===t}))||(o=t,!1)})),o?new Error("(children) "+r+" - Missing a required child with bsRole: "+o+". "+r+" must have at least one child of each of the following bsRoles: "+t.join(", ")):null}))}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a()((function(e,n,r){var o;return t.every((function(t){return!(s.A.filter(e.children,(function(e){return e.props.bsRole===t})).length>1&&(o=t,1))})),o?new Error("(children) "+r+" - Duplicate children detected of bsRole: "+o+". Only one child each allowed with the following bsRoles: "+t.join(", ")):null}))}n.d(t,{$e:function(){return l},Si:function(){return f},bF:function(){return u}});var r=n(995),o=n.n(r),i=n(69444),a=n.n(i),s=n(40935),c=o().oneOfType([o().string,o().number])},84266:function(e,t,n){"use strict";n.d(t,{IY:function(){return i},OF:function(){return s},Uw:function(){return a},XL:function(){return o},or:function(){return r}});var r={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},o={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},i=["lg","md","sm","xs"],a={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},s={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"}},40935:function(e,t,n){"use strict";var r=n(24577);t.A={map:function(e,t,n){var o=0;return r.Children.map(e,(function(e){return r.isValidElement(e)?t.call(n,e,o++):e}))},forEach:function(e,t,n){var o=0;r.Children.forEach(e,(function(e){
r.isValidElement(e)&&t.call(n,e,o++)}))},count:function(e){var t=0;return r.Children.forEach(e,(function(e){r.isValidElement(e)&&++t})),t},find:function(e,t,n){var o,i=0;return r.Children.forEach(e,(function(e){o||r.isValidElement(e)&&t.call(n,e,i++)&&(o=e)})),o},filter:function(e,t,n){var o=0,i=[];return r.Children.forEach(e,(function(e){r.isValidElement(e)&&t.call(n,e,o++)&&i.push(e)})),i},every:function(e,t,n){var o=0,i=!0;return r.Children.forEach(e,(function(e){i&&r.isValidElement(e)&&(t.call(n,e,o++)||(i=!1))})),i},some:function(e,t,n){var o=0,i=!1;return r.Children.forEach(e,(function(e){i||r.isValidElement(e)&&t.call(n,e,o++)&&(i=!0)})),i},toArray:function(e){var t=[];return r.Children.forEach(e,(function(e){r.isValidElement(e)&&t.push(e)})),t}}},554:function(e,t,n){"use strict";function f(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return"function"==typeof n[n.length-1]?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function d(e,t){var n=(e.bsClass||"").trim();return null==n&&s()(!1),n+(t?"-"+t:"")}function v(e){var t,n=((t={})[d(e)]=!0,t);return e.bsSize&&(n[d(e,u.XL[e.bsSize]||e.bsSize)]=!0),e.bsStyle&&(n[d(e,e.bsStyle)]=!0),n}function y(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function b(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}function g(e){var t={};return o()(e).forEach((function(e){var n=e[0],r=e[1];b(n)||(t[n]=r)})),[y(e),t]}function _(e,t){var n={};t.forEach((function(e){n[e]=!0}));var r={};return o()(e).forEach((function(e){var t=e[0],o=e[1];b(t)||n[t]||(r[t]=o)})),[y(e),r]}n.d(t,{EP:function(){return m},Ep:function(){return h},M0:function(){return _},Pl:function(){return d},UM:function(){return g},in:function(){return p},nG:function(){return v}});var r=n(2867),o=n.n(r),i=n(63916),a=n(37238),s=n.n(a),c=n(995),l=n.n(c),u=n(84266),p=f((function(e,t){var n=t.propTypes||(t.propTypes={}),r=t.defaultProps||(t.defaultProps={});return n.bsClass=l().string,r.bsClass=e,t})),m=f((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.STYLES||[],o=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var a=l().oneOf(r);return n.STYLES=r,a._values=r,n.propTypes=(0,i.A)({},o,{bsStyle:a}),void 0!==t&&((n.defaultProps||(n.defaultProps={})).bsStyle=t),n})),h=f((function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var r=n.SIZES||[],o=n.propTypes||{};e.forEach((function(e){-1===r.indexOf(e)&&r.push(e)}));var a=[];r.forEach((function(e){var t=u.XL[e];t&&t!==e&&a.push(t),a.push(e)}));var s=l().oneOf(a);return s._values=a,n.SIZES=r,n.propTypes=(0,i.A)({},o,{bsSize:s}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n}))},51429:function(e,t){"use strict";t.A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(this,r),t.apply(this,r)}}),null)}},33170:function(e,t,n){"use strict";function i(e,t){var n=t.propTypes,r={},i={};return o()(e).forEach((function(e){var t=e[0],o=e[1];n[t]?r[t]=o:i[t]=o})),[r,i]}n.d(t,{A:function(){return i}});var r=n(2867),o=n.n(r)},82905:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function E(e){return e&&e.__esModule?e:{default:e}}function w(e){var t=e.srcSet||e.srcset;return Array.isArray(t)?t.join():t}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=E(n(995)),a=n(24577),s=E(a),c=n(25666),l=E(n(66275)),u=E(n(21007)),f=E(n(32902)),d=E(n(19784)),p=E(n(66524)),m=E(n(90906)),h=E(n(22193)),v=E(n(5925)),y=E(n(46938)),b=E(n(616)),g=E(n(17887)),_=E(n(37614)),O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.theme=(0,_.default)(u.default,e.theme),n.classes=c.StyleSheet.create((0,_.default)(x,n.theme)),n.state={imageLoaded:!1},b.default.call(n,["gotoNext","gotoPrev","closeBackdrop","handleKeyboardInput","handleImageLoaded"]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getChildContext",value:function(){return{theme:this.theme}}},{key:"componentDidMount",value:function(){this.props.isOpen&&(this.props.enableKeyboardInput&&window.addEventListener("keydown",this.handleKeyboardInput),"number"==typeof this.props.currentImage&&this.preloadImage(this.props.currentImage,this.handleImageLoaded))}},{key:"componentWillReceiveProps",value:function(e){if(g.default){if(e.preloadNextImage){var t=this.props.currentImage,n=e.currentImage+1,r=e.currentImage-1,o=void 0;t&&e.currentImage>t?o=n:t&&e.currentImage<t&&(o=r),o?this.preloadImage(o):(this.preloadImage(r),this.preloadImage(n))}if(this.props.currentImage!==e.currentImage||!this.props.isOpen&&e.isOpen){var i=this.preloadImageData(e.images[e.currentImage],this.handleImageLoaded);i&&this.setState({imageLoaded:i.complete})}!this.props.isOpen&&e.isOpen&&e.enableKeyboardInput&&window.addEventListener("keydown",this.handleKeyboardInput),!e.isOpen&&e.enableKeyboardInput&&window.removeEventListener("keydown",this.handleKeyboardInput)}}},{key:"componentWillUnmount",value:function(){this.props.enableKeyboardInput&&window.removeEventListener("keydown",this.handleKeyboardInput)}},{key:"preloadImage",value:function(e,t){return this.preloadImageData(this.props.images[e],t)}},{key:"preloadImageData",value:function(e,t){if(e){var n=new Image,r=w(e);return n.onerror=t,n.onload=t,n.src=e.src,r&&(n.srcset=r),n}}},{key:"gotoNext",value:function(e){var t=this.props,n=t.currentImage,r=t.images;this.state.imageLoaded&&n!==r.length-1&&(e&&(e.preventDefault(),e.stopPropagation()),this.props.onClickNext())}},{key:"gotoPrev",value:function(e){var t=this.props.currentImage;this.state.imageLoaded&&0!==t&&(e&&(e.preventDefault(),e.stopPropagation()),this.props.onClickPrev())}},{key:"closeBackdrop",value:function(e){"lightboxBackdrop"!==e.target.id&&"FIGURE"!==e.target.tagName||this.props.onClose()}},{key:"handleKeyboardInput",value:function(e){return 37===e.keyCode?(this.gotoPrev(e),!0):39===e.keyCode?(this.gotoNext(e),!0):27===e.keyCode&&(this.props.onClose(),!0)}},{key:"handleImageLoaded",value:function(){this.setState({imageLoaded:!0})}},{key:"renderArrowPrev",value:function(){return 0===this.props.currentImage?null:s.default.createElement(f.default,{direction:"left",icon:"arrowLeft",onClick:this.gotoPrev,title:this.props.leftArrowTitle,type:"button"})}},{key:"renderArrowNext",value:function(){return this.props.currentImage===this.props.images.length-1?null:s.default.createElement(f.default,{direction:"right",icon:"arrowRight",onClick:this.gotoNext,title:this.props.rightArrowTitle,type:"button"})}},{key:"renderDialog",value:function(){var e=this.props,t=e.backdropClosesModal,n=e.isOpen,r=e.showThumbnails,o=e.width,i=this.state.imageLoaded;if(!n)return s.default.createElement("span",{key:"closed"});var a=0;return r&&(a=this.theme.thumbnail.size+this.theme.container.gutter.vertical),s.default.createElement(d.default,{key:"open",onClick:t&&this.closeBackdrop,onTouchEnd:t&&this.closeBackdrop},s.default.createElement("div",null,s.default.createElement("div",{className:(0,c.css)(this.classes.content),style:{marginBottom:a,maxWidth:o}},i&&this.renderHeader(),this.renderImages(),this.renderSpinner(),i&&this.renderFooter()),i&&this.renderThumbnails(),i&&this.renderArrowPrev(),i&&this.renderArrowNext(),this.props.preventScroll&&s.default.createElement(l.default,null)))}},{key:"renderImages",value:function(){var e=this.props,t=e.currentImage,n=e.images,r=e.onClickImage,o=e.showThumbnails,i=this.state.imageLoaded;if(!n||!n.length)return null;var a=n[t],l=w(a),u=l?"100vw":null,f=o?this.theme.thumbnail.size:0,d=this.theme.header.height+this.theme.footer.height+f+this.theme.container.gutter.vertical+"px";return s.default.createElement("figure",{className:(0,c.css)(this.classes.figure)},s.default.createElement("img",{className:(0,c.css)(this.classes.image,i&&this.classes.imageLoaded),onClick:r,sizes:u,alt:a.alt,src:a.src,srcSet:l,style:{cursor:r?"pointer":"auto",maxHeight:"calc(100vh - "+d+")"}}))}},{key:"renderThumbnails",value:function(){var e=this.props,t=e.images,n=e.currentImage,r=e.onClickThumbnail,o=e.showThumbnails,i=e.thumbnailOffset;if(o)return s.default.createElement(h.default,{currentImage:n,images:t,offset:i,onClickThumbnail:r})}},{key:"renderHeader",value:function(){var e=this.props,t=e.closeButtonTitle,n=e.customControls,r=e.onClose,o=e.showCloseButton;return s.default.createElement(m.default,{customControls:n,onClose:r,showCloseButton:o,closeButtonTitle:t})}},{key:"renderFooter",value:function(){var e=this.props,t=e.currentImage,n=e.images,r=e.imageCountSeparator,o=e.showImageCount;return n&&n.length?s.default.createElement(p.default,{caption:n[t].caption,countCurrent:t+1,countSeparator:r,countTotal:n.length,showCount:o}):null}},{key:"renderSpinner",value:function(){var e=this.props,t=e.spinner,n=e.spinnerColor,r=e.spinnerSize,o=this.state.imageLoaded,i=t;return s.default.createElement("div",{className:(0,c.css)(this.classes.spinner,!o&&this.classes.spinnerActive)},s.default.createElement(i,{color:n,size:r}))}},{key:"render",value:function(){return s.default.createElement(v.default,null,this.renderDialog())}}]),t}(a.Component);O.propTypes={backdropClosesModal:i.default.bool,closeButtonTitle:i.default.string,currentImage:i.default.number,customControls:i.default.arrayOf(i.default.node),enableKeyboardInput:i.default.bool,imageCountSeparator:i.default.string,images:i.default.arrayOf(i.default.shape({src:i.default.string.isRequired,srcSet:i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)]),caption:i.default.oneOfType([i.default.string,i.default.element]),thumbnail:i.default.string})).isRequired,isOpen:i.default.bool,leftArrowTitle:i.default.string,onClickImage:i.default.func,onClickNext:i.default.func,onClickPrev:i.default.func,onClose:i.default.func.isRequired,preloadNextImage:i.default.bool,preventScroll:i.default.bool,rightArrowTitle:i.default.string,showCloseButton:i.default.bool,showImageCount:i.default.bool,showThumbnails:i.default.bool,spinner:i.default.func,spinnerColor:i.default.string,spinnerSize:i.default.number,theme:i.default.object,thumbnailOffset:i.default.number,width:i.default.number},O.defaultProps={closeButtonTitle:"Close (Esc)",currentImage:0,enableKeyboardInput:!0,imageCountSeparator:" of ",leftArrowTitle:"Previous (Left arrow key)",onClickShowNextImage:!0,preloadNextImage:!0,preventScroll:!0,rightArrowTitle:"Next (Right arrow key)",showCloseButton:!0,showImageCount:!0,spinner:y.default,spinnerColor:"white",spinnerSize:100,theme:{},thumbnailOffset:2,width:1024},O.childContextTypes={theme:i.default.object.isRequired};var x={content:{position:"relative"},figure:{margin:0},image:{display:"block",height:"auto",margin:"0 auto",maxWidth:"100%",WebkitTouchCallout:"none",userSelect:"none",opacity:0,transition:"opacity 0.3s"},imageLoaded:{opacity:1},spinner:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s",pointerEvents:"none"},spinnerActive:{opacity:1}};t.A=O},32902:function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=t.theme,o=e.direction,u=e.icon,f=e.onClick,p=e.size,m=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["direction","icon","onClick","size"]),h=a.StyleSheet.create((0,c.default)(d,n));return i.default.createElement("button",r({type:"button",className:(0,a.css)(h.arrow,h["arrow__direction__"+o],p&&h["arrow__size__"+p]),onClick:f,onTouchEnd:f},m),i.default.createElement(l.default,{fill:!!n.arrow&&n.arrow.fill||s.default.arrow.fill,type:u}))}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n(995)),i=u(n(24577)),a=n(72496),s=u(n(21007)),c=u(n(37614)),l=u(n(50142));f.propTypes={direction:o.default.oneOf(["left","right"]),icon:o.default.string,onClick:o.default.func.isRequired,size:o.default.oneOf(["medium","small"]).isRequired},f.defaultProps={size:"medium"},f.contextTypes={theme:o.default.object.isRequired};var d={arrow:{background:"none",border:"none",borderRadius:4,cursor:"pointer",outline:"none",padding:10,position:"absolute",top:"50%",WebkitTouchCallout:"none",userSelect:"none"},arrow__size__medium:{height:s.default.arrow.height,marginTop:s.default.arrow.height/-2,width:40,"@media (min-width: 768px)":{width:70}},arrow__size__small:{height:s.default.thumbnail.size,marginTop:s.default.thumbnail.size/-2,width:30,"@media (min-width: 500px)":{width:40}},arrow__direction__right:{right:s.default.container.gutter.horizontal},arrow__direction__left:{left:s.default.container.gutter.horizontal}};t.default=f},19784:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=t.theme,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,[]),s=a.StyleSheet.create((0,c.default)(f,n));return i.default.createElement("div",r({id:"lightboxBackdrop",className:(0,a.css)(s.container)},o))}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(995)),i=l(n(24577)),a=n(72496),s=l(n(21007)),c=l(n(37614));u.contextTypes={theme:o.default.object.isRequired};var f={container:{alignItems:"center",backgroundColor:s.default.container.background,boxSizing:"border-box",display:"flex",height:"100%",justifyContent:"center",left:0,paddingBottom:s.default.container.gutter.vertical,paddingLeft:s.default.container.gutter.horizontal,paddingRight:s.default.container.gutter.horizontal,paddingTop:s.default.container.gutter.vertical,position:"fixed",top:0,width:"100%",zIndex:s.default.container.zIndex}};t.default=u},66524:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=t.theme,o=e.caption,s=e.countCurrent,l=e.countSeparator,u=e.countTotal,d=e.showCount,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["caption","countCurrent","countSeparator","countTotal","showCount"]);if(!o&&!d)return null;var m=a.StyleSheet.create((0,c.default)(f,n)),h=d?i.default.createElement("div",{className:(0,a.css)(m.footerCount)},s,l,u):i.default.createElement("span",null);return i.default.createElement("div",r({className:(0,a.css)(m.footer)},p),o?i.default.createElement("figcaption",{className:(0,a.css)(m.footerCaption)},o):i.default.createElement("span",null),h)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(995)),i=l(n(24577)),a=n(72496),s=l(n(21007)),c=l(n(37614));u.propTypes={caption:o.default.oneOfType([o.default.string,o.default.element]),countCurrent:o.default.number,countSeparator:o.default.string,countTotal:o.default.number,showCount:o.default.bool},u.contextTypes={theme:o.default.object.isRequired};var f={footer:{boxSizing:"border-box",color:s.default.footer.color,cursor:"auto",display:"flex",justifyContent:"space-between",left:0,lineHeight:1.3,paddingBottom:s.default.footer.gutter.vertical,paddingLeft:s.default.footer.gutter.horizontal,paddingRight:s.default.footer.gutter.horizontal,paddingTop:s.default.footer.gutter.vertical},footerCount:{color:s.default.footer.count.color,fontSize:s.default.footer.count.fontSize,paddingLeft:"1em"},footerCaption:{flex:"1 1 0"}};t.default=u},90906:function(e,t,n){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=t.theme,o=e.customControls,u=e.onClose,f=e.showCloseButton,p=e.closeButtonTitle,m=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["customControls","onClose","showCloseButton","closeButtonTitle"]),h=a.StyleSheet.create((0,c.default)(d,n));return i.default.createElement("div",r({className:(0,a.css)(h.header)},m),o||i.default.createElement("span",null),!!f&&i.default.createElement("button",{title:p,className:(0,a.css)(h.close),onClick:u},i.default.createElement(l.default,{fill:!!n.close&&n.close.fill||s.default.close.fill,type:"close"})))}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n(995)),i=u(n(24577)),a=n(72496),s=u(n(21007)),c=u(n(37614)),l=u(n(50142));f.propTypes={customControls:o.default.array,onClose:o.default.func.isRequired,showCloseButton:o.default.bool},f.contextTypes={theme:o.default.object.isRequired};var d={header:{display:"flex",justifyContent:"space-between",height:s.default.header.height},close:{background:"none",border:"none",cursor:"pointer",outline:"none",position:"relative",top:0,verticalAlign:"bottom",zIndex:1,height:40,marginRight:-10,padding:10,width:40}};t.default=f},50142:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(995)),i=l(n(24577)),a=l(n(89163)),s=l(n(25938)),c=l(n(5107)),u={arrowLeft:a.default,arrowRight:s.default,close:c.default},f=function(e){var t=e.fill,n=e.type,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","type"]),a=u[n];return i.default.createElement("span",r({dangerouslySetInnerHTML:{__html:a(t)}},o))};f.propTypes={fill:o.default.string,type:o.default.oneOf(Object.keys(u))},f.defaultProps={fill:"white"},t.default=f},22193:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(n(995)),s=n(24577),c=p(s),l=n(72496),u=p(n(17463)),f=p(n(32902)),d=p(n(21007)),m=l.StyleSheet.create({paginatedThumbnails:{bottom:d.default.container.gutter.vertical,height:d.default.thumbnail.size,padding:"0 50px",position:"absolute",textAlign:"center",whiteSpace:"nowrap",left:"50%",transform:"translateX(-50%)"}}),h={height:d.default.thumbnail.size+2*d.default.thumbnail.gutter,width:40},v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasCustomPage:!1},n.gotoPrev=n.gotoPrev.bind(n),n.gotoNext=n.gotoNext.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentWillReceiveProps",value:function(e){e.currentImage!==this.props.currentImage&&this.setState({hasCustomPage:!1})}},{key:"getFirst",value:function(){var e=this.props,t=e.currentImage,n=e.offset;return this.state.hasCustomPage?this.clampFirst(this.state.first):this.clampFirst(t-n)}},{key:"setFirst",value:function(e,t){var n=this.state.first;e&&(e.preventDefault(),e.stopPropagation()),n!==t&&this.setState({hasCustomPage:!0,first:t})}},{key:"gotoPrev",value:function(e){this.setFirst(e,this.getFirst()-this.props.offset)}},{key:"gotoNext",value:function(e){this.setFirst(e,this.getFirst()+this.props.offset)}},{key:"clampFirst",value:function(e){var t=this.props,n=t.images,r=2*t.offset+1;return e<0?0:e+r>n.length?n.length-r:e}},{key:"renderArrowPrev",value:function(){return this.getFirst()<=0?null:c.default.createElement(f.default,{direction:"left",size:"small",icon:"arrowLeft",onClick:this.gotoPrev,style:h,title:"Previous (Left arrow key)",type:"button"})}},{key:"renderArrowNext",value:function(){var e=this.props,t=e.offset,n=e.images,r=2*t+1;return this.getFirst()+r>=n.length?null:c.default.createElement(f.default,{direction:"right",size:"small",icon:"arrowRight",onClick:this.gotoNext,style:h,title:"Next (Right arrow key)",type:"button"})}},{key:"render",value:function(){var e=this.props,t=e.images,n=e.currentImage,r=e.onClickThumbnail,i=2*e.offset+1,a=[],s=0;return t.length<=i?a=t:(s=this.getFirst(),a=t.slice(s,s+i)),c.default.createElement("div",{className:(0,l.css)(m.paginatedThumbnails)},this.renderArrowPrev(),a.map((function(e,t){return c.default.createElement(u.default,o({key:s+t},e,{index:s+t,onClick:r,active:s+t===n}))})),this.renderArrowNext())}}]),t}(s.Component);t.default=v,v.propTypes={currentImage:a.default.number,images:a.default.array,offset:a.default.number,onClickThumbnail:a.default.func.isRequired}},67395:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(o=n(995))&&o.__esModule?o:{default:o},s=n(24577),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"getChildContext",value:function(){return this.props.context}},{key:"render",value:function(){return s.Children.only(this.props.children)}}]),t}(s.Component);c.propTypes={context:a.default.object.isRequired},c.childContextTypes={theme:a.default.object},t.default=c},5925:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(995)),a=n(24577),s=f(a),c=n(60801),l=n(23539),u=f(n(67395)),d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.portalElement=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=document.createElement("div");document.body.appendChild(e),this.portalElement=e,this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){(0,l.render)(s.default.createElement(u.default,{context:this.context},s.default.createElement("div",null,s.default.createElement("style",null,"\n\t\t\t\t.fade-enter { opacity: 0.01; }\n\t\t\t\t.fade-enter.fade-enter-active { opacity: 1; transition: opacity 200ms; }\n\t\t\t\t.fade-leave { opacity: 1; }\n\t\t\t\t.fade-leave.fade-leave-active { opacity: 0.01; transition: opacity 200ms; }\n\t\t"),s.default.createElement(c.TransitionGroup,this.props,s.default.createElement(c.CSSTransition,{timeout:{enter:200,exit:200},classNames:"fade"},this.props.children)))),this.portalElement)}},{key:"componentWillUnmount",value:function(){(0,l.unmountComponentAtNode)(this.portalElement),document.body.removeChild(this.portalElement)}},{key:"render",value:function(){return null}}]),t}(a.Component);t.default=d,d.contextTypes={theme:i.default.object.isRequired}},46938:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(995)),o=a(n(24577)),i=n(72496),s=function(e){var t=i.StyleSheet.create(l(e));return o.default.createElement("div",{className:(0,i.css)(t.spinner)},o.default.createElement("div",{className:(0,i.css)(t.ripple)}))};s.propTypes={color:r.default.string,size:r.default.number};var c={"0%":{top:"50%",left:"50%",width:0,height:0,opacity:1},"100%":{top:0,left:0,width:"100%",height:"100%",opacity:0}},l=function(e){var t=e.color,n=e.size;return{spinner:{display:"inline-block",position:"relative",width:n,height:n},ripple:{position:"absolute",border:"4px solid "+t,opacity:1,borderRadius:"50%",animationName:c,animationDuration:"1s",animationTimingFunction:"cubic-bezier(0, 0.2, 0.8, 1)",animationIterationCount:"infinite"}}};t.default=s},17463:function(e,t,n){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=e.index,r=e.src,a=e.thumbnail,c=e.active,l=e.onClick,f=t.theme,d=a||r,p=i.StyleSheet.create((0,s.default)(u,f));return o.default.createElement("div",{className:(0,i.css)(p.thumbnail,c&&p.thumbnail__active),onClick:function(e){e.preventDefault(),e.stopPropagation(),l(n)},style:{backgroundImage:'url("'+d+'")'}})}Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(995)),o=c(n(24577)),i=n(72496),a=c(n(21007)),s=c(n(37614));l.propTypes={active:r.default.bool,index:r.default.number,onClick:r.default.func.isRequired,src:r.default.string,thumbnail:r.default.string},l.contextTypes={theme:r.default.object.isRequired};var u={thumbnail:{backgroundPosition:"center",backgroundSize:"cover",borderRadius:2,boxShadow:"inset 0 0 0 1px hsla(0,0%,100%,.2)",cursor:"pointer",display:"inline-block",height:a.default.thumbnail.size,margin:a.default.thumbnail.gutter,overflow:"hidden",width:a.default.thumbnail.size},thumbnail__active:{boxShadow:"inset 0 0 0 2px "+a.default.thumbnail.activeBorderColor}};t.default=l},89163:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<svg fill="'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" xml:space="preserve">\n\t\t<path d="M213.7,256L213.7,256L213.7,256L380.9,81.9c4.2-4.3,4.1-11.4-0.2-15.8l-29.9-30.6c-4.3-4.4-11.3-4.5-15.5-0.2L131.1,247.9 c-2.2,2.2-3.2,5.2-3,8.1c-0.1,3,0.9,5.9,3,8.1l204.2,212.7c4.2,4.3,11.2,4.2,15.5-0.2l29.9-30.6c4.3-4.4,4.4-11.5,0.2-15.8 L213.7,256z"/>\n\t</svg>'}},25938:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<svg fill="'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" xml:space="preserve">\n\t\t<path d="M298.3,256L298.3,256L298.3,256L131.1,81.9c-4.2-4.3-4.1-11.4,0.2-15.8l29.9-30.6c4.3-4.4,11.3-4.5,15.5-0.2l204.2,212.7 c2.2,2.2,3.2,5.2,3,8.1c0.1,3-0.9,5.9-3,8.1L176.7,476.8c-4.2,4.3-11.2,4.2-15.5-0.2L131.3,446c-4.3-4.4-4.4-11.5-0.2-15.8 L298.3,256z"/>\n\t</svg>'}},5107:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return'<svg fill="'+e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n\t\t<path d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4 L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1 c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1 c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"/>\n\t</svg>'}},21007:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={container:{background:"rgba(0, 0, 0, 0.8)",gutter:{horizontal:10,vertical:10},zIndex:2001},header:{height:40},close:{fill:"white"},footer:{color:"white",count:{color:"rgba(255, 255, 255, 0.75)",fontSize:"0.85em"},height:40,gutter:{horizontal:0,vertical:5}},thumbnail:{activeBorderColor:"white",size:50,gutter:2},arrow:{background:"none",fill:"white",height:120}}},616:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this;e.forEach((function(e){return t[e]=t[e].bind(t)}))}},17887:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement)},37614:function(e,t){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o({},t);return Object.keys(n).forEach((function(o){"object"===r(n[o])&&n[o]&&t[o]?i[o]=e(t[o],n[o]):i[o]=n[o]})),i}},58568:function(e,t){"use strict"
;function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function w(e){if("object"===n(e)&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case d:case a:case c:case s:case m:return e;default:switch(e=e&&e.$$typeof){case u:case p:case y:case v:case l:return e;default:return t}}case i:return t}}}function O(e){return w(e)===d}var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;t.AsyncMode=f,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=o,t.ForwardRef=p,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=c,t.StrictMode=s,t.Suspense=m,t.isAsyncMode=function(e){return O(e)||w(e)===f},t.isConcurrentMode=O,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===n(e)&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===c},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===m},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===c||e===s||e===m||e===h||"object"===n(e)&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===g||e.$$typeof===_||e.$$typeof===E||e.$$typeof===b)},t.typeOf=w},15876:function(e,t,n){"use strict";e.exports=n(58568)},20623:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function m(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24577),a=m(i),s=m(n(995)),c=n(23539),l=n(88318),u=m(n(45888)),f=m(n(17959)),d=m(n(41534)),p=m(n(82714)),h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.lazyLoadHandler=n.lazyLoadHandler.bind(n),e.throttle>0&&(e.debounce?n.lazyLoadHandler=(0,u.default)(n.lazyLoadHandler,e.throttle):n.lazyLoadHandler=(0,f.default)(n.lazyLoadHandler,e.throttle)),n.state={visible:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this._mounted=!0;var e=this.getEventNode();this.lazyLoadHandler(),this.lazyLoadHandler.flush&&this.lazyLoadHandler.flush(),(0,l.add)(window,"resize",this.lazyLoadHandler),(0,l.add)(e,"scroll",this.lazyLoadHandler),e!==window&&(0,l.add)(window,"scroll",this.lazyLoadHandler)}},{key:"componentWillReceiveProps",value:function(){this.state.visible||this.lazyLoadHandler()}},{key:"shouldComponentUpdate",value:function(e,t){return t.visible}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this.lazyLoadHandler.cancel&&this.lazyLoadHandler.cancel(),this.detachListeners()}},{key:"getEventNode",value:function(){return(0,d.default)((0,c.findDOMNode)(this))}},{key:"getOffset",value:function(){var e=this.props,t=e.offset,n=e.offsetVertical,r=e.offsetHorizontal,o=e.offsetTop,i=e.offsetBottom,a=e.offsetLeft,s=e.offsetRight,c=e.threshold||t,l=n||c,u=r||c;return{top:o||l,bottom:i||l,left:a||u,right:s||u}}},{key:"lazyLoadHandler",value:function(){if(this._mounted){var e=this.getOffset(),t=(0,c.findDOMNode)(this),n=this.getEventNode();if((0,p.default)(t,n,e)){var r=this.props.onContentVisible;this.setState({visible:!0},(function(){r&&r()})),this.detachListeners()}}}},{key:"detachListeners",value:function(){var e=this.getEventNode();(0,l.remove)(window,"resize",this.lazyLoadHandler),(0,l.remove)(e,"scroll",this.lazyLoadHandler),e!==window&&(0,l.remove)(window,"scroll",this.lazyLoadHandler)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.height,o=e.width,s=this.state.visible,c={height:r,width:o},l="LazyLoad"+(s?" is-visible":"")+(n?" "+n:"");return a.default.createElement(this.props.elementType,{className:l,style:c},s&&i.Children.only(t))}}]),t}(i.Component);t.A=h,h.propTypes={children:s.default.node.isRequired,className:s.default.string,debounce:s.default.bool,elementType:s.default.string,height:s.default.oneOfType([s.default.string,s.default.number]),offset:s.default.number,offsetBottom:s.default.number,offsetHorizontal:s.default.number,offsetLeft:s.default.number,offsetRight:s.default.number,offsetTop:s.default.number,offsetVertical:s.default.number,threshold:s.default.number,throttle:s.default.number,width:s.default.oneOfType([s.default.string,s.default.number]),onContentVisible:s.default.func},h.defaultProps={elementType:"div",debounce:!0,offset:0,offsetBottom:0,offsetHorizontal:0,offsetLeft:0,offsetRight:0,offsetTop:0,offsetVertical:0,throttle:250}},71816:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}},82714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,r){if(i(t))return!1;var a=void 0,s=void 0,c=void 0,l=void 0;if(void 0===n||n===window)a=window.pageYOffset,c=window.pageXOffset,s=a+window.innerHeight,l=c+window.innerWidth;else{if(!e(n,window,r))return!1;var u=(0,o.default)(n);a=u.top,c=u.left,s=a+n.offsetHeight,l=c+n.offsetWidth}var f=(0,o.default)(t);return a<=f.top+t.offsetHeight+r.top&&s>=f.top-r.bottom&&c<=f.left+t.offsetWidth+r.left&&l>=f.left-r.right};var r,o=(r=n(71816))&&r.__esModule?r:{default:r},i=function(e){return null===e.offsetParent}},41534:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return"undefined"!=typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style[t]},r=function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")};t.default=function(e){if(!(e instanceof HTMLElement))return window;for(var t=e;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(r(t)))return t;t=t.parentNode}return window}},58586:function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function i(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var c=e.displayName||e.name,l="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+c+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=o),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:function(){return a}}),r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0},94176:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}t.__esModule=!0;var o=u(n(995)),i=u(n(18644)),a=u(n(24577)),s=u(n(23539)),c=u(n(46116)),l=u(n(26145)),d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return n=r=f(this,e.call.apply(e,[this].concat(i))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,c.default)(r.props.container,(0,l.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?a.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=s.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,(function(){t&&r.props.onRendered&&r.props.onRendered()}))}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(s.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,c.default)(e.container,(0,l.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(a.default.Component);d.displayName="Portal",d.propTypes={container:o.default.oneOfType([i.default,o.default.func]),onRendered:o.default.func},t.default=d,e.exports=t.default},98636:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function O(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=O(n(71568)),a=O(n(57048)),s=O(n(78210)),c=O(n(995)),l=O(n(18644)),u=O(n(21147)),f=O(n(94220)),d=n(24577),p=O(d),m=O(n(23539)),h=O(n(59158)),v=O(n(91161)),y=O(n(31139)),b=O(n(74637)),g=O(n(67042)),_=O(n(93734)),E=O(n(46116)),w=O(n(26145)),k=new v.default,S=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=x(this,e.call.apply(e,[this].concat(i))),A.call(r),x(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map((function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])})),r},t.prototype.render=function(){var e=this.props,n=e.show,r=e.container,i=e.children,a=e.transition,s=e.backdrop,c=e.className,l=e.style,u=e.onExit,f=e.onExiting,m=e.onEnter,h=e.onEntering,v=e.onEntered,g=p.default.Children.only(i),_=this.omitProps(this.props,t.propTypes);if(!(n||a&&!this.state.exited))return null;var E=g.props,w=E.role,O=E.tabIndex;return void 0!==w&&void 0!==O||(g=(0,d.cloneElement)(g,{role:void 0===w?"document":w,tabIndex:null==O?"-1":O})),a&&(g=p.default.createElement(a,{appear:!0,unmountOnExit:!0,in:n,onExit:u,onExiting:f,onExited:this.handleHidden,onEnter:m,onEntering:h,onEntered:v},g)),p.default.createElement(y.default,{ref:this.setMountNode,container:r,onRendered:this.onPortalRendered},p.default.createElement("div",o({ref:this.setModalNodeRef,role:w||"dialog"},_,{style:l,className:c}),s&&this.renderBackdrop(),p.default.createElement(b.default,{ref:this.setDialogRef},g)))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,i.default)((0,w.default)(this));e&&!(0,a.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,h.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return m.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(p.default.Component);S.propTypes=o({},y.default.propTypes,{show:c.default.bool,container:c.default.oneOfType([l.default,c.default.func]),onShow:c.default.func,onHide:c.default.func,backdrop:c.default.oneOfType([c.default.bool,c.default.oneOf(["static"])]),renderBackdrop:c.default.func,onEscapeKeyDown:c.default.func,onEscapeKeyUp:(0,u.default)(c.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:c.default.func,backdropStyle:c.default.object,backdropClassName:c.default.string,containerClassName:c.default.string,keyboard:c.default.bool,transition:f.default,backdropTransition:f.default,autoFocus:c.default.bool,enforceFocus:c.default.bool,restoreFocus:c.default.bool,onEnter:c.default.func,onEntering:c.default.func,onEntered:c.default.func,onExit:c.default.func,onExiting:c.default.func,onExited:c.default.func,manager:c.default.object.isRequired}),S.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:k,renderBackdrop:function(e){return p.default.createElement("div",e)}};var A=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,o=t.renderBackdrop,i=t.backdropTransition,a=o({ref:function(t){return e.backdrop=t},style:n,className:r,onClick:e.handleBackdropClick});return i&&(a=p.default.createElement(i,{appear:!0,in:e.props.show},a)),a},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,w.default)(e),n=(0,E.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,g.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,g.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,_.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){var t;e.setState({exited:!0}),e.onHide(),e.props.onExited&&(t=e.props).onExited.apply(t,arguments)},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){s.default&&(e.lastFocus=(0,i.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,i.default)((0,w.default)(e));t&&!(0,a.default)(t,n)&&t.focus()}}};S.Manager=v.default,t.default=S,e.exports=t.default},91161:function(e,t,n){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=c(n(68121)),o=c(n(14888)),i=c(n(56856)),a=c(n(6321)),s=n(12237);t.default=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=n.hideSiblingNodes,l=void 0===c||c,u=n.handleContainerOverflow,f=void 0===u||u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.add=function(e,n,c){var l=t.modals.indexOf(e),u=t.containers.indexOf(n);if(-1!==l)return l;if(l=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,s.hideSiblings)(n,e.mountNode),-1!==u)return t.data[u].modals.push(e),l;var f={modals:[e],classes:c?c.split(/\s+/):[],overflowing:(0,a.default)(n)};return t.handleContainerOverflow&&function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,o.default)(t,"paddingRight")||0,10)+(0,i.default)()+"px"),(0,o.default)(t,n)}(f,n),f.classes.forEach(r.default.addClass.bind(null,n)),t.containers.push(n),t.data.push(f),l},this.remove=function(e){var n=t.modals.indexOf(e);if(-1!==n){var o=function(e,t){return n=function(e){return-1!==e.modals.indexOf(t)},r=-1,e.some((function(e,t){if(n(e))return r=t,!0})),r;var n,r}(t.data,e),i=t.data[o],a=t.containers[o];i.modals.splice(i.modals.indexOf(e),1),t.modals.splice(n,1),0===i.modals.length?(i.classes.forEach(r.default.removeClass.bind(null,a)),t.handleContainerOverflow&&function(e,t){var n=e.style;Object.keys(n).forEach((function(e){return t.style[e]=n[e]}))}(i,a),t.hideSiblingNodes&&(0,s.showSiblings)(a,e.mountNode),t.containers.splice(o,1),t.data.splice(o,1)):t.hideSiblingNodes&&(0,s.ariaHidden)(!1,i.modals[i.modals.length-1].mountNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=l,this.handleContainerOverflow=f,this.modals=[],this.containers=[],this.data=[]},e.exports=t.default},74017:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function f(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=f(n(995)),a=f(n(94220)),s=f(n(24577)),c=f(n(31139)),l=f(n(11194)),u=f(n(26690)),d=function(e){function t(n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,o));return i.handleHidden=function(){var e;i.setState({exited:!0}),i.props.onExited&&(e=i.props).onExited.apply(e,arguments)},i.state={exited:!n.show},i.onHiddenListener=i.handleHidden.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,o=e.placement,i=e.shouldUpdatePosition,a=e.rootClose,f=e.children,d=e.transition,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(p.show||d&&!this.state.exited))return null;var m=f;if(m=s.default.createElement(l.default,{container:t,containerPadding:n,target:r,placement:o,shouldUpdatePosition:i},m),d){var h=p.onExit,v=p.onExiting,y=p.onEnter,b=p.onEntering,g=p.onEntered;m=s.default.createElement(d,{in:p.show,appear:!0,onExit:h,onExiting:v,onExited:this.onHiddenListener,onEnter:y,onEntering:b,onEntered:g},m)}return a&&(m=s.default.createElement(u.default,{onRootClose:p.onHide,event:p.rootCloseEvent},m)),s.default.createElement(c.default,{container:t},m)},t}(s.default.Component);d.propTypes=o({},c.default.propTypes,l.default.propTypes,{show:i.default.bool,rootClose:i.default.bool,rootCloseEvent:u.default.propTypes.event,onHide:function(e){var t=i.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,[e].concat(r))},transition:a.default,onEnter:i.default.func,onEntering:i.default.func,onEntered:i.default.func,onExit:i.default.func,onExiting:i.default.func,onExited:i.default.func}),t.default=d,e.exports=t.default},31139:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}t.__esModule=!0;var o=d(n(78210)),i=d(n(995)),a=d(n(18644)),s=d(n(24577)),c=d(n(23539)),l=d(n(46116)),u=d(n(26145)),f=d(n(94176)),m=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=p(this,e.call.apply(e,[this].concat(i))),r.getMountNode=function(){return r._portalContainerNode},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.UNSAFE_componentWillMount=function(){if(o.default){var e=this.props.container;"function"==typeof e&&(e=e()),e&&!c.default.findDOMNode(e)||this.setContainer(e)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(e){this._portalContainerNode=(0,l.default)(e,(0,u.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?c.default.createPortal(this.props.children,this._portalContainerNode):null},t}(s.default.Component);m.displayName="Portal",m.propTypes={container:i.default.oneOfType([a.default,i.default.func]),onRendered:i.default.func},t.default=c.default.createPortal?m:f.default,e.exports=t.default},11194:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=m(n(8006)),a=m(n(995)),s=m(n(18644)),c=n(24577),l=m(c),u=m(n(23539)),f=m(n(56784)),d=m(n(46116)),p=m(n(26145)),v=function(e){function t(n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,o));return i.getTarget=function(){var e=i.props.target,t="function"==typeof e?e():e;return t&&u.default.findDOMNode(t)||null},i.maybeUpdatePosition=function(e){var t=i.getTarget();(i.props.shouldUpdatePosition||t!==i._lastTarget||e)&&i.updatePosition(t)},i.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},i._needsFlush=!1,i._lastTarget=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=h(e,["children","className"]),a=this.state,s=a.positionLeft,u=a.positionTop,f=h(a,["positionLeft","positionTop"]);delete r.target,delete r.container,delete r.containerPadding,delete r.shouldUpdatePosition;var d=l.default.Children.only(t);return(0,c.cloneElement)(d,o({},r,f,{positionLeft:s,positionTop:u,className:(0,i.default)(n,d.props.className),style:o({},d.props.style,{left:s,top:u})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,e){var t=u.default.findDOMNode(this),n=(0,d.default)(this.props.container,(0,p.default)(this).body);this.setState((0,f.default)(this.props.placement,t,e,n,this.props.containerPadding))}else this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null})},t}(l.default.Component);v.propTypes={target:a.default.oneOfType([s.default,a.default.func]),container:a.default.oneOfType([s.default,a.default.func]),containerPadding:a.default.number,placement:a.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:a.default.bool},v.displayName="Position",v.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=v,e.exports=t.default},74637:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a(n(995)),i=a(n(24577)),s={children:o.default.node},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.children},t}(i.default.Component);c.propTypes=s,t.default=c,e.exports=t.default},26690:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function u(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=u(n(57048)),i=u(n(995)),a=u(n(24577)),s=u(n(23539)),c=u(n(67042)),l=u(n(26145)),f=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return a.addEventListeners=function(){var e=a.props.event,t=(0,l.default)(a);a.documentMouseCaptureListener=(0,c.default)(t,e,a.handleMouseCapture,!0),a.documentMouseListener=(0,c.default)(t,e,a.handleMouse),
a.documentKeyupListener=(0,c.default)(t,"keyup",a.handleKeyUp)},a.removeEventListeners=function(){a.documentMouseCaptureListener&&a.documentMouseCaptureListener.remove(),a.documentMouseListener&&a.documentMouseListener.remove(),a.documentKeyupListener&&a.documentKeyupListener.remove()},a.handleMouseCapture=function(e){var t;a.preventMouseRootClose=!!((t=e).metaKey||t.altKey||t.ctrlKey||t.shiftKey)||!function(e){return 0===e.button}(e)||(0,o.default)(s.default.findDOMNode(a),e.target)},a.handleMouse=function(e){!a.preventMouseRootClose&&a.props.onRootClose&&a.props.onRootClose(e)},a.handleKeyUp=function(e){27===e.keyCode&&a.props.onRootClose&&a.props.onRootClose(e)},a.preventMouseRootClose=!1,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(a.default.Component);f.displayName="RootCloseWrapper",f.propTypes={onRootClose:i.default.func,children:i.default.element,disabled:i.default.bool,event:i.default.oneOf(["click","mousedown"])},f.defaultProps={event:"click"},t.default=f,e.exports=t.default},67042:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e,t,n,i){return(0,r.default)(e,t,n,i),{remove:function(){(0,o.default)(e,t,n,i)}}};var r=i(n(65349)),o=i(n(54699));e.exports=t.default},93734:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0;return document.addEventListener?(document.addEventListener("focus",e,!0),t=function(){return document.removeEventListener("focus",e,!0)}):(document.attachEvent("onfocusin",e),t=function(){return document.detachEvent("onfocusin",e)}),{remove:t}},e.exports=t.default},56784:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=void 0,n=void 0,o=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,o=(0,i.default)((0,a.default)(e).documentElement)||(0,i.default)(e);else{var s=(0,r.default)(e);t=s.width,n=s.height,o=(0,i.default)(e)}return{width:t,height:n,scroll:o}}t.__esModule=!0,t.default=function(e,t,n,i,a){var s="BODY"===i.tagName?(0,r.default)(n):(0,o.default)(n,i),l=(0,r.default)(t),u=l.height,f=l.width,d=void 0,p=void 0,m=void 0,h=void 0;if("left"===e||"right"===e){p=s.top+(s.height-u)/2,d="left"===e?s.left-f:s.left+s.width;var v=function(e,t,n,r){var o=c(n),i=o.scroll,a=o.height,s=e-r-i,l=e+r-i+t;return s<0?-s:l>a?a-l:0}(p,u,i,a);p+=v,h=50*(1-2*v/u)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');d=s.left+(s.width-f)/2,p="top"===e?s.top-u:s.top+s.height;var y=function(e,t,n,r){var o=c(n).width,i=e-r,a=e+r+t;return i<0?-i:a>o?o-a:0}(d,f,i,a);d+=y,m=50*(1-2*y/f)+"%",h=void 0}return{positionLeft:d,positionTop:p,arrowOffsetLeft:m,arrowOffsetTop:h}};var r=s(n(69218)),o=s(n(2746)),i=s(n(47441)),a=s(n(26145));e.exports=t.default},46116:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e="function"==typeof e?e():e,o.default.findDOMNode(e)||t};var r,o=(r=n(23539))&&r.__esModule?r:{default:r};e.exports=t.default},6321:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return(0,r.default)(e)||(t=e)&&"body"===t.tagName.toLowerCase()?function(e){var t=(0,o.default)(e),n=(0,r.default)(t).innerWidth;if(!n){var i=t.documentElement.getBoundingClientRect();n=i.right-Math.abs(i.left)}return t.body.clientWidth<n}(e):e.scrollHeight>e.clientHeight;var t};var r=i(n(11001)),o=i(n(34020));e.exports=t.default},12237:function(e,t){"use strict";function o(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}t.__esModule=!0,t.ariaHidden=o,t.hideSiblings=function(e,t){r(e,t,(function(e){return o(!0,e)}))},t.showSiblings=function(e,t){r(e,t,(function(e){return o(!1,e)}))};var n=["template","script","style"],r=function(e,t,r){t=[].concat(t),[].forEach.call(e.children,(function(e){var o,i,a;-1===t.indexOf(e)&&(i=(o=e).nodeType,a=o.tagName,1===i&&-1===n.indexOf(a.toLowerCase()))&&r(e)}))}},26145:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return(0,o.default)(r.default.findDOMNode(e))};var r=i(n(23539)),o=i(n(34020));e.exports=t.default},13044:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(24577)),o=n(92232),i=a(o),s=function(e){var t=e.isActive,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isActive"]);return t?r.default.createElement(i.default,n):null};s.defaultProps=o.defaultProps,t.default=s},92232:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0;var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(24577);(o=a)&&o.__esModule;var c=t.defaultProps={attributes:{},styles:{}},l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.originalAttributes={},r.originalStyles={},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.attributes,r=t.styles,o=t.target,i=void 0===o?document.body:o;i&&(this.attributeKeys=Object.keys(n),this.styleKeys=Object.keys(r),this.styleKeys.length&&this.styleKeys.forEach((function(t){e.originalStyles[t]=i.style.getPropertyValue(t),i.style.setProperty(t,r[t])})),this.attributeKeys.length&&this.attributeKeys.forEach((function(t){e.originalAttributes[t]=i.getAttribute(t)||"",i.setAttribute(t,n[t])})))}},{key:"componentWillUnmount",value:function(){var e=this,t=this.props.target,n=void 0===t?document.body:t;n&&(this.styleKeys.length&&this.styleKeys.forEach((function(t){n.style.setProperty(t,e.originalStyles[t])})),this.attributeKeys.length&&this.attributeKeys.forEach((function(t){e.originalAttributes[t]?n.setAttribute(t,e.originalAttributes[t]):n.removeAttribute(t)})))}},{key:"render",value:function(){return null}}]),t}(a.PureComponent);l.defaultProps=c,t.default=l},18685:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(13044);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(r).default}});var o=n(92232);Object.defineProperty(t,"SimpleToggle",{enumerable:!0,get:function(){return i(o).default}})},22053:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){return e&&e.__esModule?e:{default:e}}var o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":r(e)},i=s(n(24577)),a=s(n(8699));t.A=(0,a.default)((function(e,t,n,r,a){var s=e[t],c=void 0===s?"undefined":o(s);return i.default.isValidElement(s)?new Error("Invalid "+r+" `"+a+"` of type ReactElement supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):"function"!==c&&"string"!==c?new Error("Invalid "+r+" `"+a+"` of value `"+s+"` supplied to `"+n+"`, expected an element type (a string or a ReactClass)."):null}))},8699:function(e,t){"use strict";t.__esModule=!0,t.default=function(e){function t(t,n,r,o,i,a){var s=o||"<<anonymous>>",c=a||r;if(null==n[r])return t?new Error("Required "+i+" `"+c+"` was not specified in `"+s+"`."):null;for(var l=arguments.length,u=Array(l>6?l-6:0),f=6;f<l;f++)u[f-6]=arguments[f];return e.apply(void 0,[n,r,s,i,c].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}},84497:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(24577),s=d(a),c=n(61082),l=n(18685),u=n(55998),f=d(n(72331)),p=0,m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){p++,c.canUseDOM&&(this.initialHeight=window.innerHeight)}},{key:"componentWillUnmount",value:function(){if(p=Math.max(p-1,0),c.canUseDOM){var e=window.innerHeight-this.initialHeight;e&&window.scrollTo(0,window.pageYOffset+e)}this.initialHeight=window.innerHeight}},{key:"render",value:function(){var e=this.props.accountForScrollbars&&p<1?{"padding-right":(0,u.getPadding)()+"px"}:{},t=(0,u.getDocumentHeight)()+"px";return s.default.createElement(l.SimpleToggle,{styles:o({"box-sizing":"border-box",overflow:"hidden",position:"relative",height:t},e)})}}]),t}(a.PureComponent);m.defaultProps={accountForScrollbars:!0},t.default=(0,f.default)(m)},66275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84497);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}})},55998:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preventTouchMove=function(e){e.preventDefault()},t.allowTouchMove=function(e){e.stopPropagation()},t.preventInertiaScroll=function(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)},t.isTouchDevice=function(){return!!window&&("ontouchstart"in window||navigator.maxTouchPoints)},t.getPadding=function(){if(!document||!window)return 0;var e=parseInt(document.body.paddingRight,10)||0,t=document.body?document.body.clientWidth:0;return window.innerWidth-t+e||0},t.camelToKebab=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.getWindowHeight=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(window&&window.innerHeight)return window.innerHeight*e},t.getDocumentHeight=function(){if(document&&document.body)return document.body.clientHeight},t.parse=function(e){return isNaN(e)?e:e+"px"}},72331:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=r=u(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),r.listenerOptions={capture:!1,passive:!1},u(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),o(n,[{key:"componentDidMount",value:function(){if(c.canUseDOM){var e=this.props.touchScrollTarget,t=document.body;t&&(0,l.isTouchDevice)()&&(t.addEventListener("touchmove",l.preventTouchMove,this.listenerOptions),e&&(e.addEventListener("touchstart",l.preventInertiaScroll,this.listenerOptions),e.addEventListener("touchmove",l.allowTouchMove,this.listenerOptions)))}}},{key:"componentWillUnmount",value:function(){if(c.canUseDOM){var e=this.props.touchScrollTarget,t=document.body;t&&(0,l.isTouchDevice)()&&(t.removeEventListener("touchmove",l.preventTouchMove,this.listenerOptions),e&&(e.removeEventListener("touchstart",l.preventInertiaScroll,this.listenerOptions),e.removeEventListener("touchmove",l.allowTouchMove,this.listenerOptions)))}}},{key:"render",value:function(){return s.default.createElement(e,this.props)}}]),n}(a.PureComponent)};var i,a=n(24577),s=(i=a)&&i.__esModule?i:{default:i},c=n(61082),l=n(55998)},61001:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(995)),a=f(n(83224)),s=f(n(37057)),c=f(n(24577)),l=f(n(61346)),u=n(95737),p=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},m=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},h=(o({},l.default.propTypes,{classNames:u.classNamesShape,onEnter:i.func,onEntering:i.func,onEntered:i.func,onExit:i.func,onExiting:i.func,onExited:i.func}),function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=d(this,e.call.apply(e,[this].concat(i))),r.onEnter=function(e,t){var n=r.getClassNames(t?"appear":"enter").className;r.removeClasses(e,"exit"),p(e,n),r.props.onEnter&&r.props.onEnter(e)},r.onEntering=function(e,t){var n=r.getClassNames(t?"appear":"enter").activeClassName;r.reflowAndAddClass(e,n),r.props.onEntering&&r.props.onEntering(e)},r.onEntered=function(e,t){var n=r.getClassNames("enter").doneClassName;r.removeClasses(e,t?"appear":"enter"),p(e,n),r.props.onEntered&&r.props.onEntered(e)},r.onExit=function(e){var t=r.getClassNames("exit").className;r.removeClasses(e,"appear"),r.removeClasses(e,"enter"),p(e,t),r.props.onExit&&r.props.onExit(e)},r.onExiting=function(e){var t=r.getClassNames("exit").activeClassName;r.reflowAndAddClass(e,t),r.props.onExiting&&r.props.onExiting(e)},r.onExited=function(e){var t=r.getClassNames("exit").doneClassName;r.removeClasses(e,"exit"),p(e,t),r.props.onExited&&r.props.onExited(e)},r.getClassNames=function(e){var t=r.props.classNames,n="string"!=typeof t?t[e]:t+"-"+e;return{className:n,activeClassName:"string"!=typeof t?t[e+"Active"]:n+"-active",doneClassName:"string"!=typeof t?t[e+"Done"]:n+"-done"}},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,o=n.activeClassName,i=n.doneClassName;r&&m(e,r),o&&m(e,o),i&&m(e,i)},t.prototype.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,p(e,t))},t.prototype.render=function(){var e=o({},this.props);return delete e.classNames,c.default.createElement(l.default,o({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.default.Component));h.propTypes={},t.default=h,e.exports=t.default},57470:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}t.__esModule=!0;var o=c(n(995)),i=c(n(24577)),a=n(23539),s=c(n(3823));o.default.bool.isRequired;var u=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=l(this,e.call.apply(e,[this].concat(i))),f.call(r),l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleLifecycle=function(e,t,n){var r,o=this.props.children,s=i.default.Children.toArray(o)[t];s.props[e]&&(r=s.props)[e].apply(r,n),this.props[e]&&this.props[e]((0,a.findDOMNode)(this))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.in,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","in"]),o=i.default.Children.toArray(t),a=o[0],c=o[1];return delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,i.default.createElement(s.default,r,n?i.default.cloneElement(a,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):i.default.cloneElement(c,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},t}(i.default.Component),f=function(){var e=this;this.handleEnter=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEnter",0,n)},this.handleEntering=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEntering",0,n)},this.handleEntered=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onEntered",0,n)},this.handleExit=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExit",1,n)},this.handleExiting=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExiting",1,n)},this.handleExited=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLifecycle("onExited",1,n)}};u.propTypes={},t.default=u,e.exports=t.default},61346:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e){return e&&e.__esModule?e:{default:e}}function h(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(995)),i=c(n(24577)),a=c(n(23539)),s=n(58586);n(95737);var l=t.UNMOUNTED="unmounted",u=t.EXITED="exited",f=t.ENTERING="entering",d=t.ENTERED="entered",p=t.EXITING="exiting",m=function(e){function t(n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,o)),a=o.transitionGroup,s=a&&!a.isMounting?n.enter:n.appear,c=void 0;return i.appearStatus=null,n.in?s?(c=u,i.appearStatus=f):c=d:c=n.unmountOnExit||n.mountOnEnter?l:u,i.state={status:c},i.nextCallback=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:u}:null},t.prototype.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.prototype.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==d&&(t=f):n!==f&&n!==d||(t=p)}this.updateStatus(!1,t)},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,r=void 0;return t=n=r=e,null!=e&&"number"!=typeof e&&(t=e.exit,n=e.enter,r=e.appear),{exit:t,enter:n,appear:r}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(null!==t){this.cancelNextCallback();var n=a.default.findDOMNode(this);t===f?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:l})},t.prototype.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,i=this.getTimeouts();t||r?(this.props.onEnter(e,o),this.safeSetState({status:f},(function(){n.props.onEntering(e,o),n.onTransitionEnd(e,i.enter,(function(){n.safeSetState({status:d},(function(){n.props.onEntered(e,o)}))}))}))):this.safeSetState({status:d},(function(){n.props.onEntered(e)}))},t.prototype.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:p},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:u},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:u},(function(){t.props.onExited(e)}))},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},t}(i.default.Component);m.contextTypes={transitionGroup:o.object},m.childContextTypes={transitionGroup:function(){}},m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:h,onEntering:h,onEntered:h,onExit:h,onExiting:h,onExited:h},m.UNMOUNTED=0,m.EXITED=1,m.ENTERING=2,m.ENTERED=3,m.EXITING=4,t.default=(0,s.polyfill)(m)},3823:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n(995)),a=l(n(24577)),s=n(58586),c=n(42255),u=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},f=(i.default.any,i.default.node,i.default.bool,i.default.bool,i.default.bool,i.default.func,function(e){function t(n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,e.call(this,n,o)),a=i.handleExited.bind(i);return i.state={handleExited:a,firstRender:!0},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},t.prototype.componentDidMount=function(){this.appeared=!0},t.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,c.getInitialChildMapping)(e,r):(0,c.getNextChildMapping)(e,n,r),firstRender:!1}},t.prototype.handleExited=function(e,t){var n=(0,c.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.setState((function(t){var n=o({},t.children);return delete n[e.key],{children:n}})))},t.prototype.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["component","childFactory"]),o=u(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:a.default.createElement(t,r,o)},t}(a.default.Component));f.childContextTypes={transitionGroup:i.default.object.isRequired},f.propTypes={},f.defaultProps={component:"div",childFactory:function(e){return e}},t.default=(0,s.polyfill)(f),e.exports=t.default},60801:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=s(n(61001)),o=s(n(57470)),i=s(n(3823)),a=s(n(61346));e.exports={Transition:a.default,TransitionGroup:i.default,ReplaceTransition:o.default,CSSTransition:r.default}},42255:function(e,t,n){"use strict";function o(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var a=void 0,s={};for(var c in t){if(r[c])for(a=0;a<r[c].length;a++){var l=r[c][a];s[r[c][a]]=n(l)}s[c]=n(c)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}t.__esModule=!0,t.getChildMapping=o,t.mergeChildMappings=i,t.getInitialChildMapping=function(e,t){return o(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=o(e.children),c=i(t,s);return Object.keys(c).forEach((function(o){var i=c[o];if((0,r.isValidElement)(i)){var l=o in t,u=o in s,f=t[o],d=(0,r.isValidElement)(f)&&!f.props.in;!u||l&&!d?u||!l||d?u&&l&&(0,r.isValidElement)(f)&&(c[o]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:f.props.in,exit:a(i,"exit",e),enter:a(i,"enter",e)})):c[o]=(0,r.cloneElement)(i,{in:!1}):c[o]=(0,r.cloneElement)(i,{onExited:n.bind(null,i),in:!0,exit:a(i,"exit",e),enter:a(i,"enter",e)})}})),c};var r=n(24577)},95737:function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};var r,o=(r=n(995))&&r.__esModule?r:{default:r};t.timeoutsShape=o.default.oneOfType([o.default.number,o.default.shape({enter:o.default.number,exit:o.default.number}).isRequired]),t.classNamesShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,exit:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterDone:o.default.string,enterActive:o.default.string,exit:o.default.string,exitDone:o.default.string,exitActive:o.default.string})])},93100:function(e,t,n){"use strict";function s(e,t){return void 0!==e[t]}function c(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t,n){void 0===n&&(n=[]);var o,p=e.displayName||e.name||"Component",m=!!(o=e)&&("function"!=typeof o||o.prototype&&o.prototype.isReactComponent),h=Object.keys(t),v=h.map(c);!m&&n.length&&i()(!1);var y=function(o){function f(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a]
;(e=o.call.apply(o,[this].concat(i))||this).handlers=Object.create(null),h.forEach((function(n){var r=t[n];e.handlers[r]=function(t){if(e.props[r]){var o;e._notifying=!0;for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];(o=e.props)[r].apply(o,[t].concat(a)),e._notifying=!1}e.unmounted||e.setState((function(e){var r,o=e.values;return{values:l(Object.create(null),o,(r={},r[n]=t,r))}}))}})),n.length&&(e.attachRef=function(t){e.inner=t});var s=Object.create(null);return h.forEach((function(t){s[t]=e.props[c(t)]})),e.state={values:s,prevProps:{}},e}var i,a;a=o,(i=f).prototype=Object.create(a.prototype),i.prototype.constructor=i,u(i,a);var d=f.prototype;return d.shouldComponentUpdate=function(){return!this._notifying},f.getDerivedStateFromProps=function(e,t){var n=t.values,r=t.prevProps,o={values:l(Object.create(null),n),prevProps:{}};return h.forEach((function(t){o.prevProps[t]=e[t],!s(e,t)&&s(r,t)&&(o.values[t]=e[c(t)])})),o},d.componentWillUnmount=function(){this.unmounted=!0},d.render=function(){var t=this,n=this.props,o=n.innerRef,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(n,["innerRef"]);v.forEach((function(e){delete i[e]}));var a={};return h.forEach((function(e){var n=t.props[e];a[e]=void 0!==n?n:t.state.values[e]})),r.createElement(e,l({},i,a,this.handlers,{ref:o||this.attachRef}))},f}(r.Component);(0,f.polyfill)(y),y.displayName="Uncontrolled("+p+")",y.propTypes=l({innerRef:function(){}},function(e){var n={};return Object.keys(e).forEach((function(e){n[c(e)]=a})),n}(t)),n.forEach((function(e){y.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}}));var b=y;return r.forwardRef&&((b=r.forwardRef((function(e,t){return r.createElement(y,l({},e,{innerRef:t}))}))).propTypes=y.propTypes),b.ControlledComponent=e,b.deferControlTo=function(e,n,r){return void 0===n&&(n={}),d(e,l({},t,n),r)},b}n.d(t,{Pd:function(){return d}});var r=n(24577),o=n(37238),i=n.n(o),a=function(){},f=n(58586)},59158:function(e){"use strict";e.exports=function(){}},25156:function(){},37729:function(e,t,n){e.exports=n(4256)},28653:function(e,t,n){e.exports=n(60680)},6654:function(e,t,n){e.exports=n(72397)},2867:function(e,t,n){e.exports=n(23890)},85749:function(e,t,n){e.exports=n(88562)},11184:function(e,t,n){e.exports=n(63423)},27429:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{A:function(){return r}})},63916:function(e,t,n){"use strict";function o(){return o=r?r.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}n.d(t,{A:function(){return o}});var r=n(72397)},29932:function(e,t,n){"use strict";function i(e,t){return i=o?o.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=r(t.prototype),e.prototype.constructor=e,i(e,t)}n.d(t,{A:function(){return a}});var r=n(8560),o=n(97119)},60879:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:function(){return r}})}},function(e){e.O(0,[38,212,121,541],(function(){return e(e.s=63048)})),e.O()}]);